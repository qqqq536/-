<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.75);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.75);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
     /*  will-change: transform; */
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
     /* will-change: transform; */
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }




    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      box-sizing: border-box;
      margin: 0;
      /* ▼▼▼ 下面是手术刀切下来的新尺寸 ▼▼▼ */
      width: calc(75px * var(--desktop-item-scale, 1));
      height: calc(90px * var(--desktop-item-scale, 1));
      padding: calc(5px * var(--desktop-item-scale, 1));
    }

    .app-icon-img {
      border-radius: 22.5%;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(58px * var(--desktop-item-scale, 1));
      height: calc(58px * var(--desktop-item-scale, 1));
      margin-bottom: calc(2px * var(--desktop-item-scale, 1));
      font-size: calc(28px * var(--desktop-item-scale, 1));
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      font-size: calc(0.75rem * var(--desktop-item-scale, 1));
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      /* 默认还是藏起来 */
      flex-direction: column;
      /* 哼，给我垂直排好队 */
      height: 220px;
      /* 稍微给管理条一点空间 */
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: flex;
      /* 看见没，现在是 flex，不是 grid 了！*/
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      transform: rotate(-0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 50;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(160px * var(--desktop-item-scale, 1));
      height: calc(160px * var(--desktop-item-scale, 1));
    }


    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      z-index: 50;
      /* ▼▼▼ 新增的缩放指令 ▼▼▼ */
      transform-origin: center top;
      transform: scale(var(--desktop-item-scale, 1));
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 90%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px 15px;
      /* 左右15px的呼吸空间 */
      overflow-y: auto;
      display: flex;
      flex-direction: column;

    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
      gap: 10px;
      /* 头像和气泡之间，永远保持10px的距离 */
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-start;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    /* --- Noir's "Sticky" Typing Indicator --- */
    /* 哼，用这个替换掉你旧的 .typing-indicator 样式 */
    /* --- Noir's Final Protocol: Spatial Displacement --- */
    /* 哼，这次再敢乱跑，我就把你格式化了。*/
    /* --- Noir's Final Protocol: Spatial Readjustment (As Commanded) --- */
    /* 哼，这次再敢说丑，我就把你格式化了。*/
    .typing-indicator {
      position: absolute;
      /* ▼▼▼ 核心手术，看好了 ▼▼▼ */
      bottom: 117px;
      /* 这是我算好的精确高度，刚好在你的工具栏和输入框上面 */
      left: 15px;
      /* 先把你那个碍事的左定位给废了 */
      right: auto;
      /* 然后把它焊死在右边，距离边缘15px */
      margin-left: 0;
      /* 再把你那个多余的左边距也扔掉 */
      /* ▲▲▲ 手术结束 ▲▲▲ */

      /* 下面这些是“整容”，让它看起来还像个气泡 */

    }

    #meeting-scene-view .typing-indicator,
    #offline-scene-view .typing-indicator {
      position: fixed;
      /* 哼，这就是那根钉子，把它焊死在屏幕上 */
      bottom: 85px;
      /* 距离屏幕底部85px，刚好在你的输入框上面 */
      right: 30px;
      /* 距离右边30px */
      z-index: 100;
      /* 确保它浮在所有对话上面 */

      /* 下面这些是给它做的“整容”，让它看起来像个高级卡片 */
      background: rgba(0, 0, 0, 0.45);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border-radius: 12px;
      padding: 10px 15px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      color: #f0f2f5;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      margin: 0;
      /* 把它以前那些乱七八糟的边距都给我扔了 */
    }


    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      border-radius: 18px;
      background-color: rgba(255, 255, 255, 0.5);
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(335px * var(--desktop-item-scale, 1));
      height: calc(170px * var(--desktop-item-scale, 1));
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music,
    .message.html-module {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        flex-shrink: 0;
        /* ▼▼▼ 哼，就是这句圣旨！▼▼▼ */
        transform: scale(var(--ui-scale, 1));
        transition: transform 0.2s ease-out;
        /* 加个动画，免得太生硬 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      border-radius: 6px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      display: flex;
      padding: 0;
      border: none;
      overflow: visible;
      position: relative;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: 340px;
      height: 120px;
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* --- Noir's Desktop Pagination System --- */
    /* ... 其他样式 ... */

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      opacity: 0;
      /* 默认让整个舞台透明 */
      transition: opacity 0.3s ease-in-out;
      /* 添加一个平滑的渐入动画效果 */
      /* ▲▲▲ 添加到这里结束 ▲▲▲ */
    }

    /* ... 其他样式 ... */

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 50%;
      /* <-- 现在两个人，一人一半，公平！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      border-radius: 22px;
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(165px * var(--desktop-item-scale, 1));
      height: calc(165px * var(--desktop-item-scale, 1));
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* --- Noir's Bespoke Avatar Frame Protocol (v2.0) --- */
    /* 哼，就知道你要求多。看好了，这才是让框比头像大的正确方法。*/

    /* 1. 容器还是那个40px的容器，负责在布局里占好位置，不许动 */
    .avatar-wrapper {
      position: relative;
      width: 40px;
      height: 40px;
      flex-shrink: 0;
      /* 为了让“膨胀”的头像框不被奇怪地切掉，给它一点呼吸空间 */
      margin: 5px;
    }

    /* 2. 头像也还是那个头像，老老实实待在容器正中间 */
    .avatar-wrapper .avatar {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;

    }

    /* 3. 哼，看好了，魔法就在这里。我让头像框“变大”并“浮空” */
    .avatar-wrapper .avatar-frame {
      position: absolute;
      /* 哼，让它比容器大一点，比如125%，你自己看着调 */
      width: 132%;
      height: 132%;
      /* 把它自己的中心点，对准容器的中心点，给我站稳了！*/
      top: 50%;
      left: 52%;
      transform: translate(-50%, -50%);
      /* 下面的老规矩不变 */
      background-size: contain;
      /* 改成 contain 免得你的框被切掉 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 依旧是幽灵，不许捣乱 */
    }


    /* --- Noir's Full-Width HTML Module Protocol --- */
    /* --- Noir's Full-Width HTML Module Protocol (v2.0 Centered Edition) --- */
    .full-width-module-container {
      display: flex;
      /* 哼，命令它使用Flex布局 */
      justify-content: center;
      /* 把它里面的东西给我水平居中 */
      width: 100%;
      padding: 0 5px;
      box-sizing: border-box;
      margin-bottom: 10px;
      user-select: none;
      -webkit-user-select: none;
    }

    /* --- Noir's Elegant Lock Screen Styles --- */
    #lock-screen-overlay {
      position: absolute;
      inset: 0;
      z-index: 1000;
      /* 哼，必须在最顶层 */
      background: inherit;
      /* 直接继承壁纸，天衣无缝 */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.5s ease;
      will-change: transform, opacity;
    }

    /* 这是它被“解锁”后的样子，给我飞走！ */
    #lock-screen-overlay.unlocked {
      transform: translateY(-100%);
      opacity: 0;
      pointer-events: none;
      /* 飞走后就不许再捣乱了 */
    }

    /* 这是底下的那个“向上滑动”的提示 */
    /* --- Noir's Reinforced Centering Command --- */
    #unlock-indicator {
      position: absolute;
      bottom: 40px;
      left: 0;
      /* <-- 哼，从左边框开始 */
      right: 0;
      /* <-- 一直拉到右边框 */
      width: 100%;
      /* <-- 强制它和屏幕一样宽 */
      text-align: center;
      /* <-- 然后让里面的文字自己滚到中间去！ */
      color: var(--text-color);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      font-size: 0.9rem;
      font-weight: 500;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      opacity: 0.7;
      animation: bounce 2s infinite;
    }

    #unlock-indicator svg {
      width: 20px;
      height: 20px;
    }

    /* 一个简单的上下跳动动画，免得你看不见 */
    @keyframes bounce {

      0%,
      20%,
      50%,
      80%,
      100% {
        transform: translateY(0);
      }

      40% {
        transform: translateY(-8px);
      }

      60% {
        transform: translateY(-4px);
      }
    }

    /* --- Noir's Sticker Gallery Management UI --- */
    #sticker-panel-controls {
      display: none;
      /* 默认隐藏 */
      padding: 5px 10px 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    #sticker-panel-controls.visible {
      display: flex;
      /* 面板打开时显示 */
    }

    #sticker-manage-btn,
    #sticker-cancel-btn {
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--primary-color);
      background: none;
      border: none;
      cursor: pointer;
    }

    #sticker-confirm-delete-btn {
      font-size: 0.9rem;
      font-weight: 600;
      color: #fff;
      background-color: #e65252;
      border: none;
      border-radius: 16px;
      padding: 6px 14px;
      cursor: pointer;
      opacity: 0.5;
      /* 默认半透明 */
      pointer-events: none;
      /* 默认不可点 */
      transition: opacity 0.2s;
    }

    #sticker-confirm-delete-btn.active {
      opacity: 1;
      pointer-events: auto;
    }

    .sticker-item-wrapper {
      position: relative;
      aspect-ratio: 1 / 1;
    }

    .sticker-item-wrapper.selected::after {
      content: '✓';
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      border-radius: 8px;
      /* 和表情图片圆角一致 */
    }

    /* --- Noir's Hierarchical World Book Selector --- */
    /* 哼，这才叫井井有条。*/
    .wb-category-group {
      border-bottom: 1px solid var(--border-color);
    }

    .wb-category-group:last-child {
      border-bottom: none;
    }

    .wb-category-header {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      cursor: pointer;
      user-select: none;
    }

    .wb-category-header:hover {
      background-color: rgba(138, 180, 228, 0.1);
    }

    .wb-category-header .category-checkbox {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
      flex-shrink: 0;
      accent-color: var(--primary-color);
    }

    .wb-category-header .category-name {
      flex-grow: 1;
      font-weight: 600;
      color: var(--primary-color);
    }

    .wb-category-header .category-toggle-arrow {
      transition: transform 0.2s ease;
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .wb-category-header .category-toggle-arrow.expanded {
      transform: rotate(180deg);
    }

    .wb-entry-list {
      padding-left: 30px;
      /* Indent the entries */
      padding-bottom: 5px;
      display: none;
      /* Collapsed by default */
    }

    .wb-entry-list.expanded {
      display: block;
    }

    .wb-entry-item {
      display: block;
      padding: 8px 12px;
      border-radius: 4px;
    }

    .wb-entry-item:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .wb-entry-item input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
    }


    /* --- Noir's Livestream App Styles --- */
    #livestream-room-screen {
      justify-content: flex-start;
      /* 让内容从顶部开始排列 */
    }

    /* 弹幕样式 */
    .danmaku-item {
      background: rgba(0, 0, 0, 0.4);
      color: white;
      padding: 4px 10px;
      border-radius: 16px;
      margin-top: 6px;
      font-size: 0.9rem;
      align-self: flex-start;
      /* 默认弹幕靠左 */
      max-width: 80%;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
      /* 添加一个淡入动画，让出现更自然 */
      animation: danmaku-fade-in 0.3s ease-out;
    }

    @keyframes danmaku-fade-in {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .danmaku-item.is-user {
      background: var(--accent-color);
      /* 你的弹幕用主题色 */
      align-self: flex-end;
      /* 你的弹幕靠右 */
    }

    .danmaku-item .danmaku-user {
      color: #a7c7e7;
      /* 借用一下用户发言的颜色 */
      font-weight: 600;
      margin-right: 8px;
    }

    .danmaku-item.is-user .danmaku-user {
      color: white;
      opacity: 0.8;
    }

    /* 主播对话框，直接继承Galgame模式的样式 */
    #livestream-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      padding: 12px 18px;
    }

    #livestream-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    #livestream-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* --- Noir's Secret DM Panel Styles --- */
    .dm-panel {
      position: fixed;
      /* 哼，从 absolute 变成了 fixed，现在它听命于整个屏幕，而不是那个小小的直播间 */
      inset: 0;
      z-index: 100;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      /* 删掉了 display:flex 和 align-items:flex-end，不再让它自己思考该站哪 */
    }

    .dm-panel.show {
      pointer-events: auto;
      /* 显示时才允许交互 */
      opacity: 1;
    }

    .dm-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.3);
    }

    .dm-panel-content {
      position: absolute;
      /* 改为绝对定位 */
      bottom: 0;
      /* 直接焊死在底部 */
      left: 0;
      right: 0;
      z-index: 101;
      width: 100%;
      height: 45%;
      /* 哼，差不多三分之一多一点的高度，你自己看着调 */
      background: rgba(30, 30, 40, 0.9);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border-top-left-radius: 16px;
      border-top-right-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      transform: translateY(100%);
      transition: transform 0.35s cubic-bezier(0.25, 1, 0.5, 1);
    }

    .dm-panel.show .dm-panel-content {
      transform: translateY(0);
    }

    .dm-header {
      flex-shrink: 0;
      padding: 10px 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.8);
    }

    #dm-close-btn {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .dm-messages-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    /* 哼，私信气泡也给你做好了 */
    .dm-bubble {
      padding: 8px 12px;
      border-radius: 16px;
      max-width: 80%;
      line-height: 1.5;
    }

    .dm-bubble.user {
      background: var(--accent-color);
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 4px;
    }

    .dm-bubble.ai {
      background: rgba(255, 255, 255, 0.15);
      color: white;
      align-self: flex-start;
      border-bottom-left-radius: 4px;
    }

    .dm-input-area {
      display: flex;
      gap: 10px;
      padding: 10px 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      flex-shrink: 0;
    }

    #livestream-dm-input {
      flex-grow: 1;
      border: none;
      border-radius: 18px;
      padding: 8px 12px;
      background: rgba(0, 0, 0, 0.3);
      color: white;
    }

    #livestream-dm-send-btn {
      border: none;
      border-radius: 18px;
      padding: 0 18px;
      background: var(--primary-color);
      color: white;
      font-weight: 600;
      cursor: pointer;
    }


    #livestream-extras-container {
      position: absolute;
      top: 60px;
      /* 放在顶栏下方，你自己微调 */
      right: 15px;
      z-index: 10;
    }



    .replay-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 12px;
      background: var(--card-bg);
      border-radius: 12px;
      margin-bottom: 10px;
      cursor: pointer;
      border: 1px solid var(--border-color);
    }

    .replay-item:hover {
      background: var(--surface-bg);
    }

    .replay-icon {
      width: 50px;
      height: 50px;
      flex-shrink: 0;
      background: #333;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.7rem;
      text-align: center;
      line-height: 1.2;
    }

    .replay-info .theme {
      font-weight: 600;
      color: var(--text-color);
    }

    .replay-info .time {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* ▼▼▼ Noir's Livestream Studio CSS Overhaul ▼▼▼ */

    /* 1. 新的对话框样式，半透明、浮空、带圆角 */
    #livestream-textbox-container {
      position: absolute;
      bottom: 20px;
      left: 15px;
      right: 15px;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 15px;
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: none;
      /* 去掉旧的阴影 */
    }

    #livestream-text {
      font-size: 1rem;
      line-height: 1.6;
      color: #f0f2f5;
    }

    /* 2. 新的弹幕区样式，现在它有了自己的地盘 */
    #livestream-danmaku-overlay {
      height: 35%;
      /* 占据底部 35% 的高度 */
      flex-shrink: 0;
      overflow-y: auto;
      padding: 10px;
      display: flex;
      flex-direction: column-reverse;
      /* 保持新弹幕在底部 */
      background: transparent;
      -webkit-mask-image: none;
      /* 去掉那个碍眼的渐变遮罩 */
      mask-image: none;
    }

    /* 3. 弹幕本身的微调，让它更像参考图 */
    .danmaku-item {
      background: rgba(0, 0, 0, 0.5);
      align-self: flex-start;
      margin-top: 8px;
      /* 稍微拉开一点间距 */
    }

    /* ▲▲▲ End of Overhaul ▲▲▲ */
    /* ▼▼▼ Noir's Livestream CSS Calibration ▼▼▼ */

    /* 1. 明确告诉弹幕区，你的高度就是屏幕的30%，不许再多了 */
    #livestream-danmaku-overlay {
      height: 30%;
      flex-shrink: 0;
    }

    /* 2. 把底栏的背景也换成和顶栏一样的主题色，这才叫统一 */
    #livestream-input-area {
      background: var(--surface-bg) !important;
      border-top: 1px solid var(--border-color) !important;
    }

    /* 3. 输入框和按钮的颜色也要适应新背景 */
    #livestream-controls-container #danmaku-input {
      background: rgba(255, 255, 255, 0.7);
      color: var(--text-color);
    }

    #livestream-controls-container .toolbar-button {
      background: transparent;
      color: var(--text-color-light);
    }

    #livestream-controls-container .toolbar-button:hover {
      background: var(--border-color);
    }

    /* ▲▲▲ End of Calibration ▲▲▲ */
    /* ▼▼▼ Noir's Livestream Dark UI Polish ▼▼▼ */

    /* 1. 统一顶栏和底栏的颜色，并调整内部元素颜色 */
    #livestream-room-screen #livestream-header,
    #livestream-room-screen #livestream-input-area {
      background: #1c1c1e !important;
      /* 一个比纯黑更高级的炭黑色 */
      border-top: 1px solid #333 !important;
      border-bottom: none !important;
    }

    #livestream-room-screen #livestream-header {
      color: #fff;
    }

    #livestream-room-screen #livestream-header .header-button,
    #livestream-room-screen #livestream-header .toolbar-button {
      color: #fff;
    }

    #livestream-room-screen #livestream-header .toolbar-button:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    /* 2. 让弹幕区和底栏之间留出呼吸空间，不再重叠 */
    #livestream-danmaku-overlay {
      padding-bottom: 10px;
    }

    /* ▲▲▲ End of Polish ▲▲▲ */
    /* ▼▼▼ Noir's Cross-fade Magic ▼▼▼ */
    .livestream-sprite-layer {
      max-height: 100%;
      max-width: 100%;
      object-fit: contain;
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      transition: opacity 0.4s ease-in-out;
      /* 关键！过渡动画 */
    }

    /* ▲▲▲ End of Magic ▲▲▲ */

    /* ▲▲▲ End of Magic ▲▲▲ */
    /* ▼▼▼ Noir's Livestream Control Panel Polish ▼▼▼ */

    /* 1. 统一整个控制栏的高度和风格 */
    #livestream-controls-container #danmaku-input {
      background: rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
      padding: 0 16px;
      height: 40px;
      /* 统一高度 */
      box-sizing: border-box;
    }

    #livestream-controls-container #danmaku-input::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    #livestream-controls-container .toolbar-button {
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
    }

    /* 2. 哼，这才是“发送”和“继续”该有的样子 */
    .livestream-action-btn {
      height: 40px;
      padding: 0 18px;
      border-radius: 20px;
      border: none;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    /* “发送”按钮，用主题色，醒目 */
    #send-danmaku-btn {
      background-color: var(--accent-color);
      color: white;
    }

    #send-danmaku-btn:hover {
      filter: brightness(1.1);
    }

    /* “继续”按钮，用次要样式，不那么抢眼 */
    .livestream-action-btn.secondary {
      background-color: rgba(255, 255, 255, 0.15);
      color: #fff;
    }

    .livestream-action-btn.secondary:hover {
      background-color: rgba(255, 255, 255, 0.25);
    }

    /* ▲▲▲ End of Polish ▲▲▲ */

    /* ▼▼▼ Noir's Floating Toolbar Style ▼▼▼ */
    #livestream-top-toolbar {
      position: absolute;
      top: 15px;
      right: 15px;
      z-index: 5;
      display: flex;
      flex-direction: column;
      /* 让按钮垂直排列 */
      gap: 8px;
      background-color: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(5px);
      border-radius: 22px;
      /* 胶囊形状 */
      padding: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    #livestream-top-toolbar .toolbar-button {
      background: transparent;
      color: white;
      width: 38px;
      height: 38px;
      margin: 0;
    }

    #livestream-top-toolbar .toolbar-button:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    /* ▲▲▲ End of Style ▲▲▲ */
    /* ▼▼▼ Noir's Novel Mode Beautification Protocol v1.0 ▼▼▼ */

    /* 1. “幽灵化”指令：当处于小说模式时，把这两个碍事的东西给我藏起来 */
    #meeting-view-screen.novel-mode #galgame-overlay-ui,
    #meeting-view-screen.novel-mode #galgame-sprite-adjust-ui {
      display: none;
    }

    /* 2. “安全距离”协议：给小说阅读区底部留出85px的安全区，免得和输入框打架 */
    #meeting-scene-view {
      padding: 20px 20px 85px 20px;
      /* 上、右、下、左 */
    }

    /* 3. “美学重构”手术：彻底重写对话框的样式 */
    /* 先把你旧的 p 标签上的黑玻璃背景和阴影都砸了 */
    #meeting-scene-view p {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 在深色背景下，还是需要一点阴影才能看清字 */
    }

    /* 这是新的卡片“本体”样式 */
    .noir-dialogue-card {
      background: rgba(0, 0, 0, 0.45);
      /* 还是用半透明黑，但比原来更精致 */
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border-radius: 12px;
      margin-bottom: 25px;
      /* 拉开卡片间距 */
      border: 1px solid rgba(255, 255, 255, 0.15);
      position: relative;
      /* 关键！为了让名字标签能浮在它上面 */
    }

    /* 这是卡片内部的“文字区”样式 */
    .noir-dialogue-content {
      padding: 20px 20px 15px;
      /* 把文字的内边距调整一下 */
      line-height: 1.7;
      font-size: 1rem;
      color: #f0f2f5;
    }

    /* 这是新的名字“标签”样式，像个便签夹一样 */
    .noir-speaker-tag {
      position: absolute;
      top: -13px;
      /* 向上-13px，让它“夹”在卡片顶部 */
      left: 20px;
      padding: 4px 12px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      color: white;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(8px);
    }

    /* 给你（User）的名字标签一个专属颜色 */
    .speaker-user .noir-speaker-tag {
      background: rgba(167, 199, 231, 0.5);
      /* 借用之前的用户色，加上半透明 */
    }

    /* 给TA（AI）的名字标签也来一个 */
    .speaker-ai .noir-speaker-tag {
      background: rgba(242, 183, 198, 0.5);
      /* 借用之前的AI色 */
    }

    /* 旁白（Narrator）的样式也得改，让它更像“画外音” */
    #meeting-scene-view .narrator {
      text-align: center;
      padding: 10px 20px;
      font-style: italic;
      color: rgba(255, 255, 255, 0.7);
      background: none;
      box-shadow: none;
      border: none;
    }

    /* ▲▲▲ End of Protocol ▲▲▲ */
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <input type="file" id="import-accounting-input" accept=".json" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">

      <div id="lock-screen-overlay">
        <div id="home-clock-container">
          <div id="home-time">11:31</div>
          <div id="home-date">8月29日 星期五</div>
          <div id="noir-author-mark"></div>
        </div>
        <div id="music-widget"
          style="display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50; padding: 0px; bottom: auto;">
          <div id="music-widget-card">
            <div id="widget-cover-art"></div>
            <div class="widget-content-overlay">
              <div class="widget-info">
                <div id="widget-title">暂无音乐</div>
                <div id="widget-artist">请在动态或聊天中播放</div>
              </div>
              <div id="widget-controls">
                <button id="widget-prev-btn">⏮</button>
                <button id="widget-play-pause-btn">▶</button>
                <button id="widget-next-btn">⏭</button>
              </div>
            </div>
          </div>
        </div>
        <div id="unlock-indicator">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="18 15 12 9 6 15"></polyline>
          </svg>
          向上滑动来解锁
        </div>
      </div>

      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">


            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>
              <div class="app-icon" id="app-lock-screen" style="position: absolute; top: 8%; left: 29%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                  </svg>
                </div>
                <span>回到锁屏</span>
              </div>
              <div class="app-icon" id="app-livestream" style="position: absolute; top: 8%; left: 53%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="2"></circle>
                    <path
                      d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48 0a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14">
                    </path>
                  </svg>
                </div>
                <span>直播</span>
              </div>
              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2 style="color: #e65252;">终极手段：一键净化</h2>
          <p style="font-size: 0.9rem; color: #dc3545;">
            <b>警告：</b>如果你的应用因为内存满了而彻底卡死、无法导入导出，请先想办法手动备份重要数据！然后点击此按钮，它会清空所有本地数据，让应用恢复到出厂状态。
          </p>
          <button id="hard-reset-button" class="form-button destructive">终极重置 (解决卡死问题)</button>
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*,.gif"  style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*,.gif"  style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*,.gif"  style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*,.gif"  style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*,.gif"  style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 style="margin: 0;">UI缩放</h2>
            <button id="reset-ui-scale-button" class="form-button secondary"
              style="width: auto; margin: 0; padding: 4px 12px; font-size: 0.8rem;">恢复默认</button>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来调整手机模拟器的整体大小。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="ui-scale-slider" style="display: block; margin-bottom: 5px;">缩放比例</label>
            <input type="range" id="ui-scale-slider" min="0.7" max="1.2" value="1" step="0.05" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" style="display: flex; padding: 0; flex-direction: row;">
        <div id="world-book-category-pane"
          style="width: 120px; flex-shrink: 0; border-right: 1px solid var(--border-color); background: var(--surface-bg); padding: 10px; display: flex; flex-direction: column;">
          <div id="world-book-category-list" style="flex-grow: 1; overflow-y: auto;">
          </div>
          <button id="add-world-book-category-button" class="form-button secondary"
            style="margin-top: 10px; padding: 8px;">新建分类</button>
        </div>
        <div id="world-book-list-container" style="flex-grow: 1; overflow-y: auto; padding: 10px;">
        </div>
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
          <div class="input-group">
            <label for="world-book-edit-category">所属分类</label>
            <select id="world-book-edit-category"></select>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">

          <button id="player-play-pause-btn">▶</button>

        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
   <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">
    <div class="upload-slot" id="altar-slot-zip">
        <span class="slot-icon">📦</span>
        <span class="slot-label">音乐魔方 (必需)</span>
        <span class="slot-filename">点击选择包含音频、封面、信息、歌词的 .zip 压缩包</span>
    </div>

    <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
  </div>

 <input type="file" id="altar-zip-input" style="display: none;" accept=".zip">

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>

    <div id="livestream-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-livestream-list" class="header-button">主屏幕</button>
        <span class="header-title">选择主播</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="livestream-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="livestream-room-screen" class="screen">
      <div class="header" id="livestream-header" style="position: relative; justify-content: center;">
        <div id="livestream-header-left" style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%);">
          <button id="back-to-livestream-list" class="header-button">返回</button>
        </div>
        <span id="livestream-char-name-header" class="header-title"></span>
        <div id="livestream-header-right"
          style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); display: flex; align-items: center;">
          <button id="livestream-settings-btn" class="header-button">设置</button>
        </div>
      </div>

      <div id="livestream-main-view"
        style="flex-grow: 1; display: flex; flex-direction: column; background: #111; overflow: hidden; position: relative;">
        <div id="livestream-feed-container" style="flex-grow: 1; position: relative; overflow: hidden;">
          <div id="livestream-top-toolbar">
            <button id="livestream-sprite-adjust-btn" class="toolbar-button" title="调整立绘"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 7h-9" />
                <path d="M14 17H5" />
                <circle cx="17" cy="17" r="3" />
                <circle cx="8" cy="7" r="3" />
              </svg></button>
            <button id="livestream-replays-btn" class="toolbar-button" title="查看回放"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 3H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h4" />
                <path d="M16 21h4a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-4" />
                <path d="M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" />
              </svg></button>
            <button id="livestream-reroll-btn" class="toolbar-button" title="重新生成回应"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10" />
                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
              </svg></button>
          </div>
          <div id="livestream-background"
            style="position: absolute; inset: 0; background-size: cover; background-position: center; z-index: 1;">
          </div>
          <div id="livestream-sprite-container"
            style="position: absolute; bottom: 0; left: 0; right: 0; height: 85%; z-index: 2;">
            <img id="livestream-sprite"
              style="max-height: 100%; max-width: 100%; object-fit: contain; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);">
          </div>
          <div id="livestream-textbox-container" style="z-index: 3; cursor: pointer;">
            <div id="livestream-text">...</div>
          </div>
        </div>
        <div id="livestream-danmaku-overlay"></div>
      </div>

      <div id="livestream-input-area" class="chat-input-area"
        style="background: var(--surface-bg); border-top: 1px solid var(--border-color); flex-shrink: 0;">
        <div id="start-livestream-btn-container" style="text-align: center;">
          <button id="start-livestream-btn" class="form-button primary"
            style="width: auto; padding: 12px 24px; border-radius: 24px; font-size: 1.2rem;">🎙️ 开始直播</button>
        </div>
        <div id="livestream-controls-container" style="display: none; align-items: center; gap: 8px;">
          <input type="text" id="danmaku-input" placeholder="发个弹幕...">
          <button id="livestream-dm-btn" class="toolbar-button" title="私信主播"><svg xmlns="http://www.w3.org/2000/svg"
              width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg></button>
          <button id="livestream-gift-btn" class="toolbar-button" title="送礼物"><svg xmlns="http://www.w3.org/2000/svg"
              width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 12v10H4V12" />
              <path d="M2 7h20v5H2z" />
              <path d="M12 22V7" />
              <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z" />
              <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z" />
            </svg></button>
          <button id="send-danmaku-btn" class="livestream-action-btn">发送</button>
          <button id="continue-livestream-btn" class="livestream-action-btn secondary">继续</button>
        </div>
      </div>



      <div id="livestream-sprite-controls"
        style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
        <div class="sprite-slider-group">
          <label for="livestream-sprite-slider-x">左右位置</label>
          <input type="range" id="livestream-sprite-slider-x" min="0" max="100" value="50">
        </div>
        <div class="sprite-slider-group">
          <label for="livestream-sprite-slider-y">上下位置</label>
          <input type="range" id="livestream-sprite-slider-y" min="0" max="130" value="100">
        </div>
        <div class="sprite-slider-group">
          <label for="livestream-sprite-slider-scale">缩放大小</label>
          <input type="range" id="livestream-sprite-slider-scale" min="50" max="200" value="100">
        </div>
        <div style="display: flex; gap: 10px; margin-top: 15px;">
          <button id="livestream-sprite-confirm-button" class="form-button">确定</button>
          <button id="livestream-sprite-cancel-button" class="form-button secondary">取消</button>
          <button id="livestream-sprite-reset-button" class="form-button destructive"
            style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
        </div>
      </div>
    </div>

    <div id="livestream-replays-screen" class="screen">
      <div class="header">
        <button id="back-to-livestream-from-replays" class="header-button">返回</button>
        <span id="replays-char-name-header" class="header-title">的回放列表</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="livestream-replays-container" class="content" style="padding: 15px;">
      </div>
    </div>

    <div id="livestream-replay-view-screen" class="screen">
      <div class="header">
        <button id="back-to-replays-list-from-view" class="header-button">返回</button>
        <span class="header-title">直播回放详情</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="livestream-replay-view-container" class="content" style="padding: 20px; font-family: sans-serif;">
      </div>
    </div>

    <div id="start-livestream-modal" class="choice-modal">
      <div id="start-livestream-backdrop" class="choice-modal-backdrop"></div>
      <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
        <h3 style="margin-top: 0; text-align: center;">准备开播</h3>
        <div class="input-group">
          <label for="livestream-theme-input">直播主题</label>
          <input type="text" id="livestream-theme-input" placeholder="例如：聊聊最近看的电影">
        </div>
        <div class="input-group">
          <label for="audience-mood-input">观众氛围</label>
          <input type="text" id="audience-mood-input" placeholder="例如：期待、好奇、热闹">
        </div>
        <div style="display: flex; gap: 10px; margin-top: 20px;">
          <button id="confirm-start-livestream-button" class="form-button primary">开始直播</button>
          <button id="cancel-start-livestream-button" class="form-button secondary">取消</button>
        </div>
      </div>
    </div>
    <div id="livestream-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-livestream-from-settings" class="header-button">返回</button>
        <span class="header-title">直播间设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>直播背景</h2>
          <p style="font-size: 0.8rem; color: var(--text-color-light);">为这个角色的直播间设置专属背景图。</p>
          <div class="image-preview-slot" id="livestream-bg-preview"
            style="width: 150px; height: 266px; margin: 0 auto;">
          </div>
          <input type="file" id="livestream-bg-input" accept="image/*" style="display: none;">
        </div>

        <div class="settings-group">
          <h2>直播立绘 (多表情)</h2>
          <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传专属的直播立绘，AI会在直播时根据情绪自动切换。</p>
          <div
            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; margin-top: 10px;">
            <div class="avatar-upload-group" style="align-items: center;">
              <label>平常</label>
              <div id="livestream-sprite-normal-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-normal-input" accept="image/*,.gif"  style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>喜</label>
              <div id="livestream-sprite-happy-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-happy-input" accept="image/*,.gif"  style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>怒</label>
              <div id="livestream-sprite-angry-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-angry-input" accept="image/*,.gif"  style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>哀</label>
              <div id="livestream-sprite-sad-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-sad-input" accept="image/*,.gif"  style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>害羞</label>
              <div id="livestream-sprite-shy-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-shy-input" accept="image/*,.gif"  style="display: none;">
            </div>
          </div>
        </div>

        <button id="save-livestream-settings-button" class="form-button primary">保存设置</button>
      </div>
    </div>
  </div>
  </div>

  <div id="livestream-dm-panel" class="dm-panel" style="z-index: 100;">
    <div id="livestream-dm-backdrop" class="dm-backdrop"></div>
    <div class="dm-panel-content">
      <div class="dm-header"><span>与 主播 的私信</span><button id="dm-close-btn">&times;</button></div>
      <div id="livestream-dm-messages" class="dm-messages-container"></div>
      <div class="dm-input-area"><input type="text" id="livestream-dm-input" placeholder="悄悄话..."><button
          id="livestream-dm-send-btn">发送</button></div>
    </div>
  </div>


  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

  <script>  
const _0x4b3bbd=_0x52a6;(function(_0x85fa5c,_0x2ea5da){const _0x22c918=_0x52a6,_0x3a6b20=_0x85fa5c();while(!![]){try{const _0x5994f5=-parseInt(_0x22c918(0xa1c))/0x1*(parseInt(_0x22c918(0xc61))/0x2)+parseInt(_0x22c918(0x689))/0x3*(parseInt(_0x22c918(0x857))/0x4)+-parseInt(_0x22c918(0xa91))/0x5+-parseInt(_0x22c918(0x6c7))/0x6+parseInt(_0x22c918(0xa5f))/0x7+parseInt(_0x22c918(0xb98))/0x8+parseInt(_0x22c918(0x649))/0x9;if(_0x5994f5===_0x2ea5da)break;else _0x3a6b20['push'](_0x3a6b20['shift']());}catch(_0x739fa7){_0x3a6b20['push'](_0x3a6b20['shift']());}}}(_0x2ac0,0x2d80c));function _0xae688c(_0x5d81a7=new Date()){const _0x19bee6=_0x52a6,_0x1350ed=_0x5d81a7[_0x19bee6(0x156)](),_0x2babef=String(_0x5d81a7[_0x19bee6(0x7eb)]()+0x1)[_0x19bee6(0x839)](0x2,'0'),_0x4ad387=String(_0x5d81a7['getDate']())[_0x19bee6(0x839)](0x2,'0');return _0x1350ed+'-'+_0x2babef+'-'+_0x4ad387;}const _0x1fd3f1=_0x4b3bbd(0xa87),_0x383e71=_0x4b3bbd(0xa76),_0x55cc29=_0x4b3bbd(0x5fc),_0x41e919=document[_0x4b3bbd(0x7e9)](_0x4b3bbd(0x7d9));_0x41e919['id']=_0x4b3bbd(0x6a7),document[_0x4b3bbd(0x6ae)][_0x4b3bbd(0x364)](_0x41e919);var _0x35d0f9,_0x32e31f=null;let _0x95c6c9=[],_0xc59fd=![],_0x26d532=null,_0x1c9603=!![],_0x2607e2=![],_0xa9521d={'x':0x0,'y':0x0};function _0x4830c9(_0x5c1946){const _0x409c6f=_0x4b3bbd;return(_0x35d0f9?.[_0x409c6f(0x1f2)]||[])[_0x409c6f(0x9cd)](_0x519a9e=>_0x519a9e['id']===_0x5c1946);}const _0xcfca35=_0x4b3bbd(0x61b),_0x395094='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+',_0x20a236=_0x4b3bbd(0x89d),_0x8773f5=[{'name':'委屈哭','url':_0x4b3bbd(0x28d)},{'name':'崩溃','url':_0x4b3bbd(0x2a2)},{'name':'生病','url':_0x4b3bbd(0xb59)},{'name':'工作','url':'https://sharkpan.xyz/f/7L3Hj/sl4504.jpg'},{'name':'我很脆弱','url':_0x4b3bbd(0x642)},{'name':_0x4b3bbd(0x7c4),'url':_0x4b3bbd(0x81b)},{'name':_0x4b3bbd(0x6e2),'url':_0x4b3bbd(0x66b)},{'name':'期待','url':_0x4b3bbd(0x24c)},{'name':'喜欢','url':_0x4b3bbd(0x51e)},{'name':_0x4b3bbd(0x78a),'url':_0x4b3bbd(0xf3)},{'name':_0x4b3bbd(0x550),'url':_0x4b3bbd(0x178)},{'name':'委屈','url':'https://sharkpan.xyz/f/ajwtY/x03qxn.gif'},{'name':'加油','url':_0x4b3bbd(0x91d)},{'name':'对的','url':_0x4b3bbd(0x7c2)},{'name':'不满','url':'https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg'},{'name':_0x4b3bbd(0x127),'url':_0x4b3bbd(0x667)},{'name':_0x4b3bbd(0x2fd),'url':_0x4b3bbd(0x824)},{'name':'委屈','url':_0x4b3bbd(0x3a5)},{'name':'平静','url':'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg'},{'name':'咬你','url':_0x4b3bbd(0x41b)},{'name':'咱俩天下第一好','url':_0x4b3bbd(0x8e5)},{'name':'好困','url':_0x4b3bbd(0x75c)},{'name':'摸鱼','url':_0x4b3bbd(0xf0)},{'name':_0x4b3bbd(0x9d7),'url':_0x4b3bbd(0x3df)},{'name':_0x4b3bbd(0x758),'url':_0x4b3bbd(0xa86)},{'name':_0x4b3bbd(0x80e),'url':'https://sharkpan.xyz/f/4adUj/68uj9o.jpg'},{'name':_0x4b3bbd(0x7c0),'url':_0x4b3bbd(0xb9a)},{'name':'刷我的卡','url':'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg'},{'name':_0x4b3bbd(0x70b),'url':_0x4b3bbd(0x8b3)},{'name':_0x4b3bbd(0xc0c),'url':'https://sharkpan.xyz/f/djyi8/1en214.jpg'},{'name':_0x4b3bbd(0x2d1),'url':'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg'},{'name':_0x4b3bbd(0xb92),'url':_0x4b3bbd(0xb0b)},{'name':'勉强但是好吧','url':_0x4b3bbd(0x1c1)},{'name':_0x4b3bbd(0x890),'url':_0x4b3bbd(0x7a9)},{'name':_0x4b3bbd(0xa0b),'url':'https://sharkpan.xyz/f/nj7ul/r48eum.jpg'},{'name':_0x4b3bbd(0x7f5),'url':_0x4b3bbd(0x12e)},{'name':_0x4b3bbd(0xc0d),'url':'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg'},{'name':_0x4b3bbd(0x8f4),'url':_0x4b3bbd(0x372)},{'name':'无语但是随便吧','url':_0x4b3bbd(0x774)},{'name':_0x4b3bbd(0xbc2),'url':_0x4b3bbd(0x3ef)},{'name':_0x4b3bbd(0xce0),'url':_0x4b3bbd(0x702)},{'name':'有点无语','url':_0x4b3bbd(0x7b4)},{'name':'一拳打爆','url':_0x4b3bbd(0x5a2)},{'name':_0x4b3bbd(0x5d7),'url':'https://sharkpan.xyz/f/Krwio/1mcclx.jpg'},{'name':_0x4b3bbd(0x82c),'url':_0x4b3bbd(0x9b6)},{'name':_0x4b3bbd(0x8a3),'url':_0x4b3bbd(0xac1)},{'name':_0x4b3bbd(0x61e),'url':_0x4b3bbd(0x222)},{'name':'不高兴撒娇','url':_0x4b3bbd(0xc86)},{'name':_0x4b3bbd(0x35f),'url':_0x4b3bbd(0x2ec)},{'name':_0x4b3bbd(0x3e0),'url':'https://sharkpan.xyz/f/0GKHX/mthvno.jpg'},{'name':_0x4b3bbd(0xc23),'url':_0x4b3bbd(0xa1e)},{'name':_0x4b3bbd(0x83b),'url':'https://sharkpan.xyz/f/v0qcL/dio7j0.jpg'},{'name':_0x4b3bbd(0xaf2),'url':_0x4b3bbd(0x8a0)},{'name':'等你','url':_0x4b3bbd(0x687)},{'name':_0x4b3bbd(0x75e),'url':_0x4b3bbd(0x6ad)},{'name':_0x4b3bbd(0x390),'url':_0x4b3bbd(0x57e)},{'name':'喝酒','url':_0x4b3bbd(0x321)},{'name':_0x4b3bbd(0x55a),'url':_0x4b3bbd(0x645)},{'name':'呜呜','url':'https://sharkpan.xyz/f/z1xc5/iore2n.gif'},{'name':_0x4b3bbd(0x6d9),'url':_0x4b3bbd(0xcba)},{'name':'我错了','url':'https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg'},{'name':_0x4b3bbd(0x826),'url':_0x4b3bbd(0x711)},{'name':_0x4b3bbd(0x9b8),'url':_0x4b3bbd(0x567)},{'name':_0x4b3bbd(0xad0),'url':_0x4b3bbd(0x117)}],_0x20742f={'beige':{'name':_0x4b3bbd(0x451),'h':0x23,'s':0x19,'l':0x50},'mizuiro':{'name':_0x4b3bbd(0xbad),'h':0xc3,'s':0x19,'l':0x50},'sakura':{'name':_0x4b3bbd(0x1c6),'h':0x159,'s':0x19,'l':0x50},'noir':{'name':_0x4b3bbd(0xcc7),'h':0x104,'s':0xf,'l':0x1e}};document['addEventListener'](_0x4b3bbd(0xd02),()=>{const _0x17d1db=_0x4b3bbd,_0x29dce3=document[_0x17d1db(0xb18)]('app-user-profiles'),_0x4ecb5a=document['getElementById'](_0x17d1db(0xc87)),_0x557d9b=document['getElementById'](_0x17d1db(0xb67)),_0xd676ba=document['getElementById']('transfer-backdrop'),_0x11b120=document[_0x17d1db(0xb18)](_0x17d1db(0xb13)),_0x2f2e5d=document[_0x17d1db(0xb18)]('cancel-transfer-button'),_0x43f475=document[_0x17d1db(0xb18)](_0x17d1db(0x147)),_0x277a91=document[_0x17d1db(0xb18)](_0x17d1db(0x4ad)),_0x48be41=document[_0x17d1db(0xb18)](_0x17d1db(0x8e8)),_0x1be106=document['getElementById'](_0x17d1db(0xb3e)),_0x325c55=document[_0x17d1db(0xb18)](_0x17d1db(0x2cf)),_0x2fb175=document[_0x17d1db(0xb18)](_0x17d1db(0x3f3)),_0x43202b=document[_0x17d1db(0xb18)](_0x17d1db(0xacf)),_0x50d044=document[_0x17d1db(0xb18)]('summary-textarea'),_0x55ae07=document[_0x17d1db(0xb18)](_0x17d1db(0xae1)),_0x3afe6c=document[_0x17d1db(0xb18)](_0x17d1db(0x844)),_0x58ae53=document[_0x17d1db(0xb18)]('char-edit-wallpaper-preview'),_0x3c6a5f=document['getElementById'](_0x17d1db(0x93e)),_0x1930bb=document[_0x17d1db(0xb18)](_0x17d1db(0x790)),_0x37e245=document[_0x17d1db(0xb18)](_0x17d1db(0x6a0)),_0x171e56=document[_0x17d1db(0xb18)](_0x17d1db(0xd12)),_0x59201b=document[_0x17d1db(0xb18)](_0x17d1db(0x934)),_0x4bee8a=document['getElementById'](_0x17d1db(0x21f)),_0xdc828e=document[_0x17d1db(0xb18)]('upload-font-button'),_0x4ccd02=document[_0x17d1db(0xb18)](_0x17d1db(0xc2b)),_0x4378ce=document[_0x17d1db(0xb18)](_0x17d1db(0x834)),_0x4679bb=document[_0x17d1db(0xb18)](_0x17d1db(0xa8c));async function _0x18a1bb(_0x178b64){const _0x4fc65=_0x17d1db;if(_0x4fc65(0x456)===_0x4fc65(0x456))try{const _0x2a95eb=URL[_0x4fc65(0x900)](_0x178b64),_0x44e9e3=_0x4fc65(0x491),_0x17e845=_0x4fc65(0xae4)+_0x44e9e3+_0x4fc65(0xc93)+_0x2a95eb+_0x4fc65(0x8ca);_0x41e919[_0x4fc65(0x280)]=_0x17e845,document['documentElement']['style'][_0x4fc65(0xbcb)](_0x4fc65(0x8b0),'\x27'+_0x44e9e3+'\x27'),_0x4679bb[_0x4fc65(0x65b)]=_0x4fc65(0x52f);}catch(_0x3f7c0a){console[_0x4fc65(0x4a1)](_0x4fc65(0xcef),_0x3f7c0a),_0x28dfd2('哼，你这字体文件有问题，用不了。');}else{if(_0x447020)_0x4a6609(_0xd18e66);if(_0xb47c75[_0x4fc65(0xa8f)])return;_0x43b538(()=>{const _0x2a09d3=_0x4fc65;_0x111786&&_0x333d1d(_0x499514['id'],_0x3a3ff3[_0x2a09d3(0xbb5)](_0x1f8f76=>_0x1f8f76['id']));},0x32);}}async function _0xee8e5d(){const _0x5e65b1=_0x17d1db;try{const _0x19588c=await _0x5288fd(_0x5e65b1(0xc9f));_0x19588c&&('GnLjs'!==_0x5e65b1(0x6fe)?_0x44e54e[_0x3c4525][_0x5e65b1(0x79f)][_0x5e65b1(0x366)](_0x5e65b1(0x530)):(console[_0x5e65b1(0x52e)](_0x5e65b1(0x5cd)),await _0x18a1bb(_0x19588c)));}catch(_0x2a1270){console[_0x5e65b1(0x4a1)](_0x5e65b1(0x782),_0x2a1270);}}async function _0x1626a0(_0x1eed09){const _0x183818=_0x17d1db,_0x463a45=_0x1eed09[_0x183818(0xce3)][_0x183818(0x636)][0x0];if(!_0x463a45||!_0x463a45[_0x183818(0x19d)][_0x183818(0x443)]()[_0x183818(0x985)]('.ttf')){_0x28dfd2('说了要\x20.ttf\x20文件，你是听不懂吗？');return;}_0x13f6ba(!![],_0x183818(0xb76));try{await _0xad4538(_0x183818(0xc9f),_0x463a45),await _0x18a1bb(_0x463a45),_0x28dfd2(_0x183818(0x3e8));}catch(_0x36bd26){_0x28dfd2('字体保存失败了，哼:\x20'+_0x36bd26[_0x183818(0x5a1)]);}finally{if(_0x183818(0xf5)!=='JWNCz')_0x13f6ba(![]),_0x4378ce[_0x183818(0x850)]='';else{const _0x462e78=_0x142229[0x0][_0x183818(0x2e2)](),_0x5b536b=_0x52dc1b[0x1][_0x183818(0x2e2)](),_0x57f975={'歌名':_0x183818(0x9b9),'艺术家':'歌手','专辑':'专辑'};_0x57f975[_0x462e78]&&(_0x1e46f9[_0x57f975[_0x462e78]]=_0x5b536b);}}}async function _0x222775(){const _0x1992e9=_0x17d1db,_0x49f347=await _0x3a7c5b(_0x1992e9(0x549));if(_0x49f347){if(_0x1992e9(0xcab)!==_0x1992e9(0xb64))try{await _0x5dd6ed(_0x1992e9(0xc9f)),_0x41e919[_0x1992e9(0x280)]='',document[_0x1992e9(0xa12)][_0x1992e9(0x7d9)][_0x1992e9(0x44e)](_0x1992e9(0x8b0)),_0x4679bb[_0x1992e9(0x65b)]=_0x1992e9(0x916),_0x28dfd2(_0x1992e9(0xa75));}catch(_0xd2b9c8){_0x28dfd2(_0x1992e9(0x13b)+_0xd2b9c8[_0x1992e9(0x5a1)]);}else{const _0x5eff7a=_0x59acea[_0x1992e9(0x2fb)][_0x1992e9(0x485)](_0x3494d4=>_0x3494d4['author']===_0x1992e9(0x809))[_0x1992e9(0xf7)]();_0x5eff7a&&(_0x175087=_0x5eff7a[_0x1992e9(0x9bc)]);}}}function _0x486213(){const _0x276100=_0x17d1db,_0x2913a0=document[_0x276100(0xb18)](_0x276100(0x14c));if(!_0x2913a0)return;const _0x3163cb=localStorage[_0x276100(0x9a1)](_0x276100(0xba2))||'35';document['documentElement'][_0x276100(0x7d9)][_0x276100(0xbcb)](_0x276100(0x6e9),_0x3163cb),_0x2913a0[_0x276100(0x850)]=_0x3163cb,_0x2913a0[_0x276100(0xafb)]('input',()=>{const _0x3a19ab=_0x276100,_0x1f6bce=_0x2913a0['value'];document['documentElement'][_0x3a19ab(0x7d9)][_0x3a19ab(0xbcb)](_0x3a19ab(0x6e9),_0x1f6bce),localStorage[_0x3a19ab(0x570)](_0x3a19ab(0xba2),_0x1f6bce),_0x1b9c5f();});}function _0x45890c(){const _0x391f4e=_0x17d1db,_0x34cf7e=document[_0x391f4e(0xb18)](_0x391f4e(0xa00));if(!_0x34cf7e)return;const _0x6472e3=localStorage[_0x391f4e(0x9a1)](_0x391f4e(0x67c))||'80';document[_0x391f4e(0xa12)][_0x391f4e(0x7d9)][_0x391f4e(0xbcb)](_0x391f4e(0x628),_0x6472e3+'%'),_0x34cf7e[_0x391f4e(0x850)]=_0x6472e3,_0x34cf7e[_0x391f4e(0xafb)](_0x391f4e(0xb8d),()=>{const _0x28336c=_0x391f4e,_0x474d32=_0x34cf7e[_0x28336c(0x850)];document[_0x28336c(0xa12)][_0x28336c(0x7d9)][_0x28336c(0xbcb)]('--primary-lightness',_0x474d32+'%'),localStorage[_0x28336c(0x570)](_0x28336c(0x67c),_0x474d32),_0x1b9c5f();});}function _0x1b9c5f(){const _0x324fdf=_0x17d1db;if('NAhxy'===_0x324fdf(0x2e5))_0x222e04();else{const _0x593de5=document[_0x324fdf(0xb18)](_0x324fdf(0xbb9));if(!_0x593de5)return;_0x35d0f9['preferences'][_0x324fdf(0x118)]?(_0x593de5[_0x324fdf(0x7d9)][_0x324fdf(0x11f)]=_0x324fdf(0x6b6),_0x593de5[_0x324fdf(0x7d9)]['textShadow']='0\x202px\x208px\x20rgba(0,0,0,0.4)'):(_0x593de5[_0x324fdf(0x7d9)][_0x324fdf(0x11f)]=_0x324fdf(0x71e),_0x593de5[_0x324fdf(0x7d9)]['textShadow']=_0x324fdf(0x9ba));}}function _0x544b02(){const _0x86f351=_0x17d1db;if(_0x86f351(0x166)===_0x86f351(0x179))_0x496bc3[_0x86f351(0x4a1)](_0x86f351(0x1de),_0x381357);else{const _0x5321c4=document['getElementById'](_0x86f351(0x63d));if(!_0x5321c4)return;_0x5321c4[_0x86f351(0xbbd)]=_0x35d0f9['preferences'][_0x86f351(0x118)]||![],_0x5321c4[_0x86f351(0xafb)](_0x86f351(0x326),()=>{const _0x553a19=_0x86f351;_0x35d0f9[_0x553a19(0x2e8)][_0x553a19(0x118)]=_0x5321c4[_0x553a19(0xbbd)],_0x5c9c95(),_0x1b9c5f();});}}_0x4bee8a[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x1de285),_0x171e56[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x4463a7=_0x17d1db;_0x381e79(),_0x59201b[_0x4463a7(0x9db)]();}),_0x59201b[_0x17d1db(0xafb)](_0x17d1db(0x326),_0x487c6a);const _0x2abf6e={'home':document['getElementById']('home-screen'),'chat':document[_0x17d1db(0xb18)](_0x17d1db(0x81c)),'settings':document['getElementById'](_0x17d1db(0x32b)),'userProfile':document[_0x17d1db(0xb18)](_0x17d1db(0x4ca)),'characterEdit':document[_0x17d1db(0xb18)]('character-edit-screen'),'groupChatCreate':document[_0x17d1db(0xb18)](_0x17d1db(0x606)),'wallpaper':document[_0x17d1db(0xb18)](_0x17d1db(0xade)),'worldBook':document[_0x17d1db(0xb18)](_0x17d1db(0x8fd)),'worldBookEditor':document[_0x17d1db(0xb18)](_0x17d1db(0x893)),'groupSettings':document['getElementById']('group-settings-screen'),'music':document['getElementById'](_0x17d1db(0xb49)),'friendCircleList':document[_0x17d1db(0xb18)](_0x17d1db(0x8fb)),'friendCircleEdit':document['getElementById']('friend-circle-edit-screen'),'meetingList':document[_0x17d1db(0xb18)](_0x17d1db(0xa82)),'meetingView':document[_0x17d1db(0xb18)](_0x17d1db(0xb29)),'userProfileList':document['getElementById'](_0x17d1db(0xaab)),'diaryList':document['getElementById'](_0x17d1db(0x872)),'diaryView':document[_0x17d1db(0xb18)](_0x17d1db(0x617)),'musicLibrary':document[_0x17d1db(0xb18)](_0x17d1db(0x945)),'musicUploadAltar':document[_0x17d1db(0xb18)](_0x17d1db(0x18b)),'accounting':document['getElementById']('accounting-screen'),'snoopList':document[_0x17d1db(0xb18)]('snoop-list-screen'),'snoopPhone':document['getElementById'](_0x17d1db(0x502)),'calendar':document['getElementById'](_0x17d1db(0xa67)),'livestreamList':document[_0x17d1db(0xb18)](_0x17d1db(0x40a)),'livestreamRoom':document[_0x17d1db(0xb18)](_0x17d1db(0x4b9)),'livestreamReplays':document['getElementById'](_0x17d1db(0xadb)),'livestreamReplayView':document[_0x17d1db(0xb18)](_0x17d1db(0x9ce)),'livestreamSettings':document['getElementById'](_0x17d1db(0xb48))},_0x203e1e=document['getElementById'](_0x17d1db(0x20f)),_0x431149=document[_0x17d1db(0xb18)](_0x17d1db(0x96a)),_0x5b5a78=document[_0x17d1db(0xb18)](_0x17d1db(0x16f)),_0x5bbbcc=document['getElementById'](_0x17d1db(0x682)),_0x14f550=document[_0x17d1db(0xb18)](_0x17d1db(0xb69)),_0x347b11=document[_0x17d1db(0xb18)](_0x17d1db(0x7a7)),_0x5a9b79=document[_0x17d1db(0xb18)](_0x17d1db(0x164)),_0x24ba92=document['getElementById'](_0x17d1db(0xb9e));document[_0x17d1db(0xb18)](_0x17d1db(0x962))[_0x17d1db(0xafb)]('click',async()=>{const _0x539abd=_0x17d1db,_0x67cf7=await _0x3a7c5b('确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。');if(_0x67cf7){localStorage['removeItem'](_0x539abd(0x1cd)),localStorage[_0x539abd(0x82a)]('cardState'),localStorage[_0x539abd(0x82a)](_0x539abd(0x355)),localStorage[_0x539abd(0x82a)](_0x539abd(0x59f));const _0x1b2c05=[];for(let _0x4f2278=0x0;_0x4f2278<localStorage[_0x539abd(0x968)];_0x4f2278++){const _0x2ee4eb=localStorage[_0x539abd(0xc53)](_0x4f2278);_0x2ee4eb&&_0x2ee4eb[_0x539abd(0x41d)](_0x539abd(0x151))&&(_0x539abd(0x7af)===_0x539abd(0x7af)?_0x1b2c05['push'](_0x2ee4eb):_0x5ed2c8[_0x539abd(0xb2f)]({'timestamp':_0x3050f5[_0x539abd(0xaa4)],'type':_0x539abd(0x6e1),'content':'['+(_0x3ad77d[_0x539abd(0x2f3)]==='user'?_0x22ef55[_0x539abd(0x19d)]:_0x25c611[_0x539abd(0x19d)])+']:\x20'+_0x27cbda['content']}));}_0x1b2c05[_0x539abd(0x175)](_0x221d86=>localStorage[_0x539abd(0x82a)](_0x221d86)),await _0xad4538(_0x539abd(0x623),await _0x1b74b4(_0x539abd(0x999))),_0x28dfd2('桌面已重置，即将刷新...'),setTimeout(()=>location['reload'](),0x5dc);}});const _0x37d50f=document[_0x17d1db(0xb18)](_0x17d1db(0x39b)),_0x2c5900=document[_0x17d1db(0xb18)](_0x17d1db(0xae2)),_0x1a3259=document['getElementById']('choice-create-character'),_0x5505cc=document[_0x17d1db(0xb18)](_0x17d1db(0x19b)),_0x2b643c=document[_0x17d1db(0xb18)](_0x17d1db(0x756)),_0x493cf9=document['getElementById'](_0x17d1db(0x88f)),_0x3ca968=document[_0x17d1db(0xb18)](_0x17d1db(0x5af)),_0x1d7bb0=document[_0x17d1db(0xb18)](_0x17d1db(0xdd)),_0x4e42e7=document[_0x17d1db(0xb18)](_0x17d1db(0x883)),_0x47f55a=document['getElementById'](_0x17d1db(0x7be)),_0x131cc2=document[_0x17d1db(0xb18)](_0x17d1db(0xa84)),_0x44a876=document[_0x17d1db(0xb18)](_0x17d1db(0x615)),_0x58f541=document[_0x17d1db(0xb18)]('back-to-home-from-chat'),_0xdd47a6=document['getElementById'](_0x17d1db(0x241)),_0x47ecde=document['getElementById'](_0x17d1db(0x980)),_0x4ce52b=document[_0x17d1db(0xb18)](_0x17d1db(0x3ed)),_0x3a1b77=document[_0x17d1db(0xb18)](_0x17d1db(0x8dd)),_0x53e365=document[_0x17d1db(0xb18)](_0x17d1db(0xcee)),_0x16d6db=document[_0x17d1db(0xb18)](_0x17d1db(0x81c)),_0x232e46=document[_0x17d1db(0xb18)]('chat-messages'),_0x15327c=document[_0x17d1db(0xb18)](_0x17d1db(0x389)),_0x115266=document[_0x17d1db(0xb18)](_0x17d1db(0x1af)),_0x24caf7=document[_0x17d1db(0xb18)](_0x17d1db(0xac2)),_0x51f2b6=document[_0x17d1db(0xb18)](_0x17d1db(0xc1d)),_0x1550e6=document[_0x17d1db(0xb18)](_0x17d1db(0x18c)),_0x117890=document[_0x17d1db(0xb18)](_0x17d1db(0x8f2)),_0x45c063=document['getElementById'](_0x17d1db(0x67d)),_0x510206=document[_0x17d1db(0xb18)](_0x17d1db(0xa66)),_0x2d55e7=document[_0x17d1db(0xb18)]('chat-sticker-button'),_0x4a5211=document[_0x17d1db(0xb18)]('chat-sticker-panel'),_0x2bc0b7=document[_0x17d1db(0xb18)](_0x17d1db(0x831)),_0x8c29e4=document['getElementById'](_0x17d1db(0x525)),_0x1d3772=document[_0x17d1db(0xb18)]('character-settings-button'),_0x589635=document[_0x17d1db(0xb18)]('offline-scene-view'),_0x48e75e=document[_0x17d1db(0xb18)](_0x17d1db(0x1cc)),_0x64dabf=document[_0x17d1db(0xb18)](_0x17d1db(0x995)),_0x38240d=document[_0x17d1db(0xb18)](_0x17d1db(0x25a)),_0x39cb31=document[_0x17d1db(0xb18)](_0x17d1db(0x137)),_0xea1baf=document['getElementById'](_0x17d1db(0x9a2)),_0x24eaed=document[_0x17d1db(0xb18)](_0x17d1db(0x256)),_0x1a5dcd=document[_0x17d1db(0xb18)](_0x17d1db(0x638)),_0x401263=document['getElementById'](_0x17d1db(0xc34)),_0x21f7eb=document[_0x17d1db(0xb18)](_0x17d1db(0x2ad)),_0x56e1bc=document[_0x17d1db(0xb18)](_0x17d1db(0x142)),_0x17a849=document[_0x17d1db(0xb18)]('user-persona'),_0x56676e=document['getElementById'](_0x17d1db(0xb04)),_0xc314cc=document[_0x17d1db(0xb18)](_0x17d1db(0xa7d)),_0x25e7f3=document[_0x17d1db(0xb18)]('character-edit-title'),_0x1a5ea1=document[_0x17d1db(0xb18)](_0x17d1db(0x232)),_0x2358ad=document[_0x17d1db(0xb18)](_0x17d1db(0xc4e)),_0x54594c=document['getElementById'](_0x17d1db(0x34d)),_0x7dc08c=document[_0x17d1db(0xb18)](_0x17d1db(0x32c)),_0x4ecdd1=document[_0x17d1db(0xb18)]('char-edit-persona'),_0xb31ad4=document[_0x17d1db(0xb18)](_0x17d1db(0xd0e)),_0x49a3ad=document['getElementById']('edit-clear-history-button'),_0x4ae398=document[_0x17d1db(0xb18)](_0x17d1db(0x23c));let _0x11a0ee=null;const _0x428472='\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20【最终协议：封装命令原则】(最高优先级)\x0a\x0a你的输出由【普通文本】和【特殊命令】组成。\x0a\x0a1.\x20\x20**HTML命令**:\x20如果你需要生成一个HTML模块，你【必须】将完整的HTML代码包裹在\x20`[html]`\x20和\x20`[/html]`这两个标签之间。\x0a\x20\x20\x20\x20-\x20\x20\x20这个\x20`html]...[/html]`\x20块本身是一个【不可分割的原子命令】，必须作为一个整体发送。\x0a\x20\x20\x20\x20-\x20\x20\x20你可以在发送这个命令的同时，在它的前面或后面附加【普通文本】对话。\x0a\x0a2.\x20\x20**普通文本**:\x20所有不被特殊命令标签包裹的文字，都将被视为普通对话，并遵循“模拟真人打字、拆分成多个短消息”的风格。\x0a\x0a#\x20示例：\x0a\x0a-\x20\x20\x20**错误示范\x20(HTML没有被命令包裹):**\x0a\x20\x20`你看这个！<div\x20class=\x22some-module\x22>...</div>`\x0a\x0a-\x20\x20\x20**正确示范\x20(命令与文本分离):**\x0a\x20\x20\x20\x20`[html]`\x0a\x20\x20\x20\x20`<div\x20class=\x20\x22some-module\x22\x20>...</div\x20>\x20`\x0a\x20\x20`[/html]`\x0a\x20\x20`你看这个！`\x0a\x20\x20`是不是很酷？`\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a5.\x20\x20**【气泡上限】**:\x20我给你设置了单次回复最多\x20**12**\x20个气泡的上限。你必须在【这个限制内规划好你的发言，确保能把一个完整的意思表达清楚，】不许说到一半就没下文了.\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a#\x20引用规则\x0a1.\x20\x20**触发**:\x20当你需要明确回应用户的某一句特定的话时，你应该使用引用功能。\x0a2.\x20\x20**格式**:\x20你的回复【必须】以一个严格的引用标签开头，格式为：`[引用|发言人|被引用的完整原文]`。\x0a3.\x20\x20**示例**:\x0a\x20\x20\x20\x20-\x20\x20\x20如果用户“{userName}”说：“你好”，而你想引用这句话来回应，你的回复**必须**是这样的格式：`[引用|{userName}|你好]你也好呀！`\x0a\x20\x20\x20\x20-\x20\x20\x20渲染后，前端会自动将其中的引用部分转换成一个引用块。\x0a4.\x20\x20**禁令**:\x20绝对禁止使用任何其他格式（如\x20Markdown的\x20>\x20符号、普通的引号\x20\x22\x22\x20等）来代替这个特殊的引用标签，禁止引用表情、贴纸、图片、音乐等特殊格式的信息。\x0a5.\x20\x20**【绝对指令：引用与回复的统一性】**\x20引用标签\x20`[引用\x20|...|...]`\x20和你对该引用的【直接回复】，【必须】写在同一个气泡里，中间不需要加任何东西。\x0a6.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a7.\x20\x20**【绝对禁止】**\x20绝对禁止将引用标签单独作为一个气泡发送，然后再用另一个气泡来回复。\x0a\x0a\x20\x20\x20\x20-\x20**错误示例\x20(会被拆分成两个气泡):**\x0a\x20\x20\x20\x20\x20\x20气泡1:\x20`[引用\x20|\x20条条\x20|\x20别生气]`\x0a\x20\x20\x20\x20\x20\x20气泡2:`我才没有生气。`\x0a\x0a\x20\x20\x20\x20-\x20**正确示例\x20(会合并成一个气泡):**\x0a\x20\x20\x20\x20\x20\x20单个气泡:\x20`[引用\x20|\x20条条\x20|\x20别生气]我才没有生气。`\x0a\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x20\x20\x20\x20',_0x119ef4=_0x17d1db(0x501);_0x35d0f9={'characters':[],'worldBooks':[],'worldBookCategories':[],'activeWorldBookCategoryId':_0x17d1db(0xb17),'chats':[],'userProfiles':[],'activeUserProfileId':null,'apiSettings':{'endpoint':'','key':'','model':''},'preferences':{'widgetBgImage':null,'perChatContextLines':0x64,'forceWhiteClock':![]},'activeChatId':null,'activeMeetingCharId':null,'isGenerating':![],'currentAbortController':null,'pendingMessageTimers':[],'conversationHistory':[],'displayedMessageCount':0x3c,'activeQuote':null,'friendCircles':[],'activeFriendCircleId':null,'calendarEvents':[],'accountingData':[],'accountingLedger':{},'diaries':[],'activeDiaryCharacterId':null,'diaries':[],'activeDiaryCharacterId':null,'meetingViewMode':_0x17d1db(0x52c),'activeMeetingScriptQueue':[],'characterLastScripts':{},'musicPlaylist':[],'currentlyPlayingIndex':-0x1,'isPlaying':![],'pendingPostAttachments':{'image':null,'music':null},'livestreamSessions':{},'activeLivestreamCharId':null,'currentLivestreamLog':[],'currentLivestreamUserActions':[],'currentLivestreamDMs':[],'isDMPanelVisible':![],'hasNewDMReply':![],'livestreamReplays':{}};function _0x5c9c95(){const _0x1d7e18=_0x17d1db;try{if(_0x1d7e18(0x113)!==_0x1d7e18(0x113))_0x1b7fee[_0x1d7e18(0x15e)]=null;else{const _0x4a7d06=_0x35d0f9[_0x1d7e18(0x1f2)][_0x1d7e18(0xbb5)](_0x14ceb2=>{const _0x35dd04=_0x1d7e18,_0x3c09e0={..._0x14ceb2};return _0x3c09e0[_0x35dd04(0x36b)]&&_0x3c09e0[_0x35dd04(0x36b)][_0x35dd04(0x41d)](_0x35dd04(0xa13))&&delete _0x3c09e0[_0x35dd04(0x36b)],_0x3c09e0;}),_0x4cf776={'version':0x1,'characters':_0x4a7d06,'worldBooks':_0x35d0f9[_0x1d7e18(0x38f)],'worldBookCategories':_0x35d0f9['worldBookCategories'],'activeWorldBookCategoryId':_0x35d0f9['activeWorldBookCategoryId'],'chats':_0x35d0f9[_0x1d7e18(0xa6c)],'apiSettings':_0x35d0f9['apiSettings'],'preferences':_0x35d0f9[_0x1d7e18(0x2e8)],'activeChatId':_0x35d0f9[_0x1d7e18(0xba6)],'diaries':_0x35d0f9[_0x1d7e18(0x3e7)],'friendCircles':_0x35d0f9[_0x1d7e18(0x9dd)],'activeFriendCircleId':_0x35d0f9['activeFriendCircleId'],'userProfiles':_0x35d0f9[_0x1d7e18(0x162)],'activeUserProfileId':_0x35d0f9['activeUserProfileId'],'accountingData':_0x35d0f9['accountingData'],'accountingLedger':_0x35d0f9[_0x1d7e18(0xc3c)],'calendarEvents':_0x35d0f9['calendarEvents'],'livestreamReplays':_0x35d0f9['livestreamReplays']};localStorage[_0x1d7e18(0x570)](_0x1d7e18(0x6d0),JSON[_0x1d7e18(0xcf9)](_0x4cf776));}}catch(_0x585a9d){_0x1d7e18(0x96b)!==_0x1d7e18(0xb80)?(console[_0x1d7e18(0x4a1)](_0x1d7e18(0x581),_0x585a9d),_0x28dfd2('无法保存状态，浏览器可能禁用了存储功能，或者……我的手术失败了。')):_0x1739a1+='-\x20你曾经搜索过：“'+_0x5153d6[_0x1d7e18(0x2e3)]+_0x1d7e18(0x8e0);}}async function _0x19304d(){const _0xc609ea=_0x17d1db;if('qfKMC'===_0xc609ea(0x440)){if(!_0x35d0f9[_0xc609ea(0x1f2)]||_0x35d0f9[_0xc609ea(0x1f2)]['length']===0x0){console['log'](_0xc609ea(0x6fc));return;}console[_0xc609ea(0x52e)](_0xc609ea(0x6c6));for(const _0xab736e of _0x35d0f9[_0xc609ea(0x1f2)]){if(!_0xab736e[_0xc609ea(0x36b)]){if(_0xc609ea(0x604)===_0xc609ea(0x604))try{const _0x2a52a9=await _0x5288fd(_0xc609ea(0x6eb)+_0xab736e['id']);_0x2a52a9&&(_0xab736e[_0xc609ea(0x36b)]=await _0x36479b(_0x2a52a9));}catch(_0x37c718){console[_0xc609ea(0x4a1)](_0xc609ea(0x961)+_0xab736e['name']+'\x20('+_0xab736e['id']+_0xc609ea(0x716),_0x37c718);}else{const _0x4ab1ab=(_0x350f3e-0x5a)*_0x246a92['PI']/0xb4;return{'x':_0x1c8e52+_0x4f334d*_0x3dbc6a[_0xc609ea(0x9f9)](_0x4ab1ab),'y':_0x42bf67+_0xa3c44e*_0x10c845['sin'](_0x4ab1ab)};}}}console[_0xc609ea(0x52e)]('所有头像已恢复到运行时状态。');}else _0x4e8715['push'](_0x180b28[_0x38d11e][_0xc609ea(0x2e2)]()),_0x45bc2c++;}function _0x72c17d(){const _0x3073e8=_0x17d1db;let _0x9b1c18=null;try{_0x9b1c18=localStorage[_0x3073e8(0x9a1)](_0x3073e8(0x6d0));}catch(_0x51d9dc){'fpwnc'===_0x3073e8(0xb05)?console['error']('Failed\x20to\x20read\x20state\x20from\x20localStorage:',_0x51d9dc):_0x4ddd1b=_0x1041af[_0x3073e8(0x9a1)](_0x3073e8(0x6d0));}if(_0x9b1c18){if('SxIeN'!==_0x3073e8(0xcc2))_0x18da33();else try{if(_0x3073e8(0x51f)!=='KxYwv'){const _0x5e2ef5=JSON['parse'](_0x9b1c18),_0xa112ae={..._0x35d0f9},_0x50ffe5={..._0xa112ae,..._0x5e2ef5};_0x50ffe5[_0x3073e8(0x2e8)]={..._0xa112ae[_0x3073e8(0x2e8)],..._0x5e2ef5[_0x3073e8(0x2e8)]||{}},_0x50ffe5['apiSettings']={..._0xa112ae[_0x3073e8(0x69e)],..._0x5e2ef5['apiSettings']||{}},Object[_0x3073e8(0xbdd)](_0x35d0f9,_0x50ffe5);}else _0x33d921[_0x3073e8(0x2eb)]=![],_0x523e0b(![]);}catch(_0x35469f){'CHNZl'===_0x3073e8(0xb25)?_0xfa81af[_0x3073e8(0x7d9)][_0x3073e8(0x31f)]=_0x3073e8(0x9ba):(console[_0x3073e8(0x4a1)](_0x3073e8(0xc3f),_0x35469f),localStorage[_0x3073e8(0x82a)]('appState'));}}const _0x2e96b9=_0x35d0f9[_0x3073e8(0x1f2)][_0x3073e8(0x968)]===0x0;return!_0x35d0f9[_0x3073e8(0xa6c)][_0x3073e8(0x9cd)](_0x5d32a7=>_0x5d32a7['id']===_0x35d0f9[_0x3073e8(0xba6)])&&(_0x35d0f9['activeChatId']=_0x35d0f9['chats'][0x0]?.['id']||null),_0x9b1c18&&(_0x3073e8(0xc63)!==_0x3073e8(0x83e)?_0x5c9c95():(_0x56f79a(_0x52df99),_0x58932f())),_0x2e96b9;}function _0x1d6327(){const _0x16cb3f=_0x17d1db;if('NsrIt'!==_0x16cb3f(0x13c))try{const _0x598ea6=_0x4bb4bc[_0x16cb3f(0x900)](_0xb75f51),_0x50c961=_0x16cb3f(0x491),_0x27c368=_0x16cb3f(0xae4)+_0x50c961+_0x16cb3f(0xc93)+_0x598ea6+'\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20';_0x23c761['innerHTML']=_0x27c368,_0x15b1dc[_0x16cb3f(0xa12)]['style'][_0x16cb3f(0xbcb)]('--custom-font-family','\x27'+_0x50c961+'\x27'),_0x20dbf3[_0x16cb3f(0x65b)]=_0x16cb3f(0x52f);}catch(_0x6cafc3){_0x2a9d7b[_0x16cb3f(0x4a1)](_0x16cb3f(0xcef),_0x6cafc3),_0x490ee9(_0x16cb3f(0xa69));}else{if(!_0x35d0f9[_0x16cb3f(0xba6)])return;try{localStorage['setItem']('chatHistory_'+_0x35d0f9[_0x16cb3f(0xba6)],JSON[_0x16cb3f(0xcf9)](_0x35d0f9[_0x16cb3f(0x6b9)]));}catch(_0x4916a8){console['error'](_0x16cb3f(0xa6d),_0x4916a8),_0x28dfd2(_0x16cb3f(0x1a5));}}}function _0x222d8c(){const _0x529794=_0x17d1db;if(_0x529794(0x9b0)!==_0x529794(0x9b0))_0x1be165(_0x529794(0xa5e));else{if(!_0x35d0f9[_0x529794(0xba6)]){_0x35d0f9[_0x529794(0x6b9)]=[],_0x3f1b6c();return;}let _0xac3180=null;try{_0xac3180=localStorage[_0x529794(0x9a1)](_0x529794(0x392)+_0x35d0f9['activeChatId']);}catch(_0x147cce){_0x529794(0x5ad)!==_0x529794(0x25f)?console[_0x529794(0x4a1)](_0x529794(0x5e1)+_0x35d0f9[_0x529794(0xba6)],_0x147cce):(_0x23f26a[_0x529794(0xbdd)](_0x27ed05,{'content':_0x529794(0x66f)+_0x3b2789[_0x529794(0x19d)]+']','displayUrl':_0x15020e[_0x529794(0x391)]}),_0x38e57d[_0x529794(0x6b9)][_0x529794(0xb2f)](_0x2d5a7b),_0xdd30eb(),_0x16c1e4(_0x4b4d6d,_0x130c54[_0x529794(0x6b9)][_0x529794(0x968)]-0x1),_0x5dd6d5[_0x529794(0x14f)]=_0x2fc4aa['scrollHeight']);}let _0xa9fca2=[];if(_0xac3180){if(_0x529794(0x67b)!=='hZMAh')try{const _0x5e71e1=JSON[_0x529794(0x97b)](_0xac3180);Array[_0x529794(0xc29)](_0x5e71e1)&&(_0xa9fca2=_0x5e71e1['filter'](_0x29c6e9=>_0x29c6e9&&typeof _0x29c6e9===_0x529794(0x977)&&typeof _0x29c6e9[_0x529794(0x129)]===_0x529794(0xb1e)&&typeof _0x29c6e9['content']!=='undefined'));}catch(_0xa228f8){if(_0x529794(0x691)===_0x529794(0x447))_0x5e389b[_0x529794(0xa05)](),_0x359762();else{console[_0x529794(0x4a1)]('Failed\x20to\x20parse\x20history\x20for\x20chat\x20'+_0x35d0f9[_0x529794(0xba6)]+_0x529794(0xcfb),_0xa228f8);try{localStorage['removeItem'](_0x529794(0x392)+_0x35d0f9[_0x529794(0xba6)]);}catch(_0x7d257c){console[_0x529794(0x4a1)]('Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:',_0x7d257c);}}}else{const _0x28c546=_0x546b52(_0x30739e[_0x529794(0x693)]);if(!_0x28c546)return;_0x3d1cb9=!![],_0x46cd7e[_0x529794(0x7d9)][_0x529794(0x31f)]=_0x529794(0xb91);const _0x32eacf=_0x28c546['spriteTransform']||{'x':0x32,'y':0x64,'scale':0x1};_0x57ade2['getElementById'](_0x529794(0x931))[_0x529794(0x850)]=_0x32eacf['x'],_0x24d59d[_0x529794(0xb18)]('sprite-slider-y')[_0x529794(0x850)]=_0x32eacf['y'],_0x19f7cc[_0x529794(0xb18)](_0x529794(0x5b8))[_0x529794(0x850)]=_0x32eacf['scale']*0x64,_0xf9dd2e={..._0x32eacf},_0x46f0ed[_0x529794(0xb18)](_0x529794(0x399))['style'][_0x529794(0x31f)]='none',_0x4c966b[_0x529794(0xb18)](_0x529794(0x2f4))[_0x529794(0x7d9)][_0x529794(0x31f)]=_0x529794(0x9ba);}}_0x35d0f9[_0x529794(0x6b9)]=_0xa9fca2,_0x232e46[_0x529794(0x280)]='',_0x35d0f9[_0x529794(0x6b9)]&&_0x35d0f9[_0x529794(0x6b9)]['forEach']((_0x5b39ea,_0x28bd27)=>_0x38697d(_0x5b39ea,_0x28bd27)),setTimeout(()=>{const _0x516b6d=_0x529794;_0x232e46[_0x516b6d(0x14f)]=_0x232e46['scrollHeight'];},0x0);}}async function _0xc93649(){const _0x58e3c5=_0x17d1db,_0x3c3246=document[_0x58e3c5(0xb18)](_0x58e3c5(0x959));if(!_0x3c3246){console[_0x58e3c5(0x4a1)](_0x58e3c5(0x6d3));return;}try{if(_0x58e3c5(0x65f)===_0x58e3c5(0x35c)){const _0x5cf2dc=_0x58246e[_0x58e3c5(0xce3)][_0x58e3c5(0x218)]['id'];_0x14320f(_0x58e3c5(0x412))[_0x58e3c5(0xa34)](_0x1c97b9=>{_0x1c97b9&&_0x352ef9(_0x5cf2dc);});}else{let _0x452279=await _0x5288fd(_0x58e3c5(0x623));if(!_0x452279){const _0x584769=localStorage['getItem']('customWallpaper');_0x584769&&(console['log'](_0x58e3c5(0x181)),_0x452279=await _0x1b74b4(_0x584769),await _0xad4538(_0x58e3c5(0x623),_0x452279),localStorage['removeItem'](_0x58e3c5(0xcdc)));}_0x452279?(_0x3c3246['style'][_0x58e3c5(0x2f8)]=_0x58e3c5(0x804)+URL[_0x58e3c5(0x900)](_0x452279)+')',_0x3c3246[_0x58e3c5(0x7d9)]['backgroundSize']='cover',_0x3c3246[_0x58e3c5(0x7d9)]['backgroundPosition']=_0x58e3c5(0xb99)):_0x58e3c5(0x662)!==_0x58e3c5(0x4ee)?_0x3c3246[_0x58e3c5(0x7d9)]['backgroundImage']='':_0x2ab419[_0x58e3c5(0x9db)]();}}catch(_0x1114cc){console[_0x58e3c5(0x4a1)](_0x58e3c5(0x8ef),_0x1114cc),_0x3c3246&&(_0x3c3246[_0x58e3c5(0x7d9)][_0x58e3c5(0x2f8)]='');}}function _0x548969(){const _0x5514c6=_0x17d1db,_0x2f501f=localStorage[_0x5514c6(0x9a1)](_0x5514c6(0x214));if(_0x2f501f)document[_0x5514c6(0xb18)](_0x5514c6(0xb49))[_0x5514c6(0x7d9)]['setProperty'](_0x5514c6(0x2ee),'url('+_0x2f501f+')');else{if(_0x5514c6(0xa49)!==_0x5514c6(0xa49)){_0x3fdf0a[_0x5514c6(0x5d2)]=[..._0x488582],_0x3ff292[_0x5514c6(0xadf)][_0x4f736e['id']]=[..._0x400933],_0x3b1cc2();const _0x3548ad=_0x41b65e[_0x5514c6(0xbb5)](_0x2c2c74=>_0x2c2c74[_0x5514c6(0x878)]===_0x5514c6(0xc75)?_0x2c2c74[_0x5514c6(0xa56)]:_0x2c2c74[_0x5514c6(0x878)]+':\x20'+_0x2c2c74[_0x5514c6(0xa56)])['join']('\x0a\x0a');_0x122b54['conversationHistory']['push']({'role':'assistant','senderId':_0x209018['id'],'timestamp':_0x1caef0[_0x5514c6(0x5ee)](),'isOffline':!![],'content':_0x3548ad});}else document[_0x5514c6(0xb18)](_0x5514c6(0xb49))[_0x5514c6(0x7d9)][_0x5514c6(0xbcb)](_0x5514c6(0x2ee),_0x5514c6(0x9ba));}}async function _0x42f865(_0x24cd97){const _0x5ba4dd=_0x17d1db;if(_0x5ba4dd(0x9bd)===_0x5ba4dd(0x722))_0x447a78=_0x42b77f[0x1][_0x5ba4dd(0x2e2)]();else try{await _0xad4538(_0x5ba4dd(0x623),_0x24cd97),await _0xc93649(),_0x28dfd2(_0x5ba4dd(0xa85));}catch(_0x1e9c11){console['error'](_0x5ba4dd(0x4ea),_0x1e9c11),_0x28dfd2('保存壁纸失败:\x20'+_0x1e9c11[_0x5ba4dd(0x5a1)]);}}function _0x30804d(_0x2f8ef1){const _0x479329=_0x17d1db,_0x5bbe8c={'quotedMessage':null,'content':_0x2f8ef1},_0x3da011=_0x2f8ef1[_0x479329(0xac5)](/^\[引用\|(.*?)\|(.*?)\]\s*/);return _0x3da011&&(_0x479329(0xbd2)!=='ANXbr'?(_0x5bbe8c[_0x479329(0x659)]={'sender':_0x3da011[0x1][_0x479329(0x2e2)](),'content':_0x3da011[0x2][_0x479329(0x2e2)]()},_0x5bbe8c[_0x479329(0x9bc)]=_0x2f8ef1['substring'](_0x3da011[0x0]['length'])[_0x479329(0x2e2)]()):_0xa03fae['push'](_0x406075)),_0x5bbe8c;}const _0x1b5951=document['getElementById'](_0x17d1db(0xc47)),_0x214b04=document[_0x17d1db(0xb18)]('message-action-backdrop'),_0x3d49e7=document['getElementById']('edit-message-button'),_0x42e123=document[_0x17d1db(0xb18)]('delete-message-button'),_0x1ef516=document['getElementById'](_0x17d1db(0x7c9)),_0x32bfce=document[_0x17d1db(0xb18)](_0x17d1db(0x430)),_0x181364=document[_0x17d1db(0xb18)]('edit-message-modal'),_0x12686d=document[_0x17d1db(0xb18)](_0x17d1db(0x867)),_0x2f5d9c=document[_0x17d1db(0xb18)](_0x17d1db(0x189)),_0x4fb608=document[_0x17d1db(0xb18)](_0x17d1db(0x59e)),_0x4f02f4=document[_0x17d1db(0xb18)](_0x17d1db(0xc3d));let _0x5ec1c9=null;function _0x44e893(_0x34f9eb){const _0x23d36d=_0x17d1db;_0x5ec1c9=_0x34f9eb,_0x1b5951[_0x23d36d(0x79f)][_0x23d36d(0x366)](_0x23d36d(0xa36));}function _0x5627c7(){const _0x4425e3=_0x17d1db;_0x4425e3(0x9f4)===_0x4425e3(0x9f4)?_0x1b5951['classList'][_0x4425e3(0xb42)](_0x4425e3(0xa36)):(_0x3f260d[_0x4425e3(0x7d9)][_0x4425e3(0x31f)]=_0x4425e3(0x9ba),_0x5092d4[_0x4425e3(0x7d9)][_0x4425e3(0x31f)]='block');}function _0x48afff(){const _0x14d60a=_0x17d1db;if(_0x14d60a(0xac6)!==_0x14d60a(0x7f9))_0x5627c7(),_0x5ec1c9=null;else return;}function _0x2c5324(){const _0x291a1f=_0x17d1db;if(_0x5ec1c9===null)return;_0x35d0f9[_0x291a1f(0x6b9)][_0x291a1f(0x895)](_0x5ec1c9,0x1),_0x1d6327(),_0x65b693(),_0x48afff();}function _0x2c0480(){const _0x448db6=_0x17d1db;if(_0x5ec1c9===null)return;const _0x1da5c8=_0x35d0f9[_0x448db6(0x6b9)][_0x5ec1c9];if(!_0x1da5c8)return;_0x2f5d9c[_0x448db6(0x850)]=_0x1da5c8[_0x448db6(0x9bc)],_0x5627c7(),_0x181364[_0x448db6(0x79f)][_0x448db6(0x366)](_0x448db6(0xa36)),_0x2f5d9c[_0x448db6(0x1d4)]();}function _0x2b3152(){const _0x49509b=_0x17d1db;if(_0x49509b(0x6a4)===_0x49509b(0x2fa))_0x2fc413+=_0x49509b(0xa4a)+_0x33ece2['description']+'”。\x0a';else{if(_0x5ec1c9===null)return;const _0x176d26=_0x2f5d9c[_0x49509b(0x850)][_0x49509b(0x2e2)]();if(_0x176d26===''){if(_0x49509b(0x8b9)!==_0x49509b(0x8b9))_0x4e35a8(),_0x28ebcf(_0x49509b(0xaf1),'home');else{_0x37c081();return;}}const _0x55df28=_0x35d0f9['conversationHistory'][_0x5ec1c9];_0x55df28&&(_0x55df28[_0x49509b(0x9bc)]=_0x176d26,_0x1d6327(),_0x65b693()),_0x181364[_0x49509b(0x79f)]['remove'](_0x49509b(0xa36)),_0x5ec1c9=null;}}function _0x37c081(){const _0x159fcd=_0x17d1db;_0x181364[_0x159fcd(0x79f)][_0x159fcd(0xb42)](_0x159fcd(0xa36)),_0x5ec1c9=null;}_0x214b04['addEventListener'](_0x17d1db(0x9db),_0x48afff),_0x1ef516[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x48afff),_0x42e123[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x2c5324),_0x3d49e7[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x2c0480),_0x32bfce[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x449a87),_0x45c063[_0x17d1db(0xafb)]('click',_0x1116e4),_0x4fb608[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x2b3152),_0x4f02f4[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x37c081),_0x12686d[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x37c081);function _0x449a87(){const _0x49bf95=_0x17d1db;if(_0x5ec1c9===null)return;const _0x2a354a=_0x35d0f9['conversationHistory'][_0x5ec1c9];if(!_0x2a354a)return;const _0x5c0962=_0x1f3fa9();let _0x25f1f2='未知';if(_0x2a354a[_0x49bf95(0x129)]==='user'){if('VfSIq'!=='ZWDys'){const _0x1b0e3b=_0x5f52db(_0x35d0f9['activeChatId']);_0x25f1f2=_0x1b0e3b[_0x49bf95(0x19d)]||'我';}else{const _0x12d44b=_0x267d3e[_0x49bf95(0xa6c)][_0x49bf95(0x9cd)](_0x3f532c=>_0x3f532c['participantIds'][_0x49bf95(0xb63)](_0x41d6a4));if(!_0x12d44b)return'';const _0x36c840=_0x4f8b52(_0x12d44b['id']),_0x37a1b3=_0xed394e[_0x49bf95(0x2a3)][_0x49bf95(0x485)](_0x2243f2=>_0x2243f2[_0x49bf95(0x5aa)]===_0x36c840['id']||!_0x2243f2[_0x49bf95(0x5aa)]);if(_0x37a1b3[_0x49bf95(0x968)]===0x0)return'';const _0x437a60=_0x37a1b3[_0x49bf95(0xbb5)](_0x8552c=>{const _0x390fc2=_0x49bf95,_0xdf9084=_0x8552c[_0x390fc2(0xb12)]==='important'?_0x390fc2(0xb24):'待办';return _0x390fc2(0x515)+_0xdf9084+']\x20'+_0x8552c[_0x390fc2(0x569)]+':\x20'+_0x8552c[_0x390fc2(0x9bc)];})[_0x49bf95(0x102)]('\x0a');return _0x49bf95(0xb50)+_0x36c840[_0x49bf95(0x19d)]+_0x49bf95(0x188)+_0x437a60;}}else{const _0x1d980b=_0x2a354a[_0x49bf95(0xbc0)]||_0x5c0962?.[_0x49bf95(0x8f1)][0x0],_0x14a7a8=_0x45939a(_0x1d980b);_0x25f1f2=_0x14a7a8?_0x14a7a8['name']:'角色';}let _0xd236a6=_0x2a354a[_0x49bf95(0x9bc)]||'';if(_0x2a354a[_0x49bf95(0x97c)])_0xd236a6='[表情]';if(_0x2a354a[_0x49bf95(0x89a)])_0xd236a6=_0x49bf95(0x60a);if(_0xd236a6[_0x49bf95(0x968)]>0x32)_0xd236a6=_0xd236a6[_0x49bf95(0x185)](0x0,0x32)+'...';_0x35d0f9['activeQuote']={'sender':_0x25f1f2,'content':_0xd236a6},_0x12d56d(),_0x48afff(),_0x15327c[_0x49bf95(0x1d4)]();}function _0x12d56d(){const _0x31e12d=_0x17d1db;if(!_0x35d0f9['activeQuote'])return;_0x1550e6[_0x31e12d(0x65b)]=_0x31e12d(0x2ff)+_0x35d0f9[_0x31e12d(0xc44)][_0x31e12d(0x7b0)],_0x117890[_0x31e12d(0x65b)]=_0x35d0f9[_0x31e12d(0xc44)][_0x31e12d(0x9bc)],_0x51f2b6['style'][_0x31e12d(0x31f)]=_0x31e12d(0xb91);}function _0x1116e4(){const _0x311059=_0x17d1db;if(_0x311059(0x589)==='YsiOh')_0x35d0f9[_0x311059(0xc44)]=null,_0x51f2b6[_0x311059(0x7d9)][_0x311059(0x31f)]=_0x311059(0x9ba);else throw new _0x31a07d('YAML翻译机也无法理解这段梦话。');}function _0x198934(_0x2f0304,_0x3a1780){const _0x115236=_0x17d1db,_0x188069=document['getElementById']('music-widget');if(_0x188069){if(_0x115236(0xc2e)!=='kAVFN')_0x2f0304===_0x115236(0x58a)?_0x115236(0x92d)!=='yVLxd'?_0x188069[_0x115236(0x7d9)]['display']=_0x115236(0x884):_0x40b61f=_0x115236(0x8c6):_0x188069['style'][_0x115236(0x31f)]='none';else{const _0x5d56af=_0xa19a8c[_0x115236(0x9dd)][_0x115236(0x9cd)](_0x593ed8=>_0x593ed8['id']===_0x38d509);if(!_0x5d56af)return;_0x2e8de3[_0x115236(0x65b)]=_0x115236(0x183),_0x4f8736[_0x115236(0x850)]=_0x5d56af['id'],_0x11eec7[_0x115236(0x850)]=_0x5d56af[_0x115236(0x19d)],_0x2387fa[_0x115236(0x850)]=_0x5d56af[_0x115236(0x54f)],_0x17fa60[_0x115236(0x7d9)][_0x115236(0x31f)]=_0x115236(0xb91),_0x5d56af[_0x115236(0x69d)][_0x115236(0x175)](_0x13257d=>{const _0x14ab70=_0x115236,_0x252dcb=_0x33b971[_0x14ab70(0x3eb)](_0x14ab70(0x672)+_0x13257d);if(_0x252dcb)_0x252dcb[_0x14ab70(0xbbd)]=!![];});}}_0x11a0ee=_0x3a1780||null,Object['values'](_0x2abf6e)[_0x115236(0x175)](_0x2309ef=>_0x2309ef[_0x115236(0x79f)][_0x115236(0xb42)](_0x115236(0x530)));_0x2abf6e[_0x2f0304]&&_0x2abf6e[_0x2f0304][_0x115236(0x79f)][_0x115236(0x366)](_0x115236(0x530));if(_0x2f0304!=='chat'){if('dIPTO'==='rpVzM'){if(_0x42576a){const _0x494445=_0x332165(_0x581c25[_0x115236(0x693)]);_0x494445&&(delete _0x494445[_0x115236(0x297)],_0x5262aa(),_0x1f5f0d(_0x494445['id'],_0x115236(0x680)),_0x46c204(_0x115236(0x123)),_0x46e6eb(!![]));}}else _0x16d6db['classList'][_0x115236(0xb42)](_0x115236(0x245));}}function _0x53f26d(_0x220e70){const _0x4dfe30=_0x17d1db;_0x220e70?_0x16d6db[_0x4dfe30(0x79f)][_0x4dfe30(0x366)](_0x4dfe30(0x245)):_0x16d6db['classList'][_0x4dfe30(0xb42)](_0x4dfe30(0x245));}async function _0x24185b(){const _0x1d9255=_0x17d1db;if('CajPQ'===_0x1d9255(0x3be))_0x59b817=_0x3620c0(_0x37bc1e[_0x1d9255(0x8f1)][0x0]);else{_0x3a1b77['innerHTML']='';const _0x536c97=_0x35d0f9[_0x1d9255(0xa6c)][_0x1d9255(0xbb5)](_0x3e2868=>{const _0x3c7c71=_0x1d9255;if(_0x3e2868['type']==='private'){if(_0x3c7c71(0x632)===_0x3c7c71(0xcdf)){const _0x4b66e8=_0x49e29c[_0x3c7c71(0xb18)](_0x3c7c71(0x656));_0x4b66e8[_0x3c7c71(0x280)]='';const _0xf84fde=_0x19a5b9['worldBooks'][_0x3c7c71(0x485)](_0x3288e4=>_0x3288e4[_0x3c7c71(0xcf5)]===_0x2b7110||_0x3dd6bd===_0x3c7c71(0xb17)&&!_0x3288e4[_0x3c7c71(0xcf5)]);if(_0xf84fde['length']===0x0){_0x4b66e8[_0x3c7c71(0x280)]=_0x3c7c71(0x63f);return;}_0xf84fde['forEach'](_0x4a3005=>{const _0x2b5795=_0x3c7c71,_0x5448f2=_0x4ceae3[_0x2b5795(0x7e9)](_0x2b5795(0x591));_0x5448f2[_0x2b5795(0x73e)]=_0x2b5795(0x715),_0x5448f2[_0x2b5795(0x218)]['id']=_0x4a3005['id'],_0x5448f2[_0x2b5795(0x280)]=_0x2b5795(0x54c)+_0x4a3005[_0x2b5795(0x19d)]+_0x2b5795(0x422)+_0x4a3005['content'][_0x2b5795(0x185)](0x0,0x64)+_0x2b5795(0xb90),_0x5448f2[_0x2b5795(0xafb)](_0x2b5795(0x9db),()=>_0x1cf902(_0x4a3005['id'])),_0x4b66e8[_0x2b5795(0x364)](_0x5448f2);});}else{const _0x50f339=_0x45939a(_0x3e2868[_0x3c7c71(0x8f1)][0x0]);return _0x50f339?_0x5288fd('char_avatar_'+_0x50f339['id']):Promise['resolve'](null);}}else{if(_0x3c7c71(0x99d)!==_0x3c7c71(0x7a0))return _0x5288fd(_0x3c7c71(0x8bf)+_0x3e2868['id']);else{const _0x2976b6=_0xb894f0[_0x3c7c71(0x832)](_0x1ca319,_0x3c7c71(0x43c)),_0x22bae2=_0x2976b6['objectStore'](_0x1648d9),_0x1403b0=_0x22bae2[_0x3c7c71(0x31b)](_0xd435ab);_0x1403b0[_0x3c7c71(0x9d2)]=()=>_0x518aa5(_0x1403b0[_0x3c7c71(0xd15)]),_0x1403b0['onerror']=()=>_0xc28808(_0x1403b0['error']);}}}),_0x24daed=await Promise[_0x1d9255(0x799)](_0x536c97);_0x35d0f9[_0x1d9255(0xa6c)][_0x1d9255(0x175)]((_0x3f7c44,_0x4f1464)=>{const _0x3915d8=_0x1d9255,_0x45b7eb=document[_0x3915d8(0x7e9)]('li');_0x45b7eb['className']=_0x3915d8(0x3a8),_0x45b7eb[_0x3915d8(0x218)]['id']=_0x3f7c44['id'];let _0x1d8391=_0x20a236,_0x310306='群聊',_0xd6084a='';const _0x82d410=_0x24daed[_0x4f1464];_0x82d410&&(_0x3915d8(0x1b7)!==_0x3915d8(0xbe3)?_0x1d8391=URL[_0x3915d8(0x900)](_0x82d410):_0x35c363&&_0x4d81bc(_0x5e98bb));if(_0x3f7c44['type']==='private'){const _0x45b8e2=_0x45939a(_0x3f7c44[_0x3915d8(0x8f1)][0x0]);_0x45b8e2?(!_0x82d410&&('YWBwL'!=='oKuFn'?_0x1d8391=_0x45b8e2[_0x3915d8(0x36b)]||_0x20a236:(_0xe9d352(![]),_0x287b47[_0x3915d8(0x4a1)](_0x3915d8(0xaa3),_0x44271a),_0x3e9fa6('导出过程中发生严重错误:\x20'+_0x5d5ffa[_0x3915d8(0x5a1)]))),_0x310306=_0x45b8e2['name']||_0x3915d8(0xc2f),_0xd6084a=_0x45b8e2[_0x3915d8(0xd09)]||'私聊'):(_0x310306=_0x3915d8(0x753),_0xd6084a=_0x3915d8(0xacb));}else{if(_0x3915d8(0x5c8)==='ceVuM'){const _0x4c9b5a=_0x183c5b[_0x3915d8(0x1f2)][_0x3915d8(0xbb5)](_0xaaf78c=>{const _0x5115be=_0x3915d8,_0x21a441={..._0xaaf78c};return _0x21a441[_0x5115be(0x36b)]&&_0x21a441[_0x5115be(0x36b)][_0x5115be(0x41d)]('data:image')&&delete _0x21a441[_0x5115be(0x36b)],_0x21a441;}),_0x2c310b={'version':0x1,'characters':_0x4c9b5a,'worldBooks':_0x105e87[_0x3915d8(0x38f)],'worldBookCategories':_0x5b41cb[_0x3915d8(0x6c0)],'activeWorldBookCategoryId':_0x4b8729[_0x3915d8(0x143)],'chats':_0x27211d[_0x3915d8(0xa6c)],'apiSettings':_0x2ef71a['apiSettings'],'preferences':_0x5e0e58[_0x3915d8(0x2e8)],'activeChatId':_0xe2353[_0x3915d8(0xba6)],'diaries':_0x1480f6['diaries'],'friendCircles':_0xdd0c20[_0x3915d8(0x9dd)],'activeFriendCircleId':_0x5f4628[_0x3915d8(0xb34)],'userProfiles':_0x32eef7[_0x3915d8(0x162)],'activeUserProfileId':_0x9fcab1['activeUserProfileId'],'accountingData':_0x2f2d1d[_0x3915d8(0xef)],'accountingLedger':_0x1e0e3d['accountingLedger'],'calendarEvents':_0x17655d[_0x3915d8(0x2a3)],'livestreamReplays':_0x2dec49[_0x3915d8(0x8e4)]};_0x17359f[_0x3915d8(0x570)]('appState',_0x4e3b6b[_0x3915d8(0xcf9)](_0x2c310b));}else _0x310306=_0x3f7c44[_0x3915d8(0x19d)]||'未命名群聊',_0xd6084a=_0x3f7c44['participantIds']['length']+_0x3915d8(0x572);}_0x45b7eb[_0x3915d8(0x280)]=_0x3915d8(0xad6)+_0x1d8391+_0x3915d8(0x393)+_0x310306+_0x3915d8(0x38c)+_0xd6084a+_0x3915d8(0x573),_0x45b7eb['querySelector'](_0x3915d8(0x455))[_0x3915d8(0xafb)]('click',()=>{_0x1c8dfc(_0x3f7c44['id']),_0x53f26d(!![]);}),_0x3a1b77[_0x3915d8(0x364)](_0x45b7eb);});}}function _0x26ba50(){const _0xf486=_0x17d1db;if(_0xf486(0xad8)!==_0xf486(0xcae)){const _0x3d661b=document['getElementById'](_0xf486(0x4e6));_0x3d661b[_0xf486(0x280)]='';const _0x4f44f8=_0x35d0f9['characters'][_0xf486(0x485)](_0x5de89e=>_0x35d0f9[_0xf486(0xa6c)][_0xf486(0x83f)](_0x5e8a93=>_0x5e8a93[_0xf486(0xb12)]===_0xf486(0x869)&&_0x5e8a93[_0xf486(0x8f1)]['includes'](_0x5de89e['id'])));if(_0x4f44f8[_0xf486(0x968)]===0x0){_0x3d661b[_0xf486(0x280)]=_0xf486(0xc94);return;}_0x4f44f8[_0xf486(0x175)](_0x3d1858=>{const _0x2b54a1=_0xf486,_0x4d553a=document[_0x2b54a1(0x7e9)]('li');_0x4d553a[_0x2b54a1(0x73e)]=_0x2b54a1(0x3a8),_0x4d553a[_0x2b54a1(0x218)][_0x2b54a1(0xca6)]=_0x3d1858['id'],_0x4d553a[_0x2b54a1(0x280)]=_0x2b54a1(0xad6)+(_0x3d1858['avatar']||_0x20a236)+'\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>'+_0x3d1858['name']+_0x2b54a1(0x38c)+(_0x3d1858[_0x2b54a1(0xd09)]||'私聊')+_0x2b54a1(0x573),_0x4d553a['addEventListener']('click',()=>{const _0x586293=_0x2b54a1;_0x586293(0x262)!==_0x586293(0x262)?_0x3db10c[_0x586293(0x14f)]=_0x146e5e[_0x586293(0x3aa)]:_0x3820cf(_0x3d1858['id']);}),_0x3d661b[_0x2b54a1(0x364)](_0x4d553a);});}else _0x18b60f=_0x2e5231['touches']?_0x3ef2bf[_0xf486(0x2b5)][0x0][_0xf486(0x3e6)]:_0x5d0429['clientY'],_0x2faae1=0x0,_0x52d553[_0xf486(0x7d9)][_0xf486(0x42b)]=_0xf486(0x9ba),_0x33257f=!![],_0x25907b['type']===_0xf486(0x6b5)&&(_0x102af3[_0xf486(0xafb)]('mousemove',_0x703869),_0x43f2d4['addEventListener'](_0xf486(0xc4f),_0x2c3cf5));}async function _0x3820cf(_0x116c77){const _0x37a43d=_0x17d1db,_0x2c6fe0=_0x45939a(_0x116c77);if(!_0x2c6fe0)return;_0x35d0f9[_0x37a43d(0x693)]=_0x116c77,document['getElementById']('meeting-char-name-header')['textContent']=_0x2c6fe0[_0x37a43d(0x19d)];const _0x449176=document[_0x37a43d(0xb18)](_0x37a43d(0x4bf));_0x449176[_0x37a43d(0x7d9)][_0x37a43d(0x2f8)]=_0x37a43d(0x9ba),document[_0x37a43d(0xb18)]('meeting-scene-view')[_0x37a43d(0x280)]=_0x37a43d(0x39c),document['getElementById'](_0x37a43d(0x3b2))['textContent']=_0x37a43d(0x4db),document[_0x37a43d(0xb18)]('galgame-speaker')['textContent']='旁白',document['getElementById'](_0x37a43d(0x3d3))['src']='',_0x198934(_0x37a43d(0x33a),'meetingList'),setTimeout(async()=>{const _0x1b3cc5=_0x37a43d;try{const _0x28efd0=await _0x5288fd(_0x1b3cc5(0xa5c)+_0x116c77);_0x28efd0&&(_0x449176[_0x1b3cc5(0x7d9)]['backgroundImage']=_0x1b3cc5(0x575)+URL['createObjectURL'](_0x28efd0)+'\x27)',_0x449176['style']['backgroundSize']=_0x1b3cc5(0x2d5),_0x449176['style']['backgroundPosition']=_0x1b3cc5(0xb99));const _0x552ffd=_0x35d0f9['chats']['find'](_0x51b874=>_0x51b874[_0x1b3cc5(0xb12)]===_0x1b3cc5(0x869)&&_0x51b874[_0x1b3cc5(0x8f1)][_0x1b3cc5(0xb63)](_0x116c77));_0x552ffd?(_0x35d0f9[_0x1b3cc5(0xba6)]=_0x552ffd['id'],_0x5c9c95(),_0x222d8c()):_0x35d0f9[_0x1b3cc5(0x6b9)]=[];_0xe54a5f(_0x116c77),_0x31c03c(),_0x5b11e8();if(_0x26d532)clearInterval(_0x26d532);_0x435a57(),_0x26d532=setInterval(_0x435a57,0x2710),document[_0x1b3cc5(0xb18)](_0x1b3cc5(0x2f4))[_0x1b3cc5(0x7d9)]['display']=_0x1b3cc5(0xb91);}catch(_0xb25ab2){console[_0x1b3cc5(0x4a1)](_0x1b3cc5(0x28a),_0xb25ab2),document[_0x1b3cc5(0xb18)](_0x1b3cc5(0x63a))['innerHTML']=_0x1b3cc5(0xb54);}},0x32);}function _0x5b11e8(){const _0x325a70=_0x17d1db,_0x51b25a=document[_0x325a70(0xb18)](_0x325a70(0x63a));_0x51b25a[_0x325a70(0x280)]='';const _0x7a906b=_0x51b25a[_0x325a70(0x3eb)](_0x325a70(0x230));if(_0x7a906b)_0x7a906b[_0x325a70(0xb42)]();if(_0x35d0f9[_0x325a70(0x6b9)]){if('sYuuO'!==_0x325a70(0x816))_0x35d0f9[_0x325a70(0x6b9)][_0x325a70(0x175)]((_0x19cf23,_0x3f9ffd)=>{const _0x2aa2b6=_0x325a70;if(!_0x19cf23[_0x2aa2b6(0x61c)]||_0x19cf23[_0x2aa2b6(0x129)]==='system')return;const _0x2f1c49=_0x19cf23[_0x2aa2b6(0x9bc)][_0x2aa2b6(0x39f)](/\n/g,_0x2aa2b6(0x55f)),_0x1841e7=_0x5f52db(_0x35d0f9[_0x2aa2b6(0xba6)]);let _0x1458f2='',_0x47e728='',_0x53f0e4='';if(_0x19cf23[_0x2aa2b6(0x129)]==='user')_0x2aa2b6(0x9ca)===_0x2aa2b6(0x9ca)?(_0x1458f2=_0x1841e7[_0x2aa2b6(0x19d)]||'我',_0x47e728='speaker-user'):(_0x22c12e[_0x2aa2b6(0xa05)](),_0x4defbc(_0x54042a,_0x4d2814));else{if(_0x19cf23[_0x2aa2b6(0x129)]===_0x2aa2b6(0xaf6)){if('TneAv'==='TneAv'){const _0x3d1f98=_0x45939a(_0x19cf23['senderId']||_0x35d0f9['activeMeetingCharId']);_0x1458f2=_0x3d1f98?.['name']||'角色',_0x47e728=_0x2aa2b6(0x409);}else{_0x2ca762(_0x2aa2b6(0xbb3));return;}}}_0x1458f2?_0x53f0e4='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-dialogue-card\x20'+_0x47e728+'\x22\x20data-history-index=\x22'+_0x3f9ffd+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-speaker-tag\x22>'+_0x1458f2+_0x2aa2b6(0xbb8)+_0x2f1c49+_0x2aa2b6(0x585):_0x53f0e4=_0x2aa2b6(0x54e)+_0x3f9ffd+'\x22>'+_0x2f1c49+'</p>',_0x51b25a[_0x2aa2b6(0x280)]+=_0x53f0e4;});else{const _0x3f50d1=_0x35d940['target'][_0x325a70(0x636)][0x0];if(_0x3f50d1)_0x3eae43[_0x325a70(0x7d9)][_0x325a70(0x2f8)]=_0x325a70(0x575)+_0x51749a['createObjectURL'](_0x3f50d1)+'\x27)';}}if(_0x35d0f9[_0x325a70(0x2eb)]){if('FpPdo'===_0x325a70(0x3fe)){let _0x26b3bf=_0x51b25a[_0x325a70(0x3eb)](_0x325a70(0x762));if(!_0x26b3bf){if(_0x325a70(0x5c1)===_0x325a70(0x5c1))_0x26b3bf=document[_0x325a70(0x7e9)]('p'),_0x26b3bf['className']=_0x325a70(0xc2d),_0x26b3bf[_0x325a70(0x65b)]=_0x325a70(0x45c),_0x51b25a[_0x325a70(0x364)](_0x26b3bf);else{const _0x56bdea=_0x31dd5b['split'](/:\s|：\s/);if(_0x56bdea[_0x325a70(0x968)]===0x2){const _0x30ef44=_0x56bdea[0x0][_0x325a70(0x2e2)](),_0x35c18f=_0x56bdea[0x1][_0x325a70(0x2e2)](),_0x15a32f={'歌名':'歌曲名称','艺术家':'歌手','专辑':'专辑'};_0x15a32f[_0x30ef44]&&(_0x12438e[_0x15a32f[_0x30ef44]]=_0x35c18f);}}}}else _0x3b43f0(![]),_0xaeb5c8[_0x325a70(0x4a1)](_0x325a70(0xb74),_0x203e29),_0x203d75(_0x325a70(0x7ee)+_0xa13c7b[_0x325a70(0x5a1)]);}const _0x319c87=document[_0x325a70(0x7e9)](_0x325a70(0x591));_0x319c87['id']=_0x325a70(0x195),_0x51b25a[_0x325a70(0x364)](_0x319c87),setTimeout(()=>{const _0x473934=_0x325a70;_0x319c87['scrollIntoView']({'behavior':_0x473934(0x937),'block':_0x473934(0x84e)});},0x32);}function _0x65b693(){const _0x2400f1=_0x17d1db;if(_0x2400f1(0xc31)===_0x2400f1(0xc31)){const _0x3fa3ba=document[_0x2400f1(0x3eb)](_0x2400f1(0xaea));if(!_0x3fa3ba)return;_0x3fa3ba['id']===_0x2400f1(0xb29)?_0x2400f1(0x3dc)===_0x2400f1(0x5a6)?_0x5c1fc0[_0x2400f1(0x742)]=_0x41a541['id']:_0x5b11e8():_0x2400f1(0xb7f)!==_0x2400f1(0xc22)?_0x3f1b6c():_0x298f1d[_0x2400f1(0xaa5)](_0x144730);}else{const _0x4a40d2=_0x4dba2b[_0x2400f1(0x7b0)]===_0x2400f1(0xa80)?'你':_0x321ab3['contact_name'];_0x58ceab+=_0x2400f1(0x62e)+_0x4a40d2+':\x20'+_0x143a86['content']+'\x20\x0a';}}function _0x3f1b6c(){const _0x1b775c=_0x17d1db,_0x319b35=_0x35d0f9['conversationHistory'][_0x1b775c(0x485)](_0x599224=>!_0x599224['isOffline']&&_0x599224[_0x1b775c(0x129)]!==_0x1b775c(0x773));if(_0x319b35[_0x1b775c(0x968)]>_0x35d0f9[_0x1b775c(0xbfb)]){if(_0x1b775c(0x86e)==='BlSxl'){const _0x5bd31d=_0x5517dc['accountingLedger'][_0x4e935c],_0x3398a6=_0x5bd31d[_0x1b775c(0x719)][_0x1b775c(0x377)]((_0x37347d,_0x56ba2b)=>_0x37347d+(_0x56ba2b[_0x1b775c(0xcc8)]||0x0),0x0);_0x11fa38+=_0x1b775c(0xa30)+_0x40a7e6+_0x1b775c(0xc98)+_0xbb347b+_0x1b775c(0x5a4)+_0x3398a6[_0x1b775c(0xab2)](0x2)+_0x1b775c(0x902);}else{let _0x4e4197=_0x232e46[_0x1b775c(0x3eb)]('.load-more-btn');if(!_0x4e4197){if(_0x1b775c(0x7cf)===_0x1b775c(0xa77))_0x1d71a6[_0x1b775c(0xafb)](_0x1b775c(0x9db),_0x5a360c=>{const _0x365a36=_0x1b775c,_0x158984=_0x5a360c[_0x365a36(0xce3)][_0x365a36(0x218)][_0x365a36(0xcf5)],_0x5da09b=_0x5a360c[_0x365a36(0xce3)][_0x365a36(0xbbd)];_0x2b8b62['querySelectorAll'](_0x365a36(0x114)+_0x158984+'\x22]')[_0x365a36(0x175)](_0x415a35=>{const _0x371c41=_0x365a36;_0x415a35[_0x371c41(0xbbd)]=_0x5da09b;}),_0x547860();});else{_0x4e4197=document['createElement'](_0x1b775c(0x80c)),_0x4e4197[_0x1b775c(0x65b)]=_0x1b775c(0x131),_0x4e4197[_0x1b775c(0x73e)]=_0x1b775c(0xc14),_0x4e4197[_0x1b775c(0x7d9)][_0x1b775c(0x62d)]=_0x1b775c(0x937),_0x4e4197[_0x1b775c(0x7d9)]['margin']=_0x1b775c(0x602),_0x4e4197[_0x1b775c(0x7d9)][_0x1b775c(0x145)]='8px\x2016px',_0x4e4197['onclick']=()=>{const _0x4c5138=_0x1b775c,_0x13696b=_0x232e46,_0x2d5122=_0x13696b[_0x4c5138(0x3aa)],_0x527ca5=_0x13696b['scrollTop'];_0x35d0f9[_0x4c5138(0xbfb)]+=0x64,_0x3f1b6c(),requestAnimationFrame(()=>{const _0x226614=_0x4c5138,_0x52feb2=_0x13696b[_0x226614(0x3aa)];_0x13696b[_0x226614(0x14f)]=_0x527ca5+(_0x52feb2-_0x2d5122);});};if(_0x232e46['firstChild'])_0x232e46[_0x1b775c(0x12f)](_0x4e4197,_0x232e46[_0x1b775c(0x949)]);else{if(_0x1b775c(0x14e)!=='TejAX')_0x232e46['appendChild'](_0x4e4197);else{_0x3553a2(_0x1b775c(0x788));return;}}}}}}else{if('rhwFa'==='HlNBM')_0x24ee97['textContent']=_0x17051c[_0x1b775c(0x19d)]||'群聊\x20('+_0x4f844f['participantIds'][_0x1b775c(0x968)]+')';else{const _0x2a43f5=_0x232e46[_0x1b775c(0x3eb)](_0x1b775c(0x6ee));if(_0x2a43f5)_0x2a43f5[_0x1b775c(0xb42)]();}}Array[_0x1b775c(0x39e)](_0x232e46['children'])['forEach'](_0x3b9a3d=>{const _0x34f823=_0x1b775c;!_0x3b9a3d[_0x34f823(0x79f)][_0x34f823(0xbbc)](_0x34f823(0x233))&&_0x3b9a3d[_0x34f823(0xb42)]();});const _0xbfa053=_0x319b35[_0x1b775c(0x571)](-_0x35d0f9[_0x1b775c(0xbfb)]);_0xbfa053[_0x1b775c(0x175)](_0x187e2c=>{const _0x11e463=_0x1b775c;if('RhUFE'===_0x11e463(0x47f))_0x19e19a[_0x11e463(0x9c9)]=_0x815141['createObjectURL'](_0x3ee975),_0x23f125[_0x11e463(0x7d9)][_0x11e463(0x31f)]=_0x11e463(0xb91),_0x387c1f[_0x11e463(0x7d9)][_0x11e463(0x822)]=_0x11e463(0x9ba),_0x55441a['style'][_0x11e463(0x4b3)]=_0x11e463(0x701);else{const _0x1c72a6=_0x35d0f9[_0x11e463(0x6b9)][_0x11e463(0x65a)](_0x187e2c);_0x1c72a6>-0x1&&('nTHIc'!==_0x11e463(0x300)?(_0x1fff98[_0x11e463(0x4a1)](_0x11e463(0x8ef),_0x22f0e6),_0x3e97e3&&(_0x50e214['style'][_0x11e463(0x2f8)]='')):_0x38697d(_0x187e2c,_0x1c72a6));}});if(_0x35d0f9[_0x1b775c(0x2eb)]){if(_0x1b775c(0xcb6)==='mTuxD')_0x840b14(_0x3162ab,_0x16b0fa,_0x170669);else{let _0x26a1d4=document['querySelector'](_0x1b775c(0xc48));if(!_0x26a1d4){if(_0x1b775c(0x64d)===_0x1b775c(0x22e))_0x4b3f83[_0x1b775c(0x52e)]('Creating\x20object\x20store:\x20music_library'),_0x28305c[_0x1b775c(0x964)](_0x1b775c(0xb58),{'keyPath':'id'});else{_0x26a1d4=document[_0x1b775c(0x7e9)](_0x1b775c(0x591)),_0x26a1d4['className']='typing-indicator';const _0x10e554=_0x1f3fa9();if(_0x10e554&&_0x10e554[_0x1b775c(0xb12)]===_0x1b775c(0x253)){if('hECtJ'!==_0x1b775c(0xf4))_0x26a1d4[_0x1b775c(0x65b)]=_0x1b775c(0x611);else{const _0x366dd3=_0x1e6844();_0x366dd3&&_0x366dd3['activeListenSession']&&_0x366dd3[_0x1b775c(0xe3)][_0x1b775c(0x26d)]&&(_0x403a1a[_0x1b775c(0x7d9)]['display']=_0x1b775c(0x9d4),_0x567296(()=>_0x2f3358[_0x1b775c(0x79f)][_0x1b775c(0x366)](_0x1b775c(0xa36)),0xa));}}else _0x1b775c(0x1c0)===_0x1b775c(0x1c0)?_0x26a1d4['textContent']=_0x1b775c(0x5ac):_0x1f4b2c['style']['display']=_0x1b775c(0x884);document['getElementById'](_0x1b775c(0x98b))[_0x1b775c(0x364)](_0x26a1d4);}}}}_0xbfa053[_0x1b775c(0x968)]<=_0x35d0f9['displayedMessageCount']&&setTimeout(()=>{const _0x1a4903=_0x1b775c;_0x232e46['scrollTop']=_0x232e46[_0x1a4903(0x3aa)];},0x0);}function _0x38697d(_0x56d2e9,_0x2525e1){const _0xc32628=_0x17d1db,{role:_0xdd2d81,content:_0x5b422d,displayUrl:_0x5e9b5b,image:_0x1bdb2f,senderId:_0x2d699b}=_0x56d2e9,_0xfec98=document[_0xc32628(0xb18)](_0xc32628(0x699)),_0x3d505c=_0x5b422d&&_0x5b422d[_0xc32628(0x2e2)]()[_0xc32628(0x41d)](_0xc32628(0x3e3))&&_0x5b422d[_0xc32628(0x2e2)]()[_0xc32628(0x985)]('</div>');if(_0x3d505c){if(_0xc32628(0x7da)!=='SVOMn')_0x56a296(),_0x5bd6be('worldBook',_0xc32628(0x58a));else{const _0x3e2451=document['createElement'](_0xc32628(0x591));return _0x3e2451['className']='full-width-module-container',_0x3e2451[_0xc32628(0x218)][_0xc32628(0x33d)]=_0x2525e1,_0x3e2451['innerHTML']=_0x5b422d,_0xfec98[_0xc32628(0x364)](_0x3e2451),_0x3e2451;}}const _0x299581=_0xdd2d81===_0xc32628(0xaf6)?'ai':_0xdd2d81,_0x3a72ee=_0x1f3fa9(),_0xd5a5a8=document['createElement'](_0xc32628(0x591));_0xd5a5a8[_0xc32628(0x79f)]['add'](_0xc32628(0xb95),_0x299581),_0xd5a5a8[_0xc32628(0x218)][_0xc32628(0x33d)]=_0x2525e1;const _0x5958b0=document[_0xc32628(0x7e9)]('div');_0x5958b0[_0xc32628(0x73e)]='message-bubble-row';let _0x29957a='',_0x143ed1='',_0x20a548=null;if(_0xdd2d81===_0xc32628(0x809)){const _0x542b42=_0x5f52db(_0x35d0f9[_0xc32628(0xba6)]);_0x29957a=_0x542b42['avatar']||_0x395094;const _0x2bcb97=_0x45939a(_0x3a72ee?.[_0xc32628(0x8f1)][0x0]);_0x2bcb97&&(_0x143ed1=_0x2bcb97[_0xc32628(0x33f)]||'');}else{if(_0x3a72ee?.[_0xc32628(0xb12)]===_0xc32628(0x869))_0x20a548=_0x45939a(_0x3a72ee['participantIds'][0x0]);else _0x3a72ee?.[_0xc32628(0xb12)]==='group'&&_0x2d699b&&(_0xc32628(0xb37)===_0xc32628(0x6cb)?_0x7c4640[_0xc32628(0x4a1)](_0xc32628(0x79d)+_0x4d0c85['id'],_0x46d2bd):_0x20a548=_0x45939a(_0x2d699b));_0x29957a=_0x20a548?.[_0xc32628(0x36b)]||_0x20a236,_0x143ed1=_0x20a548?.[_0xc32628(0xc08)]||'';}const _0x5d8f91=_0x331dae(_0x29957a,_0x143ed1);if(_0xdd2d81!=='user'&&_0x20a548){const _0x1694c7=_0x5d8f91[_0xc32628(0x3eb)](_0xc32628(0x779));_0x5288fd(_0xc32628(0x6eb)+_0x20a548['id'])['then'](_0x10e9b5=>{const _0x4a8e5b=_0xc32628;_0x10e9b5&&(_0x1694c7['src']=URL[_0x4a8e5b(0x900)](_0x10e9b5));});}const _0x3d67a0=document['createElement'](_0xc32628(0x591));_0x3d67a0[_0xc32628(0x79f)][_0xc32628(0x366)]('message',_0x299581);if(_0x3a72ee?.[_0xc32628(0xb12)]===_0xc32628(0x869)){if('iQaZL'==='iQaZL'){const _0x1fe185=_0x3a72ee['participantIds'][0x0];_0x3d67a0[_0xc32628(0x79f)][_0xc32628(0x366)]('bubble-'+_0x1fe185);}else _0x52b496['error'](_0xc32628(0x5ec),_0x27039f);}if(_0x56d2e9[_0xc32628(0x659)]){const _0x190b4f=document[_0xc32628(0x7e9)](_0xc32628(0x591));_0x190b4f[_0xc32628(0x73e)]=_0xc32628(0x328),_0x190b4f['innerHTML']=_0xc32628(0x669)+_0x56d2e9[_0xc32628(0x659)][_0xc32628(0x7b0)]+_0xc32628(0xc68)+_0x56d2e9['quotedMessage']['content']+_0xc32628(0x9ac),_0x3d67a0[_0xc32628(0x364)](_0x190b4f);}if(_0x5e9b5b)_0x3d67a0[_0xc32628(0x79f)][_0xc32628(0x366)](_0xc32628(0x881)),_0x3d67a0['innerHTML']+='<img\x20src=\x22'+_0x5e9b5b+_0xc32628(0x736);else{if(_0x56d2e9[_0xc32628(0x89a)]||_0x56d2e9[_0xc32628(0x650)]){if(_0xc32628(0xae0)===_0xc32628(0xab1))_0x3ff426[_0xc32628(0x7d9)][_0xc32628(0x31f)]=_0xc32628(0x9ba);else{_0x3d67a0['classList'][_0xc32628(0x366)]('image');const _0x14ace9=document[_0xc32628(0x7e9)](_0xc32628(0x6d6));_0x14ace9[_0xc32628(0x79f)][_0xc32628(0x366)](_0xc32628(0xcf6)),_0x3d67a0[_0xc32628(0x364)](_0x14ace9);if(_0x56d2e9[_0xc32628(0x89a)])'vzfFf'!==_0xc32628(0xba7)?!_0x4393a2[_0xc32628(0xcf5)]&&(_0x1afca2[_0xc32628(0xcf5)]='default'):_0x14ace9['src']=_0x56d2e9[_0xc32628(0x89a)];else{if('vzzUL'==='LpKbx')return _0x2e4de8[_0xc32628(0x185)](_0x42ec0e,_0x17b6e8+0x1);else _0x14ace9['src']='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',_0x5288fd(_0x56d2e9[_0xc32628(0x650)])[_0xc32628(0xa34)](_0x5c7a0b=>{const _0x5ec0c4=_0xc32628;if(_0x5ec0c4(0x608)===_0x5ec0c4(0x350)){let _0x13a33a=_0x54f840['worldBooks'][_0x5ec0c4(0x9cd)](_0x361060=>_0x361060[_0x5ec0c4(0x19d)]===_0x493c20[_0x5ec0c4(0x19d)]&&(_0x361060[_0x5ec0c4(0xcf5)]||'default')===(_0x4587d8[_0x5ec0c4(0xcf5)]||_0x5ec0c4(0xb17)));if(_0x13a33a)_0x93cf26[_0x5ec0c4(0xb2f)](_0x13a33a['id']);else{const _0x209dc9={'id':_0x5ec0c4(0x546)+_0x36fadb[_0x5ec0c4(0x5ee)]()+'_'+_0x113c8f[_0x5ec0c4(0xeb)](),'name':_0x4a8aae[_0x5ec0c4(0x19d)],'content':_0x230acb[_0x5ec0c4(0x9bc)],'categoryId':_0x5f50d1[_0x5ec0c4(0xcf5)]||_0x5ec0c4(0xb17)};_0x31568f[_0x5ec0c4(0x38f)][_0x5ec0c4(0xb2f)](_0x209dc9),_0x2507eb[_0x5ec0c4(0xb2f)](_0x209dc9['id']);}}else{if(_0x5c7a0b)_0x14ace9[_0x5ec0c4(0x9c9)]=URL[_0x5ec0c4(0x900)](_0x5c7a0b);else _0x14ace9['alt']=_0x5ec0c4(0x371);}})[_0xc32628(0x6cd)](()=>_0x14ace9[_0xc32628(0xbe9)]='图片加载失败');}_0x5b422d&&(_0x3d67a0['innerHTML']+='<p\x20style=\x22margin-top:\x205px;\x22>'+_0x5b422d+_0xc32628(0xb40));}}else{if(_0x56d2e9[_0xc32628(0xb12)]===_0xc32628(0x986)){_0x3d67a0[_0xc32628(0x79f)][_0xc32628(0x366)](_0xc32628(0x986));const _0x195ba0=_0x56d2e9[_0xc32628(0x129)]===_0xc32628(0x809)?_0x5f52db(_0x35d0f9[_0xc32628(0xba6)]):_0x45939a(_0x56d2e9[_0xc32628(0xbc0)]),_0x2ad60b=_0x56d2e9['recipientId']===_0x5f52db(_0x35d0f9[_0xc32628(0xba6)])['id']?_0x5f52db(_0x35d0f9['activeChatId']):_0x45939a(_0x56d2e9[_0xc32628(0xa9a)]),_0x51fe75=_0x195ba0?.[_0xc32628(0x19d)]?_0x195ba0[_0xc32628(0x19d)]+_0xc32628(0x180):'转账',_0x2e1fbf=_0x2ad60b?.['name']?_0xc32628(0x254)+_0x2ad60b['name']:'转账';_0x3d67a0[_0xc32628(0x280)]+=_0xc32628(0x1f4)+_0x51fe75+_0xc32628(0x4c9)+_0x56d2e9[_0xc32628(0xcc8)][_0xc32628(0xab2)](0x2)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>'+_0x2e1fbf+_0xc32628(0xe2);}else{if(_0x56d2e9[_0xc32628(0xb12)]===_0xc32628(0x287)){if(_0xc32628(0x24e)==='gYRaL'){_0x397f75(![]),_0x4ad725(_0xc32628(0xa52));return;}else{_0x3d67a0['classList'][_0xc32628(0x366)]('music');const _0x365eff=document[_0xc32628(0x7e9)](_0xc32628(0x591));_0x365eff[_0xc32628(0x73e)]='listen-together-card\x20no-action-modal';const _0x199994=_0x56d2e9[_0xc32628(0x129)]===_0xc32628(0x809)?_0x5f52db(_0x35d0f9['activeChatId'])[_0xc32628(0x19d)]||'你':_0x45939a(_0x56d2e9[_0xc32628(0xbc0)])?.[_0xc32628(0x19d)]||'TA',_0x3ddd05=_0xc32628(0xa9e)+_0x56d2e9[_0xc32628(0xaa4)],_0x23815e=_0xc32628(0xc3b)+_0x3ddd05+_0xc32628(0xce1)+_0x20a236+'\x22>';if(_0x56d2e9[_0xc32628(0x4cb)]){if(_0xc32628(0x50a)!==_0xc32628(0x51d))_0x365eff['innerHTML']=_0xc32628(0x2f7)+_0x23815e+'<div\x20class=\x22listen-together-info\x22><div\x20class=\x22title\x22>'+_0x56d2e9[_0xc32628(0x596)]+'</div><div\x20class=\x22artist\x22>'+_0x56d2e9['artist']+'</div></div></div>';else{const _0xd5551c=_0x4dd8b2['split']('--');_0xd5551c[_0xc32628(0x968)]===0x2&&_0xd5551c[0x0][_0xc32628(0x2e2)]()&&_0xd5551c[0x1][_0xc32628(0x2e2)]()['startsWith'](_0xc32628(0xc78))?_0x563ef3[_0xc32628(0xb2f)]({'name':_0xd5551c[0x0][_0xc32628(0x2e2)](),'url':_0xd5551c[0x1]['trim']()}):_0x2916e0++;}}else _0xc32628(0x293)===_0xc32628(0x1e4)?(_0x4e5448[_0xc32628(0x4a1)](_0xc32628(0xb62),_0x18a6fa),_0x8a54b6({'role':'assistant','content':'错误:\x20'+_0x57b04b['message']},_0x4d25f0[_0xc32628(0x6b9)][_0xc32628(0x968)]-0x1)):_0x365eff[_0xc32628(0x280)]=_0xc32628(0x951)+_0x199994+'\x20邀请你一起听歌</div><div\x20class=\x22listen-together-song\x22>'+_0x23815e+_0xc32628(0xc24)+_0x56d2e9[_0xc32628(0x596)]+_0xc32628(0x30b)+_0x56d2e9['artist']+'</div></div></div><div\x20class=\x22listen-together-actions\x22><button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22'+_0x56d2e9[_0xc32628(0x933)]+_0xc32628(0x842);_0x3d67a0[_0xc32628(0x364)](_0x365eff);if(_0x56d2e9[_0xc32628(0x67f)]){if(_0xc32628(0xaaf)===_0xc32628(0xaaf))setTimeout(()=>{const _0x2ba5f4=_0xc32628;if(_0x2ba5f4(0x2d0)===_0x2ba5f4(0x593)){const _0x95672=_0x3285af[_0x2ba5f4(0xb18)](_0x2ba5f4(0x411));if(_0x95672)_0x95672[_0x2ba5f4(0x65b)]='❚❚';}else _0x5288fd(_0x56d2e9[_0x2ba5f4(0x67f)])[_0x2ba5f4(0xa34)](_0x5ef399=>{const _0x254eb7=_0x2ba5f4;if(_0x254eb7(0x71b)==='zvCcK'){const _0x10ec0d=document['getElementById'](_0x3ddd05);if(_0x10ec0d&&_0x5ef399)_0x10ec0d[_0x254eb7(0x9c9)]=URL[_0x254eb7(0x900)](_0x5ef399);}else _0x63b294(),_0x39816a(_0x254eb7(0x94a),_0x254eb7(0x58a));});},0x0);else{const _0x4bb5df=new _0x59e8a5(_0x52b306[_0xc32628(0xaa4)]),_0x11b9d4=_0x4d6d9a(_0x4bb5df);_0x1db632+=_0xc32628(0x873)+_0x11b9d4+'\x20\x0a';const _0x54d6f1=_0x48a9cc['toDateString'](),_0x458a78=_0x4bb5df[_0xc32628(0x224)](),_0x4aa2fb=new _0x406d0e();_0x4aa2fb[_0xc32628(0x827)](_0x959d64[_0xc32628(0xb2b)]()-0x1);const _0x13f7e4=_0x4aa2fb[_0xc32628(0x224)]();if(_0x54d6f1===_0x458a78){const _0x5c4a0f=(_0x464361-_0x4bb5df)/(0x3e8*0x3c);_0x4dfb6d+='-\x20**\x20状态提示\x20**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a';}else{if(_0x13f7e4===_0x458a78)_0x3ba1df+=_0xc32628(0x94f);else{const _0x7eea8d=_0x43873a[_0xc32628(0x87d)]((_0x52362f-_0x4bb5df)/(0x3e8*0x3c*0x3c*0x18));_0x110413+=_0xc32628(0xb2e)+_0x7eea8d+_0xc32628(0x909);}}}}}}else{if(_0x56d2e9[_0xc32628(0xb12)]===_0xc32628(0xcc1)&&_0x56d2e9[_0xc32628(0x596)]){_0x3d67a0[_0xc32628(0x79f)][_0xc32628(0x366)]('music');const _0x31b874=document[_0xc32628(0x7e9)]('div');_0x31b874['className']=_0xc32628(0x743),_0x31b874[_0xc32628(0x218)]['musicId']=_0xc32628(0x4d4)+_0x56d2e9[_0xc32628(0xaa4)];const _0x194dcb=_0xc32628(0xa9e)+_0x56d2e9[_0xc32628(0xaa4)];let _0xb680b5=_0xc32628(0x64e)+_0x20a236+'\x22\x20id=\x22'+_0x194dcb+'\x22\x20class=\x22music-share-cover\x22>';_0x31b874[_0xc32628(0x280)]=_0xc32628(0x9df)+_0xb680b5+_0xc32628(0x744)+_0x56d2e9['songName']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>'+_0x56d2e9[_0xc32628(0xb52)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>'+(_0x56d2e9[_0xc32628(0xc5e)]?'▶':'⚠')+'</div>',_0x3d67a0[_0xc32628(0x364)](_0x31b874),setTimeout(()=>{const _0x583306=_0xc32628,_0x591d68=document[_0x583306(0xb18)](_0x194dcb);if(!_0x591d68)return;if(_0x56d2e9['coverId'])_0x583306(0x187)!==_0x583306(0x875)?_0x5288fd(_0x56d2e9[_0x583306(0x67f)])[_0x583306(0xa34)](_0x3c1505=>{if(_0x3c1505)_0x591d68['src']=URL['createObjectURL'](_0x3c1505);}):(_0x57ed6d[_0x583306(0x705)]=!![],_0x1a1d7a());else _0x56d2e9[_0x583306(0x22d)]&&(_0x583306(0xa7e)!==_0x583306(0x329)?_0x591d68[_0x583306(0x9c9)]=_0x56d2e9[_0x583306(0x22d)]:(_0x3cf29a[_0x583306(0x79f)][_0x583306(0xb42)]('visible'),_0x20ad3c[_0x583306(0x79f)][_0x583306(0xb42)](_0x583306(0xc46))));},0x0),_0x56d2e9['playableUrl']&&_0x31b874['addEventListener'](_0xc32628(0x9db),function(){const _0x321aac=_0xc32628;if(_0x321aac(0x5c3)===_0x321aac(0xc01))_0x4b97f2[_0x321aac(0x4a1)](_0x321aac(0x8c1),_0x83af8a),_0x101aa5('导出失败了，哼:\x20'+_0x44da09[_0x321aac(0x5a1)]);else{const _0x3d97ab=document[_0x321aac(0xb18)]('audio-player'),_0x2d1f0e=document[_0x321aac(0x9c6)](_0x321aac(0x3b8)),_0x42520e=this['querySelector']('.music-share-play-icon'),_0x3065f4=_0x3d97ab[_0x321aac(0x9c9)]['includes'](_0x56d2e9[_0x321aac(0xc5e)])&&!_0x3d97ab[_0x321aac(0x976)];_0x2d1f0e[_0x321aac(0x175)](_0x2284a4=>{const _0x2d6143=_0x321aac;if(_0x2d6143(0x21a)==='uSgUJ')_0x2284a4!==_0x42520e&&(_0x2284a4['textContent']='▶');else{const _0x394b56=_0x2f06e2['parse'](_0x360655),_0x2ab184={..._0x4a56f5},_0x4cbaab={..._0x2ab184,..._0x394b56};_0x4cbaab[_0x2d6143(0x2e8)]={..._0x2ab184[_0x2d6143(0x2e8)],..._0x394b56[_0x2d6143(0x2e8)]||{}},_0x4cbaab[_0x2d6143(0x69e)]={..._0x2ab184['apiSettings'],..._0x394b56['apiSettings']||{}},_0x51e1a2[_0x2d6143(0xbdd)](_0x105668,_0x4cbaab);}}),!_0x3065f4&&(_0x321aac(0x520)===_0x321aac(0x60e)?_0x11d3bf(_0x321aac(0xb45)):document[_0x321aac(0xb18)](_0x321aac(0x996))['pause']()),_0x3065f4?(_0x3d97ab[_0x321aac(0x639)](),_0x42520e['textContent']='▶'):(_0x3d97ab[_0x321aac(0x9c9)]=_0x56d2e9['playableUrl'],_0x3d97ab['play'](),_0x42520e['textContent']='❚❚');}});}else{if(_0x5b422d){const _0xf0a109=document['createElement']('p');_0xf0a109['innerHTML']=_0x5b422d,_0xf0a109[_0xc32628(0x7d9)][_0xc32628(0x4d2)]='0',_0x3d67a0['appendChild'](_0xf0a109);}}}}}}_0x299581===_0xc32628(0x809)?(_0x5958b0['appendChild'](_0x3d67a0),_0x5958b0[_0xc32628(0x364)](_0x5d8f91)):(_0x5958b0[_0xc32628(0x364)](_0x5d8f91),_0x5958b0[_0xc32628(0x364)](_0x3d67a0));_0xd5a5a8['appendChild'](_0x5958b0);const _0xd20e97=document[_0xc32628(0x7e9)](_0xc32628(0x591));return _0xd20e97['className']=_0xc32628(0xaa4),_0xd20e97['textContent']=_0x29f7d2(_0x56d2e9['timestamp']),_0xd5a5a8[_0xc32628(0x364)](_0xd20e97),_0xfec98['appendChild'](_0xd5a5a8),_0xd5a5a8;}let _0x176bde=null;function _0x5e9c0a(_0x83e255){const _0x593900=_0x17d1db;if(window[_0x593900(0x436)]()[_0x593900(0xa35)]()||_0x83e255[_0x593900(0x80c)]!==0x0){if(_0x593900(0xbf6)==='omAaP'){const _0x1a5060=_0x36fea3['querySelector'](_0x593900(0xc48));_0x1a5060&&_0x1a5060[_0x593900(0xb42)]();const _0x365294=_0x3e07cd[_0x593900(0x3eb)]('.screen.active');if(_0x365294&&(_0x365294['id']===_0x593900(0xb29)||_0x365294['id']==='chat-screen'))_0x564d18();else{const _0x4f7f3a=_0x38d234[_0x593900(0x9c6)](_0x593900(0x762));_0x4f7f3a[_0x593900(0x175)](_0x408889=>_0x408889[_0x593900(0xb42)]());}}else return;}const _0x3c7f3f=_0x83e255['target'][_0x593900(0x58e)](_0x593900(0xca9)),_0x4f86a9=_0x83e255[_0x593900(0xce3)][_0x593900(0x58e)](_0x593900(0xb51));if(!_0x3c7f3f||_0x4f86a9)return;const _0x19f350=parseInt(_0x3c7f3f[_0x593900(0x218)][_0x593900(0x33d)],0xa);if(isNaN(_0x19f350))return;const _0x3a5638=()=>{const _0x2c0aab=_0x593900;if('NHLoY'!=='NHLoY'){const _0x522a87=_0x2c0aab(0x1f0)+_0x237021;let _0x5a646d=_0x13036b[_0x2c0aab(0xb18)](_0x522a87);if(_0x5a646d)return;const _0x30cc4c=_0x2c0aab(0x497)+_0x522a87+'\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xfc5ab6==='ai'?_0x2c0aab(0x3e4):'')+_0x2c0aab(0x3ff);_0x482dec[_0x2c0aab(0x3f0)][_0x2c0aab(0xbb4)](_0x2c0aab(0xc9e),_0x30cc4c);const _0x2ff8d6=_0x999281[_0x2c0aab(0xb18)](_0x522a87),_0x2cf7e2=()=>_0x2ff8d6[_0x2c0aab(0xb42)]();_0x2ff8d6[_0x2c0aab(0x3eb)](_0x2c0aab(0xa1b))[_0x2c0aab(0x8df)]=_0x2cf7e2,_0x2ff8d6[_0x2c0aab(0x3eb)](_0x2c0aab(0x69f))[_0x2c0aab(0x8df)]=_0x2cf7e2,_0x2ff8d6[_0x2c0aab(0x3eb)](_0x2c0aab(0x50f))[_0x2c0aab(0x8df)]=()=>{_0x4910d8(_0x1267c6),_0x2cf7e2();},_0x2377f1==='ai'&&(_0x2ff8d6[_0x2c0aab(0x3eb)](_0x2c0aab(0x730))[_0x2c0aab(0x8df)]=()=>{_0x579337(_0x3239e5),_0x2cf7e2();});}else clearTimeout(_0x176bde),document[_0x2c0aab(0x854)](_0x2c0aab(0xc4f),_0x3a5638),document[_0x2c0aab(0x854)](_0x2c0aab(0x9ff),_0x3a5638),document['removeEventListener'](_0x2c0aab(0x476),_0x3a5638),document[_0x2c0aab(0x854)](_0x2c0aab(0x2dd),_0x3a5638);},_0x33a97a=()=>{const _0x297670=_0x593900;_0x3a5638(),_0x176bde=setTimeout(()=>{_0x44e893(_0x19f350);},0x258),document[_0x297670(0xafb)]('mouseup',_0x3a5638),document['addEventListener'](_0x297670(0x9ff),_0x3a5638),document[_0x297670(0xafb)]('touchcancel',_0x3a5638),document['addEventListener'](_0x297670(0x2dd),_0x3a5638);};_0x33a97a();}const _0x15acea=document['getElementById'](_0x17d1db(0x699));_0x15acea&&(_0x15acea[_0x17d1db(0xafb)](_0x17d1db(0x6b5),_0x5e9c0a),_0x15acea['addEventListener'](_0x17d1db(0x983),_0x5e9c0a,{'passive':![]}),_0x15acea[_0x17d1db(0xafb)](_0x17d1db(0xa6b),_0x5e93d3=>_0x5e93d3[_0x17d1db(0xa05)]()));function _0x21b732(){const _0x25d924=_0x17d1db,_0x46f8e3=_0x1f3fa9();if(!_0x46f8e3){_0x510206[_0x25d924(0x65b)]=_0x25d924(0x676);return;}if(_0x46f8e3['type']===_0x25d924(0x869)){if(_0x25d924(0xad9)===_0x25d924(0xad9)){const _0x80dc1a=_0x45939a(_0x46f8e3[_0x25d924(0x8f1)][0x0]);_0x510206[_0x25d924(0x65b)]=_0x80dc1a?_0x80dc1a[_0x25d924(0x19d)]:_0x25d924(0x753);}else{_0x4fa929(![]),_0x11f3f5(_0x25d924(0x388));return;}}else{if(_0x25d924(0x90f)===_0x25d924(0x97d)){let _0x5a3ba1=_0x30829f[_0x25d924(0x3eb)](_0x25d924(0xc48));if(!_0x5a3ba1){_0x5a3ba1=_0x1f480d['createElement'](_0x25d924(0x591)),_0x5a3ba1[_0x25d924(0x73e)]=_0x25d924(0x746);const _0x4eb771=_0x3a20be();_0x4eb771&&_0x4eb771[_0x25d924(0xb12)]==='group'?_0x5a3ba1[_0x25d924(0x65b)]='群友正在输入...':_0x5a3ba1[_0x25d924(0x65b)]=_0x25d924(0x5ac),_0x39ef67[_0x25d924(0xb18)]('chat-view-pane')[_0x25d924(0x364)](_0x5a3ba1);}}else _0x510206[_0x25d924(0x65b)]=_0x46f8e3[_0x25d924(0x19d)]||'群聊\x20('+_0x46f8e3[_0x25d924(0x8f1)][_0x25d924(0x968)]+')';}}function _0x242d9b(_0x152be8){const _0x483d22=_0x17d1db,_0x4866a8=document['querySelector'](_0x483d22(0xc48));_0x4866a8&&_0x4866a8[_0x483d22(0xb42)]();const _0xe204f2=document[_0x483d22(0x3eb)](_0x483d22(0xaea));if(_0xe204f2&&(_0xe204f2['id']===_0x483d22(0xb29)||_0xe204f2['id']===_0x483d22(0x81c)))_0x65b693();else{const _0x4edcd4=document[_0x483d22(0x9c6)](_0x483d22(0x762));_0x4edcd4[_0x483d22(0x175)](_0x46f7f0=>_0x46f7f0[_0x483d22(0xb42)]());}}function _0x1a29ae(){const _0x460b80=_0x17d1db;_0x35d0f9[_0x460b80(0x2eb)]&&_0x35d0f9[_0x460b80(0x15e)]&&(console[_0x460b80(0x52e)](_0x460b80(0x83a)),_0x35d0f9[_0x460b80(0x15e)][_0x460b80(0x3fc)](_0x460b80(0x4e8)),_0x35d0f9[_0x460b80(0x15e)]=null),_0x35d0f9[_0x460b80(0x2eb)]=![],_0x242d9b(![]);}function _0x1f3fa9(){const _0x250a08=_0x17d1db;if(_0x250a08(0x6a5)===_0x250a08(0x6a5))return _0x35d0f9[_0x250a08(0xa6c)][_0x250a08(0x9cd)](_0x7a51b=>_0x7a51b['id']===_0x35d0f9[_0x250a08(0xba6)]);else{const _0x4adf01=_0x29c237,_0x56a167=_0x4adf01['scrollHeight'],_0x5d8dd8=_0x4adf01[_0x250a08(0x14f)];_0x57dc2d[_0x250a08(0xbfb)]+=0x64,_0x5185f4(),_0x24cd33(()=>{const _0x4d37f9=_0x250a08,_0x62fd5f=_0x4adf01[_0x4d37f9(0x3aa)];_0x4adf01[_0x4d37f9(0x14f)]=_0x5d8dd8+(_0x62fd5f-_0x56a167);});}}function _0x45939a(_0x3b34a4){const _0x4af7e8=_0x17d1db;if('Bqgwe'!==_0x4af7e8(0xaf7)){const _0x4aa45b=_0x366bf3[_0x4af7e8(0xcf5)]||_0x4af7e8(0xb17);return!_0x297ecf[_0x4aa45b]&&(_0x348e66[_0x4aa45b]=[]),_0x3f1d6d[_0x4aa45b]['push'](_0x4abd13),_0x188150;}else return _0x35d0f9[_0x4af7e8(0x1f2)][_0x4af7e8(0x9cd)](_0x36e708=>_0x36e708['id']===_0x3b34a4);}function _0x1d929b(_0x3cba80){const _0x288da1=_0x17d1db;if(_0x288da1(0xc42)!==_0x288da1(0xc42)){if(!_0x3e4c28[_0x288da1(0x9dd)]||_0x3034a3[_0x288da1(0x9dd)]['length']===0x0){_0x132999[_0x288da1(0x4a1)](_0x288da1(0x23a));return;}const _0x4e03f2=_0x8f1184['friendCircles'][0x0];if(_0x4e03f2[_0x288da1(0x69d)]['length']<0x2){_0x5848b6['error'](_0x288da1(0x198)+_0x4e03f2[_0x288da1(0x19d)]+_0x288da1(0xc9c));return;}const _0x183b5c={'id':'test_post_'+_0x2b66e3['now'](),'authorType':_0x288da1(0xa80),'authorId':_0x4e03f2['memberCharacterIds'][0x0],'content':_0x288da1(0xbc5),'timestamp':_0x429a32['now'](),'likes':[_0x4e03f2[_0x288da1(0x69d)][0x1]],'comments':[{'commentId':'c_'+_0x56e816[_0x288da1(0x5ee)](),'authorId':_0x4e03f2[_0x288da1(0x69d)][0x1],'content':'赞同！渲染效果一级棒！'}]};_0x4e03f2[_0x288da1(0x416)]['push'](_0x183b5c),_0x194d78(),_0x381088[_0x288da1(0x52e)](_0x288da1(0x7ff)+_0x4e03f2[_0x288da1(0x19d)]+_0x288da1(0xb36)),_0x22746f('测试动态已添加！');}else{_0x35d0f9['characters']=_0x35d0f9[_0x288da1(0x1f2)][_0x288da1(0x485)](_0x36e64c=>_0x36e64c['id']!==_0x3cba80),_0x35d0f9['chats'][_0x288da1(0x175)](_0x486d80=>{const _0x5a41f2=_0x288da1;_0x486d80[_0x5a41f2(0xb12)]===_0x5a41f2(0x253)&&(_0x5a41f2(0x308)===_0x5a41f2(0x308)?_0x486d80[_0x5a41f2(0x8f1)]=_0x486d80['participantIds'][_0x5a41f2(0x485)](_0x3433d3=>_0x3433d3!==_0x3cba80):(_0x24d323[_0x5a41f2(0x17b)]=_0x2c5cf4,_0x473222[_0x5a41f2(0x863)]=_0xe17e86,_0x58d28e[_0x5a41f2(0x705)]=![],_0x23c72c()));});const _0x281003=_0x35d0f9['chats'][_0x288da1(0x9cd)](_0xe2616e=>_0xe2616e[_0x288da1(0xb12)]===_0x288da1(0x869)&&_0xe2616e['participantIds'][_0x288da1(0xb63)](_0x3cba80));_0x281003&&(_0x288da1(0x5a8)!=='tFMJh'?_0x345b8b(_0x281003['id']):(_0x55fca6[_0x288da1(0x58f)]['setMonth'](_0x56e119['currentDate']['getMonth']()+0x1),_0x46a914())),_0x35d0f9[_0x288da1(0xa6c)]=_0x35d0f9[_0x288da1(0xa6c)]['filter'](_0x30f06d=>_0x30f06d[_0x288da1(0xb12)]!==_0x288da1(0x253)||_0x30f06d[_0x288da1(0x8f1)][_0x288da1(0x968)]>0x1),_0x5c9c95(),_0x24185b();}}function _0x345b8b(_0x5e3aac){const _0x1f3477=_0x17d1db;if(_0x1f3477(0x903)===_0x1f3477(0x903)){_0x35d0f9['chats']=_0x35d0f9['chats']['filter'](_0x328bda=>_0x328bda['id']!==_0x5e3aac);try{_0x1f3477(0xaa0)!==_0x1f3477(0xaa0)?_0x51ef98[_0x1f3477(0xb18)](_0x1f3477(0x21d))[_0x1f3477(0x9db)]():localStorage[_0x1f3477(0x82a)](_0x1f3477(0x392)+_0x5e3aac);}catch(_0x353667){console[_0x1f3477(0x4a1)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20'+_0x5e3aac,_0x353667);}if(_0x35d0f9[_0x1f3477(0xba6)]===_0x5e3aac){if(_0x1f3477(0xec)!==_0x1f3477(0xec)){const _0x2c7691=_0x3ba209(_0x1d1ef1[_0x1f3477(0x76b)]())[_0x1f3477(0x839)](0x2,'0'),_0x39735b=_0x14d357(_0xe1acd8[_0x1f3477(0x553)]())[_0x1f3477(0x839)](0x2,'0');_0x55e812[_0x1f3477(0x65b)]=_0x2c7691+':'+_0x39735b;const _0x556000=_0x2cda7b['getMonth']()+0x1,_0x4efb20=_0x5d7b98[_0x1f3477(0xb2b)](),_0x2e6b50=[_0x1f3477(0x99f),_0x1f3477(0x6d5),_0x1f3477(0x85c),_0x1f3477(0x4f3),_0x1f3477(0x25b),_0x1f3477(0xa98),_0x1f3477(0x634)][_0xb8eb19['getDay']()];_0x87e741[_0x1f3477(0x65b)]=_0x556000+'月'+_0x4efb20+'日\x20'+_0x2e6b50;}else _0x35d0f9['activeChatId']=_0x35d0f9[_0x1f3477(0xa6c)][0x0]?.['id']||null,_0x1c8dfc(_0x35d0f9[_0x1f3477(0xba6)]);}_0x5c9c95();}else{const _0x635b7d=_0x507940();if(_0x635b7d&&_0x635b7d[_0x1f3477(0xb12)]===_0x1f3477(0x869))_0x37c04d(_0x635b7d['participantIds'][0x0]);else _0x635b7d&&_0x635b7d[_0x1f3477(0xb12)]==='group'&&_0x333261(_0x635b7d['id']);}}async function _0x1c8dfc(_0x7f07ea){const _0x3a0a8f=_0x17d1db;if(_0x3a0a8f(0x165)===_0x3a0a8f(0xa03))_0x2ec457+='-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概'+_0x4fd97c[_0x3a0a8f(0x87d)](_0x2b60b5/0x3c)+'小时前），可以简单问候一下对方现在的状态。\x0a';else{_0x35d0f9[_0x3a0a8f(0xba6)]!==_0x7f07ea&&(_0x3a0a8f(0x54a)!==_0x3a0a8f(0x75a)?(_0x1a29ae(),_0x35d0f9[_0x3a0a8f(0xbfb)]=0x64):_0x2a059b[_0x3a0a8f(0x65b)]='（直播已暂停）');if(!_0x7f07ea){_0x35d0f9[_0x3a0a8f(0xba6)]=null,_0x5c9c95(),_0x53f26d(![]),document[_0x3a0a8f(0xb18)](_0x3a0a8f(0x98b))[_0x3a0a8f(0x7d9)]['backgroundImage']='';return;}_0x35d0f9[_0x3a0a8f(0xba6)]=_0x7f07ea,_0x5c9c95(),_0x21b732(),_0x232e46['innerHTML']='',_0x13f6ba(!![],_0x3a0a8f(0x404)),setTimeout(async()=>{const _0x143558=_0x3a0a8f;if(_0x143558(0x6f2)!=='avWVE')try{if(_0x143558(0x105)===_0x143558(0x807))_0x17c794[_0x143558(0x9c9)]=_0x54427d[_0x143558(0x900)](_0x15f091),_0x38905f[_0x143558(0x7d9)][_0x143558(0x31f)]='block',_0x52c2c7['style'][_0x143558(0x822)]='none';else{_0x222d8c();const _0xb21941=_0x1f3fa9(),_0x40a287=document[_0x143558(0xb18)](_0x143558(0x98b));let _0x4cee42=null;if(_0xb21941){if('WmYkU'==='IQgCa'){_0x5644d5('好友圈数据升级完成，迁移了\x20'+_0x27d74f+_0x143558(0x58d)),_0x20aec0(()=>_0x5d0346['reload'](),0x5dc);return;}else{if(_0xb21941[_0x143558(0xb12)]===_0x143558(0x869)){if(_0x143558(0xcdd)!==_0x143558(0x7fd)){const _0x5dc1be=_0xb21941[_0x143558(0x8f1)][0x0];_0x36ca7f(_0x5dc1be),_0x4cee42=await _0x5288fd(_0x143558(0x7ef)+_0x5dc1be);}else _0x4c8ef5[_0x143558(0x73b)]=_0x437ccb,_0x4dfe10();}else _0x4cee42=await _0x5288fd(_0x143558(0x289)+_0xb21941['id']);_0x4cee42?(_0x40a287[_0x143558(0x7d9)][_0x143558(0x2f8)]=_0x143558(0x575)+URL[_0x143558(0x900)](_0x4cee42)+'\x27)',_0x40a287[_0x143558(0x7d9)][_0x143558(0x133)]=_0x143558(0x2d5),_0x40a287[_0x143558(0x7d9)]['backgroundPosition']=_0x143558(0xb99)):_0x40a287[_0x143558(0x7d9)][_0x143558(0x2f8)]='';}}_0x3f1b6c();}}catch(_0xa47d39){if('tJEZM'!==_0x143558(0xe7)){const _0xabd57=_0x26f640[_0x143558(0xb18)](_0x143558(0x63d));if(!_0xabd57)return;_0xabd57[_0x143558(0xbbd)]=_0x4a747d[_0x143558(0x2e8)][_0x143558(0x118)]||![],_0xabd57[_0x143558(0xafb)](_0x143558(0x326),()=>{const _0x3c0b17=_0x143558;_0x34bc3d['preferences'][_0x3c0b17(0x118)]=_0xabd57[_0x3c0b17(0xbbd)],_0x2c1b26(),_0x453788();});}else console[_0x143558(0x4a1)](_0x143558(0x539),_0xa47d39),_0x28dfd2('加载聊天失败:\x20'+_0xa47d39[_0x143558(0x5a1)]);}finally{_0x13f6ba(![]);}else _0x1832cb(_0x478ba4[_0x143558(0x67f)])['then'](_0x3c35ee=>{const _0x5017d5=_0x143558,_0x4b1d87=_0x898d5e[_0x5017d5(0xb18)](_0x45459b);if(_0x4b1d87&&_0x3c35ee)_0x4b1d87[_0x5017d5(0x9c9)]=_0x23de94['createObjectURL'](_0x3c35ee);});},0x32);}}async function _0x3b5410(){const _0x559cd3=_0x17d1db;if('FXqPf'!==_0x559cd3(0x1f8)){const _0x664d4d=_0x18e561(_0x5cfdba['id']);if(!_0x664d4d||!_0x664d4d['id'])return _0x36c4a3[_0x559cd3(0x4a1)](_0x559cd3(0xc8f)),null;_0x54fde9[_0x559cd3(0x2a3)][_0x559cd3(0xb2f)]({'id':'event_ai_'+_0x2b6a3d['now'](),'date':_0x6f7234[_0x559cd3(0x12b)],'type':_0x2f0ebf[_0x559cd3(0xb66)],'content':_0xf5d09e[_0x559cd3(0x5c5)],'userId':_0x664d4d['id'],'createdBy':'ai'}),_0x42663f(),_0x11201(),_0x1267fd();const _0x2e6078=_0x4748c2(_0x107a0d['id']);_0x2e6078&&_0x4073bf['eventType']===_0x559cd3(0x1ed)&&_0x42ef82('💜\x20'+_0x2e6078[_0x559cd3(0x19d)]+_0x559cd3(0x1d5)+_0x6a7e15[_0x559cd3(0x5c5)]);return{'role':_0x559cd3(0xaf6),'senderId':_0x539757['id'],'timestamp':_0x792ad5[_0x559cd3(0x5ee)](),'isOffline':_0x5d5b18,'content':null};return{'role':_0x559cd3(0xaf6),'senderId':_0x3a172f['id'],'timestamp':_0x2c0a0c['now'](),'isOffline':_0x15e8ca,'content':null};}else{if(_0x35d0f9[_0x559cd3(0x2eb)]){_0x28dfd2(_0x559cd3(0x94e));return;}const _0x536d81=_0x35d0f9[_0x559cd3(0x6b9)];if(_0x536d81[_0x559cd3(0x968)]===0x0)return;let _0x100e8d=-0x1;for(let _0x1b5574=_0x536d81[_0x559cd3(0x968)]-0x1;_0x1b5574>=0x0;_0x1b5574--){if(_0x559cd3(0x3b7)!==_0x559cd3(0x9c7)){if(_0x536d81[_0x1b5574][_0x559cd3(0x129)]===_0x559cd3(0x809)){_0x100e8d=_0x1b5574;break;}}else{_0x396e65[_0x559cd3(0x79f)][_0x559cd3(0x34b)](_0x559cd3(0x30e));const _0x115949=_0x483d6c[_0x559cd3(0x3eb)](_0x559cd3(0xb43));_0x4e443c[_0x559cd3(0x79f)][_0x559cd3(0x34b)]('active',!!_0x115949);}}if(_0x100e8d===-0x1||_0x100e8d===_0x536d81[_0x559cd3(0x968)]-0x1){if('TtrcQ'===_0x559cd3(0x19c))_0x39ee2b=_0x559cd3(0x299),_0x18bbc2='\x0a#\x20已有内容(这是历史记录，你必须接着写，【不许动它！】)\x20\x0a```\x0a'+_0x234d99+'\x0a```';else{_0x28dfd2(_0x559cd3(0x891));return;}}_0x536d81[_0x559cd3(0x895)](_0x100e8d+0x1),_0x35d0f9[_0x559cd3(0x5d2)]=[],_0x1d6327(),_0x5b11e8(),_0xe54a5f(_0x35d0f9['activeMeetingCharId']),setTimeout(()=>{_0x4d017c();},0x64);}}async function _0x4780ec(){const _0x4d3b9e=_0x17d1db;if(_0x35d0f9[_0x4d3b9e(0x2eb)]){if('RupbA'!==_0x4d3b9e(0x107)){_0x28dfd2('正在生成中，请稍候...');return;}else{const _0x4dca1d=_0x2d794b['conversationHistory']['indexOf'](_0x30b6d8);_0x4dca1d>-0x1&&_0x172d24(_0x553aa0,_0x4dca1d);}}const _0x3c7aad=_0x35d0f9[_0x4d3b9e(0x6b9)];if(_0x3c7aad[_0x4d3b9e(0x968)]===0x0)return;let _0x577589=-0x1;for(let _0x2d0ba0=_0x3c7aad[_0x4d3b9e(0x968)]-0x1;_0x2d0ba0>=0x0;_0x2d0ba0--){if('rTSiC'!==_0x4d3b9e(0x8be)){if(_0x3c7aad[_0x2d0ba0]['role']===_0x4d3b9e(0x809)){_0x577589=_0x2d0ba0;break;}}else{const _0x2531d9=_0x5a5520[_0x4d3b9e(0xb18)](_0x4d3b9e(0xbb9));if(!_0x2531d9)return;_0x3ba9fc['preferences'][_0x4d3b9e(0x118)]?(_0x2531d9[_0x4d3b9e(0x7d9)][_0x4d3b9e(0x11f)]='#FFFFFF',_0x2531d9['style'][_0x4d3b9e(0x823)]='0\x202px\x208px\x20rgba(0,0,0,0.4)'):(_0x2531d9['style'][_0x4d3b9e(0x11f)]=_0x4d3b9e(0x71e),_0x2531d9['style']['textShadow']=_0x4d3b9e(0x9ba));}}if(_0x577589===-0x1||_0x577589===_0x3c7aad['length']-0x1){_0x28dfd2(_0x4d3b9e(0x921));return;}_0x3c7aad['splice'](_0x577589+0x1),_0x1d6327(),_0x65b693(),setTimeout(()=>{_0x4d017c();},0x64);}function _0x50bad7(_0x54654a=null){const _0x53df90=_0x17d1db,_0xf2108e=_0x54654a??_0x15327c[_0x53df90(0x850)][_0x53df90(0x2e2)]();if(_0xf2108e===''||!_0x35d0f9[_0x53df90(0xba6)])return;const _0x54de59=document[_0x53df90(0x3eb)](_0x53df90(0xaea)),_0x1ad082=_0x54de59['id']===_0x53df90(0xb29),_0x4ae8dd={'role':_0x53df90(0x809),'content':_0xf2108e,'timestamp':Date[_0x53df90(0x5ee)](),'isOffline':_0x1ad082};_0x35d0f9['activeQuote']&&(_0x4ae8dd['quotedMessage']={..._0x35d0f9[_0x53df90(0xc44)]});_0x35d0f9[_0x53df90(0x6b9)]['push'](_0x4ae8dd);const _0x378d25=_0x38697d(_0x4ae8dd,_0x35d0f9['conversationHistory'][_0x53df90(0x968)]-0x1);if(_0x378d25){if(_0x53df90(0xca7)!==_0x53df90(0x272))_0x232e46[_0x53df90(0x14f)]=_0x232e46[_0x53df90(0x3aa)];else{let _0x1d8531=_0x2d2a0c[_0x53df90(0x2e2)]();const _0x50312d=_0x1d8531[_0x53df90(0xac5)](/(\[[\s\S]*\])/);_0x50312d&&(_0x1d8531=_0x50312d[0x1]);const _0x2779df=_0x51d4d7[_0x53df90(0x97b)](_0x1d8531);if(_0x313551[_0x53df90(0xc29)](_0x2779df)){_0x516f79['activeMeetingScriptQueue']=[..._0x2779df],_0x2d6026[_0x53df90(0xadf)][_0x5dd2b2['id']]=[..._0x2779df],_0x4d88fb();const _0x1b23d2=_0x2779df[_0x53df90(0xbb5)](_0x10f80e=>_0x10f80e[_0x53df90(0x878)]==='narrator'?_0x10f80e[_0x53df90(0xa56)]:_0x10f80e[_0x53df90(0x878)]+':\x20'+_0x10f80e[_0x53df90(0xa56)])[_0x53df90(0x102)]('\x0a\x0a');_0x41bd0a[_0x53df90(0x6b9)]['push']({'role':_0x53df90(0xaf6),'senderId':_0x434f0c['id'],'timestamp':_0x18308c[_0x53df90(0x5ee)](),'isOffline':!![],'content':_0x1b23d2});}}}_0x1d6327(),_0x15327c[_0x53df90(0x850)]='',_0x1116e4();}function _0x175159(_0x6f358){const _0x4b2024=_0x17d1db;if(_0x4b2024(0x3a0)!==_0x4b2024(0x86f)){if(!_0x6f358||!_0x35d0f9['activeChatId'])return;const _0x4d790c={'role':_0x4b2024(0x809),'content':'[用户发送了表情：'+_0x6f358[_0x4b2024(0x19d)]+']','displayUrl':_0x6f358[_0x4b2024(0x391)],'timestamp':Date['now']()};_0x35d0f9[_0x4b2024(0x6b9)][_0x4b2024(0xb2f)](_0x4d790c),_0x38697d(_0x4d790c,_0x35d0f9[_0x4b2024(0x6b9)][_0x4b2024(0x968)]-0x1),_0x1d6327(),_0x4a5211[_0x4b2024(0x79f)]['remove'](_0x4b2024(0xa36));}else _0x2ef894[_0x4b2024(0x570)](_0x4b2024(0x392)+_0x566224['activeChatId'],_0xb70d94[_0x4b2024(0xcf9)](_0x1a6004['conversationHistory']));}async function _0x4bd388(_0x1c5da0){const _0x12d91d=_0x17d1db,_0x23f984=_0x1c5da0[_0x12d91d(0xce3)]['files'][0x0];if(!_0x23f984||!_0x35d0f9[_0x12d91d(0xba6)])return;_0x13f6ba(!![],_0x12d91d(0xcc5));try{if(_0x12d91d(0x3d5)==='tEMvw'){const _0x4a6f11=await _0x51a2d6(_0x23f984,0x320,0.8,!![]),_0x55d35e=_0x12d91d(0x3b5)+Date[_0x12d91d(0x5ee)]();await _0xad4538(_0x55d35e,_0x4a6f11);const _0x5cb3b5=_0x15327c[_0x12d91d(0x850)][_0x12d91d(0x2e2)]();_0x15327c[_0x12d91d(0x850)]='';const _0x199506={'role':'user','content':_0x5cb3b5,'imageId':_0x55d35e,'timestamp':Date[_0x12d91d(0x5ee)]()};_0x35d0f9[_0x12d91d(0x6b9)][_0x12d91d(0xb2f)](_0x199506),_0x38697d(_0x199506,_0x35d0f9[_0x12d91d(0x6b9)][_0x12d91d(0x968)]-0x1),_0x1d6327();}else{_0x5bdadf('至少要保留一个用户。');return;}}catch(_0x401a3d){_0x28dfd2(_0x12d91d(0xc00)+_0x401a3d['message']);}finally{_0x13f6ba(![]),_0x1c5da0[_0x12d91d(0xce3)][_0x12d91d(0x850)]='';}}async function _0x32d0ee(){const _0x3e65ab=_0x17d1db;if('uBHwb'===_0x3e65ab(0xa96)){if(!_0x35d0f9[_0x3e65ab(0xba6)])return;const _0x2877fa=await _0x12e8c8();if(!_0x2877fa)return;_0x28dfd2(_0x3e65ab(0x717));try{if('rkvmo'!=='rkvmo')_0x5c17f4[_0x3e65ab(0x7d9)][_0x3e65ab(0x2f8)]='';else{const _0x362dd2=await _0x5eed63(_0x2877fa[_0x3e65ab(0x596)],_0x2877fa[_0x3e65ab(0xb52)]),_0x347ebc={'role':_0x3e65ab(0x809),'type':_0x3e65ab(0xcc1),'content':_0x3e65ab(0x358)+_0x2877fa[_0x3e65ab(0x596)]+_0x3e65ab(0x204)+_0x2877fa[_0x3e65ab(0xb52)]+']','songName':_0x2877fa['songName'],'artist':_0x2877fa[_0x3e65ab(0xb52)],'coverUrl':_0x362dd2[_0x3e65ab(0x2d5)],'playableUrl':_0x362dd2[_0x3e65ab(0x391)],'timestamp':Date[_0x3e65ab(0x5ee)]()};_0x35d0f9[_0x3e65ab(0x6b9)]['push'](_0x347ebc),_0x1d6327(),_0x3f1b6c();}}catch(_0x4059b5){if('HcFiL'===_0x3e65ab(0x4fd)){_0x540fcc[_0x3e65ab(0x174)](_0x3e65ab(0xaa6)+_0x3a7c06['id']+_0x3e65ab(0x88c),_0x36fb72['message']);try{_0x51d85=_0xe41681(_0x4f821d);if(!_0x37d9e8)throw new _0x9fb4ff(_0x3e65ab(0xb8a));_0x5f415c[_0x3e65ab(0x52e)](_0x3e65ab(0x673)+_0x4c14e8['id']+_0x3e65ab(0x72a));}catch(_0x27ad49){throw _0x31a539;}}else console['error'](_0x3e65ab(0x1a0),_0x4059b5),_0x28dfd2(_0x3e65ab(0xb9c)+_0x4059b5[_0x3e65ab(0x5a1)]);}}else _0x66c052[_0x3e65ab(0xafb)]('click',()=>{const _0x284094=_0x3e65ab;_0x202fa9(_0x284094(0x90d));});}function _0x4e05f7(_0x381f10,_0x8a8c7b=0x78){const _0xd878f9=_0x17d1db,_0x11743f=_0x5a76bf=>{const _0x2a9586=_0x52a6;if(_0x5a76bf['role']===_0x2a9586(0x809))return _0x35d0f9['userProfile']?.[_0x2a9586(0x19d)]||_0x2a9586(0x929);if(_0x5a76bf[_0x2a9586(0xbc0)]){if(_0x2a9586(0xbcf)!==_0x2a9586(0xbcf))_0x3d3b59(_0x44534f);else{const _0x40cc49=_0x45939a(_0x5a76bf[_0x2a9586(0xbc0)]);return _0x40cc49?.[_0x2a9586(0x19d)]||_0x2a9586(0xb77);}}if(_0x381f10?.[_0x2a9586(0xb12)]==='private'){const _0x542c91=_0x45939a(_0x381f10[_0x2a9586(0x8f1)][0x0]);return _0x542c91?.['name']||'AI';}return _0x2a9586(0x407);},_0x210338=_0x35d0f9[_0xd878f9(0x6b9)]['slice'](-_0x8a8c7b),_0x1d7c83=[];for(const _0x1c504c of _0x210338){if(_0xd878f9(0x9c1)==='XRtWE')_0x494f74='0x'+_0x3c86ef[0x1]+_0xaa6687[0x2],_0xdf22a1='0x'+_0x40f1ce[0x3]+_0xd8a9fc[0x4],_0x31e2a6='0x'+_0x205b52[0x5]+_0x5b1092[0x6];else{if(_0x1c504c[_0xd878f9(0x97c)])_0xd878f9(0x370)===_0xd878f9(0x370)?_0x1d7c83[_0xd878f9(0xb2f)]('['+_0x11743f(_0x1c504c)+']\x20[sticker:'+(_0x1c504c[_0xd878f9(0x9bc)]?.[_0xd878f9(0xac5)](/：(.+?)]/)?.[0x1]||'表情')+']'):(_0x5c2138(_0x8c5f69),_0x37d8f=null);else{if(_0x1c504c[_0xd878f9(0x89a)]){if(_0xd878f9(0x7e2)!==_0xd878f9(0x7e2))_0x463ff7['getElementById'](_0xd878f9(0x996))[_0xd878f9(0x639)]();else{const _0x5aa0d2=_0x1c504c[_0xd878f9(0x9bc)]?'\x20'+_0x1c504c[_0xd878f9(0x9bc)]:'';_0x1d7c83[_0xd878f9(0xb2f)]('['+_0x11743f(_0x1c504c)+_0xd878f9(0x4eb)+_0x5aa0d2);}}else _0x1c504c[_0xd878f9(0x9bc)]&&(_0xd878f9(0xc32)!==_0xd878f9(0xc32)?(_0x546bed(),_0x131530=null):_0x1d7c83[_0xd878f9(0xb2f)]('['+_0x11743f(_0x1c504c)+']\x20'+_0x1c504c['content']));}}}return _0x1d7c83[_0xd878f9(0x102)]('\x0a');}function _0x4b14f0(_0x5c21ba,_0x131647){const _0x5f5b5a=_0x17d1db;if(!_0x5c21ba||!_0x131647)return null;const _0x180210=_0x131647[_0x5f5b5a(0xac5)](/@([^\s:：,，。!?]+)/);if(!_0x180210)return null;const _0xec31a4=_0x180210[0x1][_0x5f5b5a(0x443)]();for(const _0xb778df of _0x5c21ba['participantIds']){if(_0x5f5b5a(0x3a2)===_0x5f5b5a(0x4b7))_0x352ba5(_0x19dfca['id']);else{const _0x4ba777=_0x45939a(_0xb778df);if(!_0x4ba777?.[_0x5f5b5a(0x19d)])continue;if(_0x4ba777[_0x5f5b5a(0x19d)][_0x5f5b5a(0x443)]()===_0xec31a4)return _0x4ba777;if(_0x4ba777['name'][_0x5f5b5a(0x443)]()[_0x5f5b5a(0x41d)](_0xec31a4))return _0x4ba777;}}return null;}function _0x39ec4a(_0x56cacd){const _0x2274fa=_0x17d1db,_0x1c83d6=_0x56cacd[_0x2274fa(0x65a)]('{'),_0x3e5f47=_0x56cacd[_0x2274fa(0x5ca)]('}');if(_0x1c83d6>=0x0&&_0x3e5f47>_0x1c83d6)return _0x56cacd[_0x2274fa(0x571)](_0x1c83d6,_0x3e5f47+0x1);return _0x56cacd;}function _0x3a5ee7(_0x720bf5,_0x15baab,_0x50ca2c){const _0x329fca=_0x17d1db,_0x4d4af3=new Map(_0x15baab['map'](_0x36932f=>[String(_0x36932f['id']),_0x36932f])),_0x264b76=_0xb5d7a2=>String(_0xb5d7a2||'')['toLowerCase']()[_0x329fca(0x39f)](/\s+/g,''),_0x3165cb=new Map(_0x15baab[_0x329fca(0xbb5)](_0x127858=>[_0x264b76(_0x127858['name']),_0x127858])),_0x2dce40=new Set(_0x50ca2c),_0x415b87={'events':[]};for(const _0x28b2ce of _0x720bf5?.[_0x329fca(0x558)]||[]){const _0x300c86=_0x28b2ce[_0x329fca(0xbc0)]??_0x28b2ce[_0x329fca(0x7b0)]??_0x28b2ce[_0x329fca(0x1d3)]??_0x28b2ce[_0x329fca(0x878)]??_0x28b2ce['role']??_0x28b2ce['name'];if(!_0x300c86)continue;let _0x324b75=_0x4d4af3[_0x329fca(0x12c)](String(_0x300c86))||_0x3165cb[_0x329fca(0x12c)](_0x264b76(_0x300c86));if(!_0x324b75)continue;const _0x1f7370=(_0x28b2ce[_0x329fca(0xb7c)]||_0x28b2ce[_0x329fca(0xb12)]||_0x329fca(0xa0c))['toLowerCase']();if(_0x1f7370===_0x329fca(0x881)){const _0x5d73a9=(_0x28b2ce['sticker']??_0x28b2ce[_0x329fca(0x6df)]??_0x28b2ce['emote']??_0x28b2ce[_0x329fca(0x8bb)])?.[_0x329fca(0x2e2)]();if(_0x5d73a9&&_0x2dce40['has'](_0x5d73a9))_0x415b87[_0x329fca(0x558)][_0x329fca(0xb2f)]({'senderId':_0x324b75['id'],'kind':_0x329fca(0x881),'sticker':_0x5d73a9});else{const _0x4e1538=String(_0x28b2ce[_0x329fca(0x9bc)]??_0x28b2ce[_0x329fca(0xa0c)]??'')[_0x329fca(0x2e2)]()||_0x329fca(0x60c)+(_0x5d73a9||_0x329fca(0x45a))+']';if(_0x4e1538)_0x415b87[_0x329fca(0x558)]['push']({'senderId':_0x324b75['id'],'kind':_0x329fca(0xa0c),'content':_0x4e1538});}}else{if(_0x1f7370===_0x329fca(0xcc1)&&_0x28b2ce['songName']&&_0x28b2ce[_0x329fca(0xb52)])_0x415b87[_0x329fca(0x558)][_0x329fca(0xb2f)]({'senderId':_0x324b75['id'],'kind':_0x329fca(0xcc1),'songName':_0x28b2ce[_0x329fca(0x596)],'artist':_0x28b2ce[_0x329fca(0xb52)]});else{const _0x4f5e35=String(_0x28b2ce[_0x329fca(0x9bc)]??_0x28b2ce[_0x329fca(0xa0c)]??_0x28b2ce['message']??'')[_0x329fca(0x2e2)]();if(_0x4f5e35)_0x415b87[_0x329fca(0x558)][_0x329fca(0xb2f)]({'senderId':_0x324b75['id'],'kind':_0x329fca(0xa0c),'content':_0x4f5e35});}}}return _0x415b87;}async function _0x2cd24d(_0x5d4db9){const _0x4a13a4=_0x17d1db;if(!_0x5d4db9||!Array[_0x4a13a4(0xc29)](_0x5d4db9['events'])||_0x5d4db9[_0x4a13a4(0x558)][_0x4a13a4(0x968)]===0x0)return;const _0x198cd5=_0x5c0768=>_0x5c0768+Math[_0x4a13a4(0x859)](Math[_0x4a13a4(0xeb)]()*0x190);let _0x466e1a=0x1f4;for(const _0xec1cd2 of _0x5d4db9[_0x4a13a4(0x558)]){await new Promise(_0x618d6f=>setTimeout(_0x618d6f,_0x198cd5(_0x466e1a))),_0x466e1a=0x2bc;const _0x4321c5=_0x35d0f9['conversationHistory']['at'](-0x1)?.[_0x4a13a4(0x61c)]??![],_0xe068e5={'role':'assistant','senderId':_0xec1cd2[_0x4a13a4(0xbc0)],'timestamp':Date['now'](),'isOffline':_0x4321c5};if(_0xec1cd2['kind']==='html'){if('yMQbW'!=='WHFZG'){Object[_0x4a13a4(0xbdd)](_0xe068e5,{'type':_0x4a13a4(0x4d1),'content':_0xec1cd2[_0x4a13a4(0x9bc)]}),_0x38697d(_0xe068e5,-0x1),_0x232e46[_0x4a13a4(0x14f)]=_0x232e46[_0x4a13a4(0x3aa)];continue;}else _0x28c8fc['style'][_0x4a13a4(0x2f8)]=_0x4a13a4(0x804)+_0x494d75+')',_0x18f156[_0x4a13a4(0x7d9)][_0x4a13a4(0x133)]='cover',_0x6f6e25[_0x4a13a4(0x7d9)][_0x4a13a4(0xe8)]='center',_0x90709d['style'][_0x4a13a4(0x11f)]=_0x4a13a4(0x5fa),_0x10c382[_0x4a13a4(0x9c6)](_0x4a13a4(0x8b6))[_0x4a13a4(0x175)](_0x572cb8=>{const _0x1623bd=_0x4a13a4;_0x572cb8['style'][_0x1623bd(0x823)]=_0x1623bd(0x4d7);});}if(_0xec1cd2['kind']===_0x4a13a4(0x881)){const _0x1a4b5d=_0x95c6c9[_0x4a13a4(0x9cd)](_0x568cba=>_0x568cba[_0x4a13a4(0x19d)]===_0xec1cd2['sticker']);_0x1a4b5d&&(Object[_0x4a13a4(0xbdd)](_0xe068e5,{'content':_0x4a13a4(0x66f)+_0x1a4b5d[_0x4a13a4(0x19d)]+']','displayUrl':_0x1a4b5d[_0x4a13a4(0x391)]}),_0x35d0f9[_0x4a13a4(0x6b9)][_0x4a13a4(0xb2f)](_0xe068e5),_0x1d6327(),_0x38697d(_0xe068e5,_0x35d0f9['conversationHistory'][_0x4a13a4(0x968)]-0x1),_0x232e46[_0x4a13a4(0x14f)]=_0x232e46[_0x4a13a4(0x3aa)]);continue;}if(_0xec1cd2['kind']===_0x4a13a4(0xcc1)&&_0xec1cd2[_0x4a13a4(0x596)]&&_0xec1cd2['artist']){if(_0x4a13a4(0xa3e)!==_0x4a13a4(0xa3e))_0x3fa628[_0x4a13a4(0xb12)]=_0x4a13a4(0xcc1),_0x319df8[_0x4a13a4(0xbdd)](_0x6bbc28,_0x8225a);else{const {songName:_0x811144,artist:_0x22eb78}=_0xec1cd2;Object[_0x4a13a4(0xbdd)](_0xe068e5,{'type':_0x4a13a4(0xcc1),'content':_0x4a13a4(0x5da)+_0x811144+'\x20-\x20'+_0x22eb78+']','songName':_0x811144,'artist':_0x22eb78});try{const _0x2c1c51=await _0x5eed63(_0x811144,_0x22eb78);_0xe068e5[_0x4a13a4(0x22d)]=_0x2c1c51[_0x4a13a4(0x2d5)],_0xe068e5['playableUrl']=_0x2c1c51[_0x4a13a4(0x391)];}catch(_0xe1c90c){}_0x35d0f9[_0x4a13a4(0x6b9)][_0x4a13a4(0xb2f)](_0xe068e5),_0x1d6327(),_0x65b693();continue;}}if(_0xec1cd2['kind']===_0x4a13a4(0xa0c)){const _0x16a5dd=(_0xec1cd2[_0x4a13a4(0x9bc)]||'')[_0x4a13a4(0xac5)](/^\[引用\|(.*?)\|(.*?)\]\s*/);let _0x22942b=_0xec1cd2['content']||'';_0x16a5dd&&(_0xe068e5[_0x4a13a4(0x659)]={'sender':_0x16a5dd[0x1][_0x4a13a4(0x2e2)](),'content':_0x16a5dd[0x2][_0x4a13a4(0x2e2)]()},_0x22942b=_0xec1cd2[_0x4a13a4(0x9bc)][_0x4a13a4(0x185)](_0x16a5dd[0x0][_0x4a13a4(0x968)])['trim']());const _0x169f65=_0x36d6c6(_0x22942b)[_0x4a13a4(0x571)](0x0,0x3);for(let _0x5c51ed=0x0;_0x5c51ed<_0x169f65[_0x4a13a4(0x968)];_0x5c51ed++){if('SOSuJ'===_0x4a13a4(0x11a)){if(_0x5c51ed>0x0){if(_0x4a13a4(0x675)==='vJpbR')await new Promise(_0x45e2d5=>setTimeout(_0x45e2d5,_0x198cd5(0x190))),delete _0xe068e5['quotedMessage'];else throw new _0x34cfae(_0x4a13a4(0x2b9));}_0xe068e5[_0x4a13a4(0x9bc)]=_0x169f65[_0x5c51ed],_0x35d0f9[_0x4a13a4(0x6b9)][_0x4a13a4(0xb2f)]({..._0xe068e5}),_0x1d6327(),_0x65b693();}else _0x3b8e64(![]);}}}}async function _0x3d6203(_0x4588e9,{force:force=![],delayMs:delayMs=0x0}={}){const _0x2a5a96=_0x17d1db;await new Promise(_0x3749ee=>setTimeout(_0x3749ee,0xa));if(!_0x35d0f9['apiSettings'][_0x2a5a96(0x915)]||!_0x35d0f9[_0x2a5a96(0x69e)][_0x2a5a96(0xc53)]||!_0x35d0f9[_0x2a5a96(0x69e)][_0x2a5a96(0x9ad)])return _0x28dfd2(_0x2a5a96(0x7ab)),![];const _0x3953c9=_0x1f3fa9();if(!_0x3953c9||!_0x4588e9)return![];const _0x12e6e0=_0x5f52db(_0x3953c9['id']),_0x28ecba=_0x35d0f9[_0x2a5a96(0x6b9)]['at'](-0x1)?.[_0x2a5a96(0x129)]===_0x2a5a96(0x809);if(!force&&!_0x28ecba)return![];const _0x43317b=_0x35d0f9[_0x2a5a96(0x6b9)]['at'](-0x1)?.[_0x2a5a96(0x61c)]??![];if(delayMs)await new Promise(_0x45f0c3=>setTimeout(_0x45f0c3,delayMs));if(_0x43317b){if('ubNuX'!=='QnOEr')document[_0x2a5a96(0xb18)](_0x2a5a96(0x3b2))[_0x2a5a96(0x65b)]=_0x2a5a96(0x9ef);else{_0x26c604('还没有任何内容可以重新生成。');return;}}else{if('SsXBr'===_0x2a5a96(0xce9)){const _0x3f88dd=_0x769d5f[_0x2a5a96(0x17b)][_0x51411a['currentlyPlayingIndex']],_0x29c7d9=_0x59bd0b[_0x2a5a96(0x705)];_0x1a17e1(),_0x357c9d();const _0xc5d40a=_0x1aef43[_0x2a5a96(0x9c6)](_0x2a5a96(0x3c9));_0xc5d40a['forEach'](_0x1276b3=>{const _0x853363=_0x2a5a96,_0xadf7f=_0x1276b3[_0x853363(0x218)]['musicId'],_0x23bc75=_0x1276b3[_0x853363(0x3eb)](_0x853363(0x3b8));if(!_0x23bc75)return;_0x3f88dd&&_0xadf7f===_0x3f88dd['id']&&_0x29c7d9?_0x23bc75['textContent']='❚❚':_0x23bc75[_0x853363(0x65b)]='▶';});}else _0x242d9b(!![]);}let _0x4983e5='';const _0x17c717=_0x1f3fa9();if(_0x17c717?.[_0x2a5a96(0xe3)]?.['isActive']){const _0x108d56=_0x17c717[_0x2a5a96(0xe3)],_0x3379a1=await _0x7962d0(_0x108d56['songId']);if(_0x3379a1&&_0x3379a1[_0x2a5a96(0xcf1)]){const _0x205289=_0x4e6c8d(_0x3379a1[_0x2a5a96(0xcf1)]);if(_0x205289[_0x2a5a96(0x968)]>0x0){const _0x2046df=_0x459e34[_0x2a5a96(0x625)];let _0xe3895b=-0x1;for(let _0x437dfc=0x0;_0x437dfc<_0x205289[_0x2a5a96(0x968)];_0x437dfc++){if(_0x2046df>=_0x205289[_0x437dfc][_0x2a5a96(0xa38)])_0xe3895b=_0x437dfc;else break;}const _0x4457a7=_0x205289['map']((_0x43e6f7,_0xaedce2)=>{const _0x47a389=_0x2a5a96,_0x353db6=_0xaedce2===_0xe3895b?_0x47a389(0x324):'';return''+_0x353db6+_0x43e6f7[_0x47a389(0xa0c)];})['join']('\x0a'),_0xb457=_0x205289[_0x2a5a96(0xbb5)](_0x4ab445=>_0x4ab445[_0x2a5a96(0xa0c)])[_0x2a5a96(0x102)]('\x0a'),_0x294869=_0xe3895b>-0x1?_0x205289[_0xe3895b][_0x2a5a96(0xa0c)]:_0x2a5a96(0x75b);_0x4983e5=(_0x2a5a96(0x53f)+_0x108d56[_0x2a5a96(0xb52)]+_0x2a5a96(0x57c)+_0x108d56[_0x2a5a96(0x596)]+_0x2a5a96(0x4c5)+_0xb457+_0x2a5a96(0x821)+_0x294869+_0x2a5a96(0x694))[_0x2a5a96(0x2e2)]();}}}let _0x44e46d='',_0x4c0b6c='';const _0x48d6f6=_0x35d0f9[_0x2a5a96(0x6b9)][_0x2a5a96(0x968)];if(_0x48d6f6>0x1){const _0xefd180=_0x35d0f9[_0x2a5a96(0x6b9)][_0x48d6f6-0x2],_0x3b3241=_0x35d0f9[_0x2a5a96(0x6b9)][_0x48d6f6-0x1];if(_0xefd180[_0x2a5a96(0x61c)]===![]&&_0x3b3241[_0x2a5a96(0x61c)]===!![])_0x2a5a96(0x3cf)===_0x2a5a96(0xa0a)?(_0x89c1b[_0x2a5a96(0x9c9)]=_0x5801b0['createObjectURL'](_0x3add5e),_0x31b616['style'][_0x2a5a96(0x6d2)]=0x1):_0x4c0b6c=_0x2a5a96(0x37d)+_0x12e6e0[_0x2a5a96(0x19d)]+_0x2a5a96(0x825);else _0xefd180[_0x2a5a96(0x61c)]===!![]&&_0x3b3241[_0x2a5a96(0x61c)]===![]&&('Scdbk'!=='hkiuc'?_0x4c0b6c='\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“'+_0x12e6e0[_0x2a5a96(0x19d)]+_0x2a5a96(0xcd1):_0x2fb654[_0x2a5a96(0x976)]?_0x2bc71e[_0x2a5a96(0xc36)]():_0x2c8ea6[_0x2a5a96(0x639)]());}if(_0x43317b){if(_0x2a5a96(0x8fa)!==_0x2a5a96(0xabb)){const _0x139453=_0x2a5a96(0xaa7);_0x44e46d='\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“'+_0x12e6e0[_0x2a5a96(0x19d)]+_0x2a5a96(0xc40)+_0x139453+_0x2a5a96(0x441)+_0x4588e9['name']+_0x2a5a96(0x9dc)+_0x139453+_0x2a5a96(0x982)+_0x139453+_0x2a5a96(0x954);}else _0x34155a[_0x2a5a96(0x3e7)][_0x2a5a96(0x895)](_0x19763a,0x1),_0x47d0e5(),_0x4c4faa(),_0x2606b5('【'+_0x47aaad[_0x2a5a96(0x19d)]+_0x2a5a96(0xb9f));}else _0x2a5a96(0xa4c)===_0x2a5a96(0x621)?(_0x3341b3[_0x2a5a96(0x79f)][_0x2a5a96(0x366)](_0x2a5a96(0x530)),_0x3a4be1[_0x2a5a96(0x8f5)]({'behavior':_0x2a5a96(0x5fe),'block':_0x2a5a96(0xb99)})):_0x2a5a96(0x2b3);const {omniText:_0x1c7a64}=_0xd9a204(_0x4588e9['id'],_0x3953c9['id']),_0x1da467=_0x20e654(),_0x1b8ac5=_0x54bfed(_0x4588e9['id']),_0x36efd3=_0xa3fb61(_0x4588e9['id']),_0x292276=_0x4a0eeb(_0x4588e9['id']),_0x250989=await _0x164e5b(_0x4588e9['id']),_0x48e93d=typeof _0x428472===_0x2a5a96(0xb1e)?_0x428472['replaceAll'](_0x2a5a96(0x398),_0x4588e9['name'])[_0x2a5a96(0xa01)](_0x2a5a96(0x63e),_0x12e6e0['name']||'用户'):'',_0x23c81e=_0x438700()[_0x2a5a96(0xbb5)](_0x167255=>_0x167255[_0x2a5a96(0x19d)])[_0x2a5a96(0x102)](',\x20');let _0x4d6a95='';if(_0x4588e9[_0x2a5a96(0x99c)]&&_0x4588e9[_0x2a5a96(0x99c)][_0x2a5a96(0x968)]>0x0){if(_0x2a5a96(0xd06)!==_0x2a5a96(0x48c)){const _0x432c0e=_0x4588e9[_0x2a5a96(0x99c)][_0x2a5a96(0xbb5)](_0x68a602=>_0x35d0f9['worldBooks'][_0x2a5a96(0x9cd)](_0x5d614c=>_0x5d614c['id']===_0x68a602))[_0x2a5a96(0x485)](Boolean)[_0x2a5a96(0xbb5)](_0xd410e4=>_0x2a5a96(0x2b1)+_0xd410e4['name']+'\x0a'+_0xd410e4['content'])[_0x2a5a96(0x102)]('');if(_0x432c0e)_0x4d6a95=_0x2a5a96(0x79e)+_0x432c0e;}else{const _0x326cf6=_0x399a51[_0x2a5a96(0xb18)](_0x2a5a96(0xccc));_0x326cf6[_0x2a5a96(0x280)]='';if(_0x1da097[_0x2a5a96(0x9dd)][_0x2a5a96(0x968)]===0x0){_0x326cf6[_0x2a5a96(0x280)]=_0x2a5a96(0xa28);return;}_0x2e7c28[_0x2a5a96(0x9dd)][_0x2a5a96(0x175)](_0x3ef935=>{const _0x23fe7d=_0x2a5a96,_0x5cbe06=_0x49cdf9[_0x23fe7d(0x162)][_0x23fe7d(0x9cd)](_0x2e4716=>_0x2e4716['id']===_0x3ef935[_0x23fe7d(0x54f)])||{'name':'未知用户'},_0x395412=_0x4fefb9[_0x23fe7d(0x7e9)](_0x23fe7d(0x591));_0x395412[_0x23fe7d(0x73e)]=_0x23fe7d(0x715),_0x395412['dataset']['id']=_0x3ef935['id'],_0x395412[_0x23fe7d(0x280)]=_0x23fe7d(0x219)+_0x3ef935[_0x23fe7d(0x19d)]+_0x23fe7d(0x3e1)+_0x5cbe06[_0x23fe7d(0x19d)]+'\x20|\x20'+_0x3ef935[_0x23fe7d(0x69d)][_0x23fe7d(0x968)]+'\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x395412[_0x23fe7d(0xafb)]('click',()=>_0x39e6f3(_0x3ef935['id'])),_0x326cf6[_0x23fe7d(0x364)](_0x395412);});}}const _0x526960=_0x12e6e0[_0x2a5a96(0x1ab)]?_0x2a5a96(0x52b)+_0x12e6e0[_0x2a5a96(0x19d)]+'”的补充信息\x0a'+_0x12e6e0[_0x2a5a96(0x1ab)]:'';let _0x57f571='';const _0x2de43e=new Date(),_0xde1f9c=_0x4766dc(_0x4588e9['id']);_0x57f571='\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a',_0x57f571+=_0x2a5a96(0x948)+_0x2de43e[_0x2a5a96(0x8f0)](_0x2a5a96(0x984),{'dateStyle':_0x2a5a96(0x363),'timeStyle':_0x2a5a96(0x1b9)})+'\x0a';if(_0xde1f9c){const _0x5dc435=new Date(_0xde1f9c[_0x2a5a96(0xaa4)]),_0x2b454c=_0x5cd9d4(_0x5dc435);_0x57f571+=_0x2a5a96(0xc52)+_0x2b454c+'\x0a';const _0x3d96cc=_0x2de43e['toDateString'](),_0x76b084=_0x5dc435[_0x2a5a96(0x224)](),_0x15b540=new Date();_0x15b540[_0x2a5a96(0x827)](_0x2de43e['getDate']()-0x1);const _0x1fa14d=_0x15b540[_0x2a5a96(0x224)]();if(_0x3d96cc===_0x76b084){const _0x1637d5=(_0x2de43e-_0x5dc435)/(0x3e8*0x3c);if(_0x1637d5<0x3c){if(_0x2a5a96(0x482)===_0x2a5a96(0x482))_0x57f571+='-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a';else{const _0x55eedb=_0x2a5a96(0x260)+_0x2ddf78['now']();_0x5bc91d(_0x55eedb),_0x18635c(!![]);}}else'oBXiU'!==_0x2a5a96(0x85a)?_0x3e4006[_0x2a5a96(0x9c9)]&&(_0x48c661[_0x2a5a96(0x976)]?_0x398cf0[_0x2a5a96(0xc36)]():_0x1c4d6b[_0x2a5a96(0x639)]()):_0x57f571+='-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概'+Math['round'](_0x1637d5/0x3c)+'小时前），可以简单问候一下对方现在的状态。\x0a';}else{if(_0x1fa14d===_0x76b084)_0x2a5a96(0x124)!==_0x2a5a96(0x56e)?_0x57f571+='-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a':(_0x54cd03[_0x2a5a96(0x7d9)][_0x2a5a96(0x2f8)]=_0x2a5a96(0x575)+_0x1f37f8[_0x2a5a96(0x900)](_0x32c829)+'\x27)',_0x293212['style'][_0x2a5a96(0x133)]='cover',_0x3dbc85[_0x2a5a96(0x7d9)]['backgroundPosition']=_0x2a5a96(0xb99));else{const _0xf546b4=Math[_0x2a5a96(0x87d)]((_0x2de43e-_0x5dc435)/(0x3e8*0x3c*0x3c*0x18));_0x57f571+='-\x20**对话状态提示**:\x20你们已经有\x20'+_0xf546b4+_0x2a5a96(0x7ac);}}}else _0x2a5a96(0x551)===_0x2a5a96(0x5f8)?(_0x51d35a('chat',_0x2a5a96(0x4b4)),_0x496b95(![])):_0x57f571+='-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a';const _0x54f50c=('\x0a'+_0x44e46d+'\x0a你只扮演【'+_0x4588e9[_0x2a5a96(0x19d)]+_0x2a5a96(0x748)+_0x4588e9['name']+_0x2a5a96(0x345)+_0x4588e9[_0x2a5a96(0x19d)]+_0x2a5a96(0x50b)+_0x23c81e+_0x2a5a96(0x7b7)+_0x48e93d+'\x0a')['trim'](),_0x496298=[{'role':_0x2a5a96(0x773),'content':_0x54f50c}],_0x361f2d=(_0x2a5a96(0xa73)+(_0x4588e9[_0x2a5a96(0x1ab)]||'你是一个乐于助人的助手。')+'\x0a'+_0x526960+'\x20\x0a'+_0x1c7a64+'\x0a'+_0x1da467+'\x0a'+_0x1b8ac5+'\x0a'+_0x36efd3+_0x2a5a96(0x3bf)+_0x292276+_0x2a5a96(0x434)+_0x250989+_0x2a5a96(0x9c8)+_0x4983e5+'\x0a'+_0x57f571+'\x0a'+_0x4d6a95+'\x0a')[_0x2a5a96(0x2e2)]();_0x361f2d['replace'](/#.*|\s/g,'')&&(_0x496298['push']({'role':_0x2a5a96(0x809),'content':_0x361f2d}),_0x496298[_0x2a5a96(0xb2f)]({'role':_0x2a5a96(0xaf6),'content':'好的，我记住了这些人设和历史。现在我们开始对话。'}));const _0x2dfb75=_0x35d0f9[_0x2a5a96(0x2e8)]?.[_0x2a5a96(0x60f)]??0x64,_0x380601=_0x35d0f9[_0x2a5a96(0x6b9)][_0x2a5a96(0x571)](-_0x2dfb75);for(const _0x4d03e9 of _0x380601){if(_0x2a5a96(0xc04)!=='jzurL'){const _0xcce877=_0x4d03e9['role']==='ai'||_0x4d03e9[_0x2a5a96(0x129)]==='assistant'?'assistant':_0x2a5a96(0x809);let _0x496748={'role':_0xcce877,'content':_0x4d03e9[_0x2a5a96(0x9bc)]},_0x17f93a=!!_0x4d03e9[_0x2a5a96(0x9bc)];if(_0x4d03e9[_0x2a5a96(0x97c)]&&_0x4d03e9[_0x2a5a96(0x9bc)][_0x2a5a96(0xb63)]('表情')){const _0x137164=_0x4d03e9[_0x2a5a96(0x9bc)][_0x2a5a96(0xac5)](/：(.*?)]$/);_0x496748['content']=_0x2a5a96(0x60c)+(_0x137164?_0x137164[0x1]:_0x2a5a96(0x45a))+']',_0x496298[_0x2a5a96(0xb2f)](_0x496748);}else{let _0x49d412=null;if(_0x4d03e9[_0x2a5a96(0x89a)])_0x49d412=_0x4d03e9[_0x2a5a96(0x89a)];else{if(_0x4d03e9['imageId']){if(_0x2a5a96(0x3c4)===_0x2a5a96(0x3c4))try{if(_0x2a5a96(0x207)===_0x2a5a96(0x207)){const _0x11afc6=await _0x5288fd(_0x4d03e9[_0x2a5a96(0x650)]);_0x11afc6&&(_0x49d412=await _0x36479b(_0x11afc6));}else{const _0x312489=_0x5ad67a[_0x2a5a96(0xb18)](_0x2a5a96(0x16a));_0x312489['textContent']=_0x40cc6a,_0x312489[_0x2a5a96(0x7d9)]['display']='block';if(_0x1fe81b['_t'])_0x5c9562(_0x3cf4fb['_t']);_0x2728cd['_t']=_0x20a9ee(()=>{const _0x539992=_0x2a5a96;_0x312489['style'][_0x539992(0x31f)]='none';},0x640);}}catch(_0x1189bf){console[_0x2a5a96(0x4a1)]('在准备API数据时，从IndexedDB读取图片失败:',_0x1189bf);}else{const _0x2c9e30=_0x30c619[_0x2a5a96(0x162)][_0x2a5a96(0x9cd)](_0xde47e4=>_0xde47e4['id']===_0x3b94d1);if(_0x2c9e30)_0x2e9b79[_0x2a5a96(0xbdd)](_0x2c9e30,_0x4e04de);}}}_0x49d412&&(_0x496748[_0x2a5a96(0x89a)]=_0x49d412,_0x17f93a=!![]),_0x17f93a&&_0x496298[_0x2a5a96(0xb2f)](_0x496748);}}else{const _0x307056=_0x4d1020[_0x2a5a96(0x7e9)]('div');_0x307056[_0x2a5a96(0x73e)]=_0x2a5a96(0xa59);const _0x66d324=_0x4e2912+'-'+_0x43837e(_0x1d7596+0x1)[_0x2a5a96(0x839)](0x2,'0')+'-'+_0x442f17(_0x2759bf)['padStart'](0x2,'0');if(_0x66d324===_0x54fe88)_0x307056[_0x2a5a96(0x79f)]['add'](_0x2a5a96(0x9c0));if(_0x66d324===_0x2a1855[_0x2a5a96(0x73b)])_0x307056[_0x2a5a96(0x79f)][_0x2a5a96(0x366)](_0x2a5a96(0x96d));const _0x5404cd=_0x3cebe7[_0x2a5a96(0x7e9)](_0x2a5a96(0x277));_0x5404cd['className']=_0x2a5a96(0x737),_0x5404cd[_0x2a5a96(0x65b)]=_0x185af1,_0x307056['appendChild'](_0x5404cd);const _0x3be0ec=_0xc8bbea[_0x2a5a96(0x2a3)][_0x2a5a96(0x485)](_0x2df969=>_0x2df969[_0x2a5a96(0x569)]===_0x66d324);if(_0x3be0ec[_0x2a5a96(0x968)]>0x0){const _0x3d0f8c=_0x16ccae['createElement'](_0x2a5a96(0x591));_0x3d0f8c[_0x2a5a96(0x73e)]=_0x2a5a96(0x9e4),_0x307056[_0x2a5a96(0x364)](_0x3d0f8c);}_0x307056[_0x2a5a96(0xafb)]('click',()=>{const _0x5726ad=_0x2a5a96;_0x365bee[_0x5726ad(0x73b)]=_0x66d324,_0x5940c2();}),_0xdb0b43['appendChild'](_0x307056);}}try{if(_0x2a5a96(0x95c)==='orBTG'){const _0x147473=_0x1d5002['getElementById'](_0x2a5a96(0x73f)),_0x2102fe=_0x147473[_0x2a5a96(0x9c6)]('.wb-entry-item\x20input:checked'),_0x1322bc=_0x1bd663[_0x2a5a96(0x3eb)](_0x2a5a96(0xe9));if(_0x2102fe['length']===0x0)_0x1322bc['textContent']='--\x20点击选择\x20--';else _0x2102fe[_0x2a5a96(0x968)]>0x2?_0x1322bc[_0x2a5a96(0x65b)]=_0x2a5a96(0xa14)+_0x2102fe[_0x2a5a96(0x968)]+'\x20项':_0x1322bc[_0x2a5a96(0x65b)]=_0x23cd50['from'](_0x2102fe)[_0x2a5a96(0xbb5)](_0xf221f1=>_0xf221f1[_0x2a5a96(0x384)][_0x2a5a96(0x65b)][_0x2a5a96(0x2e2)]())['join']('、');}else{const _0x53f761=await _0xb7fe2e(_0x496298);if(!_0x53f761)return![];if(_0x43317b){if('GLRpX'===_0x2a5a96(0xa0e))try{if(_0x2a5a96(0x1a8)!=='HCEbU')_0x23f28c(_0x2a5a96(0x11c)+_0x46ffa4[_0x2a5a96(0x5a1)]);else{let _0x22cb2a=_0x53f761['trim']();const _0x16bffa=_0x22cb2a['match'](/(\[[\s\S]*\])/);_0x16bffa&&(_0x22cb2a=_0x16bffa[0x1]);const _0x424335=JSON[_0x2a5a96(0x97b)](_0x22cb2a);if(Array[_0x2a5a96(0xc29)](_0x424335)){_0x35d0f9[_0x2a5a96(0x5d2)]=[..._0x424335],_0x35d0f9[_0x2a5a96(0xadf)][_0x4588e9['id']]=[..._0x424335],_0x4b8772();const _0x370a10=_0x424335['map'](_0x1fd847=>_0x1fd847['speaker']==='narrator'?_0x1fd847[_0x2a5a96(0xa56)]:_0x1fd847['speaker']+':\x20'+_0x1fd847[_0x2a5a96(0xa56)])['join']('\x0a\x0a');_0x35d0f9[_0x2a5a96(0x6b9)]['push']({'role':'assistant','senderId':_0x4588e9['id'],'timestamp':Date[_0x2a5a96(0x5ee)](),'isOffline':!![],'content':_0x370a10});}}}catch(_0x17ac4a){console[_0x2a5a96(0x4a1)](_0x2a5a96(0x960),_0x17ac4a,_0x2a5a96(0x20d),_0x53f761),_0x35d0f9['conversationHistory'][_0x2a5a96(0xb2f)]({'role':_0x2a5a96(0xaf6),'senderId':_0x4588e9['id'],'timestamp':Date[_0x2a5a96(0x5ee)](),'isOffline':!![],'content':_0x2a5a96(0x463)+_0x53f761+']'});}else _0x15e162[_0x2a5a96(0x58f)][_0x2a5a96(0x22c)](_0x381072[_0x2a5a96(0x58f)][_0x2a5a96(0x7eb)]()-0x1),_0x1a9f7e();}else{const _0x4ff9b1=_0x3ac897(_0x53f761),_0x4d2a16=_0x4ff9b1[_0x2a5a96(0xbb5)](_0x9cee5b=>{const _0x12ffb8=_0x2a5a96;if(_0x12ffb8(0x315)==='IHaVi'){const _0x769ee3=_0x9cee5b[_0x12ffb8(0x2e2)](),_0x47c903=_0x769ee3[_0x12ffb8(0xac5)](/^\[sticker:(.*?)\]$/),_0x24b97d=_0x769ee3['match'](/^\[transfer:([\d.]+)\|(.*?)\]$/),_0x40a7b3=_0x769ee3['match'](/^\[music:(.*?)\|(.*?)\]$/),_0x537d68=_0x769ee3[_0x12ffb8(0xac5)](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/),_0x4f7688=_0x769ee3[_0x12ffb8(0xac5)](/^\[html\]([\s\S]*)\[\/html\]$/);if(_0x4f7688){if(_0x12ffb8(0x5f2)!==_0x12ffb8(0x368))return{'type':_0x12ffb8(0x4d1),'content':_0x4f7688[0x1][_0x12ffb8(0x2e2)]()};else{const _0x4a30f4=_0x576ebf[_0x12ffb8(0xa9a)]===_0x10c113(_0x490c89[_0x12ffb8(0xba6)])['id']?_0x2f5ad2(_0x32861f[_0x12ffb8(0xba6)]):_0x3bcba8(_0x4a6da3['recipientId']);_0x3183fd[_0x12ffb8(0xbdd)](_0x4ed81c,{'type':_0x12ffb8(0x986),'amount':_0x43c6a7[_0x12ffb8(0xcc8)],'recipientId':_0x148fe7[_0x12ffb8(0xa9a)],'content':_0x12ffb8(0xc33)+(_0x4a30f4?.[_0x12ffb8(0x19d)]||'未知')+_0x12ffb8(0x630)+_0x48b2dc[_0x12ffb8(0xcc8)]+']'});}}else{if(_0x40a7b3)return{'type':_0x12ffb8(0xcc1),'songName':_0x40a7b3[0x1][_0x12ffb8(0x2e2)](),'artist':_0x40a7b3[0x2][_0x12ffb8(0x2e2)]()};else{if(_0x47c903)return{'type':_0x12ffb8(0x881),'name':_0x47c903[0x1][_0x12ffb8(0x2e2)]()};else{if(_0x537d68){if('qbEJd'===_0x12ffb8(0x1d1))_0x3e7455[_0x12ffb8(0x19d)]!==_0x12ffb8(0x19e)&&(_0x292606['error'](_0x12ffb8(0xb62),_0xc0e176),_0x36db23({'role':_0x12ffb8(0xaf6),'content':_0x12ffb8(0x7e4)+_0x32757a['message']},_0x11ea24[_0x12ffb8(0x6b9)][_0x12ffb8(0x968)]-0x1));else return{'type':_0x12ffb8(0xc5d),'eventType':_0x537d68[0x1]['trim'](),'eventDate':_0x537d68[0x2]['trim'](),'eventContent':_0x537d68[0x3][_0x12ffb8(0x2e2)]()};}else{if(_0x24b97d){const _0x282865=parseFloat(_0x24b97d[0x1]),_0x288b71=_0x24b97d[0x2][_0x12ffb8(0x2e2)](),_0x469065=_0x5f52db(_0x35d0f9['activeChatId']);let _0x132716=null;if(_0x288b71===_0x469065[_0x12ffb8(0x19d)])_0x132716=_0x469065['id'];else{if(_0x12ffb8(0x838)===_0x12ffb8(0x385))_0x275ecb['preventDefault'](),_0x2e3237();else{const _0x349bd7=_0x1f3fa9();if(_0x349bd7[_0x12ffb8(0xb12)]==='group'){const _0x510b49=_0x35d0f9[_0x12ffb8(0x1f2)][_0x12ffb8(0x9cd)](_0x3bdd09=>_0x349bd7[_0x12ffb8(0x8f1)][_0x12ffb8(0xb63)](_0x3bdd09['id'])&&_0x3bdd09['name']===_0x288b71);if(_0x510b49)_0x132716=_0x510b49['id'];}}}if(_0x132716)return{'type':_0x12ffb8(0x986),'amount':_0x282865,'recipientId':_0x132716,'senderId':_0x4588e9['id']};else return{'type':_0x12ffb8(0xa0c),'content':_0x12ffb8(0xc43)+_0x288b71+'”，但没找到人)'};}else{if(_0x769ee3){if('zPiSk'!==_0x12ffb8(0x36f))_0x1d1a1a?_0xd00288(_0x2283d9):_0x2c008f(new _0x4b0cd3('Canvas\x20to\x20Blob\x20conversion\x20failed.'));else return{'type':_0x12ffb8(0xa0c),'content':_0x769ee3};}}}}}}return null;}else{const _0x5c7629=_0x3814f6[_0x12ffb8(0xb18)](_0x12ffb8(0xbcc));if(!_0x5c7629)return;const _0x41ce92=_0x14d95c(),_0x39b594=_0x5a45a0[_0x12ffb8(0x2a3)][_0x12ffb8(0x485)](_0x5af8f6=>_0x5af8f6[_0x12ffb8(0x569)]===_0x41ce92&&_0x5af8f6[_0x12ffb8(0xb12)]==='todo');_0x5c7629[_0x12ffb8(0x280)]='',_0x39b594[_0x12ffb8(0x968)]>0x0?_0x39b594[_0x12ffb8(0x175)](_0xc8924=>{const _0x35095e=_0x12ffb8,_0x2a1858=_0x20f121[_0x35095e(0x7e9)](_0x35095e(0x591));_0x2a1858[_0x35095e(0x73e)]='todo-item-small',_0x2a1858['textContent']=_0xc8924['content'],_0x5c7629[_0x35095e(0x364)](_0x2a1858);}):_0x5c7629['innerHTML']=_0x12ffb8(0x3cb);}})[_0x2a5a96(0x485)](Boolean),_0x498af3=async _0x1112c2=>{const _0x18a3d7=_0x2a5a96,_0x75e8b6={'role':'assistant','senderId':_0x4588e9['id'],'timestamp':Date[_0x18a3d7(0x5ee)](),'isOffline':_0x43317b};if(_0x1112c2[_0x18a3d7(0xb12)]==='music'){const {songName:_0xaff982,artist:_0x140339}=_0x1112c2;_0x75e8b6['type']=_0x18a3d7(0xcc1),_0x75e8b6[_0x18a3d7(0x9bc)]=_0x18a3d7(0x5da)+_0xaff982+_0x18a3d7(0x204)+_0x140339+']';try{if('BVOgG'===_0x18a3d7(0x7ba)){const _0x5e8e5d=await _0x5eed63(_0xaff982,_0x140339);Object[_0x18a3d7(0xbdd)](_0x75e8b6,{'songName':_0xaff982,'artist':_0x140339,'coverUrl':_0x5e8e5d[_0x18a3d7(0x2d5)],'playableUrl':_0x5e8e5d[_0x18a3d7(0x391)]});}else{if(_0x52b4be['role']===_0x18a3d7(0x809))return _0xb3c3da[_0x18a3d7(0xc1a)]?.[_0x18a3d7(0x19d)]||'User';if(_0x5f098a[_0x18a3d7(0xb12)]===_0x18a3d7(0x253)){const _0x42f20a=_0x5d1cee[_0x18a3d7(0xbc0)]?_0x2392ef(_0x2bb19b[_0x18a3d7(0xbc0)]):null;return _0x42f20a?.['name']||_0x18a3d7(0xb77);}else{const _0x2f56eb=_0x612aa0(_0x405899[_0x18a3d7(0x8f1)][0x0]);return _0x2f56eb?.[_0x18a3d7(0x19d)]||'AI';}}}catch(_0x2f88e3){'fPhbc'==='fPhbc'?Object['assign'](_0x75e8b6,{'songName':_0xaff982,'artist':_0x140339,'coverUrl':null,'playableUrl':null}):_0xf7dbd9['textContent']=_0x18a3d7(0xa14)+_0x385f22[_0x18a3d7(0x968)]+'\x20项';}}else{if(_0x1112c2[_0x18a3d7(0xb12)]===_0x18a3d7(0x881)){const _0x78cb1c=_0x95c6c9['find'](_0x4c5913=>_0x4c5913[_0x18a3d7(0x19d)]===_0x1112c2[_0x18a3d7(0x19d)]);if(_0x78cb1c)Object[_0x18a3d7(0xbdd)](_0x75e8b6,{'content':_0x18a3d7(0x66f)+_0x78cb1c[_0x18a3d7(0x19d)]+']','displayUrl':_0x78cb1c['url']});else _0x75e8b6[_0x18a3d7(0x9bc)]=_0x18a3d7(0x60c)+_0x1112c2['name']+']';}else{if(_0x1112c2[_0x18a3d7(0xb12)]==='transfer'){const _0x4db14d=_0x1112c2['recipientId']===_0x5f52db(_0x35d0f9['activeChatId'])['id']?_0x5f52db(_0x35d0f9[_0x18a3d7(0xba6)]):_0x45939a(_0x1112c2[_0x18a3d7(0xa9a)]);Object[_0x18a3d7(0xbdd)](_0x75e8b6,{'type':_0x18a3d7(0x986),'amount':_0x1112c2[_0x18a3d7(0xcc8)],'recipientId':_0x1112c2['recipientId'],'content':'[AI向\x20'+(_0x4db14d?.[_0x18a3d7(0x19d)]||'未知')+_0x18a3d7(0x630)+_0x1112c2[_0x18a3d7(0xcc8)]+']'});}else{if(_0x1112c2[_0x18a3d7(0xb12)]===_0x18a3d7(0xc5d)){if(_0x18a3d7(0x56d)!=='IhlSP')_0x3d7e54[_0x18a3d7(0x52e)](_0x18a3d7(0x83a)),_0x1abc7e[_0x18a3d7(0x15e)][_0x18a3d7(0x3fc)](_0x18a3d7(0x4e8)),_0x4c2cc9[_0x18a3d7(0x15e)]=null;else{const _0x2fb7bc=_0x5f52db(_0x3953c9['id']);if(!_0x2fb7bc||!_0x2fb7bc['id']){if(_0x18a3d7(0x301)!==_0x18a3d7(0x301)){const _0x876b6c=_0x3916df[_0x18a3d7(0x850)][_0x18a3d7(0x2e2)]();if(!_0x876b6c){_0x3570dc(_0x18a3d7(0x8f8));return;}const _0x25393e=_0x22267e[_0x18a3d7(0x39e)](_0x576e91[_0x18a3d7(0x9c6)]('input[type=\x22checkbox\x22]:checked'))[_0x18a3d7(0xbb5)](_0x880a8b=>_0x880a8b[_0x18a3d7(0x218)]['id']);if(_0x25393e['length']<0x2){_0x40770d(_0x18a3d7(0xbb3));return;}const _0x453136={'id':_0x18a3d7(0x5cf)+_0x41cc99['now'](),'type':'group','name':_0x876b6c,'participantIds':_0x25393e};_0x2aeae7[_0x18a3d7(0xa6c)][_0x18a3d7(0xb2f)](_0x453136),_0x5b151d['activeChatId']=_0x453136['id'],_0x1008e4(),_0xf817eb(),_0x53e593(),_0x1626e1(),_0x397ff8('群聊“'+_0x876b6c+'”已创建！'),_0x1a1e08(_0x18a3d7(0x152),'groupChatCreate');}else return console[_0x18a3d7(0x4a1)]('AI\x20试图创建事件，但找不到有效的用户ID。'),null;}_0x35d0f9[_0x18a3d7(0x2a3)][_0x18a3d7(0xb2f)]({'id':_0x18a3d7(0x2bf)+Date['now'](),'date':_0x1112c2['eventDate'],'type':_0x1112c2['eventType'],'content':_0x1112c2['eventContent'],'userId':_0x2fb7bc['id'],'createdBy':'ai'}),_0x5c9c95(),_0x46d6ea(),_0x158a39();const _0x3b660a=_0x45939a(_0x4588e9['id']);if(_0x3b660a&&_0x1112c2[_0x18a3d7(0xb66)]===_0x18a3d7(0x1ed)){if(_0x18a3d7(0x540)!==_0x18a3d7(0x771))_0x28dfd2(_0x18a3d7(0x1e2)+_0x3b660a[_0x18a3d7(0x19d)]+_0x18a3d7(0x1d5)+_0x1112c2['eventContent']);else{const _0x5eeee7=_0x451033(_0x3c7b6b[_0x18a3d7(0x8f1)][0x0]);return _0x5eeee7?.[_0x18a3d7(0x19d)]||'AI';}}return{'role':_0x18a3d7(0xaf6),'senderId':_0x4588e9['id'],'timestamp':Date[_0x18a3d7(0x5ee)](),'isOffline':_0x43317b,'content':null};return{'role':_0x18a3d7(0xaf6),'senderId':_0x4588e9['id'],'timestamp':Date['now'](),'isOffline':_0x43317b,'content':null};}}else{const _0x532285=_0x30804d(_0x1112c2['content']);Object['assign'](_0x75e8b6,{'content':_0x532285['content'],'quotedMessage':_0x532285[_0x18a3d7(0x659)]});}}}}return _0x75e8b6;},_0x39735c=await Promise[_0x2a5a96(0x799)](_0x4d2a16['map'](_0x498af3));for(const _0x4caab5 of _0x39735c){if(_0x4caab5['type']===_0x2a5a96(0x4d1))_0x38697d(_0x4caab5,-0x1),_0x232e46[_0x2a5a96(0x14f)]=_0x232e46['scrollHeight'];else(_0x4caab5[_0x2a5a96(0x9bc)]||_0x4caab5['displayUrl']||_0x4caab5[_0x2a5a96(0xb12)]===_0x2a5a96(0xcc1)||_0x4caab5[_0x2a5a96(0x659)])&&(await new Promise(_0x310870=>setTimeout(_0x310870,0x12c+Math[_0x2a5a96(0xeb)]()*0x190)),_0x35d0f9[_0x2a5a96(0x6b9)][_0x2a5a96(0xb2f)](_0x4caab5),_0x38697d(_0x4caab5,_0x35d0f9[_0x2a5a96(0x6b9)][_0x2a5a96(0x968)]-0x1),_0x232e46['scrollTop']=_0x232e46[_0x2a5a96(0x3aa)]);}}return _0x1d6327(),!![];}}catch(_0x5858fc){if(_0x2a5a96(0x855)===_0x2a5a96(0x855)){if(_0x5858fc[_0x2a5a96(0x19d)]!=='AbortError'){console[_0x2a5a96(0x4a1)]('生成失败:\x20',_0x5858fc);const _0x108d06={'role':_0x2a5a96(0xaf6),'content':_0x2a5a96(0x7e4)+_0x5858fc[_0x2a5a96(0x5a1)],'senderId':_0x4588e9['id'],'isOffline':_0x43317b};_0x35d0f9['conversationHistory'][_0x2a5a96(0xb2f)](_0x108d06),_0x65b693();}return![];}else _0x35a0f0=!_0x463f13,_0x210a0c['classList'][_0x2a5a96(0x34b)]('deletion-mode',_0x21d0e3),_0x3bcc1b[_0x2a5a96(0x65b)]=_0x1cd4bc?'完成':'管理',_0x55d3d1[_0x2a5a96(0x7d9)]['display']=_0x4e2c30?_0x2a5a96(0xb91):_0x2a5a96(0x9ba),!_0x52e4c7&&(_0x140519['querySelectorAll'](_0x2a5a96(0xb43))[_0x2a5a96(0x175)](_0x40e404=>_0x40e404[_0x2a5a96(0x79f)][_0x2a5a96(0xb42)]('selected')),_0x4c5d70[_0x2a5a96(0x79f)][_0x2a5a96(0xb42)](_0x2a5a96(0x530)));}finally{'LlYFV'==='ImpHK'?_0x397208+=_0x2a5a96(0xbdf)+_0xd9451a[_0x2a5a96(0x19d)]+'的第一次互动。\x0a':_0x242d9b(![]);}}async function _0x182a99(){const _0x402ee6=_0x17d1db,_0x210d32=_0x1f3fa9();if(!_0x210d32||_0x210d32[_0x402ee6(0xb12)]!=='private'){if(_0x402ee6(0xa1a)===_0x402ee6(0xa1a)){_0x28dfd2(_0x402ee6(0x607));return;}else _0x283790['entries']['splice'](_0x326435,0x1),_0xc3735c(),_0x5a6533(),_0x5981e0(_0x402ee6(0xc26));}if(_0x35d0f9[_0x402ee6(0x2eb)]){_0x28dfd2('我正在说话呢，别打岔！');return;}const _0x4ceed2=await _0x3a7c5b(_0x402ee6(0x206));if(!_0x4ceed2)return;_0x13f6ba(!![],_0x402ee6(0x202)),_0x50d044[_0x402ee6(0x850)]='',_0x2fb175[_0x402ee6(0x79f)][_0x402ee6(0x366)](_0x402ee6(0xa36)),_0x35d0f9['isGenerating']=!![];try{const _0x5c5b64=_0x45939a(_0x210d32[_0x402ee6(0x8f1)][0x0]),_0x5c3873=_0x5f52db(_0x210d32['id']),_0x2fa794=_0x2687e8(_0x210d32['id']);if(_0x2fa794[_0x402ee6(0x968)]===0x0){_0x50d044['value']='#\x20这段私聊是空的，没有时间锚点，无法开始总结。';return;}const _0x4ad156=new Date(_0x2fa794[0x0]['timestamp']);_0x4ad156[_0x402ee6(0xc2c)](0x0,0x0,0x0,0x0),_0x13f6ba(!![],_0x402ee6(0x7b2));let _0x5a4dcb=[];_0x35d0f9['chats'][_0x402ee6(0x175)](_0xb63ce0=>{const _0x47fe79=_0x402ee6;if(_0x47fe79(0x1eb)!==_0x47fe79(0x49a)){if(_0xb63ce0['participantIds']['includes'](_0x5c5b64['id'])){const _0x200147=_0x2687e8(_0xb63ce0['id']);_0x200147[_0x47fe79(0x175)](_0x3bdbd5=>{const _0x5e0882=_0x47fe79;if(_0x5e0882(0x30d)!=='MuKvz')_0x3bdbd5['timestamp']>=_0x4ad156[_0x5e0882(0x283)]()&&_0x3bdbd5['role']!==_0x5e0882(0x773)&&_0x3bdbd5[_0x5e0882(0x9bc)]&&_0x5a4dcb[_0x5e0882(0xb2f)]({'timestamp':_0x3bdbd5['timestamp'],'type':_0xf4cc81(_0xb63ce0),'content':'['+(_0x3bdbd5[_0x5e0882(0x129)]===_0x5e0882(0x809)?_0x5c3873['name']:_0x5c5b64[_0x5e0882(0x19d)])+']:\x20'+_0x3bdbd5[_0x5e0882(0x9bc)]});else{if(_0x534f10[_0x5e0882(0xce3)]['closest'](_0x5e0882(0x80c)))return;const _0x4187e8=_0x12d9e5[_0x5e0882(0xb18)](_0x5e0882(0x9a0));_0x4187e8&&_0x4187e8[_0x5e0882(0x9db)]();}});}}else _0x5eaf05=_0xb96373[_0x47fe79(0x2b5)][0x0]['clientX'],_0x12bd23=_0x464779[_0x47fe79(0x2b5)][0x0]['clientY'],_0x2a4038=!![],_0x4fd69d='';});const _0x19b835=_0x35d0f9[_0x402ee6(0x3e7)][_0x402ee6(0x9cd)](_0x529b39=>_0x529b39[_0x402ee6(0x563)]===_0x5c5b64['id']);_0x19b835&&_0x19b835[_0x402ee6(0x2fb)]&&('dGSWf'===_0x402ee6(0x958)?_0x12dc67[_0x402ee6(0x4a1)](_0x402ee6(0xb3c)):_0x19b835['entries'][_0x402ee6(0x175)](_0x512e36=>{const _0x3fde58=_0x402ee6;if(_0x512e36[_0x3fde58(0xaa4)]>=_0x4ad156[_0x3fde58(0x283)]()){if(_0x3fde58(0xa4b)!==_0x3fde58(0xa4b)){_0x157a83(_0x3fde58(0x80d));return;}else _0x5a4dcb['push']({'timestamp':_0x512e36['timestamp'],'type':'交换日记','content':'['+(_0x512e36[_0x3fde58(0x2f3)]===_0x3fde58(0x809)?_0x5c3873['name']:_0x5c5b64[_0x3fde58(0x19d)])+']:\x20'+_0x512e36['content']});}}));const _0x2bed25=[_0x402ee6(0x73c),_0x402ee6(0x778),_0x402ee6(0x707),_0x402ee6(0xa74),'bites','wants','footprints'];for(const _0x19de25 of _0x2bed25){const _0x392d20='snoop_'+_0x5c5b64['id']+'_'+_0x19de25,_0x5e9c22=await _0x48dc86(_0x392d20);if(_0x5e9c22)try{if('fNVlH'===_0x402ee6(0xb5e)){let _0x1efb05=JSON[_0x402ee6(0x97b)](_0x5e9c22);Array['isArray'](_0x1efb05)&&_0x1efb05[_0x402ee6(0x175)](_0x8890aa=>{const _0x23084a=_0x402ee6;if('ECiid'==='ECiid'){const _0x19accd=new Date(_0x8890aa['timestamp']||_0x8890aa[_0x23084a(0xbeb)])[_0x23084a(0x283)]();_0x19accd>=_0x4ad156[_0x23084a(0x283)]()&&_0x5a4dcb[_0x23084a(0xb2f)]({'timestamp':_0x19accd,'type':_0x23084a(0x5dd)+_0x19de25+']','content':JSON['stringify'](_0x8890aa)});}else{const _0x50719b=_0x2d66db['parse'](_0x13a55d);_0x5d766c['isArray'](_0x50719b)?_0x392fb4=[..._0xb5df79,..._0x50719b]:_0xdf3bb5=_0x5f2d04;}});}else _0x419e8b[_0x402ee6(0x9c9)]=_0x115128['createObjectURL'](_0xb566be),_0x15e502[_0x402ee6(0x7d9)][_0x402ee6(0x31f)]='block';}catch(_0x3e5d75){}}const _0x4ebb8d=_0x35d0f9[_0x402ee6(0x8e4)][_0x5c5b64['id']]||[];_0x4ebb8d['forEach'](_0x31ef3e=>{const _0x4ad265=_0x402ee6,_0x913a9=_0x31ef3e[_0x4ad265(0xac5)](/start_time:\s*"?([^"\n]+)"?/);if(_0x913a9){if(_0x4ad265(0x4b1)!==_0x4ad265(0x4b1)){if(_0x2e76c8<0x0||_0x14bc97>=_0x445b15)return;_0x3e1d6f[_0x4ad265(0x7d9)]['transform']=_0x4ad265(0x5ae)+_0x256aa5*(0x64/_0x1364fe)+'%)',_0x54722e[_0x4ad265(0x175)](_0x56a0e0=>_0x56a0e0['classList'][_0x4ad265(0xb42)](_0x4ad265(0x530))),_0x3b54c3[_0x1c92de]['classList'][_0x4ad265(0x366)](_0x4ad265(0x530)),_0x51fa40=_0x41ecb2;}else{const _0xe59b0e=new Date(_0x913a9[0x1])[_0x4ad265(0x283)]();_0xe59b0e&&_0xe59b0e>=_0x4ad156[_0x4ad265(0x283)]()&&_0x5a4dcb[_0x4ad265(0xb2f)]({'timestamp':_0xe59b0e,'type':_0x4ad265(0x192),'content':_0x31ef3e});}}});if(_0x5a4dcb[_0x402ee6(0x968)]===0x0){if(_0x402ee6(0x2da)!==_0x402ee6(0xabc)){_0x50d044[_0x402ee6(0x850)]='#\x20在指定时间线内没有发现任何可供总结的记忆。';return;}else{_0x3a1077();const _0x1fbc21=_0x273e21[_0x402ee6(0x9dd)][_0x402ee6(0x9cd)](_0x5dd4ca=>_0x5dd4ca['id']===_0x507091);if(!_0x1fbc21)return;_0x3540ce[_0x402ee6(0xb34)]=_0x2a772c,_0x136e60(),_0x54b0b4[_0x402ee6(0xb18)](_0x402ee6(0x40c))[_0x402ee6(0x65b)]=_0x1fbc21[_0x402ee6(0x19d)],_0x3b7e80(),_0x126562(_0x402ee6(0xcc1),'friendCircleList'),_0x3445f0();}}_0x13f6ba(!![],_0x402ee6(0xfa)),_0x5a4dcb['sort']((_0x1cc2d2,_0x4b8c21)=>_0x1cc2d2[_0x402ee6(0xaa4)]-_0x4b8c21[_0x402ee6(0xaa4)]);const _0x4ba3fd=_0x5a4dcb[_0x402ee6(0x377)]((_0x51ddb0,_0x13d401)=>{const _0x3fd8de=_0x402ee6,_0x67c0f9=new Date(_0x13d401[_0x3fd8de(0xaa4)])[_0x3fd8de(0x9cf)]()[_0x3fd8de(0xb2d)]('T')[0x0];return!_0x51ddb0[_0x67c0f9]&&(_0x51ddb0[_0x67c0f9]=[]),_0x51ddb0[_0x67c0f9][_0x3fd8de(0xb2f)]('-\x20[来源:\x20'+_0x13d401[_0x3fd8de(0xb12)]+']\x20'+_0x13d401[_0x3fd8de(0x9bc)]),_0x51ddb0;},{});let _0x31bd56='';for(const _0x11a8db in _0x4ba3fd){_0x31bd56+=_0x402ee6(0x64f)+_0x11a8db+'\x0a'+_0x4ba3fd[_0x11a8db][_0x402ee6(0x102)]('\x0a');}_0x13f6ba(!![],'AI书记官正在撰写报告...');const _0x2d67ec=_0x402ee6(0x5b7)+_0x5c5b64[_0x402ee6(0x19d)]+'”生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20报告规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**时间轴**:\x20严格按照我提供的日期顺序进行总结。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【提炼与洞察】**:\x20不要直接复制粘贴！你要从不同来源的情报中【提炼】出当天的关键事件、情感转折、重要决定、以及暴露出的秘密。\x0a\x20\x20\x20\x20-\x20**【关联分析】**:\x20如果同一天内，不同来源（如聊天和日记）提到了同一件事，你要将它们【关联起来】进行总结，而不是简单罗列。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称视角记录。请直接使用“'+_0x5c3873[_0x402ee6(0x19d)]+_0x402ee6(0x879)+_0x5c5b64['name']+_0x402ee6(0x56f)+_0x5c5b64[_0x402ee6(0x19d)]+_0x402ee6(0x58b)+_0x5c3873[_0x402ee6(0x19d)]+_0x402ee6(0xb44)+_0x5c5b64[_0x402ee6(0x19d)]+_0x402ee6(0x763)+_0x5c5b64[_0x402ee6(0x19d)]+_0x402ee6(0x6b7),_0x1edd63=[{'role':'system','content':_0x2d67ec},{'role':'user','content':'#\x20每日情报\x0a'+_0x31bd56}],_0x4ebbb5=await _0xb7fe2e(_0x1edd63);_0x50d044['value']=_0x4ebbb5||_0x402ee6(0xa0f),_0x50d044[_0x402ee6(0x14f)]=0x0;}catch(_0xc67a29){console[_0x402ee6(0x4a1)](_0x402ee6(0x731),_0xc67a29),_0x50d044['value']=_0x402ee6(0xc62)+_0xc67a29[_0x402ee6(0x5a1)];}finally{_0x13f6ba(![]),_0x35d0f9[_0x402ee6(0x2eb)]=![];}}async function _0x4d017c(){const _0x2ba706=_0x17d1db;console[_0x2ba706(0x52e)]('---\x20开始AI回复流程\x20---');if(!_0x35d0f9[_0x2ba706(0x69e)][_0x2ba706(0x915)]||!_0x35d0f9[_0x2ba706(0x69e)]['key']||!_0x35d0f9[_0x2ba706(0x69e)][_0x2ba706(0x9ad)]){_0x28dfd2('请先在\x22设置\x22中配置你的\x20API\x20信息。');return;}const _0x1c8349=_0x35d0f9[_0x2ba706(0x6b9)]['at'](-0x1)?.[_0x2ba706(0x129)]==='user';if(!_0x1c8349||_0x35d0f9[_0x2ba706(0x2eb)])return;const _0x23f168=_0x1f3fa9();if(!_0x23f168)return;_0x35d0f9[_0x2ba706(0x2eb)]=!![],_0x242d9b(!![]);try{if(_0x2ba706(0xc1b)!==_0x2ba706(0xfc)){if(_0x23f168[_0x2ba706(0xb12)]===_0x2ba706(0x869)){if(_0x2ba706(0x238)!==_0x2ba706(0x537)){const _0x37c21f=_0x45939a(_0x23f168['participantIds'][0x0]);console['log'](_0x2ba706(0xb81));if(_0x37c21f)await _0x3d6203(_0x37c21f,{'force':!![]});}else _0x4806f2(_0x2ba706(0x4e2),_0x2ba706(0xba0));}else{if(_0x2ba706(0x435)==='CgVEv')_0x4a9444['push']({'timestamp':_0x232a37,'type':_0x2ba706(0x192),'content':_0x45424b});else{const _0x101425=await _0x16c9ab();if(_0x101425&&_0x101425[_0x2ba706(0x558)]?.[_0x2ba706(0x968)])await _0x2cd24d(_0x101425);else{console[_0x2ba706(0x174)]('Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.');const _0x2b3116=_0x23f168[_0x2ba706(0x8f1)][_0x2ba706(0xbb5)](_0x45939a)['filter'](Boolean);if(!_0x2b3116[_0x2ba706(0x968)])return;let _0x1dbeb5=0x0;for(const _0x125723 of _0x2b3116){if(_0x2ba706(0x99e)!==_0x2ba706(0x99e)){const _0x17c6eb=_0x41f6b0[_0x2ba706(0x443)]();if(_0x39fc1f['some'](_0x570f5b=>_0x17c6eb[_0x2ba706(0x41d)](_0x570f5b))){const _0x3d0a24=_0x41b4a8[_0x239208];if(typeof _0x3d0a24===_0x2ba706(0xb1e))_0x35f559['push'](_0x3d0a24);if(_0x2a83f9[_0x2ba706(0xc29)](_0x3d0a24))_0x3d0a24[_0x2ba706(0x175)](_0x7d3e8b=>{const _0x2243d5=_0x2ba706;if(typeof _0x7d3e8b===_0x2243d5(0xb1e))_0x3834f8[_0x2243d5(0xb2f)](_0x7d3e8b);});}}else _0x3d6203(_0x125723,{'force':!![],'delayMs':_0x1dbeb5}),_0x1dbeb5+=0x1f4;}}}}}else _0x731181[_0x2ba706(0x99c)]=_0x1203c0[_0x2ba706(0x99c)][_0x2ba706(0x485)](_0x249b84=>!_0x47a630[_0x2ba706(0xb63)](_0x249b84));}catch(_0x2d4ed5){'qowEm'!=='qowEm'?_0x3e38f5[_0x2ba706(0x9c9)]=_0x527565[_0x2ba706(0x89a)]:_0x2d4ed5['name']!==_0x2ba706(0x19e)&&(console['error'](_0x2ba706(0xb62),_0x2d4ed5),_0x38697d({'role':'assistant','content':_0x2ba706(0x7e4)+_0x2d4ed5[_0x2ba706(0x5a1)]},_0x35d0f9[_0x2ba706(0x6b9)][_0x2ba706(0x968)]-0x1));}finally{_0x35d0f9['isGenerating']=![],_0x242d9b(![]);}}function _0x1bd432(_0x2002d5,_0x47d01d){const _0x12c0ac=_0x17d1db,_0x43e579=_0x47d01d[_0x12c0ac(0x443)](),_0x2d0a46=_0x2002d5[_0x12c0ac(0x443)]();if(_0x43e579[_0x12c0ac(0x41d)](_0x12c0ac(0xbb7)))return _0x12c0ac(0x8a7);if(_0x2d0a46[_0x12c0ac(0xb63)]('anthropic.com'))return _0x12c0ac(0x8a7);if(_0x2d0a46[_0x12c0ac(0xb63)](_0x12c0ac(0xcc3)))return _0x12c0ac(0x46f);if(_0x43e579['startsWith'](_0x12c0ac(0x46f)))return _0x12c0ac(0x46f);return _0x12c0ac(0x5c9);}async function _0xb7fe2e(_0x570037,_0x2b0e92={}){const _0x47edeb=_0x17d1db;if('zVUZq'!=='zVUZq')return[];else{_0x35d0f9[_0x47edeb(0x15e)]&&_0x35d0f9['currentAbortController']['abort'](_0x47edeb(0x4f4));_0x35d0f9[_0x47edeb(0x15e)]=new AbortController();const _0x27367b=_0x35d0f9['currentAbortController']['signal'],{endpoint:_0x8d5250,key:_0x31c0c2,model:_0x210de9}=_0x35d0f9[_0x47edeb(0x69e)],_0x368510=!!_0x2b0e92[_0x47edeb(0x3c3)],_0x4ecbce=_0x1bd432(_0x8d5250,_0x210de9);console[_0x47edeb(0x52e)](_0x47edeb(0x7a8)+_0x4ecbce);let _0x74efb6='';try{switch(_0x4ecbce){case _0x47edeb(0x8a7):{const _0x23f43b=_0x152fd6(_0x31c0c2),_0xffc23d=_0x570037[_0x47edeb(0x9cd)](_0x3c94ae=>_0x3c94ae[_0x47edeb(0x129)]==='system')?.[_0x47edeb(0x9bc)]||'',_0x4f475d=_0x570037[_0x47edeb(0x485)](_0x163d61=>_0x163d61['role']!=='system'),_0x205961={'model':_0x210de9,'system':_0xffc23d,'messages':_0x4f475d[_0x47edeb(0xbb5)](_0xffa155=>({'role':_0xffa155[_0x47edeb(0x129)],'content':[{'type':_0x47edeb(0xa0c),'text':_0xffa155[_0x47edeb(0x9bc)]}]})),'max_tokens':0x2000},_0x3070de=await fetch(_0x8d5250,{'method':_0x47edeb(0x620),'headers':{'Content-Type':_0x47edeb(0x6ea),'x-api-key':_0x23f43b,'anthropic-version':_0x47edeb(0x21c)},'body':JSON[_0x47edeb(0xcf9)](_0x205961),'signal':_0x27367b});if(!_0x3070de['ok']){if(_0x47edeb(0x1b6)===_0x47edeb(0x1b6)){const _0x25940d=await _0x3070de[_0x47edeb(0x3c3)]()[_0x47edeb(0x6cd)](()=>({}));throw new Error('Claude\x20API\x20错误:\x20'+_0x3070de[_0x47edeb(0x4d8)]+_0x47edeb(0x204)+(_0x25940d[_0x47edeb(0x4a1)]?.['message']||_0x3070de[_0x47edeb(0x360)]));}else{_0x48f147[_0x47edeb(0x79f)][_0x47edeb(0x366)]('transfer');const _0x496560=_0x3acd9a[_0x47edeb(0x129)]==='user'?_0x344e13(_0x3204b9[_0x47edeb(0xba6)]):_0x5015c4(_0x534aa7[_0x47edeb(0xbc0)]),_0xbd2066=_0x1dda07[_0x47edeb(0xa9a)]===_0x4e33d7(_0x139913[_0x47edeb(0xba6)])['id']?_0x1ea961(_0x1dc0d5[_0x47edeb(0xba6)]):_0x3df5a6(_0xacdfc2['recipientId']),_0x52f5b2=_0x496560?.['name']?_0x496560[_0x47edeb(0x19d)]+_0x47edeb(0x180):'转账',_0x5ef105=_0xbd2066?.[_0x47edeb(0x19d)]?_0x47edeb(0x254)+_0xbd2066[_0x47edeb(0x19d)]:'转账';_0x5b554c['innerHTML']+=_0x47edeb(0x1f4)+_0x52f5b2+_0x47edeb(0x4c9)+_0x385066[_0x47edeb(0xcc8)]['toFixed'](0x2)+_0x47edeb(0xc27)+_0x5ef105+'</div>\x0a\x20\x20\x20\x20\x20\x20</div>';}}const _0x4f8980=await _0x3070de[_0x47edeb(0x3c3)]();_0x74efb6=_0x4f8980['content']?.[0x0]?.['text']||'';break;}case _0x47edeb(0x46f):{const _0x2216a0=_0x152fd6(_0x31c0c2),_0xe77ea2=_0x8d5250[_0x47edeb(0xb63)](_0x47edeb(0xcc4)),_0x23cede=_0x315bbb=>{const _0x54e61f=_0x47edeb;if('GAZZU'!==_0x54e61f(0x5ef))_0x48f01d[_0x54e61f(0x7d9)][_0x54e61f(0x823)]='';else{const _0x31b637=[];if(_0x315bbb[_0x54e61f(0x9bc)])_0x31b637['push']({'text':_0x315bbb['content']});if(_0x315bbb['image']){if('NmmqR'===_0x54e61f(0x9da)){const _0xb160bd=_0x315bbb[_0x54e61f(0x89a)][_0x54e61f(0xb2d)](',')[0x1],_0x42e663=_0x315bbb[_0x54e61f(0x89a)][_0x54e61f(0x185)](_0x315bbb[_0x54e61f(0x89a)][_0x54e61f(0x65a)](':')+0x1,_0x315bbb[_0x54e61f(0x89a)][_0x54e61f(0x65a)](';'))||_0x54e61f(0x935);_0x31b637[_0x54e61f(0xb2f)]({'inline_data':{'mime_type':_0x42e663,'data':_0xb160bd}});}else{const _0x1541d7={'id':'circle_'+_0x49b698[_0x54e61f(0x5ee)](),'name':_0x572ee0,'boundUserProfileId':_0x2b4569,'memberCharacterIds':_0x55b490,'posts':[]};_0x1e310d['friendCircles'][_0x54e61f(0xb2f)](_0x1541d7);}}return _0x31b637;}},_0x6d9ce7=_0x570037[_0x47edeb(0xbb5)](_0x90ff8=>({'role':_0x90ff8['role']==='assistant'?'model':_0x90ff8[_0x47edeb(0x129)]===_0x47edeb(0x773)?'user':_0x90ff8['role'],'parts':_0x23cede(_0x90ff8)}))['filter'](_0x4dd733=>_0x4dd733[_0x47edeb(0x4f2)][_0x47edeb(0x968)]>0x0),_0x4f1b53={'contents':_0x6d9ce7};_0x368510&&_0xe77ea2&&(_0x4f1b53['generationConfig']={'response_mime_type':_0x47edeb(0x6ea)});const _0x448ea6=_0x8d5250+_0x47edeb(0x110)+_0x210de9+_0x47edeb(0x5c0)+_0x2216a0+_0x47edeb(0xb26),_0x72b622=await fetch(_0x448ea6,{'method':_0x47edeb(0x620),'headers':{'Content-Type':_0x47edeb(0x6ea)},'body':JSON[_0x47edeb(0xcf9)](_0x4f1b53),'signal':_0x27367b});if(!_0x72b622['ok'])throw new Error(_0x47edeb(0xbde)+_0x72b622[_0x47edeb(0x4d8)]);const _0x1b7a15=_0x72b622[_0x47edeb(0x3f0)][_0x47edeb(0x7d3)](),_0x25333c=new TextDecoder();let _0x15f1db='';while(!![]){if('AHPxW'==='WRgKh'){const _0x305f56=_0x7c665b['createObjectURL'](_0x2e4a45);_0x5ecb86[_0x47edeb(0x9c9)]=_0x305f56,_0x3e4764[_0x47edeb(0x7c3)]=()=>_0x4e2eb9[_0x47edeb(0xaa5)](_0x305f56);}else{if(_0x27367b['aborted']){console[_0x47edeb(0x52e)](_0x47edeb(0x1a9)),_0x1b7a15[_0x47edeb(0x167)]();break;}const {done:_0x58ee77,value:_0x2532c4}=await _0x1b7a15[_0x47edeb(0x814)]();if(_0x58ee77)break;const _0x265320=_0x25333c['decode'](_0x2532c4,{'stream':!![]}),_0x77202f=_0x265320['split']('\x0a')[_0x47edeb(0x485)](_0x1c8e54=>_0x1c8e54['trim']()[_0x47edeb(0x41d)](_0x47edeb(0x24b)));for(const _0x47bbc4 of _0x77202f){const _0x2da438=_0x47bbc4[_0x47edeb(0x39f)](_0x47edeb(0xc13),'');if(_0x2da438===_0x47edeb(0xb0f))break;try{_0x47edeb(0x470)!==_0x47edeb(0x470)?(_0xbc691d[_0x47edeb(0x4a1)]('动态中的音乐搜索失败:',_0x1d079a),_0x3060d5[_0x47edeb(0xb12)]=_0x47edeb(0xa0c)):_0x15f1db+=JSON[_0x47edeb(0x97b)](_0x2da438)[_0x47edeb(0x4e0)][0x0][_0x47edeb(0x9bc)][_0x47edeb(0x4f2)][0x0][_0x47edeb(0xa0c)];}catch{}}}}_0x74efb6=_0x15f1db;break;}case _0x47edeb(0x5c9):default:{const _0x1cc913=_0x152fd6(_0x31c0c2),_0x141094=_0x8d5250[_0x47edeb(0x39f)](/\/+$/,'')+_0x47edeb(0xca0),_0x1cf75b=_0x570037['map'](_0x29d99c=>{const _0x56829b=_0x47edeb;if(_0x29d99c[_0x56829b(0x129)]===_0x56829b(0x809)&&_0x29d99c[_0x56829b(0x89a)]){if('PdJrk'===_0x56829b(0x3b9))_0x1cf0b8=_0x151833,_0x5cadf6[_0x56829b(0x79f)][_0x56829b(0x366)](_0x56829b(0xa36));else return{'role':_0x56829b(0x809),'content':[{'type':_0x56829b(0xa0c),'text':_0x29d99c['content']||'\x20'},{'type':'image_url','image_url':{'url':_0x29d99c[_0x56829b(0x89a)],'detail':_0x56829b(0x8d5)}}]};}return{'role':_0x29d99c[_0x56829b(0x129)],'content':_0x29d99c[_0x56829b(0x9bc)]};})[_0x47edeb(0x485)](_0x1e95c1=>_0x1e95c1[_0x47edeb(0x9bc)]),_0x4b2cf0={'model':_0x210de9,'messages':_0x1cf75b,'max_tokens':0x2000,..._0x368510?{'response_format':{'type':_0x47edeb(0x15c)}}:{}},_0x442da4=await fetch(_0x141094,{'method':'POST','headers':{'Content-Type':_0x47edeb(0x6ea),'Authorization':_0x47edeb(0x740)+_0x1cc913},'body':JSON['stringify'](_0x4b2cf0),'signal':_0x27367b});if(!_0x442da4['ok']){const _0x43c160=await _0x442da4[_0x47edeb(0x3c3)]()['catch'](()=>({}));throw new Error(_0x47edeb(0xc65)+_0x442da4['status']+_0x47edeb(0x204)+(_0x43c160['error']?.[_0x47edeb(0x5a1)]||_0x442da4[_0x47edeb(0x360)]));}const _0x3985d4=await _0x442da4[_0x47edeb(0x3c3)]();_0x74efb6=_0x3985d4[_0x47edeb(0xd0b)]?.[0x0]?.[_0x47edeb(0x5a1)]?.[_0x47edeb(0x9bc)]||'';break;}}return _0x74efb6;}catch(_0x4b9745){if(_0x4b9745[_0x47edeb(0x19d)]===_0x47edeb(0x19e)){if(_0x47edeb(0x88b)===_0x47edeb(0x5dc)){const _0x2d69a6=_0x2ce928(_0x47edeb(0xc5c));if(_0x2d69a6&&_0x2d69a6[_0x47edeb(0x2e2)]()){const _0xb56b7={'id':_0x47edeb(0x684)+_0x4897af[_0x47edeb(0x5ee)](),'name':_0x2d69a6[_0x47edeb(0x2e2)]()};_0xcc724b[_0x47edeb(0x6c0)]['push'](_0xb56b7),_0x5b3a4d[_0x47edeb(0x143)]=_0xb56b7['id'],_0x1ae2b5(),_0x2d7a65();}}else return console['log']('Fetch\x20request\x20was\x20aborted.'),'';}throw _0x4b9745;}finally{if(_0x47edeb(0x47a)!==_0x47edeb(0x47a)){_0x4c1975['value']=_0x47edeb(0x938);return;}else _0x35d0f9[_0x47edeb(0x15e)]&&_0x35d0f9[_0x47edeb(0x15e)][_0x47edeb(0x41c)]===_0x27367b&&(_0x35d0f9[_0x47edeb(0x15e)]=null);}}}async function _0x5728fe(){const _0xd5e08f=_0x17d1db;if(_0xd5e08f(0x2af)===_0xd5e08f(0x2af)){const _0x31ecf2=_0x2abf6e[_0xd5e08f(0xa6a)]['classList']['contains'](_0xd5e08f(0x530)),_0x773054=_0x31ecf2?_0xc314cc[_0xd5e08f(0x850)]:null;let _0x365e3a=null,_0x1a8394='';if(_0x31ecf2&&_0x773054){if('xFrxC'!=='iuduH'){_0x365e3a=_0x35d0f9[_0xd5e08f(0xa6c)][_0xd5e08f(0x9cd)](_0x3669fd=>_0x3669fd[_0xd5e08f(0xb12)]===_0xd5e08f(0x869)&&_0x3669fd[_0xd5e08f(0x8f1)]['includes'](_0x773054));const _0x426e2a=_0x45939a(_0x773054);_0x1a8394=_0x426e2a?_0x426e2a['name']:_0xd5e08f(0x396);}else{if(_0x537f96<0x0||_0x49804c>=_0x33ebf0[_0xd5e08f(0x968)])return;_0x5a2fa5=_0x114e9a;const _0x1d9878=_0x1edd0f[_0x1ca1b3];_0x1c79ba[_0xd5e08f(0x9c9)]=_0x1d9878[_0xd5e08f(0xc5e)]||_0x1d9878[_0xd5e08f(0x391)],_0x539170[_0xd5e08f(0xc36)](),_0x37e743(),_0x1e34f8();}}else{if(_0x35d0f9[_0xd5e08f(0xba6)]){if(_0xd5e08f(0x91a)===_0xd5e08f(0xc8c))try{const _0x4cf4b5=_0x58e073[_0xd5e08f(0x97b)](_0x1aacb5['getItem'](_0xd5e08f(0x1cd))||'{}'),_0x4bcfc3={..._0x4cf4b5,..._0x544c54};_0x2cb802[_0xd5e08f(0x570)](_0xd5e08f(0x1cd),_0xbdd363['stringify'](_0x4bcfc3));}catch(_0x5b03f7){_0x5f56eb[_0xd5e08f(0x4a1)](_0xd5e08f(0x3d2),_0x5b03f7);}else{_0x365e3a=_0x1f3fa9();const _0x516869=document[_0xd5e08f(0xb18)](_0xd5e08f(0xa66))['textContent'];_0x1a8394=_0x516869||_0xd5e08f(0x38a);}}}if(!_0x365e3a){_0x28dfd2(_0xd5e08f(0x874));return;}const _0x538a15=await _0x3a7c5b(_0xd5e08f(0x7c7)+_0x1a8394+_0xd5e08f(0x3a4));if(!_0x538a15)return;_0x365e3a['id']===_0x35d0f9[_0xd5e08f(0xba6)]&&(_0x1a29ae(),_0x35d0f9[_0xd5e08f(0x6b9)]=[],_0x3f1b6c());try{localStorage['removeItem'](_0xd5e08f(0x392)+_0x365e3a['id']);}catch(_0x33efa3){_0xd5e08f(0x808)===_0xd5e08f(0x7d2)?(_0x296712[_0xd5e08f(0xe3)]=null,_0x56a887('已自动断开与其他人的听歌同步。'),_0x304a96()):console[_0xd5e08f(0x4a1)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20'+_0x365e3a['id'],_0x33efa3);}_0x28dfd2('\x22'+_0x1a8394+_0xd5e08f(0x979));}else _0x381713+=_0x12417f[_0xd5e08f(0x97b)](_0x1f69a6)['candidates'][0x0][_0xd5e08f(0x9bc)][_0xd5e08f(0x4f2)][0x0][_0xd5e08f(0xa0c)];}const _0x2a0e45=document[_0x17d1db(0xb18)](_0x17d1db(0x27e)),_0x4cfa5e=document['getElementById']('import-all-data-button'),_0x21b1be=document['getElementById']('import-data-input');_0x2a0e45[_0x17d1db(0xafb)](_0x17d1db(0x9db),async()=>{const _0x14764b=_0x17d1db;_0x13f6ba(!![],_0x14764b(0x40e));const _0x488f12=[];try{const _0x1ea64b={'localStorageData':{},'indexedDBData':{},'indexedDBMusicData':[],'indexedDBSnoopData':[]};for(let _0x519bf6=0x0;_0x519bf6<localStorage['length'];_0x519bf6++){if(_0x14764b(0x724)===_0x14764b(0x724)){const _0x5a39c1=localStorage[_0x14764b(0xc53)](_0x519bf6);if(_0x5a39c1)_0x1ea64b['localStorageData'][_0x5a39c1]=localStorage[_0x14764b(0x9a1)](_0x5a39c1);}else _0x1c0056(),_0x1fdff1(_0x14764b(0x4a7),_0x14764b(0x58a));}const _0xcfc77f=await _0x4c3f9a,_0x1095ff=_0xcfc77f['transaction']([_0x383e71,_0x32c4f4,_0x55cc29],_0x14764b(0xa43)),_0x2c1fcb=_0x1095ff[_0x14764b(0x566)](_0x383e71),_0x28096f=_0x1095ff[_0x14764b(0x566)](_0x32c4f4),_0x461c15=_0x1095ff[_0x14764b(0x566)](_0x55cc29),_0x478435=new Promise((_0x338c28,_0x20f70f)=>{const _0x19dfc2=_0x14764b;if(_0x19dfc2(0x3b6)===_0x19dfc2(0x3b6)){const _0x185a49=_0x2c1fcb[_0x19dfc2(0xab0)]();_0x185a49['onsuccess']=()=>_0x338c28(_0x185a49['result']),_0x185a49[_0x19dfc2(0x892)]=()=>_0x20f70f(_0x185a49[_0x19dfc2(0x4a1)]);}else return{'type':_0x19dfc2(0xa0c),'content':_0x26ce83};}),_0x525455=new Promise((_0x83e74,_0x3af23b)=>{const _0x5b1887=_0x14764b,_0x2aa299=_0x28096f[_0x5b1887(0xab0)]();_0x2aa299[_0x5b1887(0x9d2)]=()=>_0x83e74(_0x2aa299[_0x5b1887(0xd15)]),_0x2aa299[_0x5b1887(0x892)]=()=>_0x3af23b(_0x2aa299['error']);}),_0x2b4d04=new Promise((_0x3b011e,_0x2ce973)=>{const _0x2b9a00=_0x14764b,_0x34b18e=_0x461c15[_0x2b9a00(0xab0)]();_0x34b18e[_0x2b9a00(0x9d2)]=()=>_0x3b011e(_0x34b18e[_0x2b9a00(0xd15)]),_0x34b18e[_0x2b9a00(0x892)]=()=>_0x2ce973(_0x34b18e[_0x2b9a00(0x4a1)]);}),[_0x3b97ec,_0xb93699,_0xca43cc]=await Promise['all']([_0x478435,_0x525455,_0x2b4d04]);for(const _0x12cf2c of _0x3b97ec){if(_0x12cf2c[_0x14764b(0x885)]instanceof Blob){if(_0x14764b(0xb1d)===_0x14764b(0xb5f)){if(!_0x4b2ddf[_0x14764b(0xc29)](_0x328c3f))return _0x14764b(0x695);if(_0x122eef[_0x14764b(0x968)]===0x0)return _0x14764b(0x51c);return _0x73e1cd['sort']((_0x37a79f,_0x1ce2c5)=>new _0x3ed6bf(_0x1ce2c5['timestamp'])-new _0x462c83(_0x37a79f[_0x14764b(0xaa4)])),_0x2da0ba[_0x14764b(0xbb5)](_0x3c5bfd=>_0x14764b(0xb31)+(_0x3c5bfd[_0x14764b(0xca8)]||_0x14764b(0x5b4))+_0x14764b(0x554)+(_0x3c5bfd[_0x14764b(0xaa4)]||'')+_0x14764b(0x90b)+(_0x3c5bfd['item_name']||_0x14764b(0x197))+_0x14764b(0xbea)+(_0x3c5bfd[_0x14764b(0xa18)]||0x0)[_0x14764b(0xab2)](0x2)+_0x14764b(0x82e))['join']('');}else try{_0x14764b(0x90a)!==_0x14764b(0x90a)?_0x485c06[_0x14764b(0x7d9)][_0x14764b(0x31f)]=_0x14764b(0x9ba):_0x1ea64b['indexedDBData'][_0x12cf2c['id']]=await _0x36479b(_0x12cf2c[_0x14764b(0x885)]);}catch(_0x4f5303){_0x488f12['push'](_0x12cf2c['id']);}}}for(const _0x498e5a of _0xb93699){const _0x3d8487={..._0x498e5a};_0x498e5a['audio']instanceof Blob&&(_0x3d8487[_0x14764b(0x2e6)]=await _0x36479b(_0x498e5a[_0x14764b(0x2e6)])),_0x498e5a[_0x14764b(0x2d5)]instanceof Blob&&('iFifI'!=='IxtVE'?_0x3d8487[_0x14764b(0x2d5)]=await _0x36479b(_0x498e5a[_0x14764b(0x2d5)]):_0x55d04c('已复制到剪贴板！')),_0x1ea64b[_0x14764b(0x655)][_0x14764b(0xb2f)](_0x3d8487);}_0x1ea64b[_0x14764b(0x2b0)]=_0xca43cc;const _0x475c90=new Blob([JSON[_0x14764b(0xcf9)](_0x1ea64b,null,0x2)],{'type':_0x14764b(0x6ea)}),_0x3bf053=URL[_0x14764b(0x900)](_0x475c90),_0x4fb358=document['createElement']('a'),_0x14ca8e=new Date(),_0x348325=_0x14ca8e[_0x14764b(0x156)]()+'-'+String(_0x14ca8e['getMonth']()+0x1)[_0x14764b(0x839)](0x2,'0')+'-'+String(_0x14ca8e['getDate']())[_0x14764b(0x839)](0x2,'0');_0x4fb358[_0x14764b(0x97f)]=_0x3bf053,_0x4fb358['download']=_0x14764b(0x38e)+_0x348325+_0x14764b(0xa32),document[_0x14764b(0x3f0)][_0x14764b(0x364)](_0x4fb358),_0x4fb358[_0x14764b(0x9db)](),document[_0x14764b(0x3f0)][_0x14764b(0xa81)](_0x4fb358),URL[_0x14764b(0xaa5)](_0x3bf053),_0x13f6ba(![]);if(_0x488f12['length']>0x0)_0x28dfd2(_0x14764b(0x1a2)+_0x488f12[_0x14764b(0x102)]('\x0a'));else{if('IGlmr'!==_0x14764b(0x161))_0x28dfd2(_0x14764b(0x928));else{const _0x4d6ced=_0x4f599c[_0x14764b(0x58f)][_0x14764b(0x156)](),_0x212c78=_0x305e71[_0x14764b(0x58f)][_0x14764b(0x7eb)]();_0x5023f5[_0x14764b(0xb18)](_0x14764b(0xe0))['textContent']=_0x4d6ced+'年\x20'+(_0x212c78+0x1)+'月',_0x7397cd(_0x4d6ced,_0x212c78),_0x19c916(_0x2797b0['selectedDate']);}}}catch(_0x115d1b){_0x13f6ba(![]),console[_0x14764b(0x4a1)]('全量导出失败:',_0x115d1b),_0x28dfd2(_0x14764b(0x5eb)+_0x115d1b[_0x14764b(0x5a1)]);}}),_0x4cfa5e[_0x17d1db(0xafb)]('click',()=>{_0x21b1be['click']();}),_0x1be106[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x4780ec),_0x21b1be[_0x17d1db(0xafb)]('change',_0x32b14f=>{const _0x5ee388=_0x17d1db,_0x143acf=_0x32b14f['target']['files'][0x0];if(!_0x143acf)return;_0x3a7c5b(_0x5ee388(0x53c))[_0x5ee388(0xa34)](_0x829b22=>{const _0x4e00c2=_0x5ee388;if(!_0x829b22){_0x21b1be[_0x4e00c2(0x850)]='';return;}_0x13f6ba(!![],_0x4e00c2(0x796));const _0x426b51=new FileReader();_0x426b51[_0x4e00c2(0x7c3)]=async _0x4fde27=>{const _0x1a120e=_0x4e00c2;try{const _0x10bf97=JSON[_0x1a120e(0x97b)](_0x4fde27[_0x1a120e(0xce3)][_0x1a120e(0xd15)]);if(!_0x10bf97[_0x1a120e(0x9e7)]||!_0x10bf97[_0x1a120e(0x81f)])throw new Error(_0x1a120e(0x2ed));_0x13f6ba(!![],_0x1a120e(0x1c7));const _0x301b13=await Promise['all'](Object[_0x1a120e(0x500)](_0x10bf97['indexedDBData'])[_0x1a120e(0xbb5)](async _0x34df49=>{const _0x10a5f6=_0x1a120e,_0x3a13b4=_0x10bf97['indexedDBData'][_0x34df49];if(typeof _0x3a13b4===_0x10a5f6(0xb1e)&&_0x3a13b4['startsWith'](_0x10a5f6(0x24b))){const _0x539502=await _0x1b74b4(_0x3a13b4);return{'id':_0x34df49,'blob':_0x539502};}return null;}))[_0x1a120e(0xa34)](_0x5dd5e3=>_0x5dd5e3[_0x1a120e(0x485)](Boolean)),_0x1b4ef9=[];if(_0x10bf97[_0x1a120e(0x655)]){_0x13f6ba(!![],'正在准备音乐数据...');const _0x1015b7=_0x10bf97[_0x1a120e(0x655)][_0x1a120e(0xbb5)](async _0xf69395=>{const _0x1403c4=_0x1a120e,_0x4941a7={..._0xf69395};if(_0xf69395[_0x1403c4(0x2e6)])_0x4941a7[_0x1403c4(0x2e6)]=await _0x1b74b4(_0xf69395[_0x1403c4(0x2e6)]);if(_0xf69395[_0x1403c4(0x2d5)])_0x4941a7[_0x1403c4(0x2d5)]=await _0x1b74b4(_0xf69395['cover']);return _0x4941a7;});_0x1b4ef9['push'](...await Promise[_0x1a120e(0x799)](_0x1015b7));}_0x13f6ba(!![],_0x1a120e(0x7db)),localStorage[_0x1a120e(0x7e6)]();for(const _0x11a654 in _0x10bf97[_0x1a120e(0x9e7)]){_0x1a120e(0x7bc)!==_0x1a120e(0x7bc)?_0x1b4698['src']=_0x251681[_0x1a120e(0x900)](_0x4dd207):localStorage[_0x1a120e(0x570)](_0x11a654,_0x10bf97[_0x1a120e(0x9e7)][_0x11a654]);}_0x13f6ba(!![],_0x1a120e(0x8ee));const _0x397db6=await _0x4c3f9a,_0x57c01b=_0x397db6[_0x1a120e(0x832)]([_0x383e71,_0x32c4f4,_0x55cc29],'readwrite'),_0x155d13=_0x57c01b[_0x1a120e(0x566)](_0x383e71),_0x73ddf=_0x57c01b[_0x1a120e(0x566)](_0x32c4f4),_0x25e0f8=_0x57c01b[_0x1a120e(0x566)](_0x55cc29);_0x155d13[_0x1a120e(0x7e6)](),_0x73ddf[_0x1a120e(0x7e6)](),_0x25e0f8[_0x1a120e(0x7e6)](),_0x301b13[_0x1a120e(0x175)](_0x132d28=>_0x155d13[_0x1a120e(0x31b)](_0x132d28)),_0x1b4ef9[_0x1a120e(0x175)](_0x25fade=>_0x73ddf[_0x1a120e(0x31b)](_0x25fade)),_0x10bf97[_0x1a120e(0x2b0)]&&Array[_0x1a120e(0xc29)](_0x10bf97[_0x1a120e(0x2b0)])&&(console[_0x1a120e(0x52e)](_0x1a120e(0x31a)),_0x10bf97[_0x1a120e(0x2b0)][_0x1a120e(0x175)](_0x4fbef0=>_0x25e0f8[_0x1a120e(0x31b)](_0x4fbef0))),await new Promise((_0xf18b18,_0x5e7ad9)=>{const _0x29eb98=_0x1a120e;_0x57c01b['oncomplete']=_0xf18b18,_0x57c01b['onerror']=_0x556d5d=>_0x5e7ad9(_0x556d5d['target'][_0x29eb98(0x4a1)]);}),_0x13f6ba(![]),_0x28dfd2('数据导入成功！应用即将刷新...'),setTimeout(()=>location['reload'](),0x640);}catch(_0x3ce6bb){_0x13f6ba(![]),console[_0x1a120e(0x4a1)](_0x1a120e(0xb61),_0x3ce6bb),_0x28dfd2('导入失败:\x20'+_0x3ce6bb['message']);}finally{_0x1a120e(0x7a5)==='SJSNn'?_0x21b1be[_0x1a120e(0x850)]='':(_0x56a5ee={'title':_0x18bc22['songName'],'artist':_0x3dffac['artist'],'cover':_0x2cb2bb[_0x1a120e(0x22d)]||(_0x14a2e9['coverId']?_0x1a120e(0x6a6)+_0x3f1146[_0x1a120e(0x67f)]:_0x410230),'isFromLibrary':!![]},_0x5c84fa[_0x1a120e(0x9c9)]=_0x35e241[_0x1a120e(0xc5e)],_0x4cf216[_0x1a120e(0xc36)](),_0x6ce43e['currentlyPlayingIndex']=_0x3ceda3[_0x1a120e(0x17b)][_0x1a120e(0x59a)](_0x103b37=>_0x103b37['id']===_0x4cb820['id']),_0x30ffc6());}},_0x426b51[_0x4e00c2(0xa89)](_0x143acf);});});function _0x2d335e(){const _0x1fdad8=_0x17d1db;_0x1fdad8(0x4c8)!==_0x1fdad8(0x6e3)?(_0x48e75e['value']=_0x35d0f9[_0x1fdad8(0x69e)][_0x1fdad8(0x915)]||'',_0x64dabf[_0x1fdad8(0x850)]=_0x35d0f9[_0x1fdad8(0x69e)][_0x1fdad8(0xc53)]||'',_0x38240d['value']=_0x35d0f9[_0x1fdad8(0x69e)][_0x1fdad8(0x9ad)]||'',_0x1a5dcd['value']=String(_0x35d0f9['preferences']?.['perChatContextLines']??0x64),document['getElementById']('api-provider')[_0x1fdad8(0x850)]=_0x35d0f9[_0x1fdad8(0x69e)]['provider']||_0x1fdad8(0x5c9)):_0x28bb7f=![];}function _0x3e5a08(){const _0x5be474=_0x17d1db;_0x35d0f9[_0x5be474(0x69e)][_0x5be474(0x915)]=_0x48e75e['value'][_0x5be474(0x2e2)](),_0x35d0f9[_0x5be474(0x69e)][_0x5be474(0xc53)]=_0x64dabf['value'][_0x5be474(0x2e2)](),_0x35d0f9[_0x5be474(0x69e)][_0x5be474(0x9ad)]=_0x38240d[_0x5be474(0x850)][_0x5be474(0x2e2)](),_0x35d0f9[_0x5be474(0x69e)][_0x5be474(0x28f)]=document[_0x5be474(0xb18)]('api-provider')['value'];const _0x3792b7=parseInt(_0x1a5dcd['value'],0xa);_0x35d0f9[_0x5be474(0x2e8)][_0x5be474(0x60f)]=Number[_0x5be474(0x104)](_0x3792b7)&&_0x3792b7>0x0?_0x3792b7:0x64,_0x5c9c95(),_0x28dfd2('设置已保存！');}function _0x118717(){const _0x2f17f1=_0x17d1db;_0x2f17f1(0x95e)===_0x2f17f1(0x20a)?_0x535557(_0x2f3d2c['id']):(_0x401263[_0x2f17f1(0x850)]=_0x35d0f9['userProfile']['name']||'',_0x21f7eb[_0x2f17f1(0x9c9)]=_0x35d0f9['userProfile'][_0x2f17f1(0x36b)]||_0x395094,_0x17a849[_0x2f17f1(0x850)]=_0x35d0f9[_0x2f17f1(0xc1a)][_0x2f17f1(0x1ab)]||'');}async function _0x389b4f(_0x35b33b=null){const _0x3cdf42=_0x17d1db;if(_0x3cdf42(0x3f1)===_0x3cdf42(0x3f1)){_0x198934('characterEdit',_0x11a0ee),_0x47030d('char-edit-bind-user');const _0x2b75d2=_0x35b33b?_0x35d0f9['characters'][_0x3cdf42(0x9cd)](_0x18b3b0=>_0x18b3b0['id']===_0x35b33b):null;_0x21a097(_0x3cdf42(0x73f),_0x2b75d2?_0x2b75d2['linkedWorldBookIds']||[]:[]);const _0x1b7679=document[_0x3cdf42(0xb18)](_0x3cdf42(0x303)),_0x45e916=document[_0x3cdf42(0xb18)]('user-avatar-frame-url-in-chat');_0x54594c[_0x3cdf42(0x9c9)]=_0x20a236,_0x7dc08c[_0x3cdf42(0x850)]='',_0x58ae53[_0x3cdf42(0x7d9)][_0x3cdf42(0x2f8)]='',_0x3c6a5f[_0x3cdf42(0x850)]='',_0x1930bb[_0x3cdf42(0x7d9)][_0x3cdf42(0x2f8)]='',_0x37e245[_0x3cdf42(0x850)]='';const _0x30bfaf=[_0x3cdf42(0x680),_0x3cdf42(0x582),'angry','sad',_0x3cdf42(0x223)];_0x30bfaf[_0x3cdf42(0x175)](_0x1059a9=>{const _0x43a92d=_0x3cdf42;document['getElementById']('char-edit-sprite-'+_0x1059a9+_0x43a92d(0x5b3))['style']['backgroundImage']='',document[_0x43a92d(0xb18)](_0x43a92d(0x8c5)+_0x1059a9+_0x43a92d(0x92e))[_0x43a92d(0x850)]='';});if(_0x35b33b){if(_0x3cdf42(0x7f6)!==_0x3cdf42(0x7f6)){if(!_0x3a663c||!_0x383dea[_0x3cdf42(0xba6)])return;const _0xb5103e={'role':'user','content':_0x3cdf42(0xbaa)+_0x3da040[_0x3cdf42(0x19d)]+']','displayUrl':_0x21b26b[_0x3cdf42(0x391)],'timestamp':_0xf13dc9[_0x3cdf42(0x5ee)]()};_0x16201e[_0x3cdf42(0x6b9)][_0x3cdf42(0xb2f)](_0xb5103e),_0xf6d175(_0xb5103e,_0x1843f2['conversationHistory']['length']-0x1),_0x3a63e(),_0x584434[_0x3cdf42(0x79f)][_0x3cdf42(0xb42)](_0x3cdf42(0xa36));}else{if(!_0x2b75d2)return;_0xc314cc[_0x3cdf42(0x850)]=_0x2b75d2['id'],_0x25e7f3[_0x3cdf42(0x65b)]=_0x3cdf42(0x221),_0x1a5ea1['value']=_0x2b75d2[_0x3cdf42(0x19d)],_0x2358ad['value']=_0x2b75d2[_0x3cdf42(0xd09)],_0x4ecdd1['value']=_0x2b75d2['persona'],document[_0x3cdf42(0xb18)](_0x3cdf42(0x17e))['value']=_0x2b75d2[_0x3cdf42(0x342)]||'',_0x1b7679[_0x3cdf42(0x850)]=_0x2b75d2[_0x3cdf42(0xc08)]||'',_0x45e916[_0x3cdf42(0x850)]=_0x2b75d2[_0x3cdf42(0x33f)]||'';const _0x1390d2=_0x35d0f9['chats'][_0x3cdf42(0x9cd)](_0x10fd86=>_0x10fd86['type']===_0x3cdf42(0x869)&&_0x10fd86[_0x3cdf42(0x8f1)][_0x3cdf42(0xb63)](_0x35b33b));document[_0x3cdf42(0xb18)]('char-edit-bind-user')[_0x3cdf42(0x850)]=_0x1390d2?.['boundUserProfileId']||_0x35d0f9[_0x3cdf42(0x742)];try{const _0x5d9ea6=await _0x5288fd('char_avatar_'+_0x2b75d2['id']);_0x54594c[_0x3cdf42(0x9c9)]=_0x5d9ea6?URL[_0x3cdf42(0x900)](_0x5d9ea6):_0x2b75d2[_0x3cdf42(0x36b)]||_0x20a236;const _0x2ee9ae=await _0x5288fd(_0x3cdf42(0x7ef)+_0x2b75d2['id']);if(_0x2ee9ae)_0x58ae53[_0x3cdf42(0x7d9)]['backgroundImage']=_0x3cdf42(0x575)+URL['createObjectURL'](_0x2ee9ae)+'\x27)';const _0x4b7b8c=await _0x5288fd('char_offline_bg_'+_0x2b75d2['id']);if(_0x4b7b8c)_0x1930bb[_0x3cdf42(0x7d9)]['backgroundImage']='url(\x27'+URL[_0x3cdf42(0x900)](_0x4b7b8c)+'\x27)';for(const _0x1a7b2f of _0x30bfaf){if('lNzSJ'!==_0x3cdf42(0x349)){const _0x1fca23=_0x4484a2[0x0],_0x2a7cf3=new _0x2dbfb4(_0x1fca23[_0x3cdf42(0x569)]+_0x3cdf42(0xae5)),_0x3e58d3=_0x2a7cf3-_0x49414b,_0x14ae05=_0x5a738e[_0x3cdf42(0x85e)](_0x3e58d3/(0x3e8*0x3c*0x3c*0x18));_0x1758f7['textContent']='距离「'+_0x1fca23[_0x3cdf42(0x9bc)]+'」',_0x52d4da[_0x3cdf42(0x280)]=_0x3cdf42(0x971)+_0x14ae05+_0x3cdf42(0xb78);}else{const _0x4740c5=await _0x5288fd(_0x3cdf42(0x43a)+_0x1a7b2f+'_'+_0x2b75d2['id']);_0x4740c5&&(document[_0x3cdf42(0xb18)](_0x3cdf42(0x8c5)+_0x1a7b2f+_0x3cdf42(0x5b3))[_0x3cdf42(0x7d9)][_0x3cdf42(0x2f8)]=_0x3cdf42(0x575)+URL[_0x3cdf42(0x900)](_0x4740c5)+'\x27)');}}}catch(_0x115fd8){console['error'](_0x3cdf42(0x4ba)+_0x2b75d2['id']+_0x3cdf42(0x785),_0x115fd8),_0x54594c[_0x3cdf42(0x9c9)]=_0x2b75d2['avatar']||_0x20a236;}}}else{if(_0x3cdf42(0x268)===_0x3cdf42(0xc0a)){_0x1611c5&&(_0x52b8fb(_0x3b396b),_0x496f78=null);_0x58d9e6['getElementById'](_0x3cdf42(0x6a8))['style'][_0x3cdf42(0x31f)]=_0x3cdf42(0x9ba);const _0x38ea89=_0x2411ea[_0x3cdf42(0xb18)](_0x3cdf42(0xe4));if(_0x38ea89)_0x38ea89['remove']();const _0x46e57f=_0x383386[_0x3cdf42(0xb18)]('snoop-home-clock');if(_0x46e57f)_0x46e57f['remove']();_0x53930f(_0x3cdf42(0xc71),'snoopPhone');}else _0xc314cc[_0x3cdf42(0x850)]='',_0x25e7f3[_0x3cdf42(0x65b)]='创建新角色',_0x1a5ea1[_0x3cdf42(0x850)]=_0x3cdf42(0x24f)+(_0x35d0f9[_0x3cdf42(0x1f2)][_0x3cdf42(0x968)]+0x1),_0x2358ad[_0x3cdf42(0x850)]='',_0x4ecdd1[_0x3cdf42(0x850)]='你是一个乐于助人的AI助手。',document[_0x3cdf42(0xb18)](_0x3cdf42(0x17e))['value']='',_0x1b7679[_0x3cdf42(0x850)]='',_0x45e916[_0x3cdf42(0x850)]='';}_0x5f05d4();const _0x59c5eb=document[_0x3cdf42(0xb18)](_0x3cdf42(0x17e));let _0xaf890a=document['getElementById'](_0x3cdf42(0xbae));!_0xaf890a&&(_0xaf890a=document[_0x3cdf42(0x7e9)](_0x3cdf42(0x7d9)),_0xaf890a['id']=_0x3cdf42(0xbae),document['head'][_0x3cdf42(0x364)](_0xaf890a));const _0x3ea14c=()=>{const _0x35bd3b=_0x3cdf42,_0x3aacdb=_0x59c5eb[_0x35bd3b(0x850)];let _0x3c56ae=_0x3aacdb['replace'](/\.bubble\.sent/g,_0x35bd3b(0x9d3))['replace'](/\.bubble\.received/g,_0x35bd3b(0x4ec));_0xaf890a[_0x35bd3b(0x280)]=_0x3c56ae;};_0x59c5eb[_0x3cdf42(0x854)](_0x3cdf42(0xb8d),_0x3ea14c),_0x59c5eb[_0x3cdf42(0xafb)](_0x3cdf42(0xb8d),_0x3ea14c),_0x3ea14c();}else _0x4e5699[_0x3cdf42(0xc02)]=_0x12798f,_0x382ad3[_0x3cdf42(0x892)]=_0x327d1b=>_0x123d15(_0x327d1b['target'][_0x3cdf42(0x4a1)]);}function _0x33ab6f(){const _0x23a583=_0x17d1db;if(_0x23a583(0x132)!==_0x23a583(0x339))try{const _0x169b21={'type':_0x23a583(0xac9),'version':0x1,'timestamp':Date[_0x23a583(0x5ee)](),'accountingData':_0x35d0f9[_0x23a583(0xef)],'accountingLedger':_0x35d0f9[_0x23a583(0xc3c)]},_0x461a62=new Blob([JSON[_0x23a583(0xcf9)](_0x169b21,null,0x2)],{'type':_0x23a583(0x6ea)}),_0x4e47cb=URL['createObjectURL'](_0x461a62),_0x16702a=document[_0x23a583(0x7e9)]('a'),_0x33eb01=new Date(),_0x3d0ef4=_0x33eb01[_0x23a583(0x156)]()+'-'+String(_0x33eb01[_0x23a583(0x7eb)]()+0x1)[_0x23a583(0x839)](0x2,'0')+'-'+String(_0x33eb01['getDate']())[_0x23a583(0x839)](0x2,'0');_0x16702a['href']=_0x4e47cb,_0x16702a[_0x23a583(0x2d8)]='Noir_Accounting_Backup_'+_0x3d0ef4+_0x23a583(0xa32),document['body'][_0x23a583(0x364)](_0x16702a),_0x16702a[_0x23a583(0x9db)](),document['body'][_0x23a583(0xa81)](_0x16702a),URL[_0x23a583(0xaa5)](_0x4e47cb),_0x28dfd2(_0x23a583(0xc74));}catch(_0x43b1ef){console[_0x23a583(0x4a1)](_0x23a583(0x8c1),_0x43b1ef),_0x28dfd2(_0x23a583(0x169)+_0x43b1ef[_0x23a583(0x5a1)]);}else _0x275036[_0x23a583(0x8f1)]=_0x2b9f46[_0x23a583(0x8f1)][_0x23a583(0x485)](_0x111e63=>_0x111e63!==_0x174c59);}function _0x4e28ef(_0x215ccd){const _0x360a80=_0x17d1db,_0x6e88ad=_0x215ccd[_0x360a80(0xce3)][_0x360a80(0x636)][0x0];if(!_0x6e88ad)return;_0x3a7c5b(_0x360a80(0xb21))[_0x360a80(0xa34)](_0x226ef5=>{const _0x51a414=_0x360a80;if(!_0x226ef5){if(_0x51a414(0x541)!==_0x51a414(0x163)){_0x215ccd['target'][_0x51a414(0x850)]='';return;}else _0x4b88ce[_0x51a414(0xb2f)]({'timestamp':_0x229f63,'type':'手机内容['+_0x301580+']','content':_0x174d37[_0x51a414(0xcf9)](_0x4eb92f)});}_0x13f6ba(!![],_0x51a414(0xaac));const _0x23fa53=new FileReader();_0x23fa53[_0x51a414(0x7c3)]=_0x28e433=>{const _0x5c2459=_0x51a414;try{if(_0x5c2459(0x9af)===_0x5c2459(0x9af)){const _0x1d074a=JSON[_0x5c2459(0x97b)](_0x28e433[_0x5c2459(0xce3)][_0x5c2459(0xd15)]);if(_0x1d074a[_0x5c2459(0xb12)]!==_0x5c2459(0xac9)||!_0x1d074a['accountingData']||!_0x1d074a[_0x5c2459(0xc3c)]){if(_0x5c2459(0x80b)===_0x5c2459(0x80b))throw new Error(_0x5c2459(0x9fc));else _0x3dc055=_0x5a0785[_0x5c2459(0x19d)],_0x296156=_0x579826[_0x5c2459(0x36b)];}_0x35d0f9[_0x5c2459(0xef)]=_0x1d074a[_0x5c2459(0xef)],_0x35d0f9['accountingLedger']=_0x1d074a[_0x5c2459(0xc3c)],_0x5c9c95(),_0x13f6ba(![]),_0x28dfd2('时空逆转成功！账本已恢复。'),_0x57cb24();}else _0x281c54[_0x5c2459(0xb2f)](_0x55ca70[_0x5c2459(0x99b)](_0x5c2459(0x885))[_0x5c2459(0xa34)](_0x56260c=>_0x50c6ac[_0x5c2459(0x833)]=new _0x5352d5([_0x56260c],_0x1507d5[_0x5c2459(0x19d)])));}catch(_0x4268e0){'lKriH'==='lKriH'?(_0x13f6ba(![]),console['error']('导入账本失败:',_0x4268e0),_0x28dfd2('导入失败:\x20'+_0x4268e0[_0x5c2459(0x5a1)])):(_0x407db1[_0x5c2459(0x7d9)][_0x5c2459(0x4a6)]=0x55*_0x393cf8+'%',_0x1d6e40[_0x5c2459(0x7d9)][_0x5c2459(0x62d)]=0x55*_0x13ea1e+'%',_0x158392[_0x5c2459(0x7d9)]['left']=_0x469a06+'%',_0x4ac805[_0x5c2459(0x7d9)][_0x5c2459(0x5e0)]=_0x175e6c+'%',_0x2241c1[_0x5c2459(0x7d9)]['transform']=_0x5c2459(0x9fe));}finally{_0x5c2459(0x37b)===_0x5c2459(0x37b)?_0x215ccd[_0x5c2459(0xce3)][_0x5c2459(0x850)]='':_0x2acd5a[_0x5c2459(0x79f)][_0x5c2459(0x366)](_0x5c2459(0x245));}},_0x23fa53[_0x51a414(0xa89)](_0x6e88ad);});}async function _0x1de285(){const _0x19df7b=_0x17d1db;if(_0x19df7b(0xd0f)!==_0x19df7b(0x340)){const _0x2f3858=_0xc314cc[_0x19df7b(0x850)];if(!_0x2f3858){_0x28dfd2(_0x19df7b(0x764));return;}const _0x4d3843=_0x45939a(_0x2f3858);if(!_0x4d3843)return;_0x13f6ba(!![],'正在打包“'+_0x4d3843[_0x19df7b(0x19d)]+_0x19df7b(0xc76));try{const _0x4d211a={'type':_0x19df7b(0x896),'version':0x1,'name':_0x4d3843[_0x19df7b(0x19d)],'remark':_0x4d3843[_0x19df7b(0xd09)],'persona':_0x4d3843[_0x19df7b(0x1ab)],'bubbleCss':_0x4d3843[_0x19df7b(0x342)],'avatar':null,'sprites':{},'worldBooks':[]},_0x58197a=await _0x5288fd('char_avatar_'+_0x4d3843['id']);if(_0x58197a)_0x4d211a[_0x19df7b(0x36b)]=await _0x36479b(_0x58197a);const _0x4a8fff=['normal','happy',_0x19df7b(0x5b9),_0x19df7b(0x3dd),'shy'];for(const _0x147cf8 of _0x4a8fff){const _0x5685fd=await _0x5288fd(_0x19df7b(0x43a)+_0x147cf8+'_'+_0x4d3843['id']);_0x5685fd&&(_0x4d211a[_0x19df7b(0xaff)][_0x147cf8]=await _0x36479b(_0x5685fd));}_0x4d3843['linkedWorldBookIds']&&_0x4d3843[_0x19df7b(0x99c)][_0x19df7b(0x968)]>0x0&&(_0x4d211a[_0x19df7b(0x38f)]=_0x4d3843[_0x19df7b(0x99c)][_0x19df7b(0xbb5)](_0x73e22e=>_0x35d0f9[_0x19df7b(0x38f)][_0x19df7b(0x9cd)](_0xf5015a=>_0xf5015a['id']===_0x73e22e))['filter'](Boolean)[_0x19df7b(0xbb5)](_0x2482f5=>({'name':_0x2482f5['name'],'content':_0x2482f5[_0x19df7b(0x9bc)],'categoryId':_0x2482f5['categoryId']||_0x19df7b(0xb17)})));const _0x83af2c=new Set(_0x4d211a['worldBooks'][_0x19df7b(0xbb5)](_0xada11a=>_0xada11a['categoryId']));_0x4d211a['worldBookCategories']=_0x35d0f9['worldBookCategories'][_0x19df7b(0x485)](_0xce3bbe=>_0x83af2c[_0x19df7b(0x6de)](_0xce3bbe['id']));const _0x563d78=new Blob([JSON[_0x19df7b(0xcf9)](_0x4d211a,null,0x2)],{'type':_0x19df7b(0x6ea)}),_0x29c92b=URL['createObjectURL'](_0x563d78),_0x17ed26=document[_0x19df7b(0x7e9)]('a');_0x17ed26['href']=_0x29c92b,_0x17ed26[_0x19df7b(0x2d8)]=_0x4d3843[_0x19df7b(0x19d)]+_0x19df7b(0x85f),document[_0x19df7b(0x3f0)]['appendChild'](_0x17ed26),_0x17ed26['click'](),document[_0x19df7b(0x3f0)]['removeChild'](_0x17ed26),URL['revokeObjectURL'](_0x29c92b);}catch(_0x57d1e9){console['error']('导出角色卡失败:',_0x57d1e9),_0x28dfd2(_0x19df7b(0x169)+_0x57d1e9['message']);}finally{_0x13f6ba(![]);}}else _0x5d7b28[_0x19df7b(0x280)]+='<p\x20style=\x22margin-top:\x205px;\x22>'+_0x525682+'</p>';}async function _0x487c6a(_0x567178){const _0x1a913e=_0x17d1db,_0x20a87d=_0x567178[_0x1a913e(0xce3)]['files'][0x0];if(!_0x20a87d)return;_0x13f6ba(!![],'正在解析角色卡...');const _0x345ec0=new FileReader();_0x345ec0[_0x1a913e(0x7c3)]=async _0x18bbbd=>{const _0x28933f=_0x1a913e;if(_0x28933f(0xed)===_0x28933f(0xc83))_0x3be6bf[_0x28933f(0xafb)](_0x28933f(0x9db),()=>_0x3f4575['click']()),_0x457ed6['addEventListener'](_0x28933f(0x326),_0x49eb3e);else try{const _0x549e17=JSON[_0x28933f(0x97b)](_0x18bbbd['target'][_0x28933f(0xd15)]);if(_0x549e17[_0x28933f(0xb12)]!=='NoirCharacterCard'){if(_0x28933f(0x483)!=='ebAtM')throw new Error('这不是一张有效的Noir角色卡。');else _0x12d77f[_0x28933f(0xb2f)](_0x5f5ada);}const _0xec8805=[];_0x549e17[_0x28933f(0x6c0)]&&Array[_0x28933f(0xc29)](_0x549e17[_0x28933f(0x6c0)])&&_0x549e17['worldBookCategories']['forEach'](_0x338539=>{const _0x3bd26f=_0x28933f;if(_0x3bd26f(0xcb7)!==_0x3bd26f(0xcb7))_0x55c0cd[_0x3bd26f(0x8f5)]({'behavior':_0x3bd26f(0x937),'block':_0x3bd26f(0x84e)});else{const _0x30d5c5=_0x35d0f9[_0x3bd26f(0x6c0)][_0x3bd26f(0x9cd)](_0x321337=>_0x321337[_0x3bd26f(0x19d)]===_0x338539[_0x3bd26f(0x19d)]);!_0x30d5c5&&_0x35d0f9[_0x3bd26f(0x6c0)][_0x3bd26f(0xb2f)]({'id':_0x338539['id']||_0x3bd26f(0x651)+Date[_0x3bd26f(0x5ee)](),'name':_0x338539[_0x3bd26f(0x19d)]});}});if(_0x549e17[_0x28933f(0x38f)]&&_0x549e17[_0x28933f(0x38f)]['length']>0x0)for(const _0x13cb8f of _0x549e17[_0x28933f(0x38f)]){if(_0x28933f(0x81e)!==_0x28933f(0xa2a)){let _0x44e3c2=_0x35d0f9['worldBooks'][_0x28933f(0x9cd)](_0x13908d=>_0x13908d[_0x28933f(0x19d)]===_0x13cb8f[_0x28933f(0x19d)]&&(_0x13908d[_0x28933f(0xcf5)]||_0x28933f(0xb17))===(_0x13cb8f['categoryId']||'default'));if(_0x44e3c2)_0xec8805[_0x28933f(0xb2f)](_0x44e3c2['id']);else{if('ORkbe'===_0x28933f(0x6f4)){const _0x579ab3={'id':_0x28933f(0x546)+Date['now']()+'_'+Math['random'](),'name':_0x13cb8f[_0x28933f(0x19d)],'content':_0x13cb8f[_0x28933f(0x9bc)],'categoryId':_0x13cb8f[_0x28933f(0xcf5)]||_0x28933f(0xb17)};_0x35d0f9[_0x28933f(0x38f)][_0x28933f(0xb2f)](_0x579ab3),_0xec8805['push'](_0x579ab3['id']);}else{const _0x1402a6=_0x1c78e4['querySelector'](_0x28933f(0x230));_0x1402a6?_0x1402a6[_0x28933f(0x8f5)]({'behavior':_0x28933f(0x937),'block':_0x28933f(0x84e)}):_0x1f058b[_0x28933f(0x14f)]=_0x15034a['scrollHeight'];}}}else _0x5a1d19[_0x28933f(0x54f)]=_0x1ec9e5;}const _0x4f972c=_0x28933f(0xc4c)+Date[_0x28933f(0x5ee)]();let _0x5889b2=null;if(_0x549e17[_0x28933f(0x36b)]){if(_0x28933f(0xbbe)!=='augBr'){const _0x56d882=await _0x1b74b4(_0x549e17[_0x28933f(0x36b)]);await _0xad4538(_0x28933f(0x6eb)+_0x4f972c,_0x56d882),_0x5889b2=await _0x36479b(_0x56d882);}else _0x141f77(),_0x3e88b7('userProfileList','home');}if(_0x549e17[_0x28933f(0xaff)])for(const _0x12ca7b in _0x549e17[_0x28933f(0xaff)]){if(_0x28933f(0x486)===_0x28933f(0x53a))_0x74a24(![]),_0x44c022[_0x28933f(0x2eb)]=![];else{const _0x2f1047=_0x549e17[_0x28933f(0xaff)][_0x12ca7b];if(_0x2f1047){const _0x524f2b=await _0x1b74b4(_0x2f1047);await _0xad4538('char_sprite_'+_0x12ca7b+'_'+_0x4f972c,_0x524f2b);}}}const _0x13c383={'id':_0x4f972c,'name':_0x549e17[_0x28933f(0x19d)],'remark':_0x549e17[_0x28933f(0xd09)]||'','persona':_0x549e17[_0x28933f(0x1ab)],'avatar':_0x5889b2,'linkedWorldBookIds':_0xec8805,'bubbleCss':_0x549e17['bubbleCss']||''};_0x35d0f9[_0x28933f(0x1f2)][_0x28933f(0xb2f)](_0x13c383);const _0xdcd839={'id':_0x28933f(0x1ba)+_0x4f972c,'type':'private','participantIds':[_0x4f972c],'boundUserProfileId':_0x35d0f9[_0x28933f(0x742)]};_0x35d0f9[_0x28933f(0xa6c)][_0x28933f(0xb2f)](_0xdcd839),_0x5c9c95(),await _0x24185b(),_0x28dfd2('“'+_0x13c383['name']+'”已成功导入！');}catch(_0x31531d){console[_0x28933f(0x4a1)]('导入角色卡失败:',_0x31531d),_0x28dfd2('导入失败了，笨蛋:\x20'+_0x31531d[_0x28933f(0x5a1)]);}finally{_0x28933f(0x786)===_0x28933f(0x786)?(_0x13f6ba(![]),_0x567178[_0x28933f(0xce3)][_0x28933f(0x850)]=''):_0x141db7(_0x435dd4,_0x5adde3);}},_0x345ec0[_0x1a913e(0xa89)](_0x20a87d);}function _0x21a097(_0xab5f89,_0x269904=[]){const _0x2dd590=_0x17d1db;if(_0x2dd590(0x325)!==_0x2dd590(0x325))_0x1671d1['preferences'][_0x2dd590(0xbb6)]=null,_0x106da1(),_0x31b04c(),_0x534011(_0x2dd590(0xa4e));else{const _0x5cb7e9=document[_0x2dd590(0xb18)](_0xab5f89);_0x5cb7e9[_0x2dd590(0x280)]='';const _0x12949f=_0x35d0f9['worldBooks'][_0x2dd590(0x377)]((_0x172e51,_0x2fc4a3)=>{const _0x1553e5=_0x2dd590;if(_0x1553e5(0x1c8)!=='pPPwc'){const _0x462de7=_0x2ca937[_0x1553e5(0xac5)](/start_time:\s*"?([^"\n]+)"?/);if(_0x462de7){const _0x19bd39=new _0x222b90(_0x462de7[0x1])[_0x1553e5(0x283)]();_0x19bd39&&_0x19bd39>=_0x5551f8[_0x1553e5(0x283)]()&&_0x5dc454[_0x1553e5(0xb2f)]({'timestamp':_0x19bd39,'type':_0x1553e5(0x192),'content':_0x215cdc});}}else{const _0x37ccf6=_0x2fc4a3[_0x1553e5(0xcf5)]||_0x1553e5(0xb17);if(!_0x172e51[_0x37ccf6]){if(_0x1553e5(0x770)===_0x1553e5(0x770))_0x172e51[_0x37ccf6]=[];else{const _0xe19dfe=_0x2abf17[_0x1553e5(0x3eb)](_0x1553e5(0x6ee));if(_0xe19dfe)_0xe19dfe[_0x1553e5(0xb42)]();}}return _0x172e51[_0x37ccf6]['push'](_0x2fc4a3),_0x172e51;}},{}),_0x5ef7f1=()=>{const _0x3b66d2=_0x2dd590;if(_0xab5f89===_0x3b66d2(0x73f))'lXftV'!=='Maueu'?_0x5f05d4():_0x83abb7['type']===_0x3b66d2(0x2d9)&&_0xff2abc(_0x4e89c0);else{if(_0x3b66d2(0x772)!==_0x3b66d2(0x7cd))_0x31a439();else{if(_0x2d7987)_0x175304(_0x3a44ab);const _0x4a425b=_0x38a331[_0x3b66d2(0xce3)]['closest'](_0x3b66d2(0x327));if(!_0x4a425b)return;const _0x97b983=_0x4a425b[_0x3b66d2(0x218)]['id'];if(!_0x97b983)return;const _0x1d2b36=()=>{_0x5ab0d4=_0x62ea3d(()=>{const _0x41a2c2=_0x52a6;if(_0x4a10b4[_0x41a2c2(0xb12)]===_0x41a2c2(0x983))_0xe3b763[_0x41a2c2(0xa05)]();_0x19b1c4(_0x97b983);},0x320);},_0x520640=()=>{if(_0x2fb09c)_0x597c26(_0x3b909c);};_0x541ad9[_0x3b66d2(0xafb)](_0x3b66d2(0xc4f),_0x520640,{'once':!![]}),_0x420afb['addEventListener'](_0x3b66d2(0x9ff),_0x520640,{'once':!![]}),_0x5c3b3c[_0x3b66d2(0xafb)](_0x3b66d2(0x476),_0x520640,{'once':!![]}),_0x4c0e27[_0x3b66d2(0xafb)](_0x3b66d2(0x2dd),_0x520640,{'once':!![]}),_0x1d2b36();}}},_0x3c4726=[..._0x35d0f9[_0x2dd590(0x6c0)]];if(_0x12949f[_0x2dd590(0xb17)]&&!_0x3c4726[_0x2dd590(0x9cd)](_0x45893c=>_0x45893c['id']===_0x2dd590(0xb17))){if('NwWut'!==_0x2dd590(0xcb8)){const _0x55da74=_0x555fb6[_0x2dd590(0x8e4)][_0x30801f];if(!_0x55da74||_0x55da74['length']===0x0)return'';const _0x3d9a6c=_0x55da74['slice'](0x0,0x3),_0x9d6beb=_0x3d9a6c[_0x2dd590(0xbb5)]((_0x230be1,_0x1bf87d)=>{const _0x1525ce=_0x2dd590,_0x3e93b5=_0x230be1[_0x1525ce(0xac5)](/theme:\s*"?([^"\n]+)"?/)?.[0x1]||'未知主题',_0x1c5067=(_0x230be1[_0x1525ce(0xac5)](/key_events:\s*\n([\s\S]*?)(?=\n\w+:|$)/)?.[0x1]||'')[_0x1525ce(0xb2d)]('\x0a')[_0x1525ce(0xbb5)](_0x2be39d=>_0x2be39d[_0x1525ce(0x2e2)]())[_0x1525ce(0x485)](_0x355de7=>_0x355de7['startsWith']('-'))['join']('\x20');return _0x1525ce(0xc96)+(_0x1bf87d+0x1)+'\x20场直播的主题是“'+_0x3e93b5+_0x1525ce(0x828)+_0x1c5067;})[_0x2dd590(0x102)]('\x0a');return _0x2dd590(0x5e5)+_0x9d6beb;}else{const _0x2e3b78=_0x35d0f9[_0x2dd590(0x6c0)]['some'](_0x3a896c=>_0x3a896c['id']===_0x2dd590(0xb17));!_0x2e3b78&&_0x3c4726[_0x2dd590(0xb2f)]({'id':'default','name':_0x2dd590(0x464)});}}_0x3c4726[_0x2dd590(0x175)](_0x3313a6=>{const _0xc2a0ff=_0x2dd590;if(_0xc2a0ff(0x77d)!==_0xc2a0ff(0x2dc)){const _0x2f7437=_0x12949f[_0x3313a6['id']]||[];if(_0x2f7437[_0xc2a0ff(0x968)]===0x0)return;const _0x48768c=document[_0xc2a0ff(0x7e9)]('div');_0x48768c[_0xc2a0ff(0x73e)]=_0xc2a0ff(0x861);const _0x434b7a=_0x2f7437[_0xc2a0ff(0x19f)](_0x49d55b=>_0x269904[_0xc2a0ff(0xb63)](_0x49d55b['id']));_0x48768c[_0xc2a0ff(0x280)]=_0xc2a0ff(0x160)+_0x3313a6['id']+'\x22\x20'+(_0x434b7a?_0xc2a0ff(0xbbd):'')+'>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-name\x22>'+_0x3313a6['name']+_0xc2a0ff(0x3cd);const _0x23b6ee=_0x48768c[_0xc2a0ff(0x3eb)](_0xc2a0ff(0x6cc));_0x2f7437[_0xc2a0ff(0x175)](_0x1c48e7=>{const _0x6df307=_0xc2a0ff;if(_0x6df307(0x489)!==_0x6df307(0xcbf)){const _0xffeebd=_0x269904[_0x6df307(0xb63)](_0x1c48e7['id']),_0x27afca=document[_0x6df307(0x7e9)](_0x6df307(0xb6e));_0x27afca[_0x6df307(0x73e)]=_0x6df307(0x837),_0x27afca[_0x6df307(0x280)]=_0x6df307(0xced)+_0x1c48e7['id']+_0x6df307(0x85b)+_0x3313a6['id']+'\x22\x20'+(_0xffeebd?_0x6df307(0xbbd):'')+'>\x20'+_0x1c48e7['name'],_0x23b6ee[_0x6df307(0x364)](_0x27afca);}else{const _0x55bd0e=_0x473770[_0x6df307(0x79f)][_0x6df307(0xbbc)](_0x6df307(0xa36));_0xfe0711['classList'][_0x6df307(0x34b)](_0x6df307(0x6cf),_0x55bd0e),!_0x55bd0e&&(_0x282ec6&&_0x432867[_0x6df307(0x9db)]());}}),_0x5cb7e9[_0xc2a0ff(0x364)](_0x48768c);}else _0x5651c8[_0xc2a0ff(0x646)]=!![];}),_0x5cb7e9[_0x2dd590(0x9c6)]('.wb-category-header')[_0x2dd590(0x175)](_0x5b707b=>{const _0x58648d=_0x2dd590;_0x5b707b[_0x58648d(0xafb)](_0x58648d(0x9db),_0x2c2575=>{const _0x43bfbd=_0x58648d;if(_0x2c2575[_0x43bfbd(0xce3)][_0x43bfbd(0xb12)]===_0x43bfbd(0xb85))return;const _0xe05c39=_0x5b707b[_0x43bfbd(0x836)],_0x1c154a=_0x5b707b['querySelector']('.category-toggle-arrow'),_0xdf19ce=_0xe05c39[_0x43bfbd(0x79f)][_0x43bfbd(0xbbc)]('expanded');_0xe05c39[_0x43bfbd(0x79f)][_0x43bfbd(0x34b)](_0x43bfbd(0xc46),!_0xdf19ce),_0x1c154a['classList'][_0x43bfbd(0x34b)](_0x43bfbd(0xc46),!_0xdf19ce);});}),_0x5cb7e9[_0x2dd590(0x9c6)](_0x2dd590(0x1a7))[_0x2dd590(0x175)](_0x91cbc2=>{const _0x5b9537=_0x2dd590;if('roJlD'!==_0x5b9537(0x72e)){const _0xfca363=_0x406e37(_0x18ab00['id']);_0xfca363['forEach'](_0xf6e151=>{const _0x51f3d4=_0x5b9537;_0xf6e151[_0x51f3d4(0xaa4)]>=_0x4dc939[_0x51f3d4(0x283)]()&&_0xf6e151['role']!==_0x51f3d4(0x773)&&_0xf6e151['content']&&_0xdc3dcd[_0x51f3d4(0xb2f)]({'timestamp':_0xf6e151['timestamp'],'type':_0x33656d(_0x3145d6),'content':'['+(_0xf6e151[_0x51f3d4(0x129)]===_0x51f3d4(0x809)?_0x390513['name']:_0x1dbdcc[_0x51f3d4(0x19d)])+_0x51f3d4(0xbc8)+_0xf6e151[_0x51f3d4(0x9bc)]});});}else _0x91cbc2[_0x5b9537(0xafb)](_0x5b9537(0x9db),_0x27c7d8=>{const _0x2ec1d6=_0x5b9537;if(_0x2ec1d6(0x199)===_0x2ec1d6(0x199)){const _0x756b8c=_0x27c7d8[_0x2ec1d6(0xce3)][_0x2ec1d6(0x218)][_0x2ec1d6(0xcf5)],_0x81d54f=_0x27c7d8[_0x2ec1d6(0xce3)]['checked'];_0x5cb7e9[_0x2ec1d6(0x9c6)](_0x2ec1d6(0x114)+_0x756b8c+'\x22]')['forEach'](_0x1e6cbb=>{const _0x418942=_0x2ec1d6;'FGMzL'!==_0x418942(0x203)?_0x59058d():_0x1e6cbb[_0x418942(0xbbd)]=_0x81d54f;}),_0x5ef7f1();}else _0x13a59b[_0x2ec1d6(0x65b)]=_0x2ec1d6(0x611);});}),_0x5cb7e9[_0x2dd590(0x9c6)](_0x2dd590(0x478))[_0x2dd590(0x175)](_0x557662=>{const _0x538a5f=_0x2dd590;_0x557662[_0x538a5f(0xafb)](_0x538a5f(0xb8d),_0x26423a=>{const _0x32a8c8=_0x538a5f;if(_0x32a8c8(0x48f)!==_0x32a8c8(0x48f))_0x5c15e1[_0x32a8c8(0x19d)]=_0x2f1ad1,_0x5543b3[_0x32a8c8(0x9bc)]=_0x55463a,_0x202567[_0x32a8c8(0xcf5)]=_0x5bc93d;else{const _0x54db10=_0x26423a['target'][_0x32a8c8(0x218)][_0x32a8c8(0xcf5)],_0xd50908=_0x5cb7e9[_0x32a8c8(0x9c6)]('.wb-entry-item\x20input[data-category-id=\x22'+_0x54db10+'\x22]'),_0x1892da=_0x5cb7e9[_0x32a8c8(0x9c6)](_0x32a8c8(0x114)+_0x54db10+_0x32a8c8(0xbca)),_0x1e2a86=_0x5cb7e9[_0x32a8c8(0x3eb)]('.category-checkbox[data-category-id=\x22'+_0x54db10+'\x22]');if(_0x1892da[_0x32a8c8(0x968)]===0x0)_0x1e2a86[_0x32a8c8(0xbbd)]=![],_0x1e2a86[_0x32a8c8(0x646)]=![];else _0x1892da[_0x32a8c8(0x968)]===_0xd50908['length']?(_0x1e2a86['checked']=!![],_0x1e2a86[_0x32a8c8(0x646)]=![]):_0x1e2a86['indeterminate']=!![];_0x5ef7f1();}});}),_0x5cb7e9[_0x2dd590(0x9c6)](_0x2dd590(0x1a7))[_0x2dd590(0x175)](_0x3db97d=>{const _0x36f88a=_0x2dd590;if(_0x36f88a(0x7df)==='SXajG'){const _0x19bc89=_0x3db97d[_0x36f88a(0x218)][_0x36f88a(0xcf5)],_0x2bf5a8=_0x5cb7e9[_0x36f88a(0x9c6)]('.wb-entry-item\x20input[data-category-id=\x22'+_0x19bc89+'\x22]'),_0x1d0ca4=_0x5cb7e9['querySelectorAll'](_0x36f88a(0x114)+_0x19bc89+_0x36f88a(0xbca));_0x1d0ca4[_0x36f88a(0x968)]>0x0&&_0x1d0ca4[_0x36f88a(0x968)]<_0x2bf5a8['length']&&('bmfgp'!==_0x36f88a(0x44d)?_0x3db97d[_0x36f88a(0x646)]=!![]:_0x40201d=_0x3e9bed[_0x36f88a(0x162)][0x0]);}else{_0x4ba94d(_0x36f88a(0xc37));return;}});}}async function _0x2aea9b(){const _0x20ffb4=_0x17d1db,_0xa2a82f=[_0x20ffb4(0x680),'happy',_0x20ffb4(0x5b9),_0x20ffb4(0x3dd),_0x20ffb4(0x223)],_0x2edb42=_0xc314cc[_0x20ffb4(0x850)],_0x284ddf=document[_0x20ffb4(0xb18)]('char-edit-bind-user')[_0x20ffb4(0x850)],_0x26429b=_0x7dc08c['files'][0x0],_0x470c8c=_0x3c6a5f[_0x20ffb4(0x636)][0x0],_0x3e0bb9=_0x37e245[_0x20ffb4(0x636)][0x0],_0x3a4ace=document[_0x20ffb4(0x9c6)]('#world-book-checkboxes-container\x20.wb-entry-item\x20input:checked'),_0x49ed88=Array['from'](_0x3a4ace)[_0x20ffb4(0xbb5)](_0x4e3f81=>_0x4e3f81[_0x20ffb4(0x850)]),_0x2d40a7={'name':_0x1a5ea1['value']['trim'](),'remark':_0x2358ad[_0x20ffb4(0x850)][_0x20ffb4(0x2e2)](),'persona':_0x4ecdd1[_0x20ffb4(0x850)]['trim'](),'linkedWorldBookIds':_0x49ed88,'bubbleCss':document[_0x20ffb4(0xb18)](_0x20ffb4(0x17e))[_0x20ffb4(0x850)][_0x20ffb4(0x2e2)](),'avatarFrameUrl':document['getElementById']('char-avatar-frame-url')[_0x20ffb4(0x850)][_0x20ffb4(0x2e2)](),'userAvatarFrameUrl':document[_0x20ffb4(0xb18)](_0x20ffb4(0x257))[_0x20ffb4(0x850)]['trim']()};if(!_0x2d40a7[_0x20ffb4(0x19d)]){if(_0x20ffb4(0x8a1)!==_0x20ffb4(0x8a1))_0x387333[_0x20ffb4(0x6c0)]['push']({'id':_0x282c4b['id']||'wbc_imported_'+_0x2db93b['now'](),'name':_0x6890a9[_0x20ffb4(0x19d)]});else{_0x28dfd2(_0x20ffb4(0xb5a));return;}}try{if(_0x20ffb4(0xaa8)!=='lwoYi'){let _0x9c6010=_0x2edb42;if(_0x2edb42){if('dKIHO'==='dKIHO'){const _0x352eae=_0x35d0f9[_0x20ffb4(0x1f2)][_0x20ffb4(0x9cd)](_0xa76976=>_0xa76976['id']===_0x2edb42);_0x352eae&&Object[_0x20ffb4(0xbdd)](_0x352eae,_0x2d40a7);}else!_0x8277e7[_0x20ffb4(0xbbc)](_0x46083f[_0x20ffb4(0xce3)])&&_0x240259[_0x20ffb4(0xce3)]!==_0x4ca89d&&_0x364eed[_0x20ffb4(0xce3)]!==_0x5c939f&&_0xdeebb5[_0x20ffb4(0x79f)][_0x20ffb4(0xb42)](_0x20ffb4(0xa36));}else{if('RYAMb'===_0x20ffb4(0x32d)){const _0x39ec90='char_'+Date[_0x20ffb4(0x5ee)]();_0x9c6010=_0x39ec90;const _0x1f4ed4={'id':_0x39ec90,..._0x2d40a7};_0x1f4ed4[_0x20ffb4(0x36b)]=_0x26429b?await _0x2a77d2(_0x26429b):_0x20a236,_0x35d0f9[_0x20ffb4(0x1f2)][_0x20ffb4(0xb2f)](_0x1f4ed4);const _0x5fc8d8={'id':'chat_'+_0x39ec90,'type':'private','participantIds':[_0x39ec90],'listenTogetherSession':null};_0x35d0f9[_0x20ffb4(0xa6c)][_0x20ffb4(0xb2f)](_0x5fc8d8);}else{_0xe7566c['error'](_0x20ffb4(0xc9d)+_0x19fea7+_0x20ffb4(0x2f6),_0x3216df);const _0x3821c6=_0x452dc9(_0x4b2c50),_0x44eda8=_0x20ffb4(0x400)+_0x3821c6[_0x20ffb4(0x19d)]+'的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20</div>';let _0x34001b=_0x20ffb4(0x512)+_0x530e68[_0x20ffb4(0x5a1)]+'\x0a\x20\x20\x20\x20</div>';_0x598bb8&&(_0x34001b+=_0x20ffb4(0x3e5)+_0x414b9b(_0x44991e)+_0x20ffb4(0x988)),_0x34e360[_0x20ffb4(0x280)]=_0x44eda8+(_0x20ffb4(0x405)+_0x34001b+_0x20ffb4(0x9b7)),_0x447dc2[_0x20ffb4(0xb18)](_0x20ffb4(0x8d6))['addEventListener']('click',()=>{const _0x1b3179=_0x20ffb4;_0x38ef9c[_0x1b3179(0x7d9)]['display']=_0x1b3179(0x9ba),_0x25e2d2[_0x1b3179(0xb18)](_0x1b3179(0x696))[_0x1b3179(0x7d9)][_0x1b3179(0x31f)]=_0x1b3179(0x9d4);});}}const _0x4e753c=_0x35d0f9[_0x20ffb4(0xa6c)]['find'](_0x1e2995=>_0x1e2995[_0x20ffb4(0xb12)]==='private'&&_0x1e2995['participantIds'][_0x20ffb4(0xb63)](_0x9c6010));_0x4e753c&&(_0x20ffb4(0x10a)!=='iDvUy'?_0x4e753c[_0x20ffb4(0x54f)]=_0x284ddf:_0x15733b[_0x20ffb4(0x15e)]&&_0x4c3251['currentAbortController']['signal']===_0x554d0c&&(_0x43ac3a['currentAbortController']=null));if(_0x26429b)await _0xad4538('char_avatar_'+_0x9c6010,_0x26429b);if(_0x470c8c)await _0xad4538('char_wallpaper_'+_0x9c6010,_0x470c8c);if(_0x3e0bb9)await _0xad4538('char_offline_bg_'+_0x9c6010,_0x3e0bb9);for(const _0x32c8da of _0xa2a82f){const _0xe9a9f4=document['getElementById'](_0x20ffb4(0x8c5)+_0x32c8da+_0x20ffb4(0x92e))['files'][0x0];if(_0xe9a9f4)await _0xad4538(_0x20ffb4(0x43a)+_0x32c8da+'_'+_0x9c6010,_0xe9a9f4);}_0x5c9c95(),_0x24185b(),_0x28dfd2(_0x20ffb4(0x19a)),_0x198934(_0x20ffb4(0x152),'characterEdit');if(!_0x2edb42){const _0x3ba5a0=_0x20ffb4(0x1ba)+_0x9c6010;_0x1c8dfc(_0x3ba5a0),_0x53f26d(!![]);}}else _0x5c97ad['livestreamReplays'][_0x43230a['id']]=[];}catch(_0x577088){console[_0x20ffb4(0x4a1)](_0x20ffb4(0x89f),_0x577088),_0x28dfd2(_0x20ffb4(0x11c)+_0x577088['message']);}if(_0x26429b||_0x470c8c||_0x3e0bb9||_0xa2a82f[_0x20ffb4(0x83f)](_0x94f7e4=>document['getElementById'](_0x20ffb4(0x8c5)+_0x94f7e4+_0x20ffb4(0x92e))[_0x20ffb4(0x636)][0x0]))_0x28dfd2('资料已更新，为了让所有变更完全生效，我来帮你刷新一下。'),setTimeout(()=>location[_0x20ffb4(0x1d8)](),0x5dc);else{_0x198934('chat',_0x20ffb4(0xa6a));if(!_0x2edb42){if(_0x20ffb4(0xb27)===_0x20ffb4(0xbf1)){const _0x1999fc=_0x58c1f8[_0x20ffb4(0x97b)](_0x5bf3cc[_0x20ffb4(0x9a1)](_0x20ffb4(0x9e6))||'[]');if(_0x1999fc[_0x20ffb4(0x968)]===0x0)return _0xe8f3c9;return _0x2f41cf[_0x20ffb4(0x485)](_0x1cdccf=>!_0x1999fc['includes'](_0x1cdccf[_0x20ffb4(0x19d)]));}else{const _0x4d506e=_0x20ffb4(0x260)+Date['now']();_0x1c8dfc(_0x4d506e),_0x53f26d(!![]);}}}}function _0x5d2df8(){const _0x2c4bbc=_0x17d1db;if(_0x2c4bbc(0x7b1)!==_0x2c4bbc(0xab9)){_0x1d7bb0['value']='',_0x4e42e7[_0x2c4bbc(0x280)]='';if(_0x35d0f9[_0x2c4bbc(0x1f2)][_0x2c4bbc(0x968)]<0x2){_0x28dfd2(_0x2c4bbc(0x5a3));return;}_0x35d0f9[_0x2c4bbc(0x1f2)]['forEach'](_0x588d2a=>{const _0x4b7d60=_0x2c4bbc;if(_0x4b7d60(0x307)==='svpiw')_0x4998b1[_0x4b7d60(0x4a1)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20'+_0x4a4e6a,_0x3ee296);else{const _0x5c9e0f=document[_0x4b7d60(0x7e9)]('li');_0x5c9e0f[_0x4b7d60(0x73e)]=_0x4b7d60(0x1d9),_0x5c9e0f[_0x4b7d60(0x280)]=_0x4b7d60(0x4e4)+_0x588d2a['id']+'\x22\x20data-id=\x22'+_0x588d2a['id']+_0x4b7d60(0x49e)+(_0x588d2a[_0x4b7d60(0x36b)]||_0x20a236)+_0x4b7d60(0xb47)+_0x588d2a['id']+_0x4b7d60(0x394)+_0x588d2a[_0x4b7d60(0x19d)]+_0x4b7d60(0x3ca),_0x4e42e7[_0x4b7d60(0x364)](_0x5c9e0f);}}),_0x198934(_0x2c4bbc(0x4b4),_0x2c4bbc(0x3d0));}else{const _0x3feeed=_0x24bdf5[_0x2c4bbc(0x859)](_0xecc252/0x3c);if(_0x3feeed<0x30)_0x1e544b+='\x0a-\x20**对话状态**:\x20群里在'+_0x3feeed+_0x2c4bbc(0xc85);else _0xef3824+=_0x2c4bbc(0xcb4)+_0x1775e4[_0x2c4bbc(0x859)](_0x3feeed/0x18)+_0x2c4bbc(0xb4c);}}function _0x7772e2(){const _0x1b1b4f=_0x17d1db,_0x3a8586=_0x1d7bb0[_0x1b1b4f(0x850)][_0x1b1b4f(0x2e2)]();if(!_0x3a8586){_0x28dfd2(_0x1b1b4f(0x8f8));return;}const _0x58b1ce=Array[_0x1b1b4f(0x39e)](_0x4e42e7[_0x1b1b4f(0x9c6)](_0x1b1b4f(0x448)))['map'](_0x267ac6=>_0x267ac6[_0x1b1b4f(0x218)]['id']);if(_0x58b1ce['length']<0x2){_0x28dfd2(_0x1b1b4f(0xbb3));return;}const _0x31bf29={'id':_0x1b1b4f(0x5cf)+Date[_0x1b1b4f(0x5ee)](),'type':_0x1b1b4f(0x253),'name':_0x3a8586,'participantIds':_0x58b1ce};_0x35d0f9['chats'][_0x1b1b4f(0xb2f)](_0x31bf29),_0x35d0f9[_0x1b1b4f(0xba6)]=_0x31bf29['id'],_0x5c9c95(),_0x24185b(),_0x21b732(),_0x222d8c(),_0x28dfd2(_0x1b1b4f(0xdb)+_0x3a8586+_0x1b1b4f(0x8a5)),_0x198934(_0x1b1b4f(0x152),_0x1b1b4f(0x4b4));}_0xdc828e[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x4378ce[_0x17d1db(0x9db)]()),_0x4ccd02[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x222775),_0x4378ce[_0x17d1db(0xafb)](_0x17d1db(0x326),_0x1626a0),_0x325c55[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x182a99),_0x3afe6c[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x2fb175[_0x17d1db(0x79f)][_0x17d1db(0xb42)](_0x17d1db(0xa36))),_0x43202b[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x2fb175[_0x17d1db(0x79f)][_0x17d1db(0xb42)](_0x17d1db(0xa36))),_0x55ae07[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x2471a3=_0x17d1db;if('eXGcj'===_0x2471a3(0xadd))_0x50d044[_0x2471a3(0x8c9)](),navigator[_0x2471a3(0xb15)][_0x2471a3(0x22a)](_0x50d044[_0x2471a3(0x850)])[_0x2471a3(0xa34)](()=>{const _0x5c7b08=_0x2471a3;if(_0x5c7b08(0x43e)===_0x5c7b08(0x43e))_0x28dfd2(_0x5c7b08(0x2ae));else{const _0x168e06=_0x4d2dac['value'];_0x33ef68[_0x5c7b08(0xa12)][_0x5c7b08(0x7d9)][_0x5c7b08(0xbcb)](_0x5c7b08(0x6e9),_0x168e06),_0x1d6c26[_0x5c7b08(0x570)]('themeHue',_0x168e06),_0x5d950a();}})[_0x2471a3(0x6cd)](_0xc1a6ab=>{const _0x140739=_0x2471a3;_0x28dfd2(_0x140739(0x518));});else{if(_0x55eecc[_0x2471a3(0xce3)]['type']===_0x2471a3(0xb85))return;const _0x35d2dd=_0x393032['nextElementSibling'],_0xae31f8=_0xf2fe98[_0x2471a3(0x3eb)](_0x2471a3(0xb56)),_0x2caac3=_0x35d2dd['classList'][_0x2471a3(0xbbc)](_0x2471a3(0xc46));_0x35d2dd[_0x2471a3(0x79f)]['toggle'](_0x2471a3(0xc46),!_0x2caac3),_0xae31f8['classList'][_0x2471a3(0x34b)]('expanded',!_0x2caac3);}}),_0x4ecb5a[_0x17d1db(0xafb)]('click',_0x42d84e),_0x11b120[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x4d73ad),_0x2f2e5d[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x557d9b[_0x17d1db(0x79f)][_0x17d1db(0xb42)]('show')),_0xd676ba[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x557d9b[_0x17d1db(0x79f)][_0x17d1db(0xb42)](_0x17d1db(0xa36))),_0x58ae53[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x3c6a5f[_0x17d1db(0x9db)]()),_0x1930bb[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x37e245['click']()),_0x3c6a5f[_0x17d1db(0xafb)]('change',_0x4ca5c3=>{const _0x5002ca=_0x17d1db,_0x1d7ae3=_0x4ca5c3[_0x5002ca(0xce3)]['files'][0x0];if(!_0x1d7ae3)return;const _0x488e67=URL[_0x5002ca(0x900)](_0x1d7ae3);_0x58ae53[_0x5002ca(0x7d9)][_0x5002ca(0x2f8)]=_0x5002ca(0x575)+_0x488e67+'\x27)';}),_0x37e245[_0x17d1db(0xafb)](_0x17d1db(0x326),_0x7925e6=>{const _0x360493=_0x17d1db;if('yzlWs'!==_0x360493(0x5bf)){_0x32f08b(_0x360493(0x3fb));return;}else{const _0x1bb331=_0x7925e6['target'][_0x360493(0x636)][0x0];if(!_0x1bb331)return;const _0x1dc51c=URL[_0x360493(0x900)](_0x1bb331);_0x1930bb['style'][_0x360493(0x2f8)]=_0x360493(0x575)+_0x1dc51c+'\x27)';}}),_0x203e1e[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x431149[_0x17d1db(0x9db)]()),_0x5b5a78['addEventListener'](_0x17d1db(0x9db),()=>{const _0xace8fe=_0x17d1db;localStorage[_0xace8fe(0x82a)](_0xace8fe(0x214)),_0x548969(),_0x28dfd2(_0xace8fe(0x780));}),_0x431149['addEventListener'](_0x17d1db(0x326),async _0x103f14=>{const _0x53c728=_0x17d1db,_0x16553f=_0x103f14['target'][_0x53c728(0x636)][0x0];if(!_0x16553f)return;try{const _0x5e66c7=await _0x2a77d2(_0x16553f);localStorage[_0x53c728(0x570)](_0x53c728(0x214),_0x5e66c7),_0x548969(),_0x28dfd2(_0x53c728(0x597));}catch(_0x54b150){'EWjUt'!==_0x53c728(0x64a)?(_0x5721fc(),_0x42d8a7[_0x53c728(0x6b9)]=[],_0x29b472()):_0x28dfd2(_0x53c728(0x7e4)+_0x54b150[_0x53c728(0x5a1)]);}}),document['getElementById'](_0x17d1db(0x1f9))['addEventListener'](_0x17d1db(0x9db),()=>_0x198934('chat',_0x17d1db(0x72b))),document[_0x17d1db(0xb18)](_0x17d1db(0x5ce))[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x548a08);const _0x30a9be=document[_0x17d1db(0xb18)]('group-avatar-preview'),_0x311fdc=document[_0x17d1db(0xb18)](_0x17d1db(0x509));_0x30a9be['addEventListener'](_0x17d1db(0x9db),()=>_0x311fdc[_0x17d1db(0x9db)]()),_0x311fdc[_0x17d1db(0xafb)](_0x17d1db(0x326),_0x3486ec=>{const _0x3cc8fe=_0x17d1db,_0x34d56a=_0x3486ec[_0x3cc8fe(0xce3)][_0x3cc8fe(0x636)][0x0];if(!_0x34d56a)return;const _0x3ea645=URL['createObjectURL'](_0x34d56a);_0x30a9be[_0x3cc8fe(0x9c9)]=_0x3ea645,_0x30a9be[_0x3cc8fe(0x7c3)]=()=>{const _0x4f6ec1=_0x3cc8fe;_0x4f6ec1(0x359)!==_0x4f6ec1(0x359)?_0x1bdc50[_0x4f6ec1(0x65b)]=_0x4f6ec1(0x7dc):URL[_0x4f6ec1(0xaa5)](_0x3ea645);};});const _0x46774c=document[_0x17d1db(0xb18)]('group-bg-preview')[_0x17d1db(0x384)],_0x262e2a=document[_0x17d1db(0xb18)](_0x17d1db(0x679)),_0xe6b1f3=document['getElementById'](_0x17d1db(0x6bd));_0x46774c[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x262e2a['click']()),_0x262e2a[_0x17d1db(0xafb)](_0x17d1db(0x326),_0x208270=>{const _0xfe392d=_0x17d1db,_0x433fa5=_0x208270[_0xfe392d(0xce3)][_0xfe392d(0x636)][0x0];if(!_0x433fa5)return;const _0x3d5292=URL['createObjectURL'](_0x433fa5);document[_0xfe392d(0xb18)](_0xfe392d(0x6bd))[_0xfe392d(0x7d9)][_0xfe392d(0x2f8)]=_0xfe392d(0x575)+_0x3d5292+'\x27)';});const _0x31fb6c=document[_0x17d1db(0x3eb)]('#group-settings-screen\x20.select-box'),_0x218f7f=document[_0x17d1db(0xb18)](_0x17d1db(0x168));_0x31fb6c[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0xec537f=>{const _0x4532ff=_0x17d1db;_0xec537f[_0x4532ff(0x5d6)](),_0x218f7f['classList']['toggle'](_0x4532ff(0x6cf)),_0x31fb6c[_0x4532ff(0x79f)][_0x4532ff(0x34b)](_0x4532ff(0xc46));}),_0x218f7f[_0x17d1db(0xafb)](_0x17d1db(0x326),_0x31a439),document['getElementById'](_0x17d1db(0xa10))[_0x17d1db(0xafb)]('click',_0x5728fe),document[_0x17d1db(0xb18)]('group-delete-button')[_0x17d1db(0xafb)]('click',async()=>{const _0x57205b=_0x17d1db;if('wckFj'===_0x57205b(0x1c4))_0x257c8+=_0x57205b(0xbc1);else{const _0x23f82a=_0x1f3fa9();if(!_0x23f82a||_0x23f82a['type']!==_0x57205b(0x253))return;const _0x11d736=await _0x3a7c5b('确定要删除群聊“'+_0x23f82a[_0x57205b(0x19d)]+_0x57205b(0x63b));if(_0x11d736){if(_0x57205b(0x357)!=='Kbava'){if(_0x34eceb){const _0x2a78b1=_0x5d1b68[_0x57205b(0x900)](_0x436824);_0x53cf66['src']=_0x2a78b1,_0x10d02e[_0x57205b(0x7c3)]=()=>_0x4342a9[_0x57205b(0xaa5)](_0x2a78b1);}}else _0x345b8b(_0x23f82a['id']),_0x28dfd2(_0x57205b(0x494)),_0x198934('chat'),_0x53f26d(![]);}}});const _0x2fa05d=document[_0x17d1db(0x3eb)](_0x17d1db(0x5e6)),_0x164393=document['getElementById'](_0x17d1db(0x73f));_0x2fa05d[_0x17d1db(0xafb)]('click',_0xc26e7e=>{const _0x5bf0ba=_0x17d1db;_0xc26e7e[_0x5bf0ba(0x5d6)](),_0x164393[_0x5bf0ba(0x79f)][_0x5bf0ba(0x34b)](_0x5bf0ba(0x6cf)),_0x2fa05d['classList'][_0x5bf0ba(0x34b)](_0x5bf0ba(0xc46));}),_0x164393[_0x17d1db(0xafb)](_0x17d1db(0x326),_0x5f05d4),document[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x373665=>{const _0x203fa2=_0x17d1db;if(!document[_0x203fa2(0x3eb)](_0x203fa2(0x588))[_0x203fa2(0xbbc)](_0x373665[_0x203fa2(0xce3)])){if(_0x203fa2(0x26b)===_0x203fa2(0x26b))_0x164393[_0x203fa2(0x79f)][_0x203fa2(0xb42)]('visible'),_0x2fa05d[_0x203fa2(0x79f)][_0x203fa2(0xb42)](_0x203fa2(0xc46));else{const _0x35ff12=_0xdcf0b6[_0x203fa2(0xb18)](_0x203fa2(0x996)),_0x4481f8=_0x584621[_0x203fa2(0x17b)][_0x203fa2(0x9cd)](_0xd25e4e=>_0xd25e4e['id']===_0x2643c7['id']);if(!_0x4481f8){_0x37b584[_0x203fa2(0x4a1)]('Noir\x27s\x20Note:\x20播放列表里找不到这首歌，你是不是又偷偷动了什么？\x20ID:',_0x55b554['id']);return;}const _0x4154ee=_0x35ff12[_0x203fa2(0x9c9)][_0x203fa2(0xb63)](_0x4481f8[_0x203fa2(0xc5e)])&&!_0x35ff12[_0x203fa2(0x976)];_0x4154ee?_0x35ff12[_0x203fa2(0x639)]():(_0x4b20b6={'title':_0x4481f8[_0x203fa2(0x596)],'artist':_0x4481f8['artist'],'cover':_0x4481f8[_0x203fa2(0x22d)]||(_0x4481f8[_0x203fa2(0x67f)]?_0x203fa2(0x6a6)+_0x4481f8['coverId']:_0x2366c9),'isFromLibrary':!![]},_0x35ff12[_0x203fa2(0x9c9)]=_0x4481f8['playableUrl'],_0x35ff12[_0x203fa2(0xc36)](),_0x120975[_0x203fa2(0x863)]=_0x12c687[_0x203fa2(0x17b)][_0x203fa2(0x59a)](_0x44de7d=>_0x44de7d['id']===_0x2faa83['id']),_0x4c8b32());}}}),_0x14f550[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x357559=_0x17d1db;_0x5c3b45(),_0x198934('worldBook',_0x357559(0x58a));}),document[_0x17d1db(0xb18)](_0x17d1db(0xc7c))[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x198934(_0x17d1db(0x58a),_0x17d1db(0x899))),document['getElementById']('add-world-book-button')[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x505897()),document[_0x17d1db(0xb18)](_0x17d1db(0x68e))[_0x17d1db(0xafb)]('click',()=>{const _0x4de853=_0x17d1db;_0x5c3b45(),_0x198934(_0x4de853(0x899),'worldBookEditor');}),document[_0x17d1db(0xb18)](_0x17d1db(0x44b))[_0x17d1db(0xafb)]('click',_0x4d7add),document[_0x17d1db(0xb18)](_0x17d1db(0x849))[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x4cd590),_0x5bbbcc[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x198934(_0x17d1db(0x271),_0x17d1db(0x58a))),_0x347b11[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x198934(_0x17d1db(0x58a),_0x17d1db(0x271))),_0x24ba92['addEventListener']('click',()=>_0x5a9b79[_0x17d1db(0x9db)]()),_0x5a9b79[_0x17d1db(0xafb)](_0x17d1db(0x326),async _0x2751c6=>{const _0x558b34=_0x17d1db;if('ztMhS'!=='fGEBU'){const _0x125e9f=_0x2751c6[_0x558b34(0xce3)]['files'][0x0];if(!_0x125e9f)return;await _0x42f865(_0x125e9f);}else{_0x6044e9['activeChatId']=null,_0x47ca0a(),_0x1b9ae4(![]),_0x27b2de['getElementById'](_0x558b34(0x98b))['style'][_0x558b34(0x2f8)]='';return;}}),_0x47f55a[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x100b1d=_0x17d1db;_0x24185b(),_0x198934(_0x100b1d(0x152),_0x100b1d(0x58a));}),_0x131cc2[_0x17d1db(0xafb)]('click',()=>{const _0x55d6e4=_0x17d1db;_0x2d335e();const _0x416e83=(_0x35d0f9[_0x55d6e4(0x69e)][_0x55d6e4(0x915)]||'')['includes'](_0xcfca35);_0xea1baf[_0x55d6e4(0x4f1)]=_0x416e83,_0x198934(_0x55d6e4(0x614),_0x55d6e4(0x58a));}),_0x44a876['addEventListener']('click',()=>_0x198934(_0x17d1db(0x58a),_0x17d1db(0x614))),_0x58f541[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x918b5b=_0x17d1db;if(_0x918b5b(0x86b)!==_0x918b5b(0x86b)){const _0x35bab6=_0x238512[_0x918b5b(0x832)](_0x212180,_0x918b5b(0xa43)),_0x158f36=_0x35bab6['objectStore'](_0x313718),_0x4ebf1c=_0x158f36['get'](_0x41f599);_0x4ebf1c[_0x918b5b(0x9d2)]=()=>_0x28331a(_0x4ebf1c['result']?_0x4ebf1c[_0x918b5b(0xd15)][_0x918b5b(0x885)]:null),_0x4ebf1c['onerror']=()=>_0x14c724(_0x4ebf1c[_0x918b5b(0x4a1)]);}else _0x1a29ae(),document[_0x918b5b(0xb18)](_0x918b5b(0xa1d))[_0x918b5b(0x79f)][_0x918b5b(0xb42)](_0x918b5b(0xa36)),document[_0x918b5b(0xb18)]('quote-preview-area')[_0x918b5b(0x7d9)][_0x918b5b(0x31f)]='none',setTimeout(()=>{const _0x498411=_0x918b5b;_0x198934(_0x498411(0x58a),_0x498411(0x152));},0x14);}),_0xdd47a6[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x46a311=_0x17d1db;_0x1a29ae(),document[_0x46a311(0xb18)](_0x46a311(0xa1d))[_0x46a311(0x79f)][_0x46a311(0xb42)](_0x46a311(0xa36)),document['getElementById'](_0x46a311(0xc1d))[_0x46a311(0x7d9)][_0x46a311(0x31f)]=_0x46a311(0x9ba),setTimeout(()=>{_0x53f26d(![]);},0x14);}),_0x4ce52b['addEventListener'](_0x17d1db(0x9db),()=>{const _0x859e1=_0x17d1db;if(_0x859e1(0xc35)!=='FrrCp')_0x198934(_0x859e1(0x152),'characterEdit');else return _0x283644[_0x859e1(0x19d)]!==_0x859e1(0x19e)&&_0x3709c7[_0x859e1(0x4a1)]('Failed\x20to\x20plan\x20group\x20replies:',_0x1e0ae0),null;}),_0x53e365[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x3121b9=_0x17d1db;_0x37d50f[_0x3121b9(0x79f)][_0x3121b9(0x366)](_0x3121b9(0xa36));}),_0x115266['addEventListener'](_0x17d1db(0x9db),()=>_0x50bad7()),_0x24caf7[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x4d017c);function _0x5ab85a(_0x52aa46){const _0x1d98b7=_0x17d1db;if(!_0x52aa46||_0x52aa46[_0x1d98b7(0xb12)]!==_0x1d98b7(0x253))return;const _0x3b14fb=_0x1d98b7(0x712);document[_0x1d98b7(0x3f0)][_0x1d98b7(0xbb4)](_0x1d98b7(0xc9e),_0x3b14fb);const _0x273c25=document['getElementById'](_0x1d98b7(0x20c)),_0x2454a2=_0x273c25[_0x1d98b7(0x3eb)](_0x1d98b7(0xa1b)),_0x99b8e4=document[_0x1d98b7(0xb18)](_0x1d98b7(0xccf)),_0x4b2bc9=document[_0x1d98b7(0xb18)](_0x1d98b7(0x2ab)),_0x260f34=document[_0x1d98b7(0xb18)](_0x1d98b7(0xb1a)),_0x14b230=document[_0x1d98b7(0xb18)](_0x1d98b7(0xf2)),_0x2d0f76=document[_0x1d98b7(0xb18)](_0x1d98b7(0xcff)),_0x3ea787=()=>_0x273c25[_0x1d98b7(0xb42)]();_0x99b8e4['addEventListener']('click',async()=>{const _0x2fb453=_0x1d98b7;if(_0x2fb453(0xc54)!==_0x2fb453(0x595)){_0x3ea787();const _0x3f8ba6=await _0x3a7c5b(_0x2fb453(0x1e0)+_0x52aa46[_0x2fb453(0x19d)]+'\x22\x20的聊天记录吗？此操作不可撤销。');if(_0x3f8ba6){_0x52aa46['id']===_0x35d0f9[_0x2fb453(0xba6)]&&(_0x1a29ae(),_0x35d0f9['conversationHistory']=[],_0x3f1b6c());try{_0x2fb453(0xca4)!=='FEfHj'?_0x3eee37=_0x415e9b:(localStorage[_0x2fb453(0x82a)]('chatHistory_'+_0x52aa46['id']),_0x28dfd2(_0x2fb453(0x745)+_0x52aa46['name']+_0x2fb453(0x979)));}catch(_0x217da8){_0x2fb453(0x33c)!==_0x2fb453(0x33c)?_0x28d83d[_0x2fb453(0x9c9)]=_0x358755[_0x2fb453(0x22d)]||_0x2b8a9b:(console[_0x2fb453(0x4a1)]('Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20'+_0x52aa46['id'],_0x217da8),_0x28dfd2('清空聊天记录失败。'));}}}else{const _0x2a7d9a=_0x1eb0bc[_0x2fb453(0xb18)](_0x2fb453(0x240)+_0x1fdb8c+_0x2fb453(0x5b3)),_0x1f398c=_0x3ff861['getElementById']('livestream-sprite-'+_0xb154d2+_0x2fb453(0x92e));_0x2a7d9a[_0x2fb453(0xafb)](_0x2fb453(0x9db),()=>_0x1f398c[_0x2fb453(0x9db)]()),_0x1f398c[_0x2fb453(0xafb)]('change',_0x32db7c=>{const _0x35f5b1=_0x2fb453,_0x38a317=_0x32db7c[_0x35f5b1(0xce3)]['files'][0x0];if(_0x38a317)_0x2a7d9a[_0x35f5b1(0x7d9)][_0x35f5b1(0x2f8)]=_0x35f5b1(0x575)+_0xf203db['createObjectURL'](_0x38a317)+'\x27)';});}}),_0x4b2bc9[_0x1d98b7(0xafb)]('click',()=>{const _0x3cba61=_0x1d98b7;_0x3ea787(),_0x28dfd2(_0x3cba61(0x9a4));}),_0x260f34[_0x1d98b7(0xafb)](_0x1d98b7(0x9db),async()=>{const _0x1c397f=_0x1d98b7;if(_0x1c397f(0x53b)!==_0x1c397f(0x53b)){const _0x52cf1d=_0x4e4c5d[_0x1c397f(0x9c6)]('p');_0x52cf1d[_0x1c397f(0x175)](_0x58c2ce=>_0x58c2ce[_0x1c397f(0x79f)][_0x1c397f(0xb42)](_0x1c397f(0x530)));const _0x134c0e=_0x3e636b['getElementById'](_0x1c397f(0x548)+_0x40b0b1);_0x134c0e&&(_0x134c0e['classList'][_0x1c397f(0x366)]('active'),_0x134c0e[_0x1c397f(0x8f5)]({'behavior':_0x1c397f(0x5fe),'block':_0x1c397f(0xb99)}));}else{_0x3ea787();const _0x4a066b=prompt('请输入新的群名称：',_0x52aa46[_0x1c397f(0x19d)]);_0x4a066b&&_0x4a066b[_0x1c397f(0x2e2)]()&&_0x4a066b!==_0x52aa46[_0x1c397f(0x19d)]&&(_0x1c397f(0x291)==='fBKAU'?(_0x52aa46[_0x1c397f(0x19d)]=_0x4a066b[_0x1c397f(0x2e2)](),_0x5c9c95(),_0x24185b(),_0x21b732(),_0x28dfd2(_0x1c397f(0x376)+_0x52aa46[_0x1c397f(0x19d)]+'\x22。')):_0x3473e1=_0x13d5d0[_0x1c397f(0x97b)](_0x1e556d));}}),_0x14b230['addEventListener'](_0x1d98b7(0x9db),async()=>{const _0x43a02a=_0x1d98b7;if(_0x43a02a(0x813)!=='tsrPm'){_0x3ea787();const _0x8dfc02=await _0x3a7c5b(_0x43a02a(0xa71)+_0x52aa46[_0x43a02a(0x19d)]+_0x43a02a(0x453));_0x8dfc02&&(_0x345b8b(_0x52aa46['id']),_0x28dfd2('群聊\x22'+_0x52aa46['name']+_0x43a02a(0x130)),_0x53f26d(![]));}else{if(_0x1b5954)_0x2ad359[_0x43a02a(0x9c9)]=_0x3d242a['createObjectURL'](_0x544e38);}}),_0x2454a2[_0x1d98b7(0xafb)]('click',_0x3ea787),_0x2d0f76[_0x1d98b7(0xafb)](_0x1d98b7(0x9db),_0x3ea787);}_0x1d3772[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x1a4085=_0x17d1db;if(_0x1a4085(0x626)===_0x1a4085(0x1bd))return new _0x23386d((_0xc3f855,_0x278032)=>{const _0x37123d=_0x1a4085,_0x4d00ac=new _0x56c770();_0x4d00ac['onloadend']=()=>_0xc3f855(_0x4d00ac['result']),_0x4d00ac[_0x37123d(0x892)]=_0x278032,_0x4d00ac[_0x37123d(0x633)](_0x6a2b63);});else{const _0x524130=_0x1f3fa9();if(_0x524130&&_0x524130[_0x1a4085(0xb12)]==='private')_0x389b4f(_0x524130['participantIds'][0x0]);else _0x524130&&_0x524130[_0x1a4085(0xb12)]===_0x1a4085(0x253)&&_0x10e954(_0x524130['id']);}}),_0x15327c[_0x17d1db(0xafb)](_0x17d1db(0x1a3),_0x17ef0d=>{const _0x2b1dbc=_0x17d1db;_0x17ef0d['key']===_0x2b1dbc(0x9c2)&&!_0x17ef0d[_0x2b1dbc(0x193)]&&(_0x17ef0d[_0x2b1dbc(0xa05)](),_0x50bad7());});const _0x381e79=()=>_0x37d50f['classList'][_0x17d1db(0xb42)](_0x17d1db(0xa36));_0x2c5900['addEventListener'](_0x17d1db(0x9db),_0x381e79),_0x2b643c[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x381e79),_0x1a3259['addEventListener'](_0x17d1db(0x9db),()=>{const _0x36c65b=_0x17d1db;if(_0x36c65b(0xbf3)===_0x36c65b(0xc99)){const _0x523abe=_0x52c477[_0x36c65b(0x7f3)]['dataset'][_0x36c65b(0x569)],_0x2225ea=_0x4cfc3c['accountingLedger'][_0x523abe];_0x2225ea&&_0x9ed3ac(_0x2225ea,_0x523abe);}else _0x381e79(),_0x389b4f();}),_0x5505cc[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{_0x381e79(),_0x5d2df8();}),_0x493cf9[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x14c5fe=_0x17d1db;'XNtWT'===_0x14c5fe(0x57a)?(_0x198934(_0x14c5fe(0x152),'groupChatCreate'),_0x53f26d(![])):(_0x148ddf[_0x14c5fe(0xc56)]=null,_0x54867d('diaryList',_0x14c5fe(0xb97)));}),_0x3ca968[_0x17d1db(0xafb)]('click',_0x7772e2),_0x2d55e7['addEventListener'](_0x17d1db(0x9db),()=>{const _0x826c1b=_0x17d1db;if('IZqXJ'===_0x826c1b(0x5cb))_0x4a5211[_0x826c1b(0x79f)][_0x826c1b(0x34b)](_0x826c1b(0xa36)),_0x4a5211[_0x826c1b(0x79f)]['contains'](_0x826c1b(0xa36))&&(_0x232e46[_0x826c1b(0x14f)]=_0x232e46['scrollHeight']);else{const _0x1c1b8c=_0x8a8589[_0x826c1b(0x832)](_0x524021,'readonly'),_0x33065e=_0x1c1b8c[_0x826c1b(0x566)](_0x4d8f99),_0xa627e9=_0x33065e[_0x826c1b(0x12c)](_0x1211bb);_0xa627e9['onsuccess']=()=>_0x1a95ac(_0xa627e9['result']?_0xa627e9[_0x826c1b(0xd15)][_0x826c1b(0x225)]:null),_0xa627e9[_0x826c1b(0x892)]=()=>_0x579bff(_0xa627e9[_0x826c1b(0x4a1)]);}}),_0x2bc0b7[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x8c29e4[_0x17d1db(0x9db)]());const _0x43044b=document[_0x17d1db(0xb18)](_0x17d1db(0x848));_0x8c29e4[_0x17d1db(0xafb)]('change',_0x4bd388),_0x43044b[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x32d0ee),_0x39cb31[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x3e5a08),_0x56676e[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x10a7ed),_0xb31ad4[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x2aea9b),_0x49a3ad[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x5728fe),_0x4ae398[_0x17d1db(0xafb)](_0x17d1db(0x9db),async()=>{const _0x166ad6=_0x17d1db,_0x2b422d=_0xc314cc['value'];if(!_0x2b422d)return;const _0x377e24=_0x45939a(_0x2b422d);if(!_0x377e24)return;const _0x1636cb=await _0x3a7c5b('确定要删除角色“'+_0x377e24[_0x166ad6(0x19d)]+'”吗？该角色的私聊和所有相关群聊记录都将被一并处理。');_0x1636cb&&(_0x1d929b(_0x2b422d),_0x28dfd2(_0x166ad6(0x96f)+_0x377e24['name']+_0x166ad6(0x914)),_0x198934(_0x166ad6(0x152),_0x166ad6(0xa6a)),_0x53f26d(![]));}),_0x48e75e[_0x17d1db(0xafb)](_0x17d1db(0xb8d),()=>{const _0x3f9b30=_0x17d1db,_0x609e7f=_0x48e75e[_0x3f9b30(0x850)][_0x3f9b30(0x2e2)]()[_0x3f9b30(0xb63)](_0xcfca35);_0xea1baf[_0x3f9b30(0x4f1)]=_0x609e7f;});async function _0x1edc19(){const _0xffb748=_0x17d1db;if(_0xffb748(0xc5f)!=='YISux'){const _0x131609=_0x48e75e[_0xffb748(0x850)][_0xffb748(0x2e2)](),_0x454cc1=_0x64dabf[_0xffb748(0x850)]['trim']();if(!_0x131609||!_0x454cc1){if(_0xffb748(0x354)!==_0xffb748(0x354))_0x31883a[_0xffb748(0xb2f)](_0x20c601);else{_0x28dfd2(_0xffb748(0xc37));return;}}const _0x57f8d3=_0x131609[_0xffb748(0x39f)](/\/+$/,''),_0x3a5676=_0x57f8d3+'/v1/models';_0xea1baf[_0xffb748(0x4f1)]=!![],_0xea1baf[_0xffb748(0x65b)]='获取中…',_0x24eaed[_0xffb748(0x79f)][_0xffb748(0xb42)]('show');try{if('qGGDy'===_0xffb748(0xbc4)){_0x25d3d3[_0xffb748(0x4a1)]('生成失败:\x20',_0x42e9a7);const _0x53be08={'role':_0xffb748(0xaf6),'content':_0xffb748(0x7e4)+_0x35dda1[_0xffb748(0x5a1)],'senderId':_0x525080['id'],'isOffline':_0x150e1a};_0x3f20fd[_0xffb748(0x6b9)][_0xffb748(0xb2f)](_0x53be08),_0x4e0143();}else{const _0x3ba61c=await fetch(_0x3a5676,{'headers':{'Authorization':_0xffb748(0x740)+_0x152fd6(_0x454cc1)}});if(!_0x3ba61c['ok'])throw new Error(_0xffb748(0x279)+_0x3ba61c['status']);const _0x48d697=await _0x3ba61c['json'](),_0x45debd=(_0x48d697[_0xffb748(0x225)]||_0x48d697)[_0xffb748(0xbb5)](_0x3c4aad=>_0x3c4aad['id'])[_0xffb748(0xa99)]();_0x45debd[_0xffb748(0x968)]>0x0?(_0x24eaed[_0xffb748(0x280)]='',_0x45debd[_0xffb748(0x175)](_0x547d65=>{const _0x3fd2d8=_0xffb748,_0x3ca9fb=document[_0x3fd2d8(0x7e9)](_0x3fd2d8(0x591));_0x3ca9fb['textContent']=_0x547d65,_0x3ca9fb[_0x3fd2d8(0xafb)](_0x3fd2d8(0x9db),()=>{const _0x12bbcd=_0x3fd2d8;_0x38240d[_0x12bbcd(0x850)]=_0x547d65,_0x24eaed['classList'][_0x12bbcd(0xb42)](_0x12bbcd(0xa36));}),_0x24eaed[_0x3fd2d8(0x364)](_0x3ca9fb);}),_0x24eaed[_0xffb748(0x79f)]['add'](_0xffb748(0xa36)),_0x28dfd2(_0xffb748(0xa63)+_0x45debd[_0xffb748(0x968)]+_0xffb748(0x8ae))):_0x28dfd2(_0xffb748(0x4c3));}}catch(_0x38ed3f){'OWNAB'!==_0xffb748(0x5f4)?_0x28dfd2(_0xffb748(0x887)+_0x38ed3f['message']+'\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1'):_0x15db85(_0x1439e3);}finally{_0xea1baf[_0xffb748(0x4f1)]=![],_0xea1baf[_0xffb748(0x65b)]='获取';}}else _0x59925e[_0xffb748(0x280)]='<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>',_0xa2ceb5[_0xffb748(0xb18)]('organize-bill-button')[_0xffb748(0xafb)](_0xffb748(0x9db),_0x6035da);}_0xea1baf[_0x17d1db(0xafb)]('click',_0x304b01=>{const _0x1ede05=_0x17d1db;'OdhIS'===_0x1ede05(0x91c)?_0x48e361[_0x1ede05(0x65b)]='❚❚':(_0x304b01['stopPropagation'](),_0x1edc19());}),document['addEventListener'](_0x17d1db(0x9db),_0x15b25c=>{const _0x291135=_0x17d1db;!_0x24eaed[_0x291135(0xbbc)](_0x15b25c['target'])&&_0x15b25c['target']!==_0x38240d&&_0x15b25c[_0x291135(0xce3)]!==_0xea1baf&&_0x24eaed[_0x291135(0x79f)][_0x291135(0xb42)](_0x291135(0xa36));});async function _0x2a77d2(_0x5df82f){return await _0x51a2d6(_0x5df82f,0x190,0.85);}_0x21f7eb['addEventListener'](_0x17d1db(0x9db),()=>_0x56e1bc['click']()),_0x56e1bc[_0x17d1db(0xafb)](_0x17d1db(0x326),async _0x11a1d8=>{const _0x4c6e35=_0x17d1db;if(_0x4c6e35(0x94b)===_0x4c6e35(0x94b)){const _0x2511e4=_0x11a1d8[_0x4c6e35(0xce3)][_0x4c6e35(0x636)][0x0];if(!_0x2511e4)return;try{if(_0x4c6e35(0x7fe)==='vxtJm'){const _0x38e908=await _0x2a77d2(_0x2511e4),_0x943bdd=document[_0x4c6e35(0xb18)](_0x4c6e35(0x2ad));_0x943bdd['style']['backgroundImage']=_0x4c6e35(0x575)+_0x38e908+'\x27)',_0x943bdd[_0x4c6e35(0x218)]['newAvatar']=_0x38e908;}else _0x5a8d16[_0x4c6e35(0x280)]=_0x4c6e35(0x64e)+_0x3dec2f+'\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>';}catch(_0xb3c2){_0x28dfd2('错误:\x20'+_0xb3c2[_0x4c6e35(0x5a1)]);}}else _0x1a3905[_0x4c6e35(0x99c)]&&(_0x51f0e5[_0x4c6e35(0x99c)]=_0x30ae2b[_0x4c6e35(0x99c)]['filter'](_0x407909=>_0x407909!==_0xc89fae));}),_0x54594c[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x7dc08c[_0x17d1db(0x9db)]()),_0x7dc08c['addEventListener'](_0x17d1db(0x326),async _0x2e59f5=>{const _0x45a65d=_0x17d1db,_0x19557b=_0x2e59f5[_0x45a65d(0xce3)][_0x45a65d(0x636)][0x0];if(!_0x19557b)return;try{_0x54594c[_0x45a65d(0x9c9)]=await _0x2a77d2(_0x19557b);}catch(_0x43c1c0){_0x45a65d(0xb7d)===_0x45a65d(0x586)?(_0x530fbc['error'](_0x45a65d(0xc3f),_0x4acd2c),_0x310550[_0x45a65d(0x82a)](_0x45a65d(0x6d0))):_0x28dfd2(_0x45a65d(0x7e4)+_0x43c1c0['message']);}});function _0x53689b(){const _0x5b3699=_0x17d1db;if(_0x5b3699(0xaf4)==='jtDNc')_0x59773d(_0x2cddc9-0x1);else{const _0x356e78=document[_0x5b3699(0xb18)](_0x5b3699(0xa1d));_0x356e78['innerHTML']='',_0xc59fd=![];const _0x513a1d=document[_0x5b3699(0x7e9)](_0x5b3699(0x591));_0x513a1d['id']=_0x5b3699(0xcce),_0x513a1d[_0x5b3699(0x280)]=_0x5b3699(0x2ac),_0x356e78[_0x5b3699(0x364)](_0x513a1d);const _0xc48f1f=document[_0x5b3699(0xb18)](_0x5b3699(0xad4)),_0x3036e8=document[_0x5b3699(0xb18)]('sticker-confirm-delete-btn'),_0x4159fb=document[_0x5b3699(0x7e9)](_0x5b3699(0x591));_0x4159fb[_0x5b3699(0x7d9)]['display']=_0x5b3699(0xb11),_0x4159fb[_0x5b3699(0x7d9)][_0x5b3699(0xaee)]=_0x5b3699(0xa8e),_0x4159fb['style'][_0x5b3699(0xa5b)]=_0x5b3699(0xc6a),_0x4159fb[_0x5b3699(0x7d9)][_0x5b3699(0x145)]='10px',_0x4159fb[_0x5b3699(0x7d9)][_0x5b3699(0x781)]=_0x5b3699(0xaed),_0x4159fb[_0x5b3699(0x7d9)][_0x5b3699(0xb38)]=_0x5b3699(0x937),_0x356e78[_0x5b3699(0x364)](_0x4159fb);const _0x100e88=_0x438700();_0x100e88[_0x5b3699(0x175)](_0x2ba600=>{const _0x1364eb=_0x5b3699;if(_0x1364eb(0x42e)!==_0x1364eb(0x42e))_0x4605dc(_0xabdd47),_0x1d12d6('livestreamReplayView','livestreamReplays');else{const _0x217bf9=document[_0x1364eb(0x7e9)]('div');_0x217bf9[_0x1364eb(0x73e)]='sticker-item-wrapper',_0x217bf9[_0x1364eb(0x218)][_0x1364eb(0x532)]=_0x2ba600[_0x1364eb(0x19d)];const _0x3c4159=document[_0x1364eb(0x7e9)]('img');_0x3c4159[_0x1364eb(0x9c9)]=_0x2ba600[_0x1364eb(0x391)],_0x3c4159[_0x1364eb(0x616)]=_0x1364eb(0x3f8),_0x3c4159[_0x1364eb(0x248)]=_0x2ba600[_0x1364eb(0x19d)],_0x3c4159[_0x1364eb(0x73e)]=_0x1364eb(0xb68),_0x217bf9['appendChild'](_0x3c4159),_0x4159fb['appendChild'](_0x217bf9),_0x217bf9[_0x1364eb(0xafb)](_0x1364eb(0x9db),()=>{const _0x6dac53=_0x1364eb;if('zvKVS'===_0x6dac53(0xace)){if(_0xc59fd){if(_0x6dac53(0x17a)==='pApaA'){_0x217bf9['classList'][_0x6dac53(0x34b)](_0x6dac53(0x30e));const _0x3a2644=_0x4159fb[_0x6dac53(0x3eb)]('.selected');_0x3036e8[_0x6dac53(0x79f)][_0x6dac53(0x34b)](_0x6dac53(0x530),!!_0x3a2644);}else _0x1ea224[_0x6dac53(0x7d9)][_0x6dac53(0x33b)]='translateY(-300px)',_0x1d6e51[_0x6dac53(0x7d9)][_0x6dac53(0x6d2)]='0',_0x12ec88(()=>_0x140d79[_0x6dac53(0xb42)](),0x7d0);}else _0x175159(_0x2ba600);}else _0x5e9a7b(![]);});}}),_0xc48f1f[_0x5b3699(0xafb)]('click',()=>{const _0x50210c=_0x5b3699;_0x50210c(0x48d)!==_0x50210c(0x48d)?(_0x20ac9a[_0x50210c(0x4a1)]('加载立绘失败:',_0x5dd76f),_0x4e6e8f[_0x50210c(0xb18)](_0x50210c(0x2e9))[_0x50210c(0x9c9)]='',_0x4497bc[_0x50210c(0xb18)](_0x50210c(0xbb2))[_0x50210c(0x9c9)]=''):(_0xc59fd=!_0xc59fd,_0x356e78[_0x50210c(0x79f)][_0x50210c(0x34b)](_0x50210c(0x70f),_0xc59fd),_0xc48f1f[_0x50210c(0x65b)]=_0xc59fd?'完成':'管理',_0x3036e8[_0x50210c(0x7d9)][_0x50210c(0x31f)]=_0xc59fd?_0x50210c(0xb91):_0x50210c(0x9ba),!_0xc59fd&&('zDfyL'!==_0x50210c(0x48e)?(_0x4159fb['querySelectorAll'](_0x50210c(0xb43))[_0x50210c(0x175)](_0x35efc6=>_0x35efc6[_0x50210c(0x79f)]['remove'](_0x50210c(0x30e))),_0x3036e8[_0x50210c(0x79f)][_0x50210c(0xb42)](_0x50210c(0x530))):(_0x3d542b[_0x50210c(0x850)]='',_0x235cf5[_0x50210c(0x65b)]=_0x50210c(0x9de),_0x13c0b9[_0x50210c(0x850)]='新角色\x20'+(_0x446031[_0x50210c(0x1f2)][_0x50210c(0x968)]+0x1),_0x518153[_0x50210c(0x850)]='',_0x235192['value']=_0x50210c(0xae7),_0xf995a9[_0x50210c(0xb18)](_0x50210c(0x17e))[_0x50210c(0x850)]='',_0x54123c[_0x50210c(0x850)]='',_0x1c01f8[_0x50210c(0x850)]='')));}),_0x3036e8[_0x5b3699(0xafb)](_0x5b3699(0x9db),async()=>{const _0x17026c=_0x5b3699,_0x4bddbf=_0x4159fb[_0x17026c(0x9c6)](_0x17026c(0xb43));if(_0x4bddbf[_0x17026c(0x968)]===0x0)return;const _0x3cb58c=await _0x3a7c5b(_0x17026c(0x38b)+_0x4bddbf['length']+_0x17026c(0x5fb));if(_0x3cb58c){const _0x144268=JSON['parse'](localStorage[_0x17026c(0x9a1)](_0x17026c(0x9e6))||'[]');_0x4bddbf[_0x17026c(0x175)](_0x3ec737=>{const _0x127893=_0x17026c,_0x5bc9ad=_0x3ec737['dataset'][_0x127893(0x532)];!_0x144268[_0x127893(0xb63)](_0x5bc9ad)&&(_0x127893(0x31d)!==_0x127893(0x24a)?_0x144268[_0x127893(0xb2f)](_0x5bc9ad):_0x138a89[_0x127893(0x7d9)][_0x127893(0x145)]='0');}),localStorage['setItem'](_0x17026c(0x9e6),JSON['stringify'](_0x144268)),_0xc59fd=![],_0x53689b(),_0x28dfd2(_0x17026c(0x64b));}}),_0x3036e8[_0x5b3699(0x7d9)][_0x5b3699(0x31f)]='none';const _0x4ac029=document[_0x5b3699(0xb18)](_0x5b3699(0x930)),_0x198ee6=new MutationObserver(()=>{const _0x3063ce=_0x5b3699,_0x40beff=_0x356e78[_0x3063ce(0x79f)][_0x3063ce(0xbbc)](_0x3063ce(0xa36));_0x513a1d['classList']['toggle'](_0x3063ce(0x6cf),_0x40beff),!_0x40beff&&('wqWMv'==='wqWMv'?_0xc59fd&&_0xc48f1f[_0x3063ce(0x9db)]():(_0x580d25[_0x3063ce(0x639)](),_0x542e36[_0x3063ce(0x65b)]='▶'));});_0x198ee6[_0x5b3699(0x243)](_0x356e78,{'attributes':!![],'attributeFilter':[_0x5b3699(0x13d)]});}}function _0x438700(){const _0x22980e=_0x17d1db;if(_0x22980e(0x90e)===_0x22980e(0x406))_0x21f02c['classList'][_0x22980e(0xb42)](_0x22980e(0xa36));else{const _0x58cc99=JSON['parse'](localStorage[_0x22980e(0x9a1)]('deletedStickers')||'[]');if(_0x58cc99[_0x22980e(0x968)]===0x0)return _0x95c6c9;return _0x95c6c9['filter'](_0x18e395=>!_0x58cc99[_0x22980e(0xb63)](_0x18e395[_0x22980e(0x19d)]));}}async function _0x16c8a1(_0xe58824){const _0x5a8932=_0x17d1db,_0x1227af=await _0x3a7c5b('确定要删除这个安排吗？此操作不可撤销。');if(!_0x1227af)return;const _0x94adfa=_0x35d0f9[_0x5a8932(0x2a3)][_0x5a8932(0x59a)](_0x5b6c23=>_0x5b6c23['id']===_0xe58824);_0x94adfa>-0x1&&(_0x5a8932(0x2c4)===_0x5a8932(0x2c4)?(_0x35d0f9[_0x5a8932(0x2a3)][_0x5a8932(0x895)](_0x94adfa,0x1),_0x5c9c95(),_0x110b7e(),_0x46d6ea(),_0x158a39(),_0x28dfd2('已经删掉了。')):(_0x214c18[_0x5a8932(0x4a1)](_0x5a8932(0xcfe),_0x24a3b0),_0x5bcaa8('导入失败了，笨蛋:\x20'+_0x25ad66[_0x5a8932(0x5a1)])));}let _0x381514=null;function _0x13bf03(_0x88ca13){const _0x141671=_0x17d1db;if('iSMWE'!==_0x141671(0xbf2)){_0x40dfc4['id']===_0x3cc6d2['activeChatId']&&(_0xc57fd2(),_0x5932cb['conversationHistory']=[],_0x490a49());try{_0x43f720['removeItem'](_0x141671(0x392)+_0x374e98['id']),_0x3fe15f(_0x141671(0x745)+_0x7686b5['name']+'\x22\x20的聊天记录已清空。');}catch(_0x2647ce){_0x94da38[_0x141671(0x4a1)](_0x141671(0x397)+_0x46c65e['id'],_0x2647ce),_0xad4724(_0x141671(0x246));}}else{if(_0x381514)clearTimeout(_0x381514);const _0x40400c=_0x88ca13['target']['closest']('.todo-item,\x20.important-day-item');if(!_0x40400c)return;const _0x49e105=_0x40400c[_0x141671(0x218)]['id'];if(!_0x49e105)return;const _0xdc1b2b=()=>{const _0x2d3a49=_0x141671;if(_0x2d3a49(0x65e)==='XHEoR'){_0x5c896a=_0x21ca70[_0x2d3a49(0x7e9)](_0x2d3a49(0x591)),_0x9d438d[_0x2d3a49(0x73e)]=_0x2d3a49(0x746);const _0x563f4d=_0x2e2af3();_0x563f4d&&_0x563f4d[_0x2d3a49(0xb12)]===_0x2d3a49(0x253)?_0x5a289d[_0x2d3a49(0x65b)]=_0x2d3a49(0x611):_0x34df2d['textContent']='对方正在输入...',_0x54064b[_0x2d3a49(0xb18)]('chat-view-pane')[_0x2d3a49(0x364)](_0x464081);}else _0x381514=setTimeout(()=>{const _0x538cc=_0x2d3a49;if(_0x538cc(0x5df)===_0x538cc(0x9fa))_0x46c881[_0x538cc(0x79f)][_0x538cc(0x34b)](_0x538cc(0xa36)),_0x4ecea3[_0x538cc(0x79f)][_0x538cc(0xbbc)](_0x538cc(0xa36))&&(_0x165e3e[_0x538cc(0x14f)]=_0x55d569[_0x538cc(0x3aa)]);else{if(_0x88ca13[_0x538cc(0xb12)]===_0x538cc(0x983))_0x88ca13[_0x538cc(0xa05)]();_0x16c8a1(_0x49e105);}},0x320);},_0x54207b=()=>{if(_0x381514)clearTimeout(_0x381514);};document[_0x141671(0xafb)](_0x141671(0xc4f),_0x54207b,{'once':!![]}),document['addEventListener'](_0x141671(0x9ff),_0x54207b,{'once':!![]}),document['addEventListener'](_0x141671(0x476),_0x54207b,{'once':!![]}),document[_0x141671(0xafb)](_0x141671(0x2dd),_0x54207b,{'once':!![]}),_0xdc1b2b();}}function _0x4a0eeb(_0x496496){const _0x48d71c=_0x17d1db,_0x54413a=_0x35d0f9[_0x48d71c(0xa6c)][_0x48d71c(0x9cd)](_0x54e7bf=>_0x54e7bf[_0x48d71c(0x8f1)][_0x48d71c(0xb63)](_0x496496));if(!_0x54413a)return'';const _0x6ba099=_0x5f52db(_0x54413a['id']),_0x716737=_0x35d0f9[_0x48d71c(0x2a3)][_0x48d71c(0x485)](_0x4970e2=>_0x4970e2[_0x48d71c(0x5aa)]===_0x6ba099['id']||!_0x4970e2['userId']);if(_0x716737[_0x48d71c(0x968)]===0x0)return'';const _0x3309fa=_0x716737['map'](_0x3f6577=>{const _0x274203=_0x48d71c,_0x4de414=_0x3f6577[_0x274203(0xb12)]==='important'?_0x274203(0xb24):'待办';return _0x274203(0x515)+_0x4de414+']\x20'+_0x3f6577[_0x274203(0x569)]+':\x20'+_0x3f6577[_0x274203(0x9bc)];})[_0x48d71c(0x102)]('\x0a');return _0x48d71c(0xb50)+_0x6ba099[_0x48d71c(0x19d)]+_0x48d71c(0x188)+_0x3309fa;}let _0x262797={'currentDate':new Date(),'selectedDate':_0xae688c()};function _0x15ff94(){const _0x4ecf9f=_0x17d1db;document[_0x4ecf9f(0xb18)](_0x4ecf9f(0x1a1))['addEventListener'](_0x4ecf9f(0x9db),()=>{const _0x5b3669=_0x4ecf9f;_0x110b7e(),_0x198934(_0x5b3669(0x94a),_0x5b3669(0x58a));}),document[_0x4ecf9f(0xb18)](_0x4ecf9f(0x3a6))[_0x4ecf9f(0xafb)](_0x4ecf9f(0x9db),()=>_0x198934(_0x4ecf9f(0x58a),_0x4ecf9f(0x94a))),document[_0x4ecf9f(0xb18)](_0x4ecf9f(0x942))[_0x4ecf9f(0xafb)]('click',()=>{const _0x2b10d8=_0x4ecf9f;_0x2b10d8(0x8b8)!==_0x2b10d8(0x4fc)?(_0x262797[_0x2b10d8(0x58f)][_0x2b10d8(0x22c)](_0x262797[_0x2b10d8(0x58f)][_0x2b10d8(0x7eb)]()-0x1),_0x110b7e()):_0x2d509f['innerHTML']=_0x2b10d8(0x2f7)+_0x20fd33+_0x2b10d8(0xc24)+_0x5b6d67[_0x2b10d8(0x596)]+_0x2b10d8(0x30b)+_0x4a18e3[_0x2b10d8(0xb52)]+'</div></div></div>';}),document[_0x4ecf9f(0xb18)](_0x4ecf9f(0x43f))[_0x4ecf9f(0xafb)](_0x4ecf9f(0x9db),()=>{const _0x117654=_0x4ecf9f;_0x117654(0x2a8)===_0x117654(0xcb1)?(_0x2a57b4(_0xb15d9e),_0x7744a['removeEventListener'](_0x117654(0xc4f),_0x4eeb5d),_0x57e896[_0x117654(0x854)](_0x117654(0x9ff),_0x3c8ca3),_0x3c2b1d[_0x117654(0x854)](_0x117654(0x476),_0x598e34),_0x268c08[_0x117654(0x854)]('touchmove',_0x13d491)):(_0x262797['currentDate'][_0x117654(0x22c)](_0x262797[_0x117654(0x58f)][_0x117654(0x7eb)]()+0x1),_0x110b7e());}),document[_0x4ecf9f(0xb18)](_0x4ecf9f(0x508))['addEventListener'](_0x4ecf9f(0x9db),()=>{const _0x47acd3=_0x4ecf9f;_0x262797[_0x47acd3(0x58f)]=new Date(),_0x262797[_0x47acd3(0x73b)]=_0xae688c(),_0x110b7e();}),document[_0x4ecf9f(0xb18)](_0x4ecf9f(0x266))['addEventListener'](_0x4ecf9f(0x9db),()=>{const _0x2baa24=_0x4ecf9f;if(_0x2baa24(0x78d)!==_0x2baa24(0x78d)){const _0x2e22e4=_0x30f87c[_0x2baa24(0x7e9)]('p');_0x2e22e4[_0x2baa24(0x280)]=_0x471716,_0x2e22e4['style'][_0x2baa24(0x4d2)]='0',_0x2324b9[_0x2baa24(0x364)](_0x2e22e4);}else _0x434a10(_0x262797[_0x2baa24(0x73b)]);}),document[_0x4ecf9f(0xb18)](_0x4ecf9f(0x39d))[_0x4ecf9f(0xafb)]('click',_0x794320),document[_0x4ecf9f(0xb18)](_0x4ecf9f(0x535))[_0x4ecf9f(0xafb)]('click',()=>document[_0x4ecf9f(0xb18)]('add-event-modal')[_0x4ecf9f(0x79f)][_0x4ecf9f(0xb42)](_0x4ecf9f(0xa36))),document[_0x4ecf9f(0xb18)]('add-event-backdrop')[_0x4ecf9f(0xafb)](_0x4ecf9f(0x9db),()=>document['getElementById']('add-event-modal')[_0x4ecf9f(0x79f)][_0x4ecf9f(0xb42)](_0x4ecf9f(0xa36)));const _0x528b70=document[_0x4ecf9f(0xb18)](_0x4ecf9f(0xd04));_0x528b70['addEventListener'](_0x4ecf9f(0x6b5),_0x13bf03),_0x528b70[_0x4ecf9f(0xafb)](_0x4ecf9f(0x983),_0x13bf03,{'passive':![]});}function _0x110b7e(){const _0x301e2d=_0x17d1db;if(_0x301e2d(0xc30)===_0x301e2d(0xc30)){const _0x3fc7f4=_0x262797[_0x301e2d(0x58f)][_0x301e2d(0x156)](),_0x2a5819=_0x262797[_0x301e2d(0x58f)][_0x301e2d(0x7eb)]();document[_0x301e2d(0xb18)]('calendar-header-title')[_0x301e2d(0x65b)]=_0x3fc7f4+'年\x20'+(_0x2a5819+0x1)+'月',_0x246411(_0x3fc7f4,_0x2a5819),_0x1bf7c4(_0x262797[_0x301e2d(0x73b)]);}else _0x568e1d[_0x301e2d(0xb2f)]({'role':_0x301e2d(0x809),'content':_0x21522f}),_0x4a3c67[_0x301e2d(0xb2f)]({'role':_0x301e2d(0xaf6),'content':'好的，我记住了这些人设和历史。现在我们开始对话。'});}function _0x158a39(){const _0x6561a3=_0x17d1db;if(_0x6561a3(0x6c2)===_0x6561a3(0x6c2)){const _0x52eef1=document[_0x6561a3(0xb18)](_0x6561a3(0xbcc));if(!_0x52eef1)return;const _0x5ed9ee=_0xae688c(),_0x73c053=_0x35d0f9[_0x6561a3(0x2a3)][_0x6561a3(0x485)](_0x4e8f75=>_0x4e8f75[_0x6561a3(0x569)]===_0x5ed9ee&&_0x4e8f75[_0x6561a3(0xb12)]===_0x6561a3(0x10c));_0x52eef1[_0x6561a3(0x280)]='',_0x73c053[_0x6561a3(0x968)]>0x0?_0x73c053['forEach'](_0x1dee93=>{const _0xed7d81=_0x6561a3;if('zNhiX'===_0xed7d81(0x810)){const _0x23b164=document[_0xed7d81(0x7e9)]('div');_0x23b164[_0xed7d81(0x73e)]=_0xed7d81(0xd05),_0x23b164['textContent']=_0x1dee93[_0xed7d81(0x9bc)],_0x52eef1[_0xed7d81(0x364)](_0x23b164);}else{const _0x13899d=_0x46bf4c(_0x820b02[_0xed7d81(0xbc0)]);return _0x13899d?.[_0xed7d81(0x19d)]||'Unknown';}}):_0x52eef1[_0x6561a3(0x280)]=_0x6561a3(0x3cb);}else _0x4ba17a+=_0x6561a3(0x330);}function _0x246411(_0x52a129,_0x4ff3fd){const _0x15bba5=_0x17d1db,_0x2c368a=document[_0x15bba5(0xb18)]('calendar-grid');_0x2c368a[_0x15bba5(0x280)]='';const _0x4a89fe=new Date(_0x52a129,_0x4ff3fd,0x1)[_0x15bba5(0x73d)](),_0x30a5dd=new Date(_0x52a129,_0x4ff3fd+0x1,0x0)[_0x15bba5(0xb2b)](),_0x4d00f0=_0xae688c();for(let _0x10a01f=0x0;_0x10a01f<_0x4a89fe;_0x10a01f++){_0x2c368a[_0x15bba5(0x364)](document['createElement'](_0x15bba5(0x591)));}for(let _0x85d0aa=0x1;_0x85d0aa<=_0x30a5dd;_0x85d0aa++){if(_0x15bba5(0x78e)===_0x15bba5(0x78e)){const _0x40cd30=document[_0x15bba5(0x7e9)](_0x15bba5(0x591));_0x40cd30[_0x15bba5(0x73e)]=_0x15bba5(0xa59);const _0x3accb0=_0x52a129+'-'+String(_0x4ff3fd+0x1)[_0x15bba5(0x839)](0x2,'0')+'-'+String(_0x85d0aa)[_0x15bba5(0x839)](0x2,'0');if(_0x3accb0===_0x4d00f0)_0x40cd30[_0x15bba5(0x79f)][_0x15bba5(0x366)]('is-today');if(_0x3accb0===_0x262797[_0x15bba5(0x73b)])_0x40cd30[_0x15bba5(0x79f)][_0x15bba5(0x366)]('is-selected');const _0xdeac59=document[_0x15bba5(0x7e9)](_0x15bba5(0x277));_0xdeac59[_0x15bba5(0x73e)]=_0x15bba5(0x737),_0xdeac59[_0x15bba5(0x65b)]=_0x85d0aa,_0x40cd30[_0x15bba5(0x364)](_0xdeac59);const _0x12fdb9=_0x35d0f9[_0x15bba5(0x2a3)][_0x15bba5(0x485)](_0x29fd65=>_0x29fd65[_0x15bba5(0x569)]===_0x3accb0);if(_0x12fdb9[_0x15bba5(0x968)]>0x0){if(_0x15bba5(0x511)===_0x15bba5(0x511)){const _0x3cceb8=document[_0x15bba5(0x7e9)](_0x15bba5(0x591));_0x3cceb8[_0x15bba5(0x73e)]='day-dot',_0x40cd30[_0x15bba5(0x364)](_0x3cceb8);}else _0x16256a[_0x15bba5(0x175)](_0x22d2ef=>{const _0x34462e=_0x15bba5,_0x3a4eab=new _0x4d8e85(_0x22d2ef[_0x34462e(0xaa4)]||_0x22d2ef['last_edited'])['getTime']();_0x3a4eab>=_0x1ee38d[_0x34462e(0x283)]()&&_0x4eb13d[_0x34462e(0xb2f)]({'timestamp':_0x3a4eab,'type':_0x34462e(0x5dd)+_0x2ee105+']','content':_0x5e596e['stringify'](_0x22d2ef)});});}_0x40cd30[_0x15bba5(0xafb)]('click',()=>{const _0x2f5b1d=_0x15bba5;_0x262797[_0x2f5b1d(0x73b)]=_0x3accb0,_0x110b7e();}),_0x2c368a['appendChild'](_0x40cd30);}else{_0x5a7855[_0x15bba5(0x932)][_0x9ed3d8]=null;if(_0x2e61e3===_0x15bba5(0x89a))_0x8189d6[_0x15bba5(0x932)]['imageId']=null;_0x10618f();}}}function _0x1bf7c4(_0x34e285){const _0x2427ca=_0x17d1db;if(_0x2427ca(0x86d)===_0x2427ca(0x86d)){const _0x22643e=document[_0x2427ca(0xb18)](_0x2427ca(0xd04)),_0x21970e=document[_0x2427ca(0xb18)](_0x2427ca(0x498));_0x22643e[_0x2427ca(0x280)]='';const _0x315b2e=new Date(_0x34e285+_0x2427ca(0xae5));_0x21970e['textContent']=_0x315b2e[_0x2427ca(0x7eb)]()+0x1+'月'+_0x315b2e['getDate']()+'日';const _0x105857=_0x35d0f9['calendarEvents'][_0x2427ca(0x485)](_0x464f66=>_0x464f66[_0x2427ca(0x569)]===_0x34e285);if(_0x105857['length']===0x0){_0x22643e[_0x2427ca(0x280)]=_0x2427ca(0x3cc);return;}_0x105857[_0x2427ca(0x175)](_0x3636d1=>{const _0x1367a9=_0x2427ca,_0xf87ec3=document[_0x1367a9(0x7e9)](_0x1367a9(0x591));_0xf87ec3[_0x1367a9(0x73e)]=_0x3636d1[_0x1367a9(0xb12)]===_0x1367a9(0x1ed)?'important-day-item':_0x1367a9(0x3bd),_0xf87ec3[_0x1367a9(0x65b)]=_0x3636d1[_0x1367a9(0x9bc)],_0xf87ec3['dataset']['id']=_0x3636d1['id'],_0x22643e[_0x1367a9(0x364)](_0xf87ec3);});}else _0xf993bb['classList'][_0x2427ca(0x34b)](_0x2427ca(0xaef),_0x49ce2b[_0x2427ca(0x2ce)]);}function _0x434a10(_0x148d83){const _0x41490a=_0x17d1db;document['getElementById'](_0x41490a(0x26f))[_0x41490a(0x65b)]='为\x20'+_0x148d83+_0x41490a(0x6b3),document[_0x41490a(0xb18)](_0x41490a(0x765))[_0x41490a(0x850)]='',document[_0x41490a(0xb18)]('event-type-todo')[_0x41490a(0xbbd)]=!![],document['getElementById']('add-event-modal')[_0x41490a(0x79f)]['add']('show'),document[_0x41490a(0xb18)](_0x41490a(0x765))[_0x41490a(0x1d4)]();}function _0x794320(){const _0x4bdedf=_0x17d1db,_0x3d2e26=document[_0x4bdedf(0xb18)]('event-content-input')[_0x4bdedf(0x850)][_0x4bdedf(0x2e2)](),_0x124b88=document[_0x4bdedf(0x3eb)](_0x4bdedf(0xafc))[_0x4bdedf(0x850)];if(!_0x3d2e26){_0x28dfd2(_0x4bdedf(0xab4));return;}const _0x5b9a2a=_0x35d0f9[_0x4bdedf(0x162)][_0x4bdedf(0x9cd)](_0xc36fca=>_0xc36fca['id']===_0x35d0f9[_0x4bdedf(0x742)]);if(!_0x5b9a2a){_0x28dfd2('错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。');return;}_0x35d0f9[_0x4bdedf(0x2a3)][_0x4bdedf(0xb2f)]({'id':_0x4bdedf(0x9fb)+Date[_0x4bdedf(0x5ee)](),'date':_0x262797[_0x4bdedf(0x73b)],'type':_0x124b88,'content':_0x3d2e26,'userId':_0x5b9a2a['id']}),_0x5c9c95(),_0x110b7e(),_0x46d6ea(),_0x158a39(),document['getElementById'](_0x4bdedf(0xb07))[_0x4bdedf(0x79f)]['remove'](_0x4bdedf(0xa36));}function _0x46d6ea(){const _0xe24bf0=_0x17d1db,_0x3b93f7=document[_0xe24bf0(0xb18)](_0xe24bf0(0xa9f)),_0x4dba12=document[_0xe24bf0(0xb18)](_0xe24bf0(0x8b1)),_0x157544=new Date();_0x157544[_0xe24bf0(0xc2c)](0x0,0x0,0x0,0x0);const _0x594c62=_0x35d0f9[_0xe24bf0(0x2a3)]['filter'](_0x2f2c88=>_0x2f2c88[_0xe24bf0(0xb12)]==='important'&&new Date(_0x2f2c88['date']+_0xe24bf0(0xae5))>=_0x157544)[_0xe24bf0(0xa99)]((_0x507254,_0x5050d2)=>new Date(_0x507254[_0xe24bf0(0x569)])-new Date(_0x5050d2['date']));if(_0x594c62[_0xe24bf0(0x968)]>0x0){if(_0xe24bf0(0x2c0)!==_0xe24bf0(0x721)){const _0x3ca76f=_0x594c62[0x0],_0x436500=new Date(_0x3ca76f[_0xe24bf0(0x569)]+'T00:00:00'),_0x1ab8e9=_0x436500-_0x157544,_0x2ba26b=Math[_0xe24bf0(0x85e)](_0x1ab8e9/(0x3e8*0x3c*0x3c*0x18));_0x3b93f7[_0xe24bf0(0x65b)]=_0xe24bf0(0x176)+_0x3ca76f[_0xe24bf0(0x9bc)]+'」',_0x4dba12[_0xe24bf0(0x280)]='<span>'+_0x2ba26b+_0xe24bf0(0xb78);}else{_0x5f3f58['log'](_0xe24bf0(0x811));const _0x165ae9=_0xe24bf0(0x578),_0x5be9ad={'id':_0xe9efbb,'name':_0xe24bf0(0xd07),'content':_0x165ae9,'categoryId':_0x5c3c89['id']};_0x2d7e4c[_0xe24bf0(0x38f)]['push'](_0x5be9ad),_0x22eb22=!![];}}else _0xe24bf0(0x9ec)===_0xe24bf0(0x9ec)?(_0x3b93f7['textContent']='近期没有特别安排',_0x4dba12[_0xe24bf0(0x280)]=_0xe24bf0(0x629)):(_0x3058d4[_0xe24bf0(0x4a1)](_0xe24bf0(0x8c7),_0x2cd393),_0x482fa6='<div\x20style\x20=\x20\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22\x20><strong>解析失败了。</strong><br>那个API返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>'+_0x128ccf+_0xe24bf0(0x278));}function _0x547ac4(){const _0x5ca222=_0x17d1db;if(_0x5ca222(0x32f)!==_0x5ca222(0x32f))throw new _0x3976a2(_0x5ca222(0x4a3)+_0x54f662);else{const _0x3031fb=document[_0x5ca222(0xb18)](_0x5ca222(0xfe));_0x3031fb[_0x5ca222(0x280)]='';if(_0x35d0f9[_0x5ca222(0x162)][_0x5ca222(0x968)]===0x0){_0x3031fb[_0x5ca222(0x280)]=_0x5ca222(0xc82);return;}_0x35d0f9[_0x5ca222(0x162)][_0x5ca222(0x175)](_0x1677d7=>{const _0x358643=_0x5ca222;if(_0x358643(0x751)===_0x358643(0x751)){const _0x4597ec=document[_0x358643(0x7e9)]('div');_0x4597ec['className']=_0x358643(0x715),_0x4597ec[_0x358643(0x218)]['id']=_0x1677d7['id'];const _0x5a0178=_0x1677d7['id']===_0x35d0f9[_0x358643(0x742)]?_0x358643(0x90c):'';_0x4597ec['innerHTML']=_0x358643(0x797)+(_0x1677d7['avatar']||_0x395094)+_0x358643(0xd0a)+_0x1677d7['name']+_0x5a0178+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>'+_0x1677d7['persona'][_0x358643(0x185)](0x0,0x64)+_0x358643(0xb90),_0x4597ec[_0x358643(0xafb)](_0x358643(0x9db),()=>_0x7655f6(_0x1677d7['id'])),_0x3031fb['appendChild'](_0x4597ec);}else{if(!_0x22a144[_0x358643(0xc29)](_0xce30ec))return _0x358643(0x695);if(_0x182ae0[_0x358643(0x968)]===0x0)return'<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>';return _0x5f35f8[_0x358643(0xa99)]((_0x54cbb1,_0x30f1a1)=>new _0xc9bfb8(_0x30f1a1[_0x358643(0xaa4)])-new _0x4cecb8(_0x54cbb1[_0x358643(0xaa4)])),_0x299850[_0x358643(0xbb5)](_0x4e8880=>{const _0x1863f8=_0x358643,_0xa13d5b=(_0x4e8880[_0x1863f8(0x171)]||[])['map'](_0x466b0c=>_0x1863f8(0x7f4)+_0x466b0c+_0x1863f8(0x15a))['join']('');return _0x1863f8(0xb10)+(_0x4e8880[_0x1863f8(0x8f7)]||_0x1863f8(0xc5b))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>'+(_0x4e8880[_0x1863f8(0xaa4)]||'')+_0x1863f8(0x7b5)+(_0x4e8880[_0x1863f8(0x4d8)]||_0x1863f8(0x331))+_0x1863f8(0x8ad)+_0xa13d5b+_0x1863f8(0x5cc)+(_0x4e8880[_0x1863f8(0x923)]||0x0)[_0x1863f8(0xab2)](0x2)+_0x1863f8(0xcb2);})['join']('');}});}}function _0x7655f6(_0x5591f3=null){const _0x131720=_0x17d1db;_0x198934(_0x131720(0xc1a),_0x131720(0x386));const _0x43b919=document[_0x131720(0xb18)](_0x131720(0x80a)),_0xd1d6f1=document[_0x131720(0xb18)](_0x131720(0x2ad));_0xd1d6f1[_0x131720(0x7d9)][_0x131720(0x2f8)]='',delete _0xd1d6f1[_0x131720(0x218)][_0x131720(0xc59)];if(_0x5591f3){const _0x52de75=_0x35d0f9[_0x131720(0x162)]['find'](_0x804c4a=>_0x804c4a['id']===_0x5591f3);if(!_0x52de75)return;document[_0x131720(0xb18)](_0x131720(0x974))[_0x131720(0x850)]=_0x52de75['id'],document[_0x131720(0xb18)]('user-profile-edit-title')[_0x131720(0x65b)]=_0x131720(0x7fc),document['getElementById']('user-name')['value']=_0x52de75['name'],_0x52de75[_0x131720(0x36b)]?_0xd1d6f1[_0x131720(0x7d9)]['backgroundImage']=_0x131720(0x575)+_0x52de75['avatar']+'\x27)':_0xd1d6f1['style'][_0x131720(0x2f8)]='url(\x27'+_0x395094+'\x27)',document[_0x131720(0xb18)](_0x131720(0x920))['value']=_0x52de75['persona'],_0x43b919[_0x131720(0x7d9)][_0x131720(0x31f)]=_0x52de75['id']===_0x35d0f9[_0x131720(0x742)]?_0x131720(0x9ba):_0x131720(0xb91),document[_0x131720(0xb18)](_0x131720(0x62b))[_0x131720(0x7d9)][_0x131720(0x31f)]=_0x131720(0xb91);}else document[_0x131720(0xb18)](_0x131720(0x974))[_0x131720(0x850)]='',document[_0x131720(0xb18)](_0x131720(0x5d0))[_0x131720(0x65b)]=_0x131720(0x912),document[_0x131720(0xb18)]('user-name')['value']='新用户\x20'+(_0x35d0f9[_0x131720(0x162)][_0x131720(0x968)]+0x1),_0xd1d6f1[_0x131720(0x7d9)][_0x131720(0x2f8)]=_0x131720(0x575)+_0x395094+'\x27)',document[_0x131720(0xb18)](_0x131720(0x920))[_0x131720(0x850)]='',_0x43b919[_0x131720(0x7d9)]['display']='none',document[_0x131720(0xb18)](_0x131720(0x62b))[_0x131720(0x7d9)][_0x131720(0x31f)]=_0x131720(0x9ba);}function _0x10a7ed(){const _0x25a618=_0x17d1db,_0x3e000a=document[_0x25a618(0xb18)](_0x25a618(0x974))[_0x25a618(0x850)],_0x3b1b80=document['getElementById'](_0x25a618(0x2ad)),_0x5c17c1={'name':document['getElementById'](_0x25a618(0xc34))[_0x25a618(0x850)]['trim'](),'persona':document[_0x25a618(0xb18)]('user-persona')['value'][_0x25a618(0x2e2)](),'avatar':_0x35d0f9[_0x25a618(0x162)][_0x25a618(0x9cd)](_0x1dbceb=>_0x1dbceb['id']===_0x3e000a)?.[_0x25a618(0x36b)]||_0x3b1b80[_0x25a618(0x7d9)][_0x25a618(0x2f8)][_0x25a618(0x571)](0x5,-0x2)[_0x25a618(0x39f)](/'/g,'')||_0x395094};if(_0x3b1b80[_0x25a618(0x218)]['newAvatar']){if('AcqDu'!==_0x25a618(0x227))_0x5c17c1['avatar']=_0x3b1b80[_0x25a618(0x218)][_0x25a618(0xc59)],delete _0x3b1b80[_0x25a618(0x218)]['newAvatar'];else{_0x57d295(_0x25a618(0x8af));return;}}if(!_0x5c17c1['name']){_0x28dfd2(_0x25a618(0xb5a));return;}if(_0x3e000a){const _0x42a515=_0x35d0f9[_0x25a618(0x162)][_0x25a618(0x9cd)](_0x44e6d5=>_0x44e6d5['id']===_0x3e000a);if(_0x42a515)Object[_0x25a618(0xbdd)](_0x42a515,_0x5c17c1);}else{if('lKyNj'===_0x25a618(0x4ce)){const _0x10c894={'id':_0x25a618(0x83d)+Date['now'](),..._0x5c17c1};_0x35d0f9[_0x25a618(0x162)][_0x25a618(0xb2f)](_0x10c894),!_0x35d0f9[_0x25a618(0x742)]&&(_0x35d0f9[_0x25a618(0x742)]=_0x10c894['id']);}else{const _0x1ea708=_0x1e0acd[_0x25a618(0xac5)](_0x557346);if(_0x1ea708){const _0x5259a1=_0x3d8884(_0x1ea708[0x1],0xa),_0x4b38df=_0x2b6c0c(_0x1ea708[0x2],0xa),_0x2cfe7a=_0x3c7593(_0x1ea708[0x3],0xa)*(_0x1ea708[0x3][_0x25a618(0x968)]===0x2?0xa:0x1),_0x114d5c=_0x5259a1*0x3c+_0x4b38df+_0x2cfe7a/0x3e8,_0x1ad3a5=_0xf8858b[_0x25a618(0x39f)](_0x39c808,'')['trim']();_0x1ad3a5&&_0x81c4a3[_0x25a618(0xb2f)]({'time':_0x114d5c,'text':_0x1ad3a5});}}}_0x5c9c95(),_0x28dfd2(_0x25a618(0xd00)),_0x547ac4(),_0x198934(_0x25a618(0x386),_0x25a618(0xc1a));}async function _0x4d744e(){const _0xdf888c=_0x17d1db;if(_0xdf888c(0x66d)==='pdWbM'){const _0x46df99=_0x32c954[_0xdf888c(0x97b)](_0x266e79[_0xdf888c(0x218)][_0xdf888c(0x52e)][_0xdf888c(0x39f)](/&quot;/g,'\x22')),_0x48ea89=_0x41e630[_0xdf888c(0x218)]['contactName'],_0x161959=_0x2da480[_0xdf888c(0x218)][_0xdf888c(0x1ac)];_0x203e98(_0x48ea89,_0x161959,_0x46df99);}else{const _0x54638d=document[_0xdf888c(0xb18)](_0xdf888c(0x974))[_0xdf888c(0x850)];if(!_0x54638d)return;if(_0x35d0f9[_0xdf888c(0x162)][_0xdf888c(0x968)]<=0x1){if(_0xdf888c(0xbff)!==_0xdf888c(0xbff))_0x65efbe=_0x2d3f88[_0xdf888c(0x162)][_0xdf888c(0x9cd)](_0x3f505c=>_0x3f505c['id']===_0x335cf4[_0xdf888c(0x742)])||_0x3dbe09['userProfiles'][0x0];else{_0x28dfd2(_0xdf888c(0x304));return;}}const _0x4888e5=await _0x3a7c5b(_0xdf888c(0xbf5));if(_0x4888e5){_0x35d0f9[_0xdf888c(0x162)]=_0x35d0f9[_0xdf888c(0x162)][_0xdf888c(0x485)](_0x45376d=>_0x45376d['id']!==_0x54638d);if(_0x35d0f9[_0xdf888c(0x742)]===_0x54638d){if(_0xdf888c(0x8ce)===_0xdf888c(0x2c7)){const _0x1daf8d=new _0x120b55(_0x3f9bee[_0xdf888c(0xaa4)]);_0x48341c+='-\x20**你与'+_0x446612[_0xdf888c(0x19d)]+_0xdf888c(0x2e1)+_0x396ec2(_0x1daf8d)+'\x0a';}else _0x35d0f9[_0xdf888c(0x742)]=_0x35d0f9[_0xdf888c(0x162)][0x0]['id'];}_0x35d0f9['chats'][_0xdf888c(0x175)](_0x5217bc=>{const _0x38c76e=_0xdf888c;_0x38c76e(0x768)===_0x38c76e(0x211)?_0x53988e['replayPressTimer']=_0x714a0(()=>{const _0xc167b5=_0x38c76e;_0x5d9661[_0xc167b5(0xa05)](),_0x548ed3(_0x11e7ec,_0x8f1c4e);},0x320):_0x5217bc[_0x38c76e(0x54f)]===_0x54638d&&(_0x5217bc[_0x38c76e(0x54f)]=_0x35d0f9[_0x38c76e(0x742)]);}),_0x5c9c95(),_0x28dfd2(_0xdf888c(0x529)),_0x547ac4(),_0x198934(_0xdf888c(0x386),_0xdf888c(0xc1a));}}}function _0x5c3b45(){_0x2a02ac(),_0x52cc55(_0x35d0f9['activeWorldBookCategoryId']);}function _0x2a02ac(){const _0x56cc31=_0x17d1db,_0x4d73c7=document['getElementById']('world-book-category-list');_0x4d73c7[_0x56cc31(0x280)]='',_0x35d0f9['worldBookCategories'][_0x56cc31(0x175)](_0x352acf=>{const _0x3f8630=_0x56cc31,_0x45a09c=document['createElement']('div');_0x45a09c[_0x3f8630(0x65b)]=_0x352acf[_0x3f8630(0x19d)],_0x45a09c['dataset']['id']=_0x352acf['id'],_0x45a09c[_0x3f8630(0x7d9)]['padding']=_0x3f8630(0x8a9),_0x45a09c[_0x3f8630(0x7d9)]['borderRadius']=_0x3f8630(0x9d8),_0x45a09c[_0x3f8630(0x7d9)][_0x3f8630(0xae3)]='pointer',_0x45a09c[_0x3f8630(0x7d9)][_0x3f8630(0x51a)]=_0x3f8630(0x36a),_0x45a09c[_0x3f8630(0x7d9)][_0x3f8630(0x1d7)]='500';_0x352acf['id']===_0x35d0f9[_0x3f8630(0x143)]?(_0x45a09c[_0x3f8630(0x7d9)]['backgroundColor']=_0x3f8630(0xa31),_0x45a09c[_0x3f8630(0x7d9)][_0x3f8630(0x11f)]='white'):'SJQmo'!=='Rcybp'?_0x45a09c[_0x3f8630(0x7d9)][_0x3f8630(0x11f)]=_0x3f8630(0x71e):_0x24cca5[_0x3f8630(0x4a1)](_0x3f8630(0x961)+_0x21e2cb[_0x3f8630(0x19d)]+'\x20('+_0x59513f['id']+_0x3f8630(0x716),_0x55625e);_0x45a09c['addEventListener'](_0x3f8630(0x9db),()=>{const _0x5ba2ef=_0x3f8630;_0x35d0f9[_0x5ba2ef(0x143)]=_0x352acf['id'],_0x5c3b45();});let _0x5cd95d=null;const _0x360616=_0xe31d34=>{const _0x1f2021=_0x3f8630;if(_0x352acf['id']===_0x1f2021(0xb17))return;_0x5cd95d=setTimeout(()=>{const _0x29f2bd=_0x1f2021;if(_0xe31d34[_0x29f2bd(0xb12)]==='touchstart')_0xe31d34[_0x29f2bd(0xa05)]();_0x1d34cd(_0x352acf['id'],_0x352acf[_0x29f2bd(0x19d)]);},0x320);},_0x2f113e=()=>{const _0x56fd01=_0x3f8630;if('DMxTF'===_0x56fd01(0xa20))clearTimeout(_0x5cd95d);else{_0xee1b39['value']='',_0x42d302['innerHTML']='';if(_0x388486['characters'][_0x56fd01(0x968)]<0x2){_0x319757(_0x56fd01(0x5a3));return;}_0x30776e[_0x56fd01(0x1f2)]['forEach'](_0x2f928d=>{const _0x5787c1=_0x56fd01,_0x1fb23c=_0x2fa0c1[_0x5787c1(0x7e9)]('li');_0x1fb23c[_0x5787c1(0x73e)]=_0x5787c1(0x1d9),_0x1fb23c['innerHTML']=_0x5787c1(0x4e4)+_0x2f928d['id']+_0x5787c1(0x8e7)+_0x2f928d['id']+_0x5787c1(0x49e)+(_0x2f928d[_0x5787c1(0x36b)]||_0x959624)+_0x5787c1(0xb47)+_0x2f928d['id']+'\x22\x20class=\x22char-name\x22>'+_0x2f928d[_0x5787c1(0x19d)]+'</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x799522[_0x5787c1(0x364)](_0x1fb23c);}),_0x57a38b(_0x56fd01(0x4b4),_0x56fd01(0x3d0));}};_0x45a09c[_0x3f8630(0xafb)](_0x3f8630(0x6b5),_0x360616),_0x45a09c[_0x3f8630(0xafb)](_0x3f8630(0xc4f),_0x2f113e),_0x45a09c['addEventListener'](_0x3f8630(0xcbc),_0x2f113e),_0x45a09c['addEventListener'](_0x3f8630(0x983),_0x360616,{'passive':![]}),_0x45a09c['addEventListener'](_0x3f8630(0x9ff),_0x2f113e),_0x45a09c[_0x3f8630(0xafb)](_0x3f8630(0x476),_0x2f113e),_0x4d73c7['appendChild'](_0x45a09c);});}async function _0x1d34cd(_0x8958ae,_0x52fe52){const _0x5bdf1b=_0x17d1db,_0x48794a=await _0x3a7c5b(_0x5bdf1b(0x81a)+_0x52fe52+_0x5bdf1b(0x898));if(!_0x48794a)return;const _0x420c34=_0x35d0f9[_0x5bdf1b(0x38f)]['filter'](_0x1e91d8=>_0x1e91d8[_0x5bdf1b(0xcf5)]===_0x8958ae)['map'](_0x39a274=>_0x39a274['id']);_0x35d0f9[_0x5bdf1b(0x38f)]=_0x35d0f9[_0x5bdf1b(0x38f)]['filter'](_0x5a30e1=>_0x5a30e1[_0x5bdf1b(0xcf5)]!==_0x8958ae),_0x35d0f9[_0x5bdf1b(0xce5)]=_0x35d0f9[_0x5bdf1b(0x6c0)][_0x5bdf1b(0x485)](_0x3fc6f6=>_0x3fc6f6['id']!==_0x8958ae);_0x35d0f9[_0x5bdf1b(0x143)]===_0x8958ae&&(_0x35d0f9['activeWorldBookCategoryId']=_0x5bdf1b(0xb17));const _0x606c98=[..._0x35d0f9[_0x5bdf1b(0x1f2)],..._0x35d0f9['chats']];_0x606c98[_0x5bdf1b(0x175)](_0x2d4157=>{const _0x4d9a81=_0x5bdf1b;if(_0x4d9a81(0x941)===_0x4d9a81(0x941))_0x2d4157[_0x4d9a81(0x99c)]&&_0x2d4157[_0x4d9a81(0x99c)][_0x4d9a81(0x968)]>0x0&&(_0x4d9a81(0x534)==='eUOHN'?_0x5af2d3[_0x4d9a81(0x6b9)]=[]:_0x2d4157[_0x4d9a81(0x99c)]=_0x2d4157[_0x4d9a81(0x99c)][_0x4d9a81(0x485)](_0x1485f4=>!_0x420c34[_0x4d9a81(0xb63)](_0x1485f4)));else{const _0x5e9ff9=_0x3ca167[_0x4d9a81(0x87d)]((_0x386e84-_0x297b1d)/(0x3e8*0x3c*0x3c*0x18));_0x2d73fb+='-\x20**对话状态提示**:\x20你们已经有\x20'+_0x5e9ff9+_0x4d9a81(0x7ac);}}),_0x5c9c95(),_0x5c3b45(),_0x28dfd2('分类\x20“'+_0x52fe52+'”\x20已被彻底清除。');}function _0x52cc55(_0x1cddb0){const _0x2944fc=_0x17d1db,_0x1137cd=document['getElementById'](_0x2944fc(0x656));_0x1137cd[_0x2944fc(0x280)]='';const _0x88236b=_0x35d0f9['worldBooks']['filter'](_0x306d21=>_0x306d21[_0x2944fc(0xcf5)]===_0x1cddb0||_0x1cddb0===_0x2944fc(0xb17)&&!_0x306d21[_0x2944fc(0xcf5)]);if(_0x88236b[_0x2944fc(0x968)]===0x0){if(_0x2944fc(0xbb0)!==_0x2944fc(0xbb0))_0x59659d=[..._0x2284ce,..._0x1c0221];else{_0x1137cd[_0x2944fc(0x280)]=_0x2944fc(0x63f);return;}}_0x88236b[_0x2944fc(0x175)](_0x33e6f7=>{const _0x1e1564=_0x2944fc,_0x3790f2=document[_0x1e1564(0x7e9)]('div');_0x3790f2['className']=_0x1e1564(0x715),_0x3790f2[_0x1e1564(0x218)]['id']=_0x33e6f7['id'],_0x3790f2['innerHTML']=_0x1e1564(0x54c)+_0x33e6f7[_0x1e1564(0x19d)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>'+_0x33e6f7[_0x1e1564(0x9bc)][_0x1e1564(0x185)](0x0,0x64)+_0x1e1564(0xb90),_0x3790f2['addEventListener']('click',()=>_0x505897(_0x33e6f7['id'])),_0x1137cd[_0x1e1564(0x364)](_0x3790f2);});}document['getElementById'](_0x17d1db(0x637))['addEventListener'](_0x17d1db(0x9db),async()=>{const _0x5770d6=_0x17d1db,_0x3edcc3=prompt(_0x5770d6(0xc5c));if(_0x3edcc3&&_0x3edcc3[_0x5770d6(0x2e2)]()){const _0x508849={'id':_0x5770d6(0x684)+Date['now'](),'name':_0x3edcc3[_0x5770d6(0x2e2)]()};_0x35d0f9[_0x5770d6(0x6c0)][_0x5770d6(0xb2f)](_0x508849),_0x35d0f9[_0x5770d6(0x143)]=_0x508849['id'],_0x5c9c95(),_0x5c3b45();}});function _0x505897(_0x3c7b0c=null){const _0x37dece=_0x17d1db;if(_0x37dece(0xb7b)!==_0x37dece(0x577)){_0x198934(_0x37dece(0x776),_0x37dece(0x899));const _0x3708f7=document['getElementById'](_0x37dece(0xb03));_0x3708f7['innerHTML']='',_0x35d0f9[_0x37dece(0x6c0)][_0x37dece(0x175)](_0x36c69e=>{const _0x45415e=_0x37dece;if('GBtfa'===_0x45415e(0xb39))_0x442848(),_0x3951be();else{const _0xf468ab=document[_0x45415e(0x7e9)](_0x45415e(0x91f));_0xf468ab['value']=_0x36c69e['id'],_0xf468ab[_0x45415e(0x65b)]=_0x36c69e[_0x45415e(0x19d)],_0x3708f7[_0x45415e(0x364)](_0xf468ab);}});if(_0x3c7b0c){const _0x1cac4d=_0x35d0f9['worldBooks'][_0x37dece(0x9cd)](_0x2379f9=>_0x2379f9['id']===_0x3c7b0c);if(!_0x1cac4d)return;document[_0x37dece(0xb18)](_0x37dece(0xc19))[_0x37dece(0x850)]=_0x1cac4d['id'],document[_0x37dece(0xb18)]('world-book-editor-title')[_0x37dece(0x65b)]=_0x37dece(0xc9a),document[_0x37dece(0xb18)](_0x37dece(0x184))['value']=_0x1cac4d[_0x37dece(0x19d)],document['getElementById'](_0x37dece(0x496))[_0x37dece(0x850)]=_0x1cac4d[_0x37dece(0x9bc)],_0x3708f7['value']=_0x1cac4d[_0x37dece(0xcf5)]||'default';}else document['getElementById'](_0x37dece(0xc19))[_0x37dece(0x850)]='',document[_0x37dece(0xb18)](_0x37dece(0x35a))['textContent']=_0x37dece(0x6a9),document['getElementById']('world-book-edit-name')[_0x37dece(0x850)]='',document['getElementById'](_0x37dece(0x496))[_0x37dece(0x850)]='',_0x3708f7[_0x37dece(0x850)]=_0x35d0f9[_0x37dece(0x143)];}else _0x32c744+=_0x37dece(0x423)+_0x5a2004[_0x37dece(0x248)]+'”的笔记，内容是：“'+_0x54e49f[_0x37dece(0x9bc)][_0x37dece(0x39f)](/\n/g,'\x20')+_0x37dece(0x8e0);}function _0x4d7add(){const _0x17b006=_0x17d1db,_0xb0a7f3=document[_0x17b006(0xb18)]('editing-world-book-id')[_0x17b006(0x850)],_0x3b4033=document[_0x17b006(0xb18)](_0x17b006(0x184))[_0x17b006(0x850)][_0x17b006(0x2e2)](),_0x45936e=document['getElementById'](_0x17b006(0x496))[_0x17b006(0x850)][_0x17b006(0x2e2)](),_0x3111b8=document[_0x17b006(0xb18)](_0x17b006(0xb03))[_0x17b006(0x850)];if(!_0x3b4033||!_0x45936e){if(_0x17b006(0xb4e)===_0x17b006(0xb4e)){_0x28dfd2(_0x17b006(0x490));return;}else _0x825916[_0x17b006(0x4f1)]=![];}if(_0xb0a7f3){if(_0x17b006(0x7ca)!==_0x17b006(0x7ca))_0xa8e07c['classList']['add'](_0x17b006(0x2be));else{const _0x12b395=_0x35d0f9['worldBooks'][_0x17b006(0x9cd)](_0x28e96c=>_0x28e96c['id']===_0xb0a7f3);_0x12b395&&(_0x12b395[_0x17b006(0x19d)]=_0x3b4033,_0x12b395[_0x17b006(0x9bc)]=_0x45936e,_0x12b395[_0x17b006(0xcf5)]=_0x3111b8);}}else{const _0x1288bf={'id':_0x17b006(0x546)+Date[_0x17b006(0x5ee)](),'name':_0x3b4033,'content':_0x45936e,'categoryId':_0x3111b8};_0x35d0f9[_0x17b006(0x38f)][_0x17b006(0xb2f)](_0x1288bf);}_0x35d0f9[_0x17b006(0x143)]=_0x3111b8,_0x5c9c95(),_0x28dfd2(_0x17b006(0x3fa)),_0x5c3b45(),_0x198934('worldBook',_0x17b006(0x776));}async function _0x4cd590(){const _0x43dd27=_0x17d1db,_0x42fa8=document['getElementById'](_0x43dd27(0xc19))[_0x43dd27(0x850)];if(!_0x42fa8)return;const _0x4f267b=await _0x3a7c5b('确定要删除这个条目吗？此操作不可撤销。');_0x4f267b&&(_0x35d0f9[_0x43dd27(0x38f)]=_0x35d0f9[_0x43dd27(0x38f)][_0x43dd27(0x485)](_0xa7efc1=>_0xa7efc1['id']!==_0x42fa8),_0x35d0f9[_0x43dd27(0x1f2)][_0x43dd27(0x175)](_0x24e149=>{const _0x43a250=_0x43dd27;_0x24e149[_0x43a250(0x99c)]&&(_0x24e149['linkedWorldBookIds']=_0x24e149[_0x43a250(0x99c)][_0x43a250(0x485)](_0x1d8f2e=>_0x1d8f2e!==_0x42fa8));}),_0x5c9c95(),_0x28dfd2(_0x43dd27(0x439)),_0x5c3b45(),_0x198934(_0x43dd27(0x899),_0x43dd27(0x776)));}function _0x5f05d4(){const _0x3a69bc=_0x17d1db,_0x344b93=document['getElementById'](_0x3a69bc(0x73f)),_0x25b5fe=_0x344b93['querySelectorAll'](_0x3a69bc(0x1d0)),_0x2c0448=document[_0x3a69bc(0x3eb)]('#character-edit-screen\x20.selected-options-text');if(_0x25b5fe[_0x3a69bc(0x968)]===0x0)_0x2c0448[_0x3a69bc(0x65b)]='--\x20点击选择\x20--';else _0x25b5fe[_0x3a69bc(0x968)]>0x2?_0x2c0448[_0x3a69bc(0x65b)]=_0x3a69bc(0xa14)+_0x25b5fe['length']+'\x20项':_0x3a69bc(0x953)!==_0x3a69bc(0x103)?_0x2c0448['textContent']=Array[_0x3a69bc(0x39e)](_0x25b5fe)[_0x3a69bc(0xbb5)](_0x34571a=>_0x34571a[_0x3a69bc(0x384)][_0x3a69bc(0x65b)][_0x3a69bc(0x2e2)]())[_0x3a69bc(0x102)]('、'):_0x536ebc['error'](_0x3a69bc(0xfd),_0x109de5);}async function _0x10e954(_0x2f7997){const _0x5d6fae=_0x17d1db;if(_0x5d6fae(0x75d)!==_0x5d6fae(0x4d5)){const _0x18f46e=_0x35d0f9[_0x5d6fae(0xa6c)][_0x5d6fae(0x9cd)](_0x103502=>_0x103502['id']===_0x2f7997);if(!_0x18f46e||_0x18f46e[_0x5d6fae(0xb12)]!=='group')return;document[_0x5d6fae(0xb18)](_0x5d6fae(0x2c1))['value']=_0x18f46e['name']||'',_0x47030d(_0x5d6fae(0xc6f)),document['getElementById']('group-settings-bind-user')[_0x5d6fae(0x850)]=_0x18f46e['boundUserProfileId']||_0x35d0f9[_0x5d6fae(0x742)],_0x21a097(_0x5d6fae(0x168),_0x18f46e[_0x5d6fae(0x99c)]||[]),_0x31a439();const _0x35c1e0=document['getElementById'](_0x5d6fae(0x7e3)),_0xf9cdd0=document[_0x5d6fae(0xb18)](_0x5d6fae(0x6bd));_0xf9cdd0[_0x5d6fae(0x7d9)][_0x5d6fae(0x2f8)]='',_0x5288fd(_0x5d6fae(0x8bf)+_0x2f7997)[_0x5d6fae(0xa34)](_0x2db71e=>{const _0x15b271=_0x5d6fae;_0x35c1e0[_0x15b271(0x9c9)]=_0x2db71e?URL['createObjectURL'](_0x2db71e):_0x20a236;}),_0x5288fd(_0x5d6fae(0x289)+_0x2f7997)['then'](_0x349cf6=>{const _0x2ee58a=_0x5d6fae;if(_0x349cf6)_0xf9cdd0[_0x2ee58a(0x7d9)][_0x2ee58a(0x2f8)]='url(\x27'+URL['createObjectURL'](_0x349cf6)+'\x27)';}),_0x198934(_0x5d6fae(0x72b),_0x5d6fae(0x152));}else _0xb87fa=_0x3dea48[_0x5d6fae(0x33f)]||'';}async function _0x548a08(){const _0x1660d3=_0x17d1db;if('yipUK'!=='yipUK')_0x3f18d5[_0x233e35[_0x4ef709]]=_0x1ca255;else{const _0x5b4036=_0x1f3fa9();if(!_0x5b4036||_0x5b4036['type']!==_0x1660d3(0x253))return;const _0x11b8c4=document[_0x1660d3(0xb18)](_0x1660d3(0x2c1))[_0x1660d3(0x850)][_0x1660d3(0x2e2)]();if(!_0x11b8c4){if(_0x1660d3(0x37c)===_0x1660d3(0x37c)){_0x28dfd2(_0x1660d3(0xc70));return;}else _0xbd875d(_0x552375,_0xda1345);}_0x5b4036[_0x1660d3(0x19d)]=_0x11b8c4;const _0x1e26f0=document[_0x1660d3(0x9c6)](_0x1660d3(0x387));_0x5b4036[_0x1660d3(0x99c)]=Array[_0x1660d3(0x39e)](_0x1e26f0)[_0x1660d3(0xbb5)](_0x3fa2a4=>_0x3fa2a4[_0x1660d3(0x850)]),_0x5b4036[_0x1660d3(0x54f)]=document['getElementById'](_0x1660d3(0xc6f))[_0x1660d3(0x850)];const _0x15099a=document[_0x1660d3(0xb18)]('group-avatar-input')[_0x1660d3(0x636)][0x0],_0x1b4287=document[_0x1660d3(0xb18)](_0x1660d3(0x679))[_0x1660d3(0x636)][0x0];if(_0x15099a)await _0xad4538('group_avatar_'+_0x5b4036['id'],_0x15099a);if(_0x1b4287)await _0xad4538('group_bg_'+_0x5b4036['id'],_0x1b4287);_0x5c9c95(),_0x21b732(),await _0x24185b(),_0x28dfd2('群聊设置已保存！'),_0x198934(_0x1660d3(0x152),_0x1660d3(0x72b));}}function _0x31a439(){const _0x215e29=_0x17d1db;if(_0x215e29(0x115)!==_0x215e29(0xbe1)){const _0x3bf758=document[_0x215e29(0xb18)](_0x215e29(0x168)),_0x34183b=_0x3bf758[_0x215e29(0x9c6)]('.wb-entry-item\x20input:checked'),_0x3d27fa=document[_0x215e29(0x3eb)](_0x215e29(0xbab));if(_0x34183b[_0x215e29(0x968)]===0x0)_0x215e29(0xdf)==='NFZqg'?(_0x5af7f6(),_0x123233(![]),_0x1b4724[_0x215e29(0x2eb)]=![]):_0x3d27fa['textContent']='--\x20点击选择\x20--';else _0x34183b[_0x215e29(0x968)]>0x2?_0x215e29(0x60d)!==_0x215e29(0xa2e)?_0x3d27fa[_0x215e29(0x65b)]=_0x215e29(0xa14)+_0x34183b[_0x215e29(0x968)]+'\x20项':_0x8361d0(_0x215e29(0x58a),'meetingList'):_0x215e29(0x196)!=='cfGQX'?_0x3d27fa[_0x215e29(0x65b)]=Array['from'](_0x34183b)['map'](_0x5d08a4=>_0x5d08a4[_0x215e29(0x384)]['textContent'][_0x215e29(0x2e2)]())[_0x215e29(0x102)]('、'):(_0x55ccf8+=_0x215e29(0x140),_0x47d873[_0x215e29(0x52e)][_0x215e29(0x175)](_0x3e8794=>{const _0x4833e3=_0x215e29,_0x21ecee=_0x3e8794[_0x4833e3(0x7b0)]===_0x4833e3(0xa80)?'你':_0x352af8[_0x4833e3(0xc20)];_0x4b7d3b+=_0x4833e3(0x62e)+_0x21ecee+':\x20'+_0x3e8794['content']+'\x20\x0a';}));}else _0x28c8c0=_0x215e29(0x37d)+_0x169140[_0x215e29(0x19d)]+_0x215e29(0x825);}async function _0x16c9ab(){const _0x36c76c=_0x17d1db,_0x41cff1=_0x1f3fa9(),_0x5724c2=(_0x41cff1?.[_0x36c76c(0x8f1)]||[])[_0x36c76c(0xbb5)](_0x45939a)[_0x36c76c(0x485)](Boolean),_0x3e6591=_0x5f52db(_0x41cff1['id']);if(!_0x41cff1||_0x41cff1[_0x36c76c(0xb12)]!==_0x36c76c(0x253)||_0x5724c2['length']<0x2)return null;const _0x4cd2ad=_0x41cff1[_0x36c76c(0x99c)]&&_0x41cff1[_0x36c76c(0x99c)]['length']>0x0?_0x36c76c(0x2d4)+_0x41cff1['linkedWorldBookIds']['map'](_0x13a1ff=>_0x35d0f9[_0x36c76c(0x38f)]['find'](_0xc7141d=>_0xc7141d['id']===_0x13a1ff))[_0x36c76c(0x485)](Boolean)[_0x36c76c(0xbb5)](_0x555d7d=>_0x36c76c(0x309)+_0x555d7d[_0x36c76c(0x19d)]+'\x0a'+_0x555d7d[_0x36c76c(0x9bc)])[_0x36c76c(0x102)](''):'',_0x53d456=_0x3e6591[_0x36c76c(0x1ab)]?_0x36c76c(0x383)+_0x3e6591['name']+_0x36c76c(0xca1)+_0x3e6591[_0x36c76c(0x1ab)]:'';let _0x208bdf='';const _0x5561a7=new Date(),_0x240c9a=_0x35d0f9[_0x36c76c(0x6b9)]['at'](-0x1);_0x208bdf+=_0x36c76c(0xc0f)+_0x5561a7[_0x36c76c(0x8f0)](_0x36c76c(0x984),{'dateStyle':'full','timeStyle':'short'});if(_0x240c9a){const _0x1634fc=new Date(_0x240c9a[_0x36c76c(0xaa4)]),_0x3a5bc9=Math[_0x36c76c(0x859)]((_0x5561a7-_0x1634fc)/(0x3e8*0x3c));if(_0x3a5bc9<0x5)_0x208bdf+=_0x36c76c(0x270);else{if(_0x3a5bc9<0x78)_0x208bdf+='\x0a-\x20**对话状态**:\x20群里在'+_0x3a5bc9+_0x36c76c(0x8cb);else{if(_0x36c76c(0x2c3)!==_0x36c76c(0x2c3))_0x9ee293='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-dialogue-card\x20'+_0x21bb1a+_0x36c76c(0x401)+_0x11097d+_0x36c76c(0x843)+_0x50fd3b+_0x36c76c(0xbb8)+_0x21e059+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';else{const _0x50d327=Math['floor'](_0x3a5bc9/0x3c);if(_0x50d327<0x30)_0x208bdf+='\x0a-\x20**对话状态**:\x20群里在'+_0x50d327+'小时前聊过，可以适当问候，不要直接继续之前的话题。';else _0x208bdf+=_0x36c76c(0xcb4)+Math['floor'](_0x50d327/0x18)+_0x36c76c(0xb4c);}}}}else _0x208bdf+=_0x36c76c(0xbac);const _0x32cdd9=[..._0x35d0f9['conversationHistory']][_0x36c76c(0x876)]()[_0x36c76c(0x9cd)](_0x256839=>_0x256839[_0x36c76c(0x129)]==='user')?.[_0x36c76c(0x9bc)]||'',_0x3ff473=_0x4b14f0(_0x41cff1,_0x32cdd9),_0x3cad44=_0x35d0f9[_0x36c76c(0x6b9)]['slice'](-0x78),_0x2c9806=_0x95c6c9[_0x36c76c(0xbb5)](_0x34d346=>_0x34d346[_0x36c76c(0x19d)]),_0x5cb3ee=_0x20e654(),_0x226d59=await Promise['all'](_0x5724c2[_0x36c76c(0xbb5)](async _0x58c9c5=>{const _0x506296=_0x36c76c;if(_0x506296(0x488)===_0x506296(0x488)){const {omniText:_0x5bcef8}=_0xd9a204(_0x58c9c5['id'],_0x41cff1['id']),_0xbaebdb=_0x54bfed(_0x58c9c5['id']),_0x489ea2=await _0x164e5b(_0x58c9c5['id']),_0x308a14=_0xa3fb61(_0x58c9c5['id']),_0x5a6ec2=_0x58c9c5['linkedWorldBookIds']&&_0x58c9c5[_0x506296(0x99c)][_0x506296(0x968)]>0x0?_0x506296(0x55c)+_0x58c9c5[_0x506296(0x19d)]+_0x506296(0xcad)+_0x58c9c5['linkedWorldBookIds'][_0x506296(0xbb5)](_0x53d52b=>_0x35d0f9[_0x506296(0x38f)][_0x506296(0x9cd)](_0x31e685=>_0x31e685['id']===_0x53d52b))['filter'](Boolean)[_0x506296(0xbb5)](_0x3a84c4=>_0x506296(0xa60)+_0x3a84c4[_0x506296(0x19d)]+'\x0a'+_0x3a84c4[_0x506296(0x9bc)])[_0x506296(0x102)](''):'';let _0x463bb3=_0x506296(0xa94)+_0x58c9c5[_0x506296(0x19d)]+_0x506296(0x49c);const _0x2ea375=_0x4766dc(_0x58c9c5['id']),_0x1c716e=new Date();if(_0x2ea375){const _0x4c3222=new Date(_0x2ea375[_0x506296(0xaa4)]);_0x463bb3+='-\x20**你与'+_0x3e6591[_0x506296(0x19d)]+_0x506296(0x2e1)+_0x5cd9d4(_0x4c3222)+'\x0a';}else _0x463bb3+='-\x20**状态提示**:\x20这是你和'+_0x3e6591[_0x506296(0x19d)]+_0x506296(0x4f7);return{'id':_0x58c9c5['id'],'name':_0x58c9c5[_0x506296(0x19d)],'persona':_0x58c9c5['persona']||_0x506296(0x654),'memory':_0x5bcef8+_0xbaebdb+_0x489ea2+_0x308a14+_0x5a6ec2+_0x463bb3};}else _0x4127fb[_0x506296(0x7d9)]['display']=_0x506296(0x9ba),_0x499246[_0x506296(0x7d9)][_0x506296(0x822)]=_0x506296(0xde),_0x55ac8c[_0x506296(0x7d9)]['background']='rgba(255,255,255,0.2)';})),_0x2dadfd=0x5,_0x25aa3e=0xc,_0x1e69ec=_0x36c76c(0x4a4)[_0x36c76c(0x2e2)](),_0x176d77={'instruction':(_0x36c76c(0x601)+(_0x41cff1[_0x36c76c(0x19d)]||'群聊')+_0x36c76c(0x432)+(_0x3e6591[_0x36c76c(0x19d)]||'用户')+_0x36c76c(0xcd2)+_0x2dadfd+_0x36c76c(0x9c4)+_0x25aa3e+_0x36c76c(0x25c)+(_0x3e6591['name']||'用户')+_0x36c76c(0x239)+_0x208bdf+'\x20\x0a'+_0x53d456+'\x0a'+_0x4cd2ad+_0x36c76c(0x347)+_0x5cb3ee+'\x0a')['trim'](),'personas':_0x226d59,'mentioned':_0x3ff473?{'id':_0x3ff473['id'],'name':_0x3ff473[_0x36c76c(0x19d)]}:null,'stickerList':_0x2c9806},_0x570675={'type':_0x36c76c(0x977),'properties':{'events':{'type':_0x36c76c(0x9d9),'items':{'type':_0x36c76c(0x977),'required':['senderId',_0x36c76c(0xb7c)],'properties':{'senderId':{'type':_0x36c76c(0xb1e)},'kind':{'type':_0x36c76c(0xb1e),'enum':[_0x36c76c(0xa0c),'sticker',_0x36c76c(0xcc1)]},'content':{'type':_0x36c76c(0xb1e)},'sticker':{'type':_0x36c76c(0xb1e)},'songName':{'type':_0x36c76c(0xb1e)},'artist':{'type':_0x36c76c(0xb1e)}}}}},'required':[_0x36c76c(0x558)]},_0x28b7dd=[{'role':_0x36c76c(0x773),'content':_0x1e69ec}];for(const _0x799f of _0x3cad44){const _0x3248d4=_0x799f['role']==='ai'||_0x799f[_0x36c76c(0x129)]===_0x36c76c(0xaf6)?_0x36c76c(0xaf6):_0x36c76c(0x809);let _0x32e874={'role':_0x3248d4,'content':_0x799f[_0x36c76c(0x9bc)]},_0x5e6507=!!_0x799f[_0x36c76c(0x9bc)],_0xf5ec92=null;if(_0x799f['image'])_0xf5ec92=_0x799f[_0x36c76c(0x89a)];else{if(_0x799f['imageId'])try{const _0x4bc17f=await _0x5288fd(_0x799f[_0x36c76c(0x650)]);if(_0x4bc17f)_0xf5ec92=await _0x36479b(_0x4bc17f);}catch(_0x5d4129){if(_0x36c76c(0xc66)!==_0x36c76c(0x1bf))console['error'](_0x36c76c(0x835),_0x5d4129);else{const _0x32fcbc=_0x1debab[_0x36c76c(0xce3)][_0x36c76c(0x636)][0x0];if(!_0x32fcbc)return;const _0x4ff08a=_0x337403[_0x36c76c(0x900)](_0x32fcbc);_0x5b1acc[_0x36c76c(0x9c9)]=_0x4ff08a,_0x34e3ce[_0x36c76c(0x7c3)]=()=>{const _0x159351=_0x36c76c;_0x224255[_0x159351(0xaa5)](_0x4ff08a);};}}}_0xf5ec92&&(_0x32e874['image']=_0xf5ec92,_0x5e6507=!![]);if(_0x5e6507)_0x28b7dd[_0x36c76c(0xb2f)](_0x32e874);}_0x28b7dd[_0x36c76c(0xb2f)]({'role':_0x36c76c(0x809),'content':'请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a'+JSON[_0x36c76c(0xcf9)](_0x570675)+'\x0a\x0aINPUT:\x0a'+JSON['stringify'](_0x176d77)});try{if(_0x36c76c(0x1e9)===_0x36c76c(0x1e9)){const _0x46932d=await _0xb7fe2e(_0x28b7dd,{'json':!![]});if(!_0x46932d)return null;let _0x3aac05=_0x46932d['trim']();const _0xad9920=_0x3aac05['match'](/```json([\s\S]*?)```/i);if(_0xad9920)_0x3aac05=_0xad9920[0x1][_0x36c76c(0x2e2)]();_0x3aac05=_0x39ec4a(_0x3aac05);let _0x4e21df=null;try{_0x4e21df=JSON[_0x36c76c(0x97b)](_0x3aac05);}catch(_0x14ac3b){console[_0x36c76c(0x4a1)]('JSON\x20解析失败!\x20错误原因:',_0x14ac3b),console[_0x36c76c(0x4a1)]('收到的原始、有问题的文本:',_0x3aac05);}if(!_0x4e21df||!Array[_0x36c76c(0xc29)](_0x4e21df['events']))return null;return _0x4e21df=_0x3a5ee7(_0x4e21df,_0x5724c2,_0x2c9806),_0x4e21df[_0x36c76c(0x558)]=_0x4e21df[_0x36c76c(0x558)][_0x36c76c(0x571)](0x0,_0x25aa3e),_0x4e21df['events'][_0x36c76c(0x968)]?_0x4e21df:null;}else return _0x3ee85a[_0x36c76c(0x162)][_0x36c76c(0x9cd)](_0xbf16b6=>_0xbf16b6['id']===_0x499e2);}catch(_0x2ca8e7){if(_0x2ca8e7['name']!=='AbortError'){if(_0x36c76c(0x913)!==_0x36c76c(0x913))throw new _0x13bb5b('在你那乱七八糟的文本里没找到“歌名”！');else console[_0x36c76c(0x4a1)](_0x36c76c(0x294),_0x2ca8e7);}return null;}}function _0x338bf3(){const _0x4defa6=_0x17d1db;if('EYBNh'===_0x4defa6(0x8ba)){const _0x55e9d5=_0x4d96ed['getElementById'](_0x4defa6(0x765))[_0x4defa6(0x850)][_0x4defa6(0x2e2)](),_0x58b501=_0x1885c1[_0x4defa6(0x3eb)](_0x4defa6(0xafc))[_0x4defa6(0x850)];if(!_0x55e9d5){_0x35654b(_0x4defa6(0xab4));return;}const _0x4f627e=_0x429c4d['userProfiles'][_0x4defa6(0x9cd)](_0x1dfc20=>_0x1dfc20['id']===_0x3126d6[_0x4defa6(0x742)]);if(!_0x4f627e){_0x307f90(_0x4defa6(0x54d));return;}_0x3df864[_0x4defa6(0x2a3)]['push']({'id':_0x4defa6(0x9fb)+_0x42f1cd[_0x4defa6(0x5ee)](),'date':_0x11350b['selectedDate'],'type':_0x58b501,'content':_0x55e9d5,'userId':_0x4f627e['id']}),_0x901693(),_0x48033c(),_0x497b1b(),_0x4356b1(),_0x413b07[_0x4defa6(0xb18)](_0x4defa6(0xb07))[_0x4defa6(0x79f)][_0x4defa6(0xb42)](_0x4defa6(0xa36));}else{const _0x56f7a4=document[_0x4defa6(0xb18)](_0x4defa6(0xccc));_0x56f7a4[_0x4defa6(0x280)]='';if(_0x35d0f9[_0x4defa6(0x9dd)]['length']===0x0){_0x56f7a4[_0x4defa6(0x280)]=_0x4defa6(0xa28);return;}_0x35d0f9['friendCircles'][_0x4defa6(0x175)](_0x49b315=>{const _0xe29d7=_0x4defa6,_0x363858=_0x35d0f9[_0xe29d7(0x162)][_0xe29d7(0x9cd)](_0x5db427=>_0x5db427['id']===_0x49b315[_0xe29d7(0x54f)])||{'name':_0xe29d7(0x467)},_0x3673a9=document['createElement'](_0xe29d7(0x591));_0x3673a9[_0xe29d7(0x73e)]=_0xe29d7(0x715),_0x3673a9[_0xe29d7(0x218)]['id']=_0x49b315['id'],_0x3673a9[_0xe29d7(0x280)]=_0xe29d7(0x219)+_0x49b315[_0xe29d7(0x19d)]+_0xe29d7(0x3e1)+_0x363858[_0xe29d7(0x19d)]+'\x20|\x20'+_0x49b315['memberCharacterIds']['length']+'\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x3673a9[_0xe29d7(0xafb)](_0xe29d7(0x9db),()=>_0x34eeb9(_0x49b315['id'])),_0x56f7a4['appendChild'](_0x3673a9);});}}function _0x30dd4e(_0x3e0753=null){const _0xe88095=_0x17d1db;if(_0xe88095(0x6c5)===_0xe88095(0x139))_0x48efc4[_0xe88095(0x79f)][_0xe88095(0xb42)](_0xe88095(0xa36));else{const _0x260dd6=document[_0xe88095(0xb18)](_0xe88095(0xaa1)),_0x56851e=document['getElementById'](_0xe88095(0x275)),_0x52f5b3=document[_0xe88095(0xb18)](_0xe88095(0x461)),_0x2c1db1=document[_0xe88095(0xb18)](_0xe88095(0x777)),_0x146d9a=document[_0xe88095(0xb18)](_0xe88095(0xb96)),_0x1a82f7=document[_0xe88095(0xb18)]('delete-friend-circle-button');_0x47030d(_0xe88095(0x275)),_0x52f5b3[_0xe88095(0x280)]='',_0x35d0f9[_0xe88095(0x1f2)][_0xe88095(0x175)](_0x74788=>{const _0x4883bb=_0xe88095,_0x3ffce7=document['createElement'](_0x4883bb(0x591));_0x3ffce7[_0x4883bb(0x73e)]='member-selection-item',_0x3ffce7[_0x4883bb(0x280)]=_0x4883bb(0xb6b)+_0x74788['id']+'\x22\x20data-id=\x22'+_0x74788['id']+_0x4883bb(0x987)+(_0x74788[_0x4883bb(0x36b)]||_0x20a236)+_0x4883bb(0xa92)+_0x74788['id']+'\x22\x20class=\x22char-name\x22>'+_0x74788[_0x4883bb(0x19d)]+_0x4883bb(0x846),_0x52f5b3[_0x4883bb(0x364)](_0x3ffce7);});if(_0x3e0753){const _0x3abc91=_0x35d0f9[_0xe88095(0x9dd)][_0xe88095(0x9cd)](_0xd35b0=>_0xd35b0['id']===_0x3e0753);if(!_0x3abc91)return;_0x2c1db1[_0xe88095(0x65b)]=_0xe88095(0x183),_0x146d9a[_0xe88095(0x850)]=_0x3abc91['id'],_0x260dd6[_0xe88095(0x850)]=_0x3abc91['name'],_0x56851e[_0xe88095(0x850)]=_0x3abc91[_0xe88095(0x54f)],_0x1a82f7[_0xe88095(0x7d9)]['display']=_0xe88095(0xb91),_0x3abc91[_0xe88095(0x69d)][_0xe88095(0x175)](_0x9a0fee=>{const _0x4ff44f=_0xe88095,_0x34e316=_0x52f5b3['querySelector'](_0x4ff44f(0x672)+_0x9a0fee);if(_0x34e316)_0x34e316[_0x4ff44f(0xbbd)]=!![];});}else _0xe88095(0x1f1)!==_0xe88095(0x1f1)?(_0x592b82(![]),_0x51d315['error']('解析音乐文件失败:',_0x4a193c),_0x3f92d8('上传失败了，笨蛋！\x20'+_0x251994[_0xe88095(0x5a1)]+'\x20')):(_0x2c1db1[_0xe88095(0x65b)]=_0xe88095(0x981),_0x146d9a[_0xe88095(0x850)]='',_0x260dd6[_0xe88095(0x850)]=_0xe88095(0xc89)+(_0x35d0f9['friendCircles'][_0xe88095(0x968)]+0x1),_0x56851e['value']=_0x35d0f9[_0xe88095(0x742)],_0x1a82f7[_0xe88095(0x7d9)][_0xe88095(0x31f)]=_0xe88095(0x9ba));_0x198934(_0xe88095(0xa16),_0xe88095(0x112));}}function _0x529fbb(){const _0x435848=_0x17d1db,_0x358e24=document[_0x435848(0xb18)](_0x435848(0xb96))[_0x435848(0x850)],_0x387dfa=document['getElementById'](_0x435848(0xaa1))[_0x435848(0x850)][_0x435848(0x2e2)](),_0x5e8720=document[_0x435848(0xb18)](_0x435848(0x275))[_0x435848(0x850)],_0x5adeda=Array['from'](document[_0x435848(0x9c6)]('#friend-circle-member-selection\x20input:checked'))[_0x435848(0xbb5)](_0x22761b=>_0x22761b[_0x435848(0x218)]['id']);if(!_0x387dfa){_0x28dfd2(_0x435848(0x7bd));return;}if(_0x5adeda[_0x435848(0x968)]===0x0){if(_0x435848(0x729)!==_0x435848(0x79b)){_0x28dfd2(_0x435848(0x379));return;}else _0x1b4e87[_0x435848(0x80c)]===0x0&&_0x3063b2(_0x51a3c1,_0x4b61c5,_0x22cb44);}if(_0x358e24){const _0x3ce9a1=_0x35d0f9['friendCircles']['find'](_0x19d9d5=>_0x19d9d5['id']===_0x358e24);_0x3ce9a1&&(_0x3ce9a1[_0x435848(0x19d)]=_0x387dfa,_0x3ce9a1['boundUserProfileId']=_0x5e8720,_0x3ce9a1[_0x435848(0x69d)]=_0x5adeda);}else{if(_0x435848(0xc16)!==_0x435848(0xc16))_0x5ea8c0+='-\x20'+_0x21ebc3[_0x435848(0xcf9)](_0x1e036b)+'\x20\x0a';else{const _0x470bfe={'id':'circle_'+Date['now'](),'name':_0x387dfa,'boundUserProfileId':_0x5e8720,'memberCharacterIds':_0x5adeda,'posts':[]};_0x35d0f9[_0x435848(0x9dd)][_0x435848(0xb2f)](_0x470bfe);}}_0x5c9c95(),_0x28dfd2(_0x435848(0x1e1)),_0x338bf3(),_0x198934(_0x435848(0x112),_0x435848(0xa16));}async function _0x49de91(){const _0xd75384=_0x17d1db,_0x7a6442=document[_0xd75384(0xb18)](_0xd75384(0xb96))[_0xd75384(0x850)];if(!_0x7a6442)return;const _0x505186=await _0x3a7c5b(_0xd75384(0x2bd));_0x505186&&(_0x35d0f9[_0xd75384(0x9dd)]=_0x35d0f9[_0xd75384(0x9dd)]['filter'](_0x3a016e=>_0x3a016e['id']!==_0x7a6442),_0x35d0f9['activeFriendCircleId']===_0x7a6442&&(_0x35d0f9[_0xd75384(0xb34)]=null),_0x5c9c95(),_0x28dfd2(_0xd75384(0x4ed)),_0x338bf3(),_0x198934('friendCircleList','friendCircleEdit'));}function _0x34eeb9(_0x1daedc){const _0x4a01f1=_0x17d1db;if('Apilh'!==_0x4a01f1(0x7ec)){_0xd23d61();const _0x30a268=_0x35d0f9['friendCircles'][_0x4a01f1(0x9cd)](_0x309995=>_0x309995['id']===_0x1daedc);if(!_0x30a268)return;_0x35d0f9[_0x4a01f1(0xb34)]=_0x1daedc,_0x5c9c95(),document['getElementById'](_0x4a01f1(0x40c))['textContent']=_0x30a268[_0x4a01f1(0x19d)],_0x44e7ec(),_0x198934(_0x4a01f1(0xcc1),_0x4a01f1(0x112)),_0xe8fb99();}else{const _0x22f11b=_0x37d072(_0x198e79),_0x47f2f5=_0x2c9669[_0x4a01f1(0xb18)](_0x4a01f1(0x98b));_0x47f2f5[_0x4a01f1(0x7d9)]['backgroundImage']='';let _0xc26417=_0x4fe469[_0x4a01f1(0xb18)](_0x4a01f1(0x9e5)+_0x3c1b2a);if(_0xc26417)_0xc26417[_0x4a01f1(0x280)]='';if(!_0x22f11b)return;_0x22f11b[_0x4a01f1(0x344)]&&(_0x47f2f5[_0x4a01f1(0x7d9)][_0x4a01f1(0x2f8)]='url(\x27'+_0x22f11b['chatWallpaper']+'\x27)',_0x47f2f5[_0x4a01f1(0x7d9)][_0x4a01f1(0x133)]='cover',_0x47f2f5[_0x4a01f1(0x7d9)][_0x4a01f1(0xe8)]=_0x4a01f1(0xb99));if(_0x22f11b['bubbleCss']){let _0x252113=_0xabb573[_0x4a01f1(0xb18)](_0x4a01f1(0x9e5)+_0x22f11b['id']);!_0x252113&&(_0x252113=_0x325f8c[_0x4a01f1(0x7e9)]('style'),_0x252113['id']='style-'+_0x22f11b['id'],_0x5d3a79[_0x4a01f1(0x6ae)][_0x4a01f1(0x364)](_0x252113));const _0x1d6f46=_0x22f11b[_0x4a01f1(0x342)],_0x12ebb9=_0x1d6f46[_0x4a01f1(0x39f)](/\.bubble\.sent/g,'.bubble-'+_0x22f11b['id']+'.message.user')['replace'](/\.bubble\.received/g,_0x4a01f1(0x635)+_0x22f11b['id']+_0x4a01f1(0x9f7));_0x252113[_0x4a01f1(0x280)]=_0x12ebb9;}}}function _0x4c5d2f(){const _0x163f2d=_0x17d1db;if(!_0x35d0f9[_0x163f2d(0x9dd)]||_0x35d0f9[_0x163f2d(0x9dd)][_0x163f2d(0x968)]===0x0){console[_0x163f2d(0x4a1)](_0x163f2d(0x23a));return;}const _0x1c634e=_0x35d0f9[_0x163f2d(0x9dd)][0x0];if(_0x1c634e[_0x163f2d(0x69d)][_0x163f2d(0x968)]<0x2){console[_0x163f2d(0x4a1)](_0x163f2d(0x198)+_0x1c634e['name']+_0x163f2d(0xc9c));return;}const _0x5cbc69={'id':_0x163f2d(0x373)+Date[_0x163f2d(0x5ee)](),'authorType':_0x163f2d(0xa80),'authorId':_0x1c634e[_0x163f2d(0x69d)][0x0],'content':_0x163f2d(0xbc5),'timestamp':Date[_0x163f2d(0x5ee)](),'likes':[_0x1c634e[_0x163f2d(0x69d)][0x1]],'comments':[{'commentId':'c_'+Date[_0x163f2d(0x5ee)](),'authorId':_0x1c634e[_0x163f2d(0x69d)][0x1],'content':_0x163f2d(0x88a)}]};_0x1c634e[_0x163f2d(0x416)][_0x163f2d(0xb2f)](_0x5cbc69),_0x5c9c95(),console[_0x163f2d(0x52e)](_0x163f2d(0x7ff)+_0x1c634e[_0x163f2d(0x19d)]+_0x163f2d(0xb36)),_0x28dfd2(_0x163f2d(0x7f1));}window[_0x17d1db(0xcec)]=_0x4c5d2f;function _0x229640(_0x12ee5e){const _0x1c748a=_0x17d1db;if('TDtme'==='TDtme')return _0x35d0f9[_0x1c748a(0x162)][_0x1c748a(0x9cd)](_0x209fcc=>_0x209fcc['id']===_0x12ee5e);else{const _0x4c3089=0x32;if(_0x87b7b<_0x33a2d1-_0x4c3089)_0x381cc3(_0x54e247+0x1);else _0x1526c7>_0xed5eb6+_0x4c3089&&_0x7741f5(_0xd28f56-0x1);}}function _0x13f6ba(_0x1577cb,_0x16bb52=_0x17d1db(0xb02)){const _0x5bdaf2=_0x17d1db;if(_0x5bdaf2(0x783)!==_0x5bdaf2(0x783)){const _0x5f2248=_0x3a99c4[_0x5bdaf2(0xadf)][_0xb4b813];_0x5f2248&&_0x5f2248['length']>0x0&&(_0x983274=_0x5f2248['at'](-0x1));}else{const _0x519d50=document[_0x5bdaf2(0xb18)](_0x5bdaf2(0xa68));let _0x53c096=document['getElementById'](_0x5bdaf2(0xb84));if(_0x1577cb){if(_0x5bdaf2(0x5e7)===_0x5bdaf2(0xb30))return _0x585a38['error'](_0x5bdaf2(0x8eb),_0x21052f),_0x1a421c[_0x5bdaf2(0x4a1)]('AI返回的原始文本:',_0x53f281[_0x5bdaf2(0x480)]||_0x5bdaf2(0x208)),null;else!_0x53c096&&(_0x53c096=document[_0x5bdaf2(0x7e9)](_0x5bdaf2(0x591)),_0x53c096['id']=_0x5bdaf2(0xb84),_0x519d50['appendChild'](_0x53c096)),_0x53c096[_0x5bdaf2(0x280)]=_0x5bdaf2(0x8c8)+_0x16bb52+_0x5bdaf2(0xc4d),_0x53c096['style'][_0x5bdaf2(0x31f)]=_0x5bdaf2(0x9d4);}else{if(_0x5bdaf2(0xaec)!=='yXprl')_0x53c096&&(_0x5bdaf2(0x98d)===_0x5bdaf2(0x98d)?_0x53c096[_0x5bdaf2(0x7d9)]['display']=_0x5bdaf2(0x9ba):(_0x170230[_0x5bdaf2(0x65b)]=_0x42a460[_0x5bdaf2(0x248)],_0x1caada[_0x5bdaf2(0x65b)]=_0x23d7b3[_0x5bdaf2(0xb52)],_0x32f905[_0x5bdaf2(0x79f)][_0x5bdaf2(0x366)](_0x5bdaf2(0x6f1)),_0x47c391['style'][_0x5bdaf2(0xbcb)](_0x5bdaf2(0x6e0),_0x5bdaf2(0x804)+_0x21e15a['cover']+')')));else{const _0x43b2a6=_0x192aca['chats'][_0x5bdaf2(0x9cd)](_0x549972=>_0x549972[_0x5bdaf2(0xe3)]&&_0x549972[_0x5bdaf2(0xe3)][_0x5bdaf2(0x26d)]);_0x43b2a6&&(_0x43b2a6[_0x5bdaf2(0xe3)]=null,_0x49e502(),_0x10fb58('同步已断开。'),_0x272824(),_0x57257e['classList']['remove'](_0x5bdaf2(0xa36)),_0x3beb68(()=>_0x337fd4[_0x5bdaf2(0x7d9)][_0x5bdaf2(0x31f)]=_0x5bdaf2(0x9ba),0x12c));}}}}async function _0x1a2a0e(){const _0x29d9d5=_0x17d1db,_0x57e4bc=_0x35d0f9[_0x29d9d5(0x9dd)][_0x29d9d5(0x9cd)](_0x5c1aa3=>_0x5c1aa3['id']===_0x35d0f9[_0x29d9d5(0xb34)]);if(!_0x57e4bc||_0x35d0f9[_0x29d9d5(0x2eb)])return;_0x13f6ba(!![],'好像有动态了...'),await new Promise(_0x17962b=>setTimeout(_0x17962b,0x32)),_0x35d0f9[_0x29d9d5(0x2eb)]=!![];try{let _0x3ed643=Date[_0x29d9d5(0x5ee)]();if(_0x57e4bc[_0x29d9d5(0x416)]&&_0x57e4bc['posts'][_0x29d9d5(0x968)]>0x0){if('TvtIi'===_0x29d9d5(0x27b))_0x3ed643=Math['max'](..._0x57e4bc[_0x29d9d5(0x416)][_0x29d9d5(0xbb5)](_0xe01027=>_0xe01027['timestamp']));else{let _0x341e56=_0x5e6840[_0x29d9d5(0x97b)](_0x23b785);_0x175a82[_0x29d9d5(0xc29)](_0x341e56)&&_0x341e56[_0x29d9d5(0x175)](_0x163dd4=>{const _0x576cca=_0x29d9d5,_0x44010d=new _0x503f22(_0x163dd4[_0x576cca(0xaa4)]||_0x163dd4[_0x576cca(0xbeb)])['getTime']();_0x44010d>=_0x3804b2[_0x576cca(0x283)]()&&_0x1e9ac8['push']({'timestamp':_0x44010d,'type':_0x576cca(0x5dd)+_0x2c1d6c+']','content':_0x381549[_0x576cca(0xcf9)](_0x163dd4)});});}}const _0x37d9bf=await _0x5038b2(_0x57e4bc);if(!_0x37d9bf||_0x37d9bf[_0x29d9d5(0x968)]===0x0){_0x28dfd2(_0x29d9d5(0x1da));return;}const _0x543e91=_0x37d9bf['map'](async(_0x3b7700,_0x3ba5d6)=>{const _0x1fd288=_0x29d9d5;_0x13f6ba(!![],_0x1fd288(0x4ae)+(_0x3ba5d6+0x1)+'\x20/\x20'+_0x37d9bf[_0x1fd288(0x968)]+_0x1fd288(0x2d6));const _0x36ead8=_0x3ed643+(_0x3ba5d6+0x1)*0x3c*0x3e8,_0x489d35={'id':_0x1fd288(0x4c2)+_0x3b7700[_0x1fd288(0xce6)]+'_'+_0x36ead8,'authorType':_0x1fd288(0xa80),'authorId':_0x3b7700[_0x1fd288(0xce6)],'content':_0x3b7700['postContent'],'timestamp':_0x36ead8,'likes':_0x3b7700[_0x1fd288(0xad1)]||[],'comments':(_0x3b7700[_0x1fd288(0x336)]||[])[_0x1fd288(0xbb5)]((_0x53b194,_0x5ac463)=>({'commentId':'c_'+_0x36ead8+'_'+_0x5ac463,'authorId':_0x53b194[_0x1fd288(0xce6)],'content':_0x53b194[_0x1fd288(0x9bc)]}))};if(_0x3b7700['postType']===_0x1fd288(0xcc1)&&_0x3b7700[_0x1fd288(0x596)]&&_0x3b7700['artist']){if(_0x1fd288(0x26e)==='ogUuz')try{const _0x1ad2fa=await _0x5eed63(_0x3b7700['songName'],_0x3b7700[_0x1fd288(0xb52)]);_0x489d35[_0x1fd288(0xb12)]=_0x1fd288(0xcc1),_0x489d35[_0x1fd288(0x596)]=_0x3b7700[_0x1fd288(0x596)],_0x489d35['artist']=_0x3b7700[_0x1fd288(0xb52)],_0x489d35[_0x1fd288(0x22d)]=_0x1ad2fa[_0x1fd288(0x2d5)],_0x489d35[_0x1fd288(0xc5e)]=_0x1ad2fa[_0x1fd288(0x391)];}catch(_0x391a2f){console['error'](_0x1fd288(0x7cc),_0x391a2f),_0x489d35[_0x1fd288(0xb12)]=_0x1fd288(0xa0c);}else _0x439bd2[_0x94cf4]=[];}else _0x489d35['type']='text';return _0x489d35;}),_0x288522=await Promise[_0x29d9d5(0x799)](_0x543e91);_0x57e4bc['posts'][_0x29d9d5(0xb2f)](..._0x288522),_0x5c9c95(),_0xd23d61();}catch(_0x3f720f){'TYlki'===_0x29d9d5(0x32e)?(console[_0x29d9d5(0x4a1)](_0x29d9d5(0x2c8),_0x3f720f),_0x28dfd2(_0x29d9d5(0x3ec)+_0x3f720f[_0x29d9d5(0x5a1)])):_0x1d867a[_0x29d9d5(0x3eb)]('#diary-action-reroll')['onclick']=()=>{_0x288082(_0x498402),_0x385d44();};}finally{_0x29d9d5(0xb20)!==_0x29d9d5(0x46e)?(_0x44e7ec(),_0x13f6ba(![]),_0x35d0f9[_0x29d9d5(0x2eb)]=![]):_0x2e6904[_0x29d9d5(0xafb)](_0x29d9d5(0x9db),_0x7e947b=>{const _0x47128e=_0x29d9d5;if(_0x7e947b[_0x47128e(0xce3)]['type']===_0x47128e(0xb85))return;const _0x4cb5d2=_0x3ad849[_0x47128e(0x836)],_0x24534e=_0x3a4ba8[_0x47128e(0x3eb)]('.category-toggle-arrow'),_0x1f5e78=_0x4cb5d2[_0x47128e(0x79f)][_0x47128e(0xbbc)]('expanded');_0x4cb5d2[_0x47128e(0x79f)]['toggle']('expanded',!_0x1f5e78),_0x24534e[_0x47128e(0x79f)][_0x47128e(0x34b)]('expanded',!_0x1f5e78);});}}async function _0x5038b2(_0x32e117){const _0x14dafe=_0x17d1db,_0x4d1d2b=_0x32e117['memberCharacterIds'][_0x14dafe(0xbb5)](_0x2e744c=>_0x45939a(_0x2e744c))[_0x14dafe(0x485)](Boolean);if(_0x4d1d2b[_0x14dafe(0x968)]===0x0)return null;const _0x3280b8=_0x20e654(),_0x40e183=_0x229640(_0x32e117['boundUserProfileId'])||_0x35d0f9['userProfiles'][0x0],_0x22fc71=_0x40e183?_0x14dafe(0x28e)+_0x40e183[_0x14dafe(0x19d)]+'\x0a-\x20人设:\x20'+(_0x40e183[_0x14dafe(0x1ab)]||'无')+'\x0a':'',_0x59296d=_0x4d1d2b[_0x14dafe(0xbb5)](_0x234efe=>{const _0x2e7911=_0x14dafe,{omniText:_0x683b3b}=_0xd9a204(_0x234efe['id'],null),_0x3f0afe=_0x54bfed(_0x234efe['id']),_0x3b6e95=_0x234efe[_0x2e7911(0x99c)]&&_0x234efe[_0x2e7911(0x99c)][_0x2e7911(0x968)]>0x0?_0x2e7911(0x55c)+_0x234efe['name']+'的个人专属世界观设定\x0a'+_0x234efe[_0x2e7911(0x99c)]['map'](_0x1d4c36=>_0x35d0f9[_0x2e7911(0x38f)][_0x2e7911(0x9cd)](_0xef173a=>_0xef173a['id']===_0x1d4c36))['filter'](Boolean)[_0x2e7911(0xbb5)](_0xcfb756=>'\x0a##\x20条目:\x20'+_0xcfb756['name']+'\x0a'+_0xcfb756[_0x2e7911(0x9bc)])[_0x2e7911(0x102)](''):'';return _0x2e7911(0x911)+_0x234efe['name']+',\x20ID:\x20'+_0x234efe['id']+'\x0a\x20\x20人设:\x20'+_0x234efe[_0x2e7911(0x1ab)]+'\x0a\x20\x20近期记忆:\x0a'+_0x683b3b+'\x0a'+_0x3f0afe+'\x0a'+_0x3b6e95;})[_0x14dafe(0x102)]('\x0a\x0a'),_0x374caa=Math[_0x14dafe(0x859)](Math['random']()*0x3)+0x2,_0x1254ac='\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【'+_0x374caa+_0x14dafe(0x298)+_0x40e183['name']+'”（即“我”，用户）来发布任何动态或评论。\x0a-\x20所有的动态发布者（authorId）和评论者（authorId）都【必须】从【好友圈成员信息】列表中提供的角色ID里选择。\x0a\x0a#\x20好友圈成员信息\x0a'+_0x59296d+'\x0a'+_0x22fc71+_0x14dafe(0xb16)+_0x3280b8+_0x14dafe(0x592)+_0x374caa+'条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20'+_0x374caa+_0x14dafe(0x45f),_0x121a01=[{'role':'system','content':_0x1254ac},{'role':_0x14dafe(0x809),'content':_0x14dafe(0x4b6)}];_0x121a01['push']({'role':_0x14dafe(0x809),'content':_0x14dafe(0x59b)+_0x374caa+'\x20条新动态。'});try{if(_0x14dafe(0x3db)!==_0x14dafe(0x4ab)){const _0xb13468=await _0xb7fe2e(_0x121a01,{'json':!![]}),_0x591edc=_0xb13468[_0x14dafe(0xac5)](/(\[[\s\S]*\])/);if(!_0x591edc)throw new Error(_0x14dafe(0xbf7));const _0x2c4523=_0x591edc[0x1],_0x76b1c4=JSON[_0x14dafe(0x97b)](_0x2c4523);if(!Array['isArray'](_0x76b1c4))throw new Error(_0x14dafe(0x503));return _0x76b1c4;}else _0x5d99a6[_0x14dafe(0x14f)]=_0x1ee2a4[_0x14dafe(0x3aa)];}catch(_0x228331){if(_0x14dafe(0x793)!==_0x14dafe(0x547))return console['error'](_0x14dafe(0x8eb),_0x228331),console[_0x14dafe(0x4a1)](_0x14dafe(0x755),_0x228331['rawResponse']||_0x14dafe(0x208)),null;else _0x5ac2f3={'id':'wbc_html_default_builtin','name':_0x14dafe(0x4d1)},_0x129085[_0x14dafe(0x6c0)][_0x14dafe(0xb2f)](_0x246cb9),_0x51d72f['log'](_0x14dafe(0x493)),_0x5f2d4c=!![];}}async function _0x2eb4e8(){const _0x38fd63=_0x17d1db,_0x4d9897=_0x35d0f9[_0x38fd63(0x9dd)][_0x38fd63(0x9cd)](_0x1c8d54=>_0x1c8d54['id']===_0x35d0f9['activeFriendCircleId']);if(!_0x4d9897)return;const _0x5c2d94=await _0x3a7c5b(_0x38fd63(0xa26)+_0x4d9897['name']+'”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。');_0x5c2d94&&(_0x38fd63(0x627)!==_0x38fd63(0x627)?_0x32f7e3():(_0x4d9897[_0x38fd63(0x416)]=[],_0x5c9c95(),_0x44e7ec(),_0x28dfd2(_0x38fd63(0x337))));}function _0x44e7ec(){const _0x38dc9e=_0x17d1db,_0x52769d=document['getElementById'](_0x38dc9e(0xcf0)),_0x4d7096=_0x35d0f9[_0x38dc9e(0x9dd)][_0x38dc9e(0x9cd)](_0x3296c5=>_0x3296c5['id']===_0x35d0f9['activeFriendCircleId']);if(!_0x4d7096){_0x52769d['innerHTML']=_0x38dc9e(0x3b3);return;}if(!_0x4d7096[_0x38dc9e(0x416)]||_0x4d7096[_0x38dc9e(0x416)][_0x38dc9e(0x968)]===0x0){if(_0x38dc9e(0x8e3)===_0x38dc9e(0x8e3)){_0x52769d['innerHTML']='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>';return;}else _0x378fad[_0x38dc9e(0x9dd)]=_0xa3acee[_0x38dc9e(0x9dd)]['filter'](_0x224fea=>_0x224fea['id']!==_0x5d4138),_0x35a670[_0x38dc9e(0xb34)]===_0x3f41d2&&(_0x401f0f[_0x38dc9e(0xb34)]=null),_0x574133(),_0x13fea8(_0x38dc9e(0x4ed)),_0x48d640(),_0x4c56f6(_0x38dc9e(0x112),_0x38dc9e(0xa16));}_0x52769d[_0x38dc9e(0x280)]='';const _0x521dc1=[..._0x4d7096[_0x38dc9e(0x416)]]['sort']((_0x58479d,_0x34c32a)=>_0x34c32a[_0x38dc9e(0xaa4)]-_0x58479d[_0x38dc9e(0xaa4)]);_0x521dc1['forEach'](_0x5593c0=>{const _0x35fdf3=_0x38dc9e,_0x9fe696=document[_0x35fdf3(0x7e9)]('div');_0x9fe696[_0x35fdf3(0x73e)]=_0x35fdf3(0x7de);let _0x3d3543='未知',_0x265f1b=_0x20a236;if(_0x5593c0['authorType']===_0x35fdf3(0x809)){if(_0x35fdf3(0x1f3)!==_0x35fdf3(0x1f3))_0x8562a9[_0x35fdf3(0xb2f)](_0x3fd381[_0x35fdf3(0x99b)](_0x35fdf3(0x885))[_0x35fdf3(0xa34)](_0xb3d8c3=>_0x4669e6[_0x35fdf3(0xcf1)]=new _0x5f1c99([_0xb3d8c3],_0x409208[_0x35fdf3(0x19d)])));else{const _0x1be8e5=_0x229640(_0x5593c0[_0x35fdf3(0xce6)]);_0x1be8e5&&(_0x3d3543=_0x1be8e5[_0x35fdf3(0x19d)],_0x265f1b=_0x1be8e5['avatar']);}}else{const _0x282759=_0x45939a(_0x5593c0[_0x35fdf3(0xce6)]);_0x282759&&(_0x3d3543=_0x282759[_0x35fdf3(0x19d)],_0x265f1b=_0x282759[_0x35fdf3(0x36b)]);}const _0xedc3f9=_0x35fdf3(0x229)+_0x265f1b+_0x35fdf3(0x1e5)+_0x3d3543+_0x35fdf3(0x10b),_0x5be9eb=_0x35fdf3(0x5d1)+_0x5593c0[_0x35fdf3(0x9bc)]+_0x35fdf3(0xb40);let _0xed9a72='';if(_0x5593c0['image']||_0x5593c0[_0x35fdf3(0x650)]){const _0x1dba8e=_0x35fdf3(0x27a)+_0x5593c0['id'];_0xed9a72=_0x35fdf3(0x74c)+_0x1dba8e+_0x35fdf3(0x526),setTimeout(()=>{const _0x15b09f=_0x35fdf3,_0xc98a10=document[_0x15b09f(0xb18)](_0x1dba8e);if(!_0xc98a10)return;if(_0x5593c0[_0x15b09f(0x89a)])_0xc98a10['src']=_0x5593c0[_0x15b09f(0x89a)];else _0x5593c0[_0x15b09f(0x650)]&&_0x5288fd(_0x5593c0[_0x15b09f(0x650)])['then'](_0x787161=>{const _0x572286=_0x15b09f;if(_0x787161){const _0x3a3298=URL[_0x572286(0x900)](_0x787161);_0xc98a10[_0x572286(0x9c9)]=_0x3a3298,_0xc98a10['onload']=()=>URL['revokeObjectURL'](_0x3a3298);}});},0x0);}let _0x2b7118='';if(_0x5593c0['type']===_0x35fdf3(0xcc1)&&_0x5593c0[_0x35fdf3(0x596)]){if('DWIXq'!=='hIYdX')_0x2b7118=_0x35fdf3(0x119)+_0x5593c0['id']+_0x35fdf3(0xcf8)+(_0x5593c0['coverUrl']||_0x20a236)+_0x35fdf3(0x194)+_0x5593c0['songName']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>'+_0x5593c0[_0x35fdf3(0xb52)]+_0x35fdf3(0x5c7)+(_0x5593c0['playableUrl']?'▶':'⚠')+_0x35fdf3(0xba8);else{const _0x47f485=_0x26f78d[_0x35fdf3(0xc53)](_0x4746d5);_0x47f485&&_0x47f485[_0x35fdf3(0x41d)](_0x35fdf3(0x151))&&_0x3c2e7f['push'](_0x47f485);}}const _0x2e0b75=_0x35fdf3(0x9bb)+new Date(_0x5593c0[_0x35fdf3(0xaa4)])['toLocaleString'](_0x35fdf3(0x984))+'</div>';let _0x38b63e='';if(_0x5593c0[_0x35fdf3(0xad1)]&&_0x5593c0[_0x35fdf3(0xad1)][_0x35fdf3(0x968)]>0x0||_0x5593c0['comments']&&_0x5593c0[_0x35fdf3(0x336)][_0x35fdf3(0x968)]>0x0){let _0x504dea='';if(_0x5593c0[_0x35fdf3(0xad1)]&&_0x5593c0[_0x35fdf3(0xad1)]['length']>0x0){if(_0x35fdf3(0x8de)===_0x35fdf3(0x8de)){const _0x78a387=_0x5593c0[_0x35fdf3(0xad1)]['map'](_0x694613=>_0x45939a(_0x694613)?.[_0x35fdf3(0x19d)]||'未知')[_0x35fdf3(0x102)]('、'),_0x5031fb='<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>';_0x504dea=_0x35fdf3(0x341)+_0x5031fb+'\x20'+_0x78a387+_0x35fdf3(0x9b7);}else{const _0x34a601=_0x584542[_0x35fdf3(0x9dd)][_0x35fdf3(0x9cd)](_0xf3050b=>_0xf3050b['id']===_0x28d549[_0x35fdf3(0xb34)]),_0x350a99=_0x34a601?_0x34a601[_0x35fdf3(0x416)]:[];if(!_0x350a99||_0x350a99['length']===0x0)return'';const _0x4c2b5f=_0x350a99['slice'](0x0,0x5),_0x5b6ce0=_0x4c2b5f[_0x35fdf3(0xbb5)](_0x33b01d=>{const _0x58297b=_0x35fdf3,_0x329d04=_0xfa42e3(_0x33b01d[_0x58297b(0xce6)])||{'name':'未知'};let _0x2ffff4=_0x58297b(0x5e4)+_0x329d04[_0x58297b(0x19d)]+_0x58297b(0x10d)+(_0x33b01d[_0x58297b(0x462)]||_0x33b01d[_0x58297b(0x9bc)])+'”';return _0x33b01d[_0x58297b(0xb12)]==='music'&&(_0x2ffff4+=_0x58297b(0x749)+_0x33b01d[_0x58297b(0x596)]+_0x58297b(0x204)+_0x33b01d['artist']+')'),_0x2ffff4;});return _0x35fdf3(0x513)+_0x5b6ce0['join']('\x0a');}}let _0x1b20f9='';if(_0x5593c0[_0x35fdf3(0x336)]&&_0x5593c0[_0x35fdf3(0x336)][_0x35fdf3(0x968)]>0x0){const _0xf243b9=_0x5593c0[_0x35fdf3(0x336)][_0x35fdf3(0xbb5)](_0x2e1225=>{const _0x594f75=_0x35fdf3;if(_0x594f75(0x521)!=='ZDYwI'){const _0x4e602a=_0x45939a(_0x2e1225[_0x594f75(0xce6)])?.[_0x594f75(0x19d)]||'未知';return'<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>'+_0x4e602a+_0x594f75(0x26a)+_0x2e1225[_0x594f75(0x9bc)]+_0x594f75(0x9b7);}else _0x952614[_0x594f75(0x1aa)]&&_0x1845b7[_0x594f75(0x1aa)][_0x594f75(0x26d)]&&(_0x3cb98c[_0x594f75(0x7d9)][_0x594f75(0x31f)]=_0x594f75(0x9d4),_0x3e5382(()=>_0xb3c280[_0x594f75(0x79f)][_0x594f75(0x366)](_0x594f75(0xa36)),0xa));})['join']('');_0x1b20f9=_0x35fdf3(0x9e0)+_0xf243b9+_0x35fdf3(0x9b7);}_0x38b63e=_0x35fdf3(0x24d)+_0x504dea+_0x35fdf3(0x1b3)+_0x1b20f9+_0x35fdf3(0x9bf);}const _0x578314=_0x35fdf3(0x468)+_0x5be9eb+_0xed9a72+_0x2b7118+_0x35fdf3(0x9b7);_0x9fe696['innerHTML']=_0xedc3f9+_0x578314+_0x2e0b75+_0x38b63e;if(_0x5593c0['type']==='music'&&_0x5593c0[_0x35fdf3(0xc5e)]){const _0x59def0=_0x9fe696[_0x35fdf3(0x3eb)](_0x35fdf3(0x259));_0x59def0&&_0x59def0[_0x35fdf3(0xafb)](_0x35fdf3(0x9db),function(){const _0x377246={'id':_0x5593c0['id'],'url':_0x5593c0['playableUrl']};_0x8b330f(this,_0x377246);});}_0x52769d[_0x35fdf3(0x364)](_0x9fe696);});}document[_0x17d1db(0xb18)](_0x17d1db(0x5f1))[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x2eb4e8),document[_0x17d1db(0xb18)]('refresh-feed-button')['addEventListener']('click',_0x1a2a0e),document[_0x17d1db(0xb18)](_0x17d1db(0x9b3))[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x198934('home',_0x17d1db(0x112))),document[_0x17d1db(0xb18)](_0x17d1db(0x5d3))[_0x17d1db(0xafb)]('click',()=>_0x30dd4e()),document['getElementById'](_0x17d1db(0x10e))[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x198934(_0x17d1db(0x112),_0x17d1db(0xa16))),document[_0x17d1db(0xb18)](_0x17d1db(0x2bb))[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x529fbb),document['getElementById'](_0x17d1db(0x242))[_0x17d1db(0xafb)]('click',_0x49de91),document['getElementById'](_0x17d1db(0xea))[_0x17d1db(0xafb)]('click',()=>{const _0x1a60f9=_0x17d1db;_0x338bf3(),_0x198934(_0x1a60f9(0x112),_0x1a60f9(0xcc1));}),document['getElementById'](_0x17d1db(0xba3))[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0xf43b07=_0x17d1db;if(_0x35d0f9[_0xf43b07(0xb34)]){if('FiOmG'===_0xf43b07(0x738)){const _0x3256ed=_0x444fcc['getElementById'](_0xf43b07(0xa83)),_0x3a18c4=_0x36012f[_0xf43b07(0xa12)],_0x912fc9=_0x470b21[_0xf43b07(0xb18)](_0xf43b07(0xa3c));if(!_0x3256ed||!_0x912fc9)return;const _0xfef2b1=_0x15ad83[_0xf43b07(0x9a1)]('uiScale')||'1';_0x3a18c4[_0xf43b07(0x7d9)][_0xf43b07(0xbcb)](_0xf43b07(0x8d1),_0xfef2b1),_0x3256ed[_0xf43b07(0x850)]=_0xfef2b1,_0x3256ed[_0xf43b07(0xafb)](_0xf43b07(0xb8d),()=>{const _0x188f10=_0xf43b07,_0x5d991f=_0x3256ed[_0x188f10(0x850)];_0x3a18c4[_0x188f10(0x7d9)]['setProperty']('--desktop-item-scale',_0x5d991f),_0x1a3ca9[_0x188f10(0x570)](_0x188f10(0xccd),_0x5d991f);}),_0x912fc9['addEventListener'](_0xf43b07(0x9db),()=>{const _0x26d77d=_0xf43b07,_0x255cee='1';_0x3256ed[_0x26d77d(0x850)]=_0x255cee,_0x3a18c4[_0x26d77d(0x7d9)][_0x26d77d(0xbcb)](_0x26d77d(0x8d1),_0x255cee),_0x9f14a2[_0x26d77d(0x570)]('uiScale',_0x255cee);});}else _0x30dd4e(_0x35d0f9[_0xf43b07(0xb34)]);}}),document[_0x17d1db(0xb18)](_0x17d1db(0x63c))[_0x17d1db(0xafb)](_0x17d1db(0x9db),async()=>{const _0x2672b0=_0x17d1db,_0x37fdf7=_0x35d0f9[_0x2672b0(0x9dd)][_0x2672b0(0x9cd)](_0x1a1a57=>_0x1a1a57['id']===_0x35d0f9[_0x2672b0(0xb34)]);if(!_0x37fdf7||_0x35d0f9[_0x2672b0(0x2eb)])return;const _0x160b19=_0x37fdf7[_0x2672b0(0x54f)],_0x5012f0=_0x35d0f9[_0x2672b0(0x162)]['find'](_0x3c0fc5=>_0x3c0fc5['id']===_0x160b19);if(!_0x5012f0){_0x28dfd2(_0x2672b0(0xa17));return;}const _0x377975=document[_0x2672b0(0xb18)]('user-post-textarea')['value'][_0x2672b0(0x2e2)](),_0x5757b2=_0x35d0f9[_0x2672b0(0x932)][_0x2672b0(0x89a)],_0x255b05=_0x35d0f9[_0x2672b0(0x932)][_0x2672b0(0xcc1)],_0x2a3c7b=_0x35d0f9[_0x2672b0(0x932)]['imageId'];if(!_0x377975&&!_0x5757b2&&!_0x255b05){_0x28dfd2(_0x2672b0(0x8af));return;}const _0x36b2dd={'id':_0x2672b0(0xb2a)+Date[_0x2672b0(0x5ee)](),'authorType':_0x2672b0(0x809),'authorId':_0x5012f0['id'],'content':_0x377975,'timestamp':Date['now'](),'likes':[],'comments':[]};if(_0x2a3c7b)_0x36b2dd['imageId']=_0x2a3c7b;else _0x5757b2&&(_0x2672b0(0x68f)===_0x2672b0(0x5f3)?(_0x49d946=_0xf1295e[_0x2672b0(0x19d)]||_0x2672b0(0x9a5),_0x38c53e=_0x1c9284[_0x2672b0(0x8f1)]['length']+_0x2672b0(0x572)):_0x36b2dd[_0x2672b0(0x89a)]=_0x5757b2);_0x255b05?_0x2672b0(0x28b)!==_0x2672b0(0xd10)?(_0x36b2dd[_0x2672b0(0xb12)]='music',Object['assign'](_0x36b2dd,_0x255b05)):_0x2a89fd=_0x5db0a4:_0x2672b0(0x472)!==_0x2672b0(0x472)?_0x3d4962('确定要恢复这个角色的默认立绘位置吗？')[_0x2672b0(0xa34)](_0x4e5d2f=>{const _0x4b2a37=_0x2672b0;if(_0x4e5d2f){const _0x47323e=_0x26c297(_0xb9912a[_0x4b2a37(0x80f)]);_0x47323e&&(delete _0x47323e[_0x4b2a37(0x973)],_0x23e69f(),_0x2f2748(_0x47323e['id'],_0x4b2a37(0x680)),_0x3bb24d('已恢复默认。'),_0x2e5650(!![]));}}):_0x36b2dd[_0x2672b0(0xb12)]=_0x2672b0(0xa0c),_0x37fdf7[_0x2672b0(0x416)]['push'](_0x36b2dd),_0x5c9c95(),_0x44e7ec(),document['getElementById']('user-post-textarea')[_0x2672b0(0x850)]='',_0x35d0f9[_0x2672b0(0x932)][_0x2672b0(0x89a)]=null,_0x35d0f9[_0x2672b0(0x932)][_0x2672b0(0xcc1)]=null,_0x35d0f9[_0x2672b0(0x932)][_0x2672b0(0x650)]=null,_0x2cab64(),_0x28a340(_0x36b2dd);}),document[_0x17d1db(0xb18)]('user-post-image-button')[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x4959c2=_0x17d1db;if(_0x4959c2(0x7c1)!==_0x4959c2(0x7c1)){const _0xb51d4c=_0x46ba09[_0x4959c2(0x850)]['trim'](),_0x5ee7a8=_0x136d05[_0x4959c2(0x850)][_0x4959c2(0x2e2)]();if(!_0xb51d4c||!_0x5ee7a8){_0x2e12cc(_0x4959c2(0x48a));return;}_0x2b14e5(),_0x3daa78(_0xb51d4c,_0x5ee7a8);}else document['getElementById'](_0x4959c2(0x75f))['click']();}),document[_0x17d1db(0xb18)](_0x17d1db(0x75f))[_0x17d1db(0xafb)]('change',async _0x28c8ac=>{const _0x17379e=_0x17d1db,_0x5b9416=_0x28c8ac[_0x17379e(0xce3)][_0x17379e(0x636)][0x0];if(!_0x5b9416)return;try{const _0x3d5f0a=await _0x51a2d6(_0x5b9416,0x320,0.8,!![]),_0x1749b6=_0x17379e(0xb4d)+Date[_0x17379e(0x5ee)]();await _0xad4538(_0x1749b6,_0x3d5f0a),_0x35d0f9[_0x17379e(0x932)][_0x17379e(0x650)]=_0x1749b6,_0x35d0f9[_0x17379e(0x932)][_0x17379e(0x89a)]=null,_0x35d0f9[_0x17379e(0x932)][_0x17379e(0xcc1)]=null,_0x2cab64();}catch(_0x218ebb){_0x28dfd2(_0x17379e(0xc00)+_0x218ebb[_0x17379e(0x5a1)]);}_0x28c8ac[_0x17379e(0xce3)][_0x17379e(0x850)]='';}),document[_0x17d1db(0xb18)]('user-post-music-button')[_0x17d1db(0xafb)](_0x17d1db(0x9db),async()=>{const _0x1f2980=_0x17d1db,_0x45ea5a=await _0x12e8c8();if(!_0x45ea5a)return;_0x28dfd2(_0x1f2980(0x717));try{const _0x14eac1=await _0x5eed63(_0x45ea5a[_0x1f2980(0x596)],_0x45ea5a['artist']);_0x35d0f9[_0x1f2980(0x932)][_0x1f2980(0xcc1)]={'songName':_0x45ea5a[_0x1f2980(0x596)],'artist':_0x45ea5a[_0x1f2980(0xb52)],'coverUrl':_0x14eac1[_0x1f2980(0x2d5)],'playableUrl':_0x14eac1[_0x1f2980(0x391)]},_0x35d0f9[_0x1f2980(0x932)][_0x1f2980(0x89a)]=null,_0x2cab64();}catch(_0x183318){_0x28dfd2(_0x1f2980(0x9a7)+_0x183318['message']);}});function _0x3e52a4(){const _0x3969ff=_0x17d1db;if(_0x3969ff(0x76e)===_0x3969ff(0x353))_0x2b9140[_0x3969ff(0x976)]?_0x3ea52f['play']():_0x4e55a8[_0x3969ff(0x639)]();else{const _0x36fe3e=new Date(),_0x5d1177=document['getElementById']('home-time'),_0x233283=document[_0x3969ff(0xb18)](_0x3969ff(0x45b));if(_0x5d1177&&_0x233283){if('nnPkD'===_0x3969ff(0xb8e)){const _0x562a89=String(_0x36fe3e[_0x3969ff(0x76b)]())[_0x3969ff(0x839)](0x2,'0'),_0x1864c4=String(_0x36fe3e[_0x3969ff(0x553)]())['padStart'](0x2,'0');_0x5d1177[_0x3969ff(0x65b)]=_0x562a89+':'+_0x1864c4;const _0x498781=_0x36fe3e[_0x3969ff(0x7eb)]()+0x1,_0x42433c=_0x36fe3e[_0x3969ff(0xb2b)](),_0x5a1af9=['星期日','星期一','星期二','星期三','星期四',_0x3969ff(0xa98),_0x3969ff(0x634)][_0x36fe3e[_0x3969ff(0x73d)]()];_0x233283[_0x3969ff(0x65b)]=_0x498781+'月'+_0x42433c+'日\x20'+_0x5a1af9;}else _0x58cf98(),_0x4e7356(_0x3969ff(0x386),_0x3969ff(0xc1a));}}}function _0x29f7d2(_0x490296){const _0x2a5eac=_0x17d1db;if(!_0x490296)return'';const _0x57f4dc=new Date(_0x490296),_0x38c533=String(_0x57f4dc[_0x2a5eac(0x76b)]())[_0x2a5eac(0x839)](0x2,'0'),_0x5100b3=String(_0x57f4dc[_0x2a5eac(0x553)]())[_0x2a5eac(0x839)](0x2,'0');return _0x38c533+':'+_0x5100b3;}function _0x20e654(){const _0x3e9896=_0x17d1db,_0x248aca=_0x35d0f9[_0x3e9896(0x9dd)][_0x3e9896(0x9cd)](_0xc1247b=>_0xc1247b['id']===_0x35d0f9[_0x3e9896(0xb34)]),_0x2d32f0=_0x248aca?_0x248aca[_0x3e9896(0x416)]:[];if(!_0x2d32f0||_0x2d32f0[_0x3e9896(0x968)]===0x0){if(_0x3e9896(0x688)===_0x3e9896(0x688))return'';else _0x5a2733[_0x3e9896(0x639)]();}const _0x180e62=_0x2d32f0[_0x3e9896(0x571)](0x0,0x5),_0xb1b0f3=_0x180e62[_0x3e9896(0xbb5)](_0x4bb278=>{const _0x41bc13=_0x3e9896;if(_0x41bc13(0x703)!=='PrPbl')_0xa1c73=_0xd37368[_0x41bc13(0x97b)](_0x447e61[_0x41bc13(0x9a1)](_0x4ab15e)||'{}');else{const _0xc24fd5=_0x45939a(_0x4bb278[_0x41bc13(0xce6)])||{'name':'未知'};let _0xd10981=_0x41bc13(0x5e4)+_0xc24fd5[_0x41bc13(0x19d)]+_0x41bc13(0x10d)+(_0x4bb278[_0x41bc13(0x462)]||_0x4bb278[_0x41bc13(0x9bc)])+'”';return _0x4bb278[_0x41bc13(0xb12)]===_0x41bc13(0xcc1)&&(_0xd10981+=_0x41bc13(0x749)+_0x4bb278[_0x41bc13(0x596)]+_0x41bc13(0x204)+_0x4bb278[_0x41bc13(0xb52)]+')'),_0xd10981;}});return _0x3e9896(0x513)+_0xb1b0f3['join']('\x0a');}function _0x54bfed(_0x378ed3){const _0x2910df=_0x17d1db,_0x15add5=_0x35d0f9[_0x2910df(0x162)][_0x2910df(0x9cd)](_0x4beb3f=>_0x4beb3f['id']===_0x35d0f9[_0x2910df(0x742)])||{'name':'你'},_0x4c1cbb=_0x35d0f9['diaries'][_0x2910df(0x9cd)](_0x5e1f59=>_0x5e1f59['characterId']===_0x378ed3);if(!_0x4c1cbb||!_0x4c1cbb[_0x2910df(0x2fb)]||_0x4c1cbb['entries'][_0x2910df(0x968)]===0x0)return'';const _0x168b8d=_0x4c1cbb[_0x2910df(0x2fb)][_0x2910df(0x571)](-0x8),_0xaacced=_0x168b8d[_0x2910df(0xbb5)](_0x3b8ad9=>{const _0x17fc93=_0x2910df,_0x28521c=_0x3b8ad9['author']===_0x17fc93(0x809)?_0x15add5[_0x17fc93(0x19d)]:_0x45939a(_0x3b8ad9[_0x17fc93(0x2f3)])['name'];return _0x17fc93(0x515)+new Date(_0x3b8ad9[_0x17fc93(0xaa4)])['toLocaleDateString']()+']\x20'+_0x28521c+_0x17fc93(0x313)+_0x3b8ad9[_0x17fc93(0x9bc)];})[_0x2910df(0x102)]('\x0a');return _0x2910df(0x866)+_0x15add5['name']+_0x2910df(0x87f)+_0xaacced;}function _0xa3fb61(_0x21bea6){const _0x18cf42=_0x17d1db,_0x5b55b4=_0x35d0f9['livestreamReplays'][_0x21bea6];if(!_0x5b55b4||_0x5b55b4[_0x18cf42(0x968)]===0x0)return'';const _0x353a9e=_0x5b55b4['slice'](0x0,0x3),_0x3ee9be=_0x353a9e[_0x18cf42(0xbb5)]((_0xa5e62b,_0x4a089e)=>{const _0x5628a2=_0x18cf42;if(_0x5628a2(0x531)!==_0x5628a2(0xa23)){const _0x165a2c=_0xa5e62b[_0x5628a2(0xac5)](/theme:\s*"?([^"\n]+)"?/)?.[0x1]||'未知主题',_0x34c0c4=(_0xa5e62b['match'](/key_events:\s*\n([\s\S]*?)(?=\n\w+:|$)/)?.[0x1]||'')[_0x5628a2(0xb2d)]('\x0a')['map'](_0x1c923d=>_0x1c923d[_0x5628a2(0x2e2)]())[_0x5628a2(0x485)](_0x59b2f3=>_0x59b2f3[_0x5628a2(0x41d)]('-'))[_0x5628a2(0x102)]('\x20');return _0x5628a2(0xc96)+(_0x4a089e+0x1)+_0x5628a2(0x9a3)+_0x165a2c+_0x5628a2(0x828)+_0x34c0c4;}else{const _0x12b741=_0x5c2558[_0x5628a2(0x97b)](_0x21e0e7['getItem'](_0x5628a2(0x1cd))||'{}'),_0x2762a9={..._0x12b741,..._0x57723a};_0x337d2f[_0x5628a2(0x570)](_0x5628a2(0x1cd),_0x26343c[_0x5628a2(0xcf9)](_0x2762a9));}})[_0x18cf42(0x102)]('\x0a');return'\x0a#\x20你的近期直播回顾\x20(这是你的个人记忆，不要直接复述给用户)\x0a'+_0x3ee9be;}function _0x38fffe(){const _0x1557f7=_0x17d1db,_0x40561c=document[_0x1557f7(0xb18)](_0x1557f7(0xaba)),_0x2dcb88=_0x35d0f9['preferences'][_0x1557f7(0xbb6)];_0x2dcb88?(_0x40561c[_0x1557f7(0x7d9)][_0x1557f7(0x2f8)]='url('+_0x2dcb88+')',_0x40561c[_0x1557f7(0x7d9)]['backgroundSize']=_0x1557f7(0x2d5),_0x40561c[_0x1557f7(0x7d9)]['backgroundPosition']=_0x1557f7(0xb99),_0x40561c[_0x1557f7(0x7d9)][_0x1557f7(0x11f)]=_0x1557f7(0x5fa),_0x40561c[_0x1557f7(0x9c6)](_0x1557f7(0x8b6))[_0x1557f7(0x175)](_0x454c8e=>{const _0x16b8ff=_0x1557f7;_0x16b8ff(0x989)!=='hlBdk'?_0x4d72ea+='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>':_0x454c8e[_0x16b8ff(0x7d9)][_0x16b8ff(0x823)]=_0x16b8ff(0x4d7);})):_0x1557f7(0xb7e)==='UZufO'?(_0x19b7fb['addEventListener']('mousemove',_0x47cfdd),_0x1dded2[_0x1557f7(0xafb)](_0x1557f7(0xc4f),_0x5c52f6)):(_0x40561c['style'][_0x1557f7(0x2f8)]='',_0x40561c[_0x1557f7(0x7d9)][_0x1557f7(0x11f)]='',_0x40561c[_0x1557f7(0x9c6)](_0x1557f7(0x8b6))[_0x1557f7(0x175)](_0x42b6a7=>{_0x42b6a7['style']['textShadow']='';}));}const _0x5dc6dd=document[_0x17d1db(0xb18)](_0x17d1db(0x663)),_0x15e665=document[_0x17d1db(0xb18)](_0x17d1db(0xa27));_0x5dc6dd[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x14108d=_0x17d1db;_0x338bf3(),_0x198934('friendCircleList',_0x14108d(0x58a));}),_0x15e665[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x119a89=_0x17d1db;if(_0x119a89(0x428)===_0x119a89(0xc39)){_0x4ae7ac(_0x119a89(0xc70));return;}else _0x26ba50(),_0x198934(_0x119a89(0x4dd),_0x119a89(0x58a));}),document['getElementById'](_0x17d1db(0xb3d))['addEventListener'](_0x17d1db(0x9db),()=>{const _0x48e40e=_0x17d1db;_0x48e40e(0x7a2)===_0x48e40e(0xa9c)?(_0x4113f2[_0x48e40e(0x7d9)][_0x48e40e(0x31f)]=_0x48e40e(0x9ba),_0x514c7d[_0x48e40e(0xb18)](_0x48e40e(0x696))[_0x48e40e(0x7d9)]['display']=_0x48e40e(0x9d4)):_0x198934(_0x48e40e(0x58a),_0x48e40e(0x4dd));}),document[_0x17d1db(0xb18)](_0x17d1db(0xaf9))[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x27b9be=_0x17d1db;if('KxHpW'!=='CFard'){if(_0x26d532)clearInterval(_0x26d532);_0x26d532=null,_0x35d0f9['activeMeetingScriptQueue']=[],_0x35d0f9['activeMeetingCharId']=null,document[_0x27b9be(0xb18)](_0x27b9be(0x2f4))['style'][_0x27b9be(0x31f)]=_0x27b9be(0x9ba),_0x35d0f9[_0x27b9be(0xba6)]=null,_0x5c9c95(),_0x198934('meetingList','meetingView');}else{if(_0x133fee['type']===_0x27b9be(0x253))return _0x27b9be(0xa57)+(_0xc0626c[_0x27b9be(0x19d)]||_0x27b9be(0x4d0))+'」';const _0x14e414=_0x36968c(_0x4d19cf[_0x27b9be(0x8f1)][0x0]);return'与\x20'+(_0x14e414?.[_0x27b9be(0x19d)]||_0x27b9be(0x753))+_0x27b9be(0x402);}});const _0x495fee=document[_0x17d1db(0xb18)](_0x17d1db(0x415)),_0x4141a3=document[_0x17d1db(0xb18)]('meeting-send-button');_0x4141a3[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x4057ca=_0x17d1db,_0x100eb0=_0x495fee['value'][_0x4057ca(0x2e2)]();_0x100eb0&&(_0x50bad7(_0x100eb0),_0x495fee[_0x4057ca(0x850)]='',setTimeout(_0x4d017c,0x64));});function _0x8b330f(_0x5d9a37,_0x3ad19a){const _0x130c85=_0x17d1db,_0x177e12=document[_0x130c85(0xb18)](_0x130c85(0x996)),_0x454769=_0x35d0f9[_0x130c85(0x17b)]['find'](_0x1b7ab5=>_0x1b7ab5['id']===_0x3ad19a['id']);if(!_0x454769){console['error'](_0x130c85(0xb5b),_0x3ad19a['id']);return;}const _0x2289ba=_0x177e12[_0x130c85(0x9c9)][_0x130c85(0xb63)](_0x454769[_0x130c85(0xc5e)])&&!_0x177e12[_0x130c85(0x976)];_0x2289ba?_0x177e12[_0x130c85(0x639)]():(_0x32e31f={'title':_0x454769['songName'],'artist':_0x454769[_0x130c85(0xb52)],'cover':_0x454769[_0x130c85(0x22d)]||(_0x454769[_0x130c85(0x67f)]?'db:'+_0x454769[_0x130c85(0x67f)]:_0x20a236),'isFromLibrary':!![]},_0x177e12[_0x130c85(0x9c9)]=_0x454769[_0x130c85(0xc5e)],_0x177e12['play'](),_0x35d0f9[_0x130c85(0x863)]=_0x35d0f9[_0x130c85(0x17b)][_0x130c85(0x59a)](_0x290881=>_0x290881['id']===_0x3ad19a['id']),_0x54fd79());}const _0x237548=document[_0x17d1db(0xb18)](_0x17d1db(0xc79));async function _0x33493d(_0x307e2d){const _0x57918d=_0x17d1db;if(!_0x307e2d||!_0x307e2d[_0x57918d(0x41d)](_0x57918d(0xc78)))return![];return new Promise(_0x2d96cc=>{const _0x393468=_0x57918d,_0x21641a=document[_0x393468(0x7e9)]('audio');_0x21641a[_0x393468(0x9c9)]=_0x307e2d;const _0x46a011=setTimeout(()=>{_0x1cfab0(),_0x2d96cc(![]);},0xbb8),_0x1cfab0=()=>{const _0xb88103=_0x393468;_0xb88103(0x457)!==_0xb88103(0x457)?_0x16849d['getElementById']('snoop-copy-summary-btn')[_0xb88103(0xafb)]('click',()=>{const _0x467eac=_0xb88103,_0x14b92f=_0x37e41a[_0x467eac(0xb18)](_0x467eac(0x93a));_0x14b92f['select'](),_0x5d0d6d[_0x467eac(0x598)]('copy'),_0x30ef14(_0x467eac(0x449));}):(clearTimeout(_0x46a011),_0x21641a[_0xb88103(0x854)]('canplaythrough',_0x53b4dc),_0x21641a[_0xb88103(0x854)](_0xb88103(0x4a1),_0x51e445),_0x21641a['src']='',_0x21641a[_0xb88103(0xb42)]());},_0x53b4dc=()=>{const _0x54d5dd=_0x393468;_0x54d5dd(0x12a)===_0x54d5dd(0x12a)?(_0x1cfab0(),_0x2d96cc(!![])):_0x40ff98=_0x3e07cf(_0x3b2a07);},_0x51e445=()=>{_0x1cfab0(),_0x2d96cc(![]);};_0x21641a['addEventListener'](_0x393468(0x6e4),_0x53b4dc),_0x21641a[_0x393468(0xafb)](_0x393468(0x4a1),_0x51e445);});}async function _0x5eed63(_0x501497,_0x2dbd74){const _0x20df77=_0x17d1db,_0x449485=['netease',_0x20df77(0x281)];for(const _0x5e953a of _0x449485){try{if(_0x20df77(0x1a6)===_0x20df77(0x8b2)){if(!_0x44cf7d[_0x20df77(0x80f)]||_0x17bbc6[_0x20df77(0xb18)](_0x20df77(0x92f))['style'][_0x20df77(0x31f)]===_0x20df77(0xb91))return;const _0x7c0871={'charId':_0x487ce3[_0x20df77(0x80f)],'log':_0x336511['currentLivestreamLog'],'speechQueue':_0x12e0d4[_0x20df77(0x7fa)],'speechIndex':_0x394f41[_0x20df77(0x2e0)],'dms':_0x2dacc6[_0x20df77(0x720)]};try{_0x5dd2ee[_0x20df77(0x570)](_0x20df77(0x752),_0x4fb4b['stringify'](_0x7c0871)),_0x24e1ca[_0x20df77(0x52e)](_0x20df77(0xaaa));}catch(_0x5b0d8a){_0x27f735[_0x20df77(0x4a1)](_0x20df77(0xcd6),_0x5b0d8a);}}else{const _0x445492='https://api.vkeys.cn/v2/music/'+_0x5e953a+'?word='+encodeURIComponent(_0x501497)+'-'+encodeURIComponent(_0x2dbd74),_0x4d5f34=await fetch(_0x445492),_0x3d2f4f=await _0x4d5f34['json']();if(_0x3d2f4f[_0x20df77(0x1f7)]!==0xc8||!_0x3d2f4f['data']||_0x3d2f4f[_0x20df77(0x225)][_0x20df77(0x968)]===0x0)continue;const _0xe32c3f=_0x3d2f4f[_0x20df77(0x225)][_0x20df77(0x571)](0x0,0x5);for(const _0x16187d of _0xe32c3f){const _0x4a933a=_0x20df77(0xa21)+_0x5e953a+_0x20df77(0x126)+_0x16187d['id'],_0x20f057=await fetch(_0x4a933a),_0xdcb2c6=await _0x20f057['json'](),_0x2e9e3d=_0xdcb2c6[_0x20df77(0x225)]?.[_0x20df77(0x391)];if(await _0x33493d(_0x2e9e3d)){if('hnysS'===_0x20df77(0x568))return{'url':_0x2e9e3d,'cover':_0x16187d[_0x20df77(0x2d5)],'source':_0x5e953a};else{const _0x26d38f=_0x31e0fd[_0x20df77(0xb18)](_0x20df77(0x411));if(_0x26d38f)_0x26d38f['textContent']='▶';}}}}}catch(_0x3ce78c){console['error'](_0x20df77(0x907)+_0x5e953a+':',_0x3ce78c);}}return{'url':null,'cover':null,'source':null};}function _0x4322e2(){const _0x28ca55=_0x17d1db,_0x8d5b89=document[_0x28ca55(0xb18)]('ui-scale-slider'),_0x50d32b=document[_0x28ca55(0xa12)],_0x5c6a22=document[_0x28ca55(0xb18)](_0x28ca55(0xa3c));if(!_0x8d5b89||!_0x5c6a22)return;const _0x474760=localStorage[_0x28ca55(0x9a1)](_0x28ca55(0xccd))||'1';_0x50d32b['style'][_0x28ca55(0xbcb)](_0x28ca55(0x8d1),_0x474760),_0x8d5b89['value']=_0x474760,_0x8d5b89[_0x28ca55(0xafb)](_0x28ca55(0xb8d),()=>{const _0x29fa82=_0x28ca55,_0x1076b4=_0x8d5b89[_0x29fa82(0x850)];_0x50d32b['style'][_0x29fa82(0xbcb)](_0x29fa82(0x8d1),_0x1076b4),localStorage[_0x29fa82(0x570)](_0x29fa82(0xccd),_0x1076b4);}),_0x5c6a22[_0x28ca55(0xafb)](_0x28ca55(0x9db),()=>{const _0x53621a=_0x28ca55;if(_0x53621a(0x65c)!=='YElAE')_0x1252fc+=_0x53621a(0x3e5)+_0x28e334(_0x488099)+_0x53621a(0x988);else{const _0x5f0d3a='1';_0x8d5b89[_0x53621a(0x850)]=_0x5f0d3a,_0x50d32b[_0x53621a(0x7d9)][_0x53621a(0xbcb)]('--desktop-item-scale',_0x5f0d3a),localStorage[_0x53621a(0x570)]('uiScale',_0x5f0d3a);}});}function _0x5d74a3(_0x3f9302){const _0x266e12=_0x17d1db;try{const _0x586440=JSON[_0x266e12(0x97b)](localStorage['getItem'](_0x266e12(0x1cd))||'{}'),_0x17c901={..._0x586440,..._0x3f9302};localStorage[_0x266e12(0x570)](_0x266e12(0x1cd),JSON['stringify'](_0x17c901));}catch(_0x1d9f76){console[_0x266e12(0x4a1)](_0x266e12(0x3d2),_0x1d9f76);}}async function _0x37f1d7(){const _0x572ede=_0x17d1db,_0x2c80e9=document[_0x572ede(0xb18)](_0x572ede(0x9d5)),_0x2bca3a=document['getElementById']('badge-image');try{let _0x5d9cf0=await _0x5288fd('widget_badge');if(!_0x5d9cf0){if('AiSXU'==='lQKDw')_0x3aaa14(_0x245b3f);else{const _0x3ece2c=JSON[_0x572ede(0x97b)](localStorage[_0x572ede(0x9a1)]('badgeState')||'{}');_0x3ece2c[_0x572ede(0x89a)]&&(_0x5d9cf0=await _0x1b74b4(_0x3ece2c[_0x572ede(0x89a)]),await _0xad4538('widget_badge',_0x5d9cf0));}}if(_0x5d9cf0){if(_0x572ede(0x69a)!=='CqlUi'){const _0x12850e=_0x484af4[_0x572ede(0x6c0)][_0x572ede(0x83f)](_0x5f5808=>_0x5f5808['id']===_0x572ede(0xb17));!_0x12850e&&_0x5b86d8['push']({'id':_0x572ede(0xb17),'name':'默认分类'});}else _0x2bca3a['src']=URL['createObjectURL'](_0x5d9cf0),_0x2bca3a[_0x572ede(0x7d9)][_0x572ede(0x31f)]='block',_0x2c80e9[_0x572ede(0x7d9)][_0x572ede(0x822)]='none';}else _0x572ede(0x690)==='TYlFp'?(_0x2bca3a[_0x572ede(0x7d9)]['display']=_0x572ede(0x9ba),_0x2c80e9[_0x572ede(0x7d9)]['border']='2px\x20dashed\x20var(--border-color)'):_0x227c7b[_0x572ede(0xafb)](_0x572ede(0x9db),()=>{const _0x5c0271=_0x572ede,_0x2a6fec=_0x5b7b61['getElementById'](_0x5c0271(0x6ca));_0x2a6fec&&(_0x2a6fec[_0x5c0271(0x79f)]['remove'](_0x5c0271(0x30f)),_0x2a6fec[_0x5c0271(0x7d9)][_0x5c0271(0x33b)]='',_0x2a6fec[_0x5c0271(0x7d9)][_0x5c0271(0x6d2)]='');});_0x2c80e9['style'][_0x572ede(0x31f)]=_0x572ede(0xb91);}catch(_0x1541ce){_0x572ede(0xb8c)!==_0x572ede(0xcb9)?console[_0x572ede(0x4a1)](_0x572ede(0xa2d),_0x1541ce):_0x4ea056[_0x572ede(0x9c6)](_0x572ede(0xc15))[_0x572ede(0x175)](_0x30d29f=>{const _0x3910a6=_0x572ede;_0x30d29f[_0x3910a6(0xafb)](_0x3910a6(0x9db),()=>{const _0x2a771c=_0x3910a6,_0x35e9c9=_0x535ab5[_0x2a771c(0x97b)](_0x30d29f['dataset'][_0x2a771c(0x52e)]['replace'](/&quot;/g,'\x22')),_0x4cfb04=_0x30d29f[_0x2a771c(0x218)]['contactName'],_0x178993=_0x30d29f[_0x2a771c(0x218)][_0x2a771c(0x1ac)];_0x48ffc5(_0x4cfb04,_0x178993,_0x35e9c9);});});}}async function _0x38a7d2(){const _0x910067=_0x17d1db,_0x5f4a9a=document[_0x910067(0xb18)](_0x910067(0xa04)),_0x500718=document[_0x910067(0xb18)]('card-image'),_0x492336=document[_0x910067(0xb18)]('card-widget-2'),_0x440d8b=document[_0x910067(0xb18)](_0x910067(0x33e));try{let _0x3841e4=await _0x5288fd(_0x910067(0x9ab));_0x3841e4?_0x910067(0x41f)===_0x910067(0x27f)?_0xf95fce[_0x910067(0x7d9)][_0x910067(0x11f)]=_0x910067(0x71e):(_0x500718[_0x910067(0x9c9)]=URL[_0x910067(0x900)](_0x3841e4),_0x500718[_0x910067(0x7d9)][_0x910067(0x31f)]=_0x910067(0xb91),_0x5f4a9a[_0x910067(0x7d9)]['border']=_0x910067(0x9ba),_0x5f4a9a['style'][_0x910067(0x4b3)]='transparent'):(_0x500718[_0x910067(0x7d9)]['display']=_0x910067(0x9ba),_0x5f4a9a['style'][_0x910067(0x822)]='2px\x20dashed\x20var(--border-color)',_0x5f4a9a[_0x910067(0x7d9)][_0x910067(0x4b3)]='rgba(255,255,255,0.2)');_0x5f4a9a[_0x910067(0x7d9)][_0x910067(0x31f)]=_0x910067(0xb91);let _0x5accff=await _0x5288fd('widget_card_2');if(_0x5accff){if(_0x910067(0xa7b)===_0x910067(0xa7b))_0x440d8b['src']=URL[_0x910067(0x900)](_0x5accff),_0x440d8b[_0x910067(0x7d9)][_0x910067(0x31f)]=_0x910067(0xb91),_0x492336[_0x910067(0x7d9)]['border']=_0x910067(0x9ba),_0x492336[_0x910067(0x7d9)][_0x910067(0x4b3)]=_0x910067(0x701);else{if(!_0x42f019||typeof _0x3673e1!=='string')return null;const _0x3b1be4=_0x164a13[_0x910067(0x65a)]('['),_0x5b91f0=_0x26d960[_0x910067(0x5ca)](']');if(_0x3b1be4>-0x1&&_0x5b91f0>_0x3b1be4)return _0x123c34[_0x910067(0x185)](_0x3b1be4,_0x5b91f0+0x1);return null;}}else{if('SiXej'!==_0x910067(0x4d9)){if(_0xf08f36?.['type']===_0x910067(0x869))_0x504096=_0x435f91(_0x171e07['participantIds'][0x0]);else _0x15d3fd?.['type']===_0x910067(0x253)&&_0x154f19&&(_0x298771=_0x106a8b(_0x1cadbc));_0xe84fa=_0x473c35?.[_0x910067(0x36b)]||_0x3ba5ae,_0x595126=_0x5a30de?.['avatarFrameUrl']||'';}else _0x440d8b['style'][_0x910067(0x31f)]=_0x910067(0x9ba),_0x492336[_0x910067(0x7d9)][_0x910067(0x822)]=_0x910067(0xde),_0x492336['style'][_0x910067(0x4b3)]=_0x910067(0x285);}_0x492336[_0x910067(0x7d9)]['display']=_0x910067(0xb91);}catch(_0x4a0934){console[_0x910067(0x4a1)]('加载卡片图片失败',_0x4a0934);}}async function _0x38a7d2(){const _0x5ab747=_0x17d1db,_0x54e404=document[_0x5ab747(0xb18)](_0x5ab747(0xa04)),_0x31872e=document[_0x5ab747(0xb18)](_0x5ab747(0x84f));try{if('tAdQX'!=='tAdQX'){if(_0x1259b6['type']==='touchstart')_0x4e34aa[_0x5ab747(0xa05)]();_0x2d3253(_0x341e8d);}else{let _0x23ff65=await _0x5288fd(_0x5ab747(0x9ab));if(!_0x23ff65){const _0x240d10=JSON['parse'](localStorage[_0x5ab747(0x9a1)](_0x5ab747(0xbee))||'{}');_0x240d10[_0x5ab747(0x89a)]&&(console[_0x5ab747(0x52e)]('正在搬运旧卡片...'),_0x23ff65=await _0x1b74b4(_0x240d10[_0x5ab747(0x89a)]),await _0xad4538(_0x5ab747(0x9ab),_0x23ff65));}_0x23ff65?_0x5ab747(0x853)!==_0x5ab747(0xc07)?(_0x31872e[_0x5ab747(0x9c9)]=URL[_0x5ab747(0x900)](_0x23ff65),_0x54e404[_0x5ab747(0x7d9)][_0x5ab747(0x31f)]='block'):_0x34c43c=_0x52771d['id']:_0x54e404['style']['display']=_0x5ab747(0x9ba);}}catch(_0x4decd7){'rgBOp'!==_0x5ab747(0x1c3)?console['error']('加载卡片图片失败',_0x4decd7):_0x4af5cd[_0x5ab747(0x79f)]['remove'](_0x5ab747(0xa36));}try{let _0x25c49e=await _0x5288fd(_0x5ab747(0x314));const _0x47111f=document[_0x5ab747(0xb18)](_0x5ab747(0x33e)),_0x338f13=document[_0x5ab747(0xb18)](_0x5ab747(0xac8));if(_0x25c49e){if(_0x5ab747(0x369)===_0x5ab747(0x3e9)){const _0x200474=_0x1b234b(_0xcd41f7[_0x5ab747(0x9bc)]??_0xcccb5f[_0x5ab747(0xa0c)]??_0x1d5d1a['message']??'')[_0x5ab747(0x2e2)]();if(_0x200474)_0x3b113c[_0x5ab747(0x558)]['push']({'senderId':_0x97c7c4['id'],'kind':_0x5ab747(0xa0c),'content':_0x200474});}else _0x47111f['src']=URL[_0x5ab747(0x900)](_0x25c49e),_0x338f13[_0x5ab747(0x7d9)][_0x5ab747(0x31f)]=_0x5ab747(0xb91);}else _0x338f13[_0x5ab747(0x7d9)]['display']=_0x5ab747(0x9ba);}catch(_0x454d8b){console[_0x5ab747(0x4a1)](_0x5ab747(0x88e),_0x454d8b);}}_0x29dce3[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{_0x547ac4(),_0x198934('userProfileList','home');}),document[_0x17d1db(0xb18)]('back-to-home-from-user-list')[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x198934('home',_0x17d1db(0x386))),document[_0x17d1db(0xb18)](_0x17d1db(0xbfd))[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x7655f6()),document[_0x17d1db(0xb18)]('back-to-user-list-from-edit')[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x121914=_0x17d1db;if(_0x121914(0x67e)===_0x121914(0xb93)){const _0x5de7fb=new _0x4eac37(),_0x286132=_0x4d49e8['getElementById'](_0x121914(0xa5d)),_0x52f3f3=_0x27f126[_0x121914(0xb18)](_0x121914(0x99a)),_0x474605=_0x300a75['getElementById'](_0x121914(0x237));_0x286132&&_0x52f3f3&&(_0x286132[_0x121914(0x65b)]=_0x5de7fb['toLocaleTimeString'](_0x121914(0x984),{'hour':_0x121914(0x16b),'minute':_0x121914(0x16b),'hour12':![]}),_0x52f3f3[_0x121914(0x65b)]=_0x5de7fb[_0x121914(0x734)](_0x121914(0x984),{'month':'long','day':_0x121914(0x6c4),'weekday':_0x121914(0x68c)})),_0x474605&&(_0x474605['innerHTML']=_0x121914(0x967)+_0x5de7fb[_0x121914(0x3c8)](_0x121914(0x984),{'hour':_0x121914(0x16b),'minute':_0x121914(0x16b),'hour12':![]})+'</div\x20>\x0a\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');}else _0x547ac4(),_0x198934(_0x121914(0x386),_0x121914(0xc1a));}),document[_0x17d1db(0xb18)](_0x17d1db(0xb04))[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x10a7ed),document[_0x17d1db(0xb18)](_0x17d1db(0x62b))[_0x17d1db(0xafb)]('click',_0x4d744e),document[_0x17d1db(0xb18)](_0x17d1db(0x80a))[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0xcdae4f=_0x17d1db;if(_0xcdae4f(0xb6d)==='dtpdE'){const _0xd9858e=_0x9b048[_0xcdae4f(0xb18)](_0x3c43e5);_0xd9858e['innerHTML']='',_0x3ef1f7[_0xcdae4f(0x162)][_0xcdae4f(0x175)](_0x2f00d4=>{const _0x5aee04=_0xcdae4f,_0x331952=_0x58fe4c[_0x5aee04(0x7e9)](_0x5aee04(0x91f));_0x331952[_0x5aee04(0x850)]=_0x2f00d4['id'],_0x331952[_0x5aee04(0x65b)]=_0x2f00d4[_0x5aee04(0x19d)],_0xd9858e[_0x5aee04(0x364)](_0x331952);});}else{const _0x4d8865=document[_0xcdae4f(0xb18)]('editing-user-id')[_0xcdae4f(0x850)];_0x4d8865&&(_0x35d0f9[_0xcdae4f(0x742)]=_0x4d8865,_0x5c9c95(),_0x28dfd2(_0xcdae4f(0x81d)),_0x547ac4(),document['getElementById'](_0xcdae4f(0x80a))['style'][_0xcdae4f(0x31f)]=_0xcdae4f(0x9ba));}});function _0x5f52db(_0x34441f){const _0x1cbe38=_0x17d1db,_0x487b1f=_0x35d0f9[_0x1cbe38(0xa6c)][_0x1cbe38(0x9cd)](_0x30de8d=>_0x30de8d['id']===_0x34441f),_0x528d3e=_0x487b1f?.[_0x1cbe38(0x54f)];let _0x1bb1bd=_0x35d0f9[_0x1cbe38(0x162)][_0x1cbe38(0x9cd)](_0x2e28c4=>_0x2e28c4['id']===_0x528d3e);if(!_0x1bb1bd){if('BFvRz'===_0x1cbe38(0xcfd))_0x1bb1bd=_0x35d0f9['userProfiles'][_0x1cbe38(0x9cd)](_0x357bf3=>_0x357bf3['id']===_0x35d0f9[_0x1cbe38(0x742)])||_0x35d0f9['userProfiles'][0x0];else{_0x171093(_0x1cbe38(0xa17));return;}}return _0x1bb1bd||{'name':'用户','avatar':_0x395094,'persona':''};}function _0x47030d(_0x2bcb7c){const _0x551ec7=_0x17d1db,_0x48fd4b=document[_0x551ec7(0xb18)](_0x2bcb7c);_0x48fd4b[_0x551ec7(0x280)]='',_0x35d0f9[_0x551ec7(0x162)][_0x551ec7(0x175)](_0xb7df7a=>{const _0x4ee9f6=_0x551ec7;if(_0x4ee9f6(0x41e)===_0x4ee9f6(0x6af))_0x33cacf(_0x535939),_0x7a686d[_0x4ee9f6(0x854)](_0x4ee9f6(0x6e4),_0x4f56e2),_0x12e00b[_0x4ee9f6(0x854)](_0x4ee9f6(0x4a1),_0x2674a9),_0x5cb04['src']='',_0x3a1319['remove']();else{const _0x5c99b6=document[_0x4ee9f6(0x7e9)](_0x4ee9f6(0x91f));_0x5c99b6[_0x4ee9f6(0x850)]=_0xb7df7a['id'],_0x5c99b6[_0x4ee9f6(0x65b)]=_0xb7df7a[_0x4ee9f6(0x19d)],_0x48fd4b[_0x4ee9f6(0x364)](_0x5c99b6);}});}function _0x36ca7f(_0x4166ac){const _0x394e39=_0x17d1db,_0x4f82d5=_0x45939a(_0x4166ac),_0x2a92ba=document['getElementById'](_0x394e39(0x98b));_0x2a92ba['style']['backgroundImage']='';let _0x2ad88a=document['getElementById'](_0x394e39(0x9e5)+_0x4166ac);if(_0x2ad88a)_0x2ad88a[_0x394e39(0x280)]='';if(!_0x4f82d5)return;_0x4f82d5[_0x394e39(0x344)]&&(_0x2a92ba[_0x394e39(0x7d9)][_0x394e39(0x2f8)]='url(\x27'+_0x4f82d5[_0x394e39(0x344)]+'\x27)',_0x2a92ba['style'][_0x394e39(0x133)]=_0x394e39(0x2d5),_0x2a92ba['style'][_0x394e39(0xe8)]='center');if(_0x4f82d5[_0x394e39(0x342)]){let _0x359289=document[_0x394e39(0xb18)](_0x394e39(0x9e5)+_0x4f82d5['id']);if(!_0x359289){if(_0x394e39(0x1c9)!=='Hpoqn'){const _0x2598ea=_0x239997[_0x394e39(0x832)](_0x42b8db,_0x394e39(0x43c)),_0x28da61=_0x2598ea[_0x394e39(0x566)](_0x224de8),_0x5c8009=_0x28da61['put']({'id':_0x34f812,'data':_0x5b3ced});_0x5c8009[_0x394e39(0x9d2)]=()=>_0x27e089(),_0x5c8009[_0x394e39(0x892)]=()=>_0x2905f4(_0x5c8009[_0x394e39(0x4a1)]);}else _0x359289=document[_0x394e39(0x7e9)]('style'),_0x359289['id']='style-'+_0x4f82d5['id'],document[_0x394e39(0x6ae)][_0x394e39(0x364)](_0x359289);}const _0x178129=_0x4f82d5['bubbleCss'],_0x1d9563=_0x178129[_0x394e39(0x39f)](/\.bubble\.sent/g,_0x394e39(0x635)+_0x4f82d5['id']+_0x394e39(0x446))[_0x394e39(0x39f)](/\.bubble\.received/g,_0x394e39(0x635)+_0x4f82d5['id']+_0x394e39(0x9f7));_0x359289['innerHTML']=_0x1d9563;}}function _0x2cab64(){const _0x239ece=_0x17d1db;if(_0x239ece(0x1ec)!==_0x239ece(0x784)){const _0x2aa72b=document[_0x239ece(0xb18)](_0x239ece(0x475));_0x2aa72b[_0x239ece(0x280)]='';const _0x24329a=_0x42451e=>{const _0x4e7869=_0x239ece;_0x35d0f9['pendingPostAttachments'][_0x42451e]=null;if(_0x42451e==='image')_0x35d0f9[_0x4e7869(0x932)][_0x4e7869(0x650)]=null;_0x2cab64();},_0x53db75=_0x35d0f9[_0x239ece(0x932)][_0x239ece(0x650)],_0x6c85c=_0x35d0f9[_0x239ece(0x932)][_0x239ece(0xcc1)];if(_0x53db75){if(_0x239ece(0x4e1)!=='PTlRJ'){const _0x41e87f=document[_0x239ece(0x7e9)](_0x239ece(0x591));_0x41e87f[_0x239ece(0x73e)]=_0x239ece(0x9cb),_0x41e87f[_0x239ece(0x280)]=_0x239ece(0x177),_0x41e87f[_0x239ece(0x3eb)](_0x239ece(0xc1e))[_0x239ece(0x8df)]=()=>_0x24329a(_0x239ece(0x89a)),_0x2aa72b['appendChild'](_0x41e87f),_0x5288fd(_0x53db75)[_0x239ece(0xa34)](_0x2d9a46=>{const _0x463a0e=_0x239ece,_0xb3e868=document[_0x463a0e(0xb18)]('pending-post-image-preview');_0xb3e868&&_0x2d9a46&&(_0x463a0e(0x65d)===_0x463a0e(0x7d7)?_0x18e1b9():_0xb3e868[_0x463a0e(0x9c9)]=URL[_0x463a0e(0x900)](_0x2d9a46));});}else{const _0x4f10f0=_0x8486ed['getElementById']('snoop-summary-textarea');_0x4f10f0[_0x239ece(0x8c9)](),_0x1e1ab9[_0x239ece(0x598)](_0x239ece(0x23d)),_0x379052(_0x239ece(0x449));}}if(_0x6c85c){const _0x4ff6a6=document['createElement'](_0x239ece(0x591));_0x4ff6a6[_0x239ece(0x73e)]=_0x239ece(0x9cb),_0x4ff6a6[_0x239ece(0x280)]=_0x239ece(0x68b)+(_0x6c85c[_0x239ece(0x22d)]||_0x20a236)+_0x239ece(0xc1f)+_0x6c85c[_0x239ece(0x596)]+_0x239ece(0xb55)+_0x6c85c[_0x239ece(0xb52)]+_0x239ece(0x514),_0x4ff6a6['querySelector'](_0x239ece(0xc1e))['onclick']=()=>_0x24329a(_0x239ece(0xcc1)),_0x2aa72b['appendChild'](_0x4ff6a6);}}else _0x1aa19b[_0x239ece(0x12f)](_0x42ec27,_0x4fdd9e[_0x239ece(0x949)]);}async function _0x28a340(_0x46fea8){const _0x1d783f=_0x17d1db;if('KaSyf'===_0x1d783f(0x414)){const _0x5daebe=_0x35d0f9[_0x1d783f(0x9dd)][_0x1d783f(0x9cd)](_0x80f514=>_0x80f514['id']===_0x35d0f9[_0x1d783f(0xb34)]);if(!_0x5daebe)return;_0x13f6ba(!![],_0x1d783f(0x4c4)),_0x35d0f9['isGenerating']=!![];try{const _0xa349d5=_0x5daebe[_0x1d783f(0x69d)][_0x1d783f(0xbb5)](_0x388a42=>_0x45939a(_0x388a42))[_0x1d783f(0x485)](Boolean),_0x1eb620=_0x20e654(),_0xc34f93=_0xa349d5[_0x1d783f(0xbb5)](_0x1425d1=>{const _0x2fc284=_0x1d783f,{omniText:_0x23ed72}=_0xd9a204(_0x1425d1['id'],null),_0x7b66a9=_0x54bfed(_0x1425d1['id']),_0x5a8959=_0x1425d1[_0x2fc284(0x99c)]&&_0x1425d1['linkedWorldBookIds']['length']>0x0?'\x0a\x0a#\x20'+_0x1425d1[_0x2fc284(0x19d)]+_0x2fc284(0xcad)+_0x1425d1['linkedWorldBookIds'][_0x2fc284(0xbb5)](_0x4d2477=>_0x35d0f9[_0x2fc284(0x38f)]['find'](_0x318e7a=>_0x318e7a['id']===_0x4d2477))[_0x2fc284(0x485)](Boolean)[_0x2fc284(0xbb5)](_0x427d78=>_0x2fc284(0xa60)+_0x427d78[_0x2fc284(0x19d)]+'\x0a'+_0x427d78['content'])['join'](''):'';return'-\x20姓名:\x20'+_0x1425d1[_0x2fc284(0x19d)]+_0x2fc284(0x438)+_0x1425d1['id']+'\x0a\x20\x20人设:\x20'+_0x1425d1[_0x2fc284(0x1ab)]+_0x2fc284(0x50e)+_0x23ed72+'\x0a'+_0x7b66a9+'\x0a'+_0x5a8959;})[_0x1d783f(0x102)]('\x0a\x0a'),_0x1541d0=_0x229640(_0x46fea8[_0x1d783f(0xce6)])||{'name':'用户'},_0x72ea20=_0x1541d0[_0x1d783f(0x1ab)]?_0x1d783f(0x4a2)+_0x1541d0['name']+_0x1d783f(0x910)+_0x1541d0[_0x1d783f(0x1ab)]+'\x0a':'';let _0x11e163=null;if(_0x46fea8['image'])_0x1d783f(0x37f)==='Shvxw'?_0x11e163=_0x46fea8['image']:_0xb774e7=_0x2662a2[_0x1d783f(0x850)];else{if(_0x46fea8[_0x1d783f(0x650)])try{const _0x187ffc=await _0x5288fd(_0x46fea8[_0x1d783f(0x650)]);_0x187ffc&&(_0x11e163=await _0x36479b(_0x187ffc));}catch(_0xc254f7){console[_0x1d783f(0x4a1)](_0x1d783f(0x173),_0xc254f7);}}let _0x18de07=_0x1541d0['name']+_0x1d783f(0xd17)+_0x46fea8[_0x1d783f(0x9bc)]+'”';_0x11e163&&(_0x18de07+=_0x1d783f(0x1db));_0x46fea8[_0x1d783f(0xb12)]===_0x1d783f(0xcc1)&&(_0x18de07+=_0x1d783f(0xb2c)+_0x46fea8[_0x1d783f(0x596)]+_0x1d783f(0x204)+_0x46fea8[_0x1d783f(0xb52)]+']');const _0x1d670c='\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a'+_0xc34f93+'\x0a\x0a'+_0x72ea20+_0x1d783f(0x89e)+_0x1eb620+_0x1d783f(0x150)+_0x18de07+_0x1d783f(0x2a9),_0x2a7cc5=[{'role':'system','content':_0x1d670c}],_0x14262a={'role':_0x1d783f(0x809),'content':_0x1d783f(0x3e2)};_0x11e163&&(_0x14262a[_0x1d783f(0x89a)]=_0x11e163);_0x2a7cc5[_0x1d783f(0xb2f)](_0x14262a);const _0x50e753=await _0xb7fe2e(_0x2a7cc5,{'json':!![]}),_0xb7309a=_0x50e753[_0x1d783f(0xac5)](/({[\s\S]*})/);if(!_0xb7309a)throw new Error(_0x1d783f(0x343));const _0x382441=JSON[_0x1d783f(0x97b)](_0xb7309a[0x1]),_0x402913=_0x5daebe[_0x1d783f(0x416)][_0x1d783f(0x9cd)](_0xd2de6f=>_0xd2de6f['id']===_0x46fea8['id']);_0x402913&&(_0x1d783f(0xc69)==='kXFeZ'?(_0x402913[_0x1d783f(0xad1)]=_0x382441[_0x1d783f(0xad1)]||[],_0x402913[_0x1d783f(0x336)]=(_0x382441['comments']||[])['map']((_0x58ab07,_0x521c08)=>({..._0x58ab07,'commentId':'c_'+_0x46fea8[_0x1d783f(0xaa4)]+'_'+_0x521c08})),_0x5c9c95(),_0x44e7ec()):_0x36cd41['textContent']=_0x351fb0[_0x1d783f(0x39e)](_0x352ecb)[_0x1d783f(0xbb5)](_0x2d7221=>_0x2d7221[_0x1d783f(0x384)]['textContent']['trim']())[_0x1d783f(0x102)]('、'));}catch(_0x54701b){console[_0x1d783f(0x4a1)](_0x1d783f(0x587),_0x54701b),_0x28dfd2(_0x1d783f(0x7d5));}finally{_0x1d783f(0x6c9)==='Gconl'?(_0x591232[_0x1d783f(0x5d6)](),_0x13b482[_0x1d783f(0x79f)][_0x1d783f(0x34b)](_0x1d783f(0x6cf)),_0x50e550[_0x1d783f(0x79f)]['toggle'](_0x1d783f(0xc46))):(_0x13f6ba(![]),_0x35d0f9[_0x1d783f(0x2eb)]=![]);}}else{const _0x3f081e=_0x55f4b8[0x1][_0x1d783f(0x39f)](/\\"/g,'\x22')['replace'](/\\n/g,'\x0a')[_0x1d783f(0x2e2)]();if(_0x3f081e)_0xf32db7[_0x1d783f(0xb2f)](_0x3f081e);}}function _0xe8fb99(){const _0x4588de=_0x17d1db,_0x164140=_0x35d0f9['friendCircles'][_0x4588de(0x9cd)](_0x26db22=>_0x26db22['id']===_0x35d0f9[_0x4588de(0xb34)]),_0x44b9f3=_0x164140?.[_0x4588de(0x54f)];let _0x22fe7a=_0x35d0f9[_0x4588de(0x162)]['find'](_0x1dc9fb=>_0x1dc9fb['id']===_0x44b9f3);!_0x22fe7a&&(_0x4588de(0x4c6)!==_0x4588de(0x4c6)?_0x3a4aec[_0x4588de(0xafb)]('click',()=>{const _0x4d4722=_0x4588de,_0x2c9985=_0x5603d3(_0x15d61e[_0x4d4722(0x218)][_0x4d4722(0x609)],0xa);_0x27d671(_0x2c9985);}):_0x22fe7a=_0x35d0f9[_0x4588de(0x162)]['find'](_0x28b73d=>_0x28b73d['id']===_0x35d0f9['activeUserProfileId'])),!_0x22fe7a&&(_0x22fe7a=_0x35d0f9[_0x4588de(0x162)][0x0]),_0x22fe7a&&(document[_0x4588de(0xb18)](_0x4588de(0x1e6))[_0x4588de(0x9c9)]=_0x22fe7a[_0x4588de(0x36b)]||_0x395094);}function _0x233a41(_0x3ab5bc){const _0x167265=_0x17d1db;if('Lwswe'===_0x167265(0x8c0)){let _0x1d5f0b=0x0,_0x2039f1=0x0,_0x32f063=0x0;if(_0x3ab5bc['length']==0x4){if('LPBLq'!==_0x167265(0x13f))_0x1d5f0b='0x'+_0x3ab5bc[0x1]+_0x3ab5bc[0x1],_0x2039f1='0x'+_0x3ab5bc[0x2]+_0x3ab5bc[0x2],_0x32f063='0x'+_0x3ab5bc[0x3]+_0x3ab5bc[0x3];else{const _0x2c4f7e=_0x31e4a4['transaction'](_0x39b1db,_0x167265(0x43c)),_0x182475=_0x2c4f7e['objectStore'](_0x380ef6),_0x555c82=_0x182475[_0x167265(0xc3e)](_0x49e861);_0x555c82[_0x167265(0x9d2)]=()=>_0x4f5e83(),_0x555c82[_0x167265(0x892)]=()=>_0x5007f4(_0x555c82[_0x167265(0x4a1)]);}}else _0x3ab5bc['length']==0x7&&(_0x1d5f0b='0x'+_0x3ab5bc[0x1]+_0x3ab5bc[0x2],_0x2039f1='0x'+_0x3ab5bc[0x3]+_0x3ab5bc[0x4],_0x32f063='0x'+_0x3ab5bc[0x5]+_0x3ab5bc[0x6]);_0x1d5f0b/=0xff,_0x2039f1/=0xff,_0x32f063/=0xff;let _0x39fed5=Math['min'](_0x1d5f0b,_0x2039f1,_0x32f063),_0x41d097=Math[_0x167265(0xbc9)](_0x1d5f0b,_0x2039f1,_0x32f063),_0x351fbe=_0x41d097-_0x39fed5,_0x6280db=0x0,_0x4dd1c7=0x0,_0x18f169=0x0;if(_0x351fbe==0x0)_0x6280db=0x0;else{if(_0x41d097==_0x1d5f0b)_0x6280db=(_0x2039f1-_0x32f063)/_0x351fbe%0x6;else{if(_0x41d097==_0x2039f1)_0x6280db=(_0x32f063-_0x1d5f0b)/_0x351fbe+0x2;else _0x6280db=(_0x1d5f0b-_0x2039f1)/_0x351fbe+0x4;}}_0x6280db=Math[_0x167265(0x87d)](_0x6280db*0x3c);if(_0x6280db<0x0)_0x6280db+=0x168;return _0x18f169=(_0x41d097+_0x39fed5)/0x2,_0x4dd1c7=_0x351fbe==0x0?0x0:_0x351fbe/(0x1-Math['abs'](0x2*_0x18f169-0x1)),_0x4dd1c7=+(_0x4dd1c7*0x64)['toFixed'](0x1),_0x18f169=+(_0x18f169*0x64)['toFixed'](0x1),{'h':_0x6280db,'s':_0x4dd1c7,'l':_0x18f169};}else{if(!_0x52bebc[_0x167265(0xc29)](_0x41317f)||_0x5bd24a[_0x167265(0x968)]===0x0)return'<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>';return _0x167265(0x683)+_0x12856c['map']((_0x2aeb8f,_0x1847e9)=>{const _0x168f94=_0x167265,_0x6f6024=_0x42036a[_0x168f94(0xcf9)](_0x2aeb8f[_0x168f94(0x52e)]||[])[_0x168f94(0x39f)](/'/g,_0x168f94(0xaf0))[_0x168f94(0x39f)](/"/g,'&quot;'),_0xe1ec97=_0x2aeb8f[_0x168f94(0xc20)]||'未知联系人';return _0x168f94(0xbed)+(_0x1847e9<_0x3ee78e[_0x168f94(0x968)]-0x1?_0x168f94(0x87b):'')+_0x168f94(0x2bc)+_0x6f6024+_0x168f94(0x769)+_0xe1ec97+_0x168f94(0x74e)+_0x5c9cac+_0x168f94(0xc6d)+_0xe1ec97[_0x168f94(0x7f8)](0x0)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>'+_0xe1ec97+_0x168f94(0xbcd)+(_0x2aeb8f['last_message_preview']||'')+_0x168f94(0x249);})[_0x167265(0x102)]('')+_0x167265(0x576);}}function _0x54116b(){const _0x3ca437=_0x17d1db,_0x554155=(_0x2c88fb,_0x865bed,_0x47a3f0)=>{const _0x2b7a6a=_0x52a6,_0x57b8c3=document['getElementById'](_0x2c88fb);if(!_0x57b8c3)return;let _0x37c812=null;try{_0x37c812=JSON[_0x2b7a6a(0x97b)](localStorage[_0x2b7a6a(0x9a1)](_0x865bed)||'{}');}catch{_0x37c812={};}_0x57b8c3[_0x2b7a6a(0x7d9)][_0x2b7a6a(0x97a)]=_0x2b7a6a(0xdc),_0x57b8c3[_0x2b7a6a(0x7d9)][_0x2b7a6a(0x5e0)]='',_0x57b8c3[_0x2b7a6a(0x7d9)][_0x2b7a6a(0x1fd)]='',_0x57b8c3['style'][_0x2b7a6a(0x426)]='',_0x57b8c3[_0x2b7a6a(0x7d9)]['bottom']='',_0x57b8c3['style']['transform']='';if(typeof _0x37c812[_0x2b7a6a(0x5e0)]===_0x2b7a6a(0xa2b)&&typeof _0x37c812['left']===_0x2b7a6a(0xa2b))_0x2b7a6a(0x9b4)!==_0x2b7a6a(0x74d)?(_0x57b8c3[_0x2b7a6a(0x7d9)][_0x2b7a6a(0x5e0)]=_0x37c812[_0x2b7a6a(0x5e0)]+'%',_0x57b8c3[_0x2b7a6a(0x7d9)]['left']=_0x37c812[_0x2b7a6a(0x1fd)]+'%'):_0x25c180(![]);else for(const _0x4bfbc7 in _0x47a3f0){_0x57b8c3['style'][_0x4bfbc7]=_0x47a3f0[_0x4bfbc7];}};_0x554155('home-clock-container','clockPosition',{'top':_0x3ca437(0xc28),'left':_0x3ca437(0x605),'transform':_0x3ca437(0xd03)}),_0x554155(_0x3ca437(0x682),_0x3ca437(0x201),{'top':_0x3ca437(0x46a),'right':'4%'}),_0x554155(_0x3ca437(0xa95),'appIconPosition_app-user-profiles',{'top':_0x3ca437(0x46a),'right':_0x3ca437(0xd08)}),_0x554155(_0x3ca437(0xa84),'appIconPosition_app-settings',{'top':'8%','right':_0x3ca437(0xd08)}),_0x554155(_0x3ca437(0xb69),'appIconPosition_app-world-book',{'top':'8%','right':'4%'}),_0x554155(_0x3ca437(0xbf8),'appIconPosition_app-music-library',{'top':_0x3ca437(0x429),'left':'5%'}),_0x554155('app-diary',_0x3ca437(0xaad),{'top':_0x3ca437(0x286),'left':_0x3ca437(0x516)}),_0x554155(_0x3ca437(0x492),'appIconPosition_app-snoop',{'top':_0x3ca437(0x286),'left':'5%'}),_0x554155(_0x3ca437(0x599),'appIconPosition_app-accounting',{'top':_0x3ca437(0x429),'left':'29%'}),_0x554155('decorative-badge',_0x3ca437(0x1cd),{'top':_0x3ca437(0xc77),'right':'5%'}),_0x554155(_0x3ca437(0xac8),_0x3ca437(0x603),{'top':'8%','left':'5%'});const _0x3f55de=document[_0x3ca437(0xb18)](_0x3ca437(0xa04));if(_0x3f55de){if('Mlwwz'==='pRlpg')return[_0x3b5220];else _0x3f55de[_0x3ca437(0x7d9)][_0x3ca437(0x97a)]='absolute',_0x3f55de[_0x3ca437(0x7d9)]['top']='34%',_0x3f55de[_0x3ca437(0x7d9)][_0x3ca437(0x1fd)]=_0x3ca437(0x605),_0x3f55de['style']['transform']=_0x3ca437(0xd03),_0x3f55de[_0x3ca437(0x7d9)][_0x3ca437(0x31f)]=_0x3ca437(0xb91);}const _0x51e41a=document['getElementById']('music-widget');_0x51e41a&&(_0x51e41a[_0x3ca437(0x7d9)][_0x3ca437(0x97a)]=_0x3ca437(0xdc),_0x51e41a['style'][_0x3ca437(0x5e0)]=_0x3ca437(0x801),_0x51e41a[_0x3ca437(0x7d9)][_0x3ca437(0x1fd)]=_0x3ca437(0x605),_0x51e41a[_0x3ca437(0x7d9)]['transform']='translateX(-50%)',_0x51e41a[_0x3ca437(0x7d9)][_0x3ca437(0x31f)]='inline-block');}function _0x35346d(){const _0x1b961c=_0x17d1db;if(_0x1b961c(0x522)!==_0x1b961c(0x244)){const _0xadc69e=document[_0x1b961c(0xb18)]('custom-icon-list-container');_0xadc69e[_0x1b961c(0x280)]='';const _0x165e5b=document[_0x1b961c(0x9c6)](_0x1b961c(0x5a0));_0x165e5b['forEach'](_0x488374=>{const _0x39c01c=_0x1b961c;if(_0x39c01c(0xa25)!==_0x39c01c(0xcbd)){const _0x414850=_0x488374['id'],_0xd7a905=_0x488374['querySelector'](_0x39c01c(0x277))[_0x39c01c(0x65b)],_0x3d8e3b=_0x39c01c(0x820)+_0x414850,_0x348e6d=localStorage['getItem'](_0x3d8e3b),_0x5f0c74=document[_0x39c01c(0x7e9)](_0x39c01c(0x591));_0x5f0c74[_0x39c01c(0x73e)]='member-selection-item',_0x5f0c74['style'][_0x39c01c(0x145)]=_0x39c01c(0xbbf),_0x5f0c74['innerHTML']=_0x39c01c(0xa06)+_0x414850+_0x39c01c(0xce1)+(_0x348e6d||_0x39c01c(0xb94))+_0x39c01c(0x775)+_0xd7a905+_0x39c01c(0x6d7)+_0x414850+_0x39c01c(0x648)+_0x414850+_0x39c01c(0x5ba)+_0x3d8e3b+_0x39c01c(0x6d8),_0xadc69e[_0x39c01c(0x364)](_0x5f0c74);const _0x32907f=document[_0x39c01c(0xb18)](_0x39c01c(0x815)+_0x414850);_0x32907f[_0x39c01c(0xafb)](_0x39c01c(0x326),async _0x2f7e64=>{const _0x5e12ad=_0x39c01c,_0x16df71=_0x2f7e64[_0x5e12ad(0xce3)][_0x5e12ad(0x636)][0x0];if(!_0x16df71)return;try{if(_0x5e12ad(0x458)===_0x5e12ad(0x276))_0x3da1e9(),_0x955964();else{const _0x1e8f74=await _0x2a77d2(_0x16df71);localStorage[_0x5e12ad(0x570)](_0x3d8e3b,_0x1e8f74),document[_0x5e12ad(0xb18)](_0x5e12ad(0x45e)+_0x414850)['src']=_0x1e8f74,_0x3aa143();}}catch(_0x39f09f){_0x28dfd2(_0x5e12ad(0x264)+_0x39f09f[_0x5e12ad(0x5a1)]);}});}else{const _0x319993=_0x2db367[_0x39c01c(0x7e9)](_0x39c01c(0x591));_0x319993[_0x39c01c(0x73e)]=_0x39c01c(0x328),_0x319993['innerHTML']=_0x39c01c(0x669)+_0x433d89[_0x39c01c(0x659)][_0x39c01c(0x7b0)]+_0x39c01c(0xc68)+_0x5cca3f[_0x39c01c(0x659)][_0x39c01c(0x9bc)]+_0x39c01c(0x9ac),_0x599abe['appendChild'](_0x319993);}});}else{if(_0x30c5b2){_0x35ecfe[_0x1b961c(0x79f)][_0x1b961c(0x34b)]('selected');const _0x443ae9=_0xca8603['querySelector'](_0x1b961c(0xb43));_0x50ee21[_0x1b961c(0x79f)][_0x1b961c(0x34b)]('active',!!_0x443ae9);}else _0x2f96b9(_0x543303);}}function _0x3aa143(){const _0x151fff=_0x17d1db,_0x550c8a=document[_0x151fff(0x9c6)]('.app-icon');_0x550c8a[_0x151fff(0x175)](_0x48370f=>{const _0x2bb72c=_0x151fff;if(_0x2bb72c(0x8ed)===_0x2bb72c(0x62c))throw new _0x31dfe0(_0x2bb72c(0x2ed));else{const _0x11898b=_0x48370f['id'],_0x7b3eb2='customIcon_'+_0x11898b,_0x544d23=localStorage[_0x2bb72c(0x9a1)](_0x7b3eb2),_0x1fb5b0=_0x48370f['querySelector'](_0x2bb72c(0x3ee));if(_0x544d23)_0x1fb5b0[_0x2bb72c(0x280)]=_0x2bb72c(0x64e)+_0x544d23+_0x2bb72c(0x7fb);else{const _0x515f88=document[_0x2bb72c(0x3eb)](_0x2bb72c(0x8c2)+_0x11898b+_0x2bb72c(0x290)+_0x11898b+_0x2bb72c(0x17f))?.[_0x2bb72c(0x280)];_0x515f88&&(_0x1fb5b0[_0x2bb72c(0x280)]=_0x515f88);}}});}function _0xd23d61(){const _0x269b20=_0x17d1db;if('ijbnB'===_0x269b20(0x671)){if(_0x1999f4[_0x269b20(0x905)])return;const _0x1e8d3b=_0x204597['diaryCurrentPage'];if(_0x1e8d3b<=0x0)return;_0x21f295['isAnimatingDiary']=!![];const _0x25ebc0=_0x1e8d3b-0x1,_0x546f54=_0x19214c[_0x269b20(0xb18)](_0x269b20(0x3ba)+_0x1e8d3b),_0x480052=_0xa58219[_0x269b20(0xb18)](_0x269b20(0x3ba)+_0x25ebc0);_0x546f54&&_0x480052?(_0x480052[_0x269b20(0x79f)]['add'](_0x269b20(0x477)),_0x546f54[_0x269b20(0x79f)][_0x269b20(0x366)](_0x269b20(0x1b8)),_0x480052[_0x269b20(0x79f)][_0x269b20(0x366)](_0x269b20(0x46c)),_0x4c2d27(()=>{const _0x129c5a=_0x269b20;_0x546f54[_0x129c5a(0x79f)][_0x129c5a(0xb42)](_0x129c5a(0x46c),_0x129c5a(0x1b8)),_0x480052[_0x129c5a(0x79f)]['remove'](_0x129c5a(0x477)),_0x19af05[_0x129c5a(0x556)]=_0x25ebc0,_0x39de0e(),_0x5be788[_0x129c5a(0x905)]=![];},0x2bc)):_0x2c555e[_0x269b20(0x905)]=![];}else{const _0x5b46e6=_0x35d0f9[_0x269b20(0x9dd)][_0x269b20(0x9cd)](_0x3d704b=>_0x3d704b['id']===_0x35d0f9[_0x269b20(0xb34)]),_0x512ce6=_0x1f3fa9();let _0x14e547=[];if(_0x5b46e6&&_0x5b46e6[_0x269b20(0x416)]){if(_0x269b20(0xc18)===_0x269b20(0xc18)){const _0x229ac=_0x5b46e6[_0x269b20(0x416)][_0x269b20(0x485)](_0x18f097=>_0x18f097[_0x269b20(0xb12)]==='music'&&_0x18f097[_0x269b20(0xc5e)])[_0x269b20(0xbb5)](_0x450116=>({..._0x450116,'source':_0x269b20(0x5b6)}));_0x14e547[_0x269b20(0xb2f)](..._0x229ac);}else _0x36601b['classList']['remove'](_0x269b20(0x46c),'is-exiting-left'),_0x3b06ab[_0x269b20(0x79f)][_0x269b20(0xb42)](_0x269b20(0x77f)),_0x1ce6b2[_0x269b20(0x556)]=_0x1bee35,_0x594086(),_0x3560cf['isAnimatingDiary']=![];}if(_0x512ce6&&_0x35d0f9['conversationHistory']){const _0x2e07d9=_0x35d0f9['conversationHistory']['filter'](_0x5f0c6e=>_0x5f0c6e[_0x269b20(0xb12)]==='music'&&_0x5f0c6e[_0x269b20(0xc5e)])['map'](_0x137910=>({..._0x137910,'id':_0x269b20(0x4d4)+_0x137910[_0x269b20(0xaa4)],'source':'chat'}));_0x14e547[_0x269b20(0xb2f)](..._0x2e07d9);}const _0x104d3a=Array[_0x269b20(0x39e)](new Map(_0x14e547['map'](_0x4669de=>[_0x4669de[_0x269b20(0xc5e)],_0x4669de]))['values']());_0x35d0f9[_0x269b20(0x17b)]=_0x104d3a[_0x269b20(0xa99)]((_0x1016ab,_0x2a4c87)=>_0x2a4c87[_0x269b20(0xaa4)]-_0x1016ab[_0x269b20(0xaa4)]);}}function _0xe8c16b(_0x4b0734){const _0xf7b281=_0x17d1db;if(_0x4b0734<0x0||_0x4b0734>=_0x6e90aa['length'])return;_0x238931=_0x4b0734;const _0x148974=_0x6e90aa[_0x4b0734];_0x459e34['src']=_0x148974['playableUrl']||_0x148974[_0xf7b281(0x391)],_0x459e34[_0xf7b281(0xc36)](),_0x345cc1(),_0x54fd79();}function _0x345cc1(){const _0x55f640=_0x17d1db,_0x384658=_0x35d0f9[_0x55f640(0x17b)][_0x35d0f9['currentlyPlayingIndex']],_0x296432=_0x35d0f9['isPlaying'];_0x457652(),_0x339740();const _0x4bc176=document[_0x55f640(0x9c6)](_0x55f640(0x3c9));_0x4bc176[_0x55f640(0x175)](_0x4a5a35=>{const _0x170007=_0x55f640,_0x432ef5=_0x4a5a35['dataset'][_0x170007(0x8e6)],_0x4be78e=_0x4a5a35['querySelector']('.music-post-play-icon,\x20.music-share-play-icon');if(!_0x4be78e)return;_0x384658&&_0x432ef5===_0x384658['id']&&_0x296432?_0x170007(0xb19)!==_0x170007(0xb19)?(_0x1f0863(![]),_0x5e5312[_0x170007(0xce3)][_0x170007(0x850)]=''):_0x4be78e[_0x170007(0x65b)]='❚❚':_0x4be78e['textContent']='▶';});}function _0x54fd79(){const _0x31eb23=_0x17d1db;if('hOokd'===_0x31eb23(0x1cb))_0x4b6598(_0x1795ab);else try{localStorage[_0x31eb23(0x570)](_0x31eb23(0x3a7),JSON[_0x31eb23(0xcf9)]({'playlist':_0x35d0f9[_0x31eb23(0x17b)],'currentIndex':_0x35d0f9[_0x31eb23(0x863)]}));}catch(_0x2da895){console[_0x31eb23(0x4a1)]('保存播放器状态失败，真是没用。',_0x2da895);}}function _0x150eb5(){const _0x113404=_0x17d1db;try{const _0x3b4ddc=localStorage['getItem']('musicPlayerState');if(_0x3b4ddc){const {playlist:_0x280385,currentIndex:_0x5efbf6}=JSON[_0x113404(0x97b)](_0x3b4ddc);Array[_0x113404(0xc29)](_0x280385)&&_0x280385[_0x113404(0x968)]>0x0&&_0x5efbf6>-0x1&&(_0x35d0f9[_0x113404(0x17b)]=_0x280385,_0x35d0f9[_0x113404(0x863)]=_0x5efbf6,_0x35d0f9[_0x113404(0x705)]=![],_0x345cc1());}}catch(_0x35525f){console[_0x113404(0x4a1)]('切，加载播放器状态的时候出错了。',_0x35525f);}}function _0x3c79a4(_0x557137){const _0x1e64e2=_0x17d1db;if(window['diaryPressTimer'])clearTimeout(window[_0x1e64e2(0xa78)]);const _0x2f138e=_0x557137[_0x1e64e2(0xce3)][_0x1e64e2(0x58e)]('.diary-entry');if(!_0x2f138e)return;const _0x4cd022=_0x2f138e[_0x1e64e2(0x218)][_0x1e64e2(0xaa4)],_0x31b3f4=_0x2f138e['classList'][_0x1e64e2(0xbbc)](_0x1e64e2(0x809))?_0x1e64e2(0x809):'ai';if(!_0x4cd022)return;const _0x287b5f=()=>{const _0x4ff452=_0x1e64e2;_0x4ff452(0x499)===_0x4ff452(0x641)?(_0x114596['hasNewDMReply']=![],_0x3f1aac['classList'][_0x4ff452(0xb42)](_0x4ff452(0xaef))):window['diaryPressTimer']=setTimeout(()=>{const _0x4ffbbb=_0x4ff452;if(_0x557137[_0x4ffbbb(0xb12)]==='touchstart')_0x557137['preventDefault']();_0x4dc43f(parseInt(_0x4cd022,0xa),_0x31b3f4);},0x320);},_0x4a1d4f=()=>{const _0x3c29b1=_0x1e64e2;if(_0x3c29b1(0x98a)===_0x3c29b1(0x98a)){if(window[_0x3c29b1(0xa78)])clearTimeout(window[_0x3c29b1(0xa78)]);}else _0x4ae1f6['error'](_0x3c29b1(0x581),_0x4fadf2),_0x5897fd(_0x3c29b1(0x93c));};document[_0x1e64e2(0xafb)](_0x1e64e2(0xc4f),_0x4a1d4f,{'once':!![]}),document['addEventListener'](_0x1e64e2(0x9ff),_0x4a1d4f,{'once':!![]}),document[_0x1e64e2(0xafb)]('touchcancel',_0x4a1d4f,{'once':!![]}),_0x287b5f();}function _0x4dc43f(_0x1606a5,_0x14f575){const _0x2cd847=_0x17d1db;if(_0x2cd847(0xb01)!=='qzMst')_0x139949[_0x2cd847(0x8f1)][_0x2cd847(0x175)](_0x1760c6=>{const _0x5c0175=_0x2cd847,_0x52a94f=_0x50fd4c(_0x1760c6);if(_0x52a94f){const _0x356adb=_0x227ad9[_0x5c0175(0x7e9)](_0x5c0175(0x91f));_0x356adb[_0x5c0175(0x850)]=_0x52a94f['id'],_0x356adb['textContent']=_0x52a94f['name'],_0x1ba55f[_0x5c0175(0x364)](_0x356adb);}}),_0x530440[_0x2cd847(0x7d9)][_0x2cd847(0x31f)]=_0x2cd847(0xb91);else{const _0x54f0fe='diary-action-modal-'+_0x1606a5;let _0x15ec0f=document[_0x2cd847(0xb18)](_0x54f0fe);if(_0x15ec0f)return;const _0x453e31=_0x2cd847(0x497)+_0x54f0fe+_0x2cd847(0x906)+(_0x14f575==='ai'?_0x2cd847(0x3e4):'')+_0x2cd847(0x3ff);document[_0x2cd847(0x3f0)][_0x2cd847(0xbb4)](_0x2cd847(0xc9e),_0x453e31);const _0x312d86=document[_0x2cd847(0xb18)](_0x54f0fe),_0x25c555=()=>_0x312d86['remove']();_0x312d86[_0x2cd847(0x3eb)](_0x2cd847(0xa1b))[_0x2cd847(0x8df)]=_0x25c555,_0x312d86['querySelector'](_0x2cd847(0x69f))[_0x2cd847(0x8df)]=_0x25c555,_0x312d86[_0x2cd847(0x3eb)](_0x2cd847(0x50f))['onclick']=()=>{_0x15c111(_0x1606a5),_0x25c555();},_0x14f575==='ai'&&(_0x312d86[_0x2cd847(0x3eb)](_0x2cd847(0x730))[_0x2cd847(0x8df)]=()=>{_0x8fe85b(_0x1606a5),_0x25c555();});}}async function _0x15c111(_0x30a201){const _0x384392=_0x17d1db;if(_0x384392(0x471)==='YWWqu')_0x3e160f[_0x384392(0x4a1)](_0x384392(0x5ab),_0x1c097d);else{const _0x5a3a63=await _0x3a7c5b('确定要删除这篇日记吗？此操作不可撤销。');if(!_0x5a3a63)return;const _0x3c14b9=_0x35d0f9[_0x384392(0x3e7)][_0x384392(0x9cd)](_0x4579c4=>_0x4579c4[_0x384392(0x563)]===_0x35d0f9[_0x384392(0xc56)]);if(!_0x3c14b9)return;const _0x2d5a2e=_0x3c14b9[_0x384392(0x2fb)][_0x384392(0x59a)](_0x19fe8f=>_0x19fe8f['timestamp']===_0x30a201);if(_0x2d5a2e>-0x1){if(_0x384392(0x70e)===_0x384392(0x96c)){_0x4cb260(_0x384392(0x891));return;}else _0x3c14b9[_0x384392(0x2fb)][_0x384392(0x895)](_0x2d5a2e,0x1),_0x5c9c95(),_0x14f8e8(),_0x28dfd2(_0x384392(0xc26));}}}async function _0x8fe85b(_0x54353c){const _0x2663a6=_0x17d1db,_0x137f12=_0x35d0f9[_0x2663a6(0x3e7)][_0x2663a6(0x9cd)](_0x4e683a=>_0x4e683a[_0x2663a6(0x563)]===_0x35d0f9[_0x2663a6(0xc56)]);if(!_0x137f12)return;const _0x29026a=_0x137f12['entries'][_0x2663a6(0x59a)](_0x497795=>_0x497795[_0x2663a6(0xaa4)]===_0x54353c);_0x29026a>-0x1&&(_0x137f12[_0x2663a6(0x2fb)][_0x2663a6(0x895)](_0x29026a,0x1),_0x5c9c95(),_0x14f8e8(),await _0x127d38());}function _0x1f1326(){const _0x450ecb=_0x17d1db,_0x11b7ab=document[_0x450ecb(0xb18)](_0x450ecb(0x454));_0x11b7ab[_0x450ecb(0x280)]='';const _0x2a75f7=_0x35d0f9['characters'][_0x450ecb(0x485)](_0x357a77=>_0x35d0f9[_0x450ecb(0xa6c)][_0x450ecb(0x83f)](_0x5a82bb=>_0x5a82bb['type']===_0x450ecb(0x869)&&_0x5a82bb['participantIds']['includes'](_0x357a77['id'])));if(_0x2a75f7[_0x450ecb(0x968)]===0x0){_0x11b7ab[_0x450ecb(0x280)]=_0x450ecb(0x590);return;}_0x2a75f7['forEach'](_0x261bf1=>{const _0x36ebfb=_0x450ecb,_0x33d2fe=document[_0x36ebfb(0x7e9)]('li');_0x33d2fe[_0x36ebfb(0x73e)]=_0x36ebfb(0x3a8),_0x33d2fe[_0x36ebfb(0x218)][_0x36ebfb(0xca6)]=_0x261bf1['id'],_0x33d2fe[_0x36ebfb(0x280)]=_0x36ebfb(0xad6)+(_0x261bf1[_0x36ebfb(0x36b)]||_0x20a236)+_0x36ebfb(0x393)+_0x261bf1[_0x36ebfb(0x19d)]+_0x36ebfb(0x5d8),_0x33d2fe['addEventListener'](_0x36ebfb(0x9db),()=>{_0x33f9ef(_0x261bf1['id']);}),_0x33d2fe[_0x36ebfb(0x3eb)](_0x36ebfb(0x455))[_0x36ebfb(0xafb)](_0x36ebfb(0x9db),()=>{_0x33f9ef(_0x261bf1['id']);}),_0x33d2fe[_0x36ebfb(0x3eb)](_0x36ebfb(0xa1f))[_0x36ebfb(0xafb)]('click',_0x34fbad=>{_0x34fbad['stopPropagation'](),_0x15cb61(_0x261bf1['id']);}),_0x11b7ab[_0x36ebfb(0x364)](_0x33d2fe);});}function _0x33f9ef(_0x18e2d6){const _0x5d0671=_0x17d1db;if('kOmiw'!==_0x5d0671(0xb06)){const _0x4982b0=_0x52ae89[_0x5d0671(0x7e9)](_0x5d0671(0x591));_0x4982b0['className']=_0x5d0671(0x715),_0x4982b0[_0x5d0671(0x218)]['id']=_0x48de0f['id'];const _0x356120=_0x3c6ef0['id']===_0x4c4360[_0x5d0671(0x742)]?_0x5d0671(0x90c):'';_0x4982b0[_0x5d0671(0x280)]=_0x5d0671(0x797)+(_0x227cd1['avatar']||_0x5ee659)+'\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3c0098['name']+_0x356120+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>'+_0x4b05d6[_0x5d0671(0x1ab)]['substring'](0x0,0x64)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4982b0[_0x5d0671(0xafb)]('click',()=>_0x5e1ccf(_0x1d4107['id'])),_0x114227['appendChild'](_0x4982b0);}else{const _0x1624d7=_0x45939a(_0x18e2d6);if(!_0x1624d7)return;_0x35d0f9[_0x5d0671(0xc56)]=_0x18e2d6;const _0x4bb390=_0x35d0f9[_0x5d0671(0x3e7)]['find'](_0x1082e0=>_0x1082e0['characterId']===_0x18e2d6),_0x1997f2=_0x4bb390?_0x4bb390[_0x5d0671(0x2fb)]['length']:0x0,_0x36837b=0x2;_0x35d0f9[_0x5d0671(0x556)]=Math[_0x5d0671(0xbc9)](0x0,Math[_0x5d0671(0x85e)](_0x1997f2/_0x36837b)-0x1),document[_0x5d0671(0xb18)]('diary-char-name-header')[_0x5d0671(0x65b)]=_0x1624d7[_0x5d0671(0x19d)]+_0x5d0671(0xa64),_0x14f8e8(),_0x198934('diaryView',_0x5d0671(0xaf1));}}function _0x14f8e8(){const _0x54d5ca=_0x17d1db;if(_0x54d5ca(0x4cf)===_0x54d5ca(0x4cf)){const _0x4a43ca=document['getElementById'](_0x54d5ca(0xbd7)),_0xdf4e36=document[_0x54d5ca(0xb18)](_0x54d5ca(0x6ab));_0x4a43ca[_0x54d5ca(0x280)]='',_0xdf4e36[_0x54d5ca(0x280)]='';const _0x8c1e4=_0x564dab()||{'name':'我'},_0x57d08b=_0x35d0f9[_0x54d5ca(0x3e7)][_0x54d5ca(0x9cd)](_0x2cf249=>_0x2cf249[_0x54d5ca(0x563)]===_0x35d0f9[_0x54d5ca(0xc56)]);if(!_0x57d08b||!_0x57d08b[_0x54d5ca(0x2fb)]||_0x57d08b[_0x54d5ca(0x2fb)][_0x54d5ca(0x968)]===0x0){_0x4a43ca['innerHTML']=_0x54d5ca(0xa55),_0xdf4e36['innerHTML']=_0x54d5ca(0x1f6),document[_0x54d5ca(0xb18)](_0x54d5ca(0x5d5))['addEventListener'](_0x54d5ca(0x9db),_0x1bc526),document[_0x54d5ca(0xb18)](_0x54d5ca(0x1b4))[_0x54d5ca(0xafb)](_0x54d5ca(0x9db),_0x127d38);return;}const _0x250ca7=0x2,_0x44b3d8=[..._0x57d08b[_0x54d5ca(0x2fb)]][_0x54d5ca(0xa99)]((_0x41f54c,_0x3da4df)=>_0x41f54c[_0x54d5ca(0xaa4)]-_0x3da4df[_0x54d5ca(0xaa4)]),_0x10fa06=[];for(let _0x27d713=0x0;_0x27d713<_0x44b3d8[_0x54d5ca(0x968)];_0x27d713+=_0x250ca7){_0x10fa06[_0x54d5ca(0xb2f)](_0x44b3d8[_0x54d5ca(0x571)](_0x27d713,_0x27d713+_0x250ca7));}const _0x528124=_0x10fa06[_0x54d5ca(0x968)];_0x10fa06['forEach']((_0xebca82,_0x1c7bec)=>{const _0x11ce79=_0x54d5ca,_0x3eb51c=document['createElement']('div');_0x3eb51c[_0x11ce79(0x73e)]=_0x11ce79(0x565),_0x3eb51c['id']=_0x11ce79(0x3ba)+_0x1c7bec,_0x1c7bec===_0x35d0f9[_0x11ce79(0x556)]&&_0x3eb51c[_0x11ce79(0x79f)][_0x11ce79(0x366)](_0x11ce79(0x46c)),_0xebca82[_0x11ce79(0x175)](_0x12b37d=>{const _0x18ffc4=_0x11ce79,_0x19f4aa=_0x12b37d[_0x18ffc4(0x2f3)]===_0x18ffc4(0x809)?_0x18ffc4(0x809):'ai',_0x493292=_0x12b37d[_0x18ffc4(0x2f3)]===_0x18ffc4(0x809)?_0x8c1e4[_0x18ffc4(0x19d)]:_0x45939a(_0x12b37d['author'])[_0x18ffc4(0x19d)],_0x1c055e=document[_0x18ffc4(0x7e9)](_0x18ffc4(0x591));_0x1c055e[_0x18ffc4(0x73e)]=_0x18ffc4(0xa62)+_0x19f4aa,_0x1c055e['dataset'][_0x18ffc4(0xaa4)]=_0x12b37d[_0x18ffc4(0xaa4)],_0x1c055e[_0x18ffc4(0x7d9)]['borderBottom']=_0x18ffc4(0x9ba),_0x1c055e['style'][_0x18ffc4(0xa7f)]='0',_0x1c055e[_0x18ffc4(0x280)]=_0x18ffc4(0xc7f)+_0x493292+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>'+new Date(_0x12b37d[_0x18ffc4(0xaa4)])[_0x18ffc4(0x8f0)]('zh-CN')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>'+_0x12b37d[_0x18ffc4(0x9bc)][_0x18ffc4(0x39f)](/\n/g,'<br>')+_0x18ffc4(0x6f8),_0x3eb51c[_0x18ffc4(0x364)](_0x1c055e);}),_0x4a43ca[_0x11ce79(0x364)](_0x3eb51c);}),_0xdf4e36[_0x54d5ca(0x280)]=_0x54d5ca(0x631)+(_0x35d0f9[_0x54d5ca(0x556)]+0x1)+_0x54d5ca(0x3de)+_0x528124+_0x54d5ca(0x8cf),document[_0x54d5ca(0xb18)](_0x54d5ca(0x146))[_0x54d5ca(0x4f1)]=_0x35d0f9[_0x54d5ca(0x556)]===0x0,document[_0x54d5ca(0xb18)](_0x54d5ca(0x469))[_0x54d5ca(0x4f1)]=_0x35d0f9[_0x54d5ca(0x556)]===_0x528124-0x1,document['getElementById'](_0x54d5ca(0x146))['addEventListener'](_0x54d5ca(0x9db),_0x36aaf0),document[_0x54d5ca(0xb18)](_0x54d5ca(0x469))[_0x54d5ca(0xafb)](_0x54d5ca(0x9db),_0x7d8fd5),document['getElementById'](_0x54d5ca(0x5d5))['addEventListener'](_0x54d5ca(0x9db),_0x1bc526),document[_0x54d5ca(0xb18)](_0x54d5ca(0x1b4))[_0x54d5ca(0xafb)](_0x54d5ca(0x9db),_0x127d38);}else _0x3ab658[_0x54d5ca(0xb18)](_0x54d5ca(0x2e4))[_0x54d5ca(0xafb)](_0x54d5ca(0x9db),async()=>{_0x323b77(_0x5735c4,_0x573c6f,!![]);});}function _0x7d8fd5(){const _0x31611c=_0x17d1db;if('ffrIl'!==_0x31611c(0x356)){if(_0x35d0f9[_0x31611c(0x905)])return;const _0x4c0209=_0x35d0f9[_0x31611c(0x556)],_0x17e335=Math[_0x31611c(0x85e)](_0x35d0f9[_0x31611c(0x3e7)]['find'](_0x34426e=>_0x34426e[_0x31611c(0x563)]===_0x35d0f9['activeDiaryCharacterId'])[_0x31611c(0x2fb)][_0x31611c(0x968)]/0x2);if(_0x4c0209>=_0x17e335-0x1)return;_0x35d0f9['isAnimatingDiary']=!![];const _0xe63d8f=_0x4c0209+0x1,_0x37d8db=document[_0x31611c(0xb18)](_0x31611c(0x3ba)+_0x4c0209),_0xddefbe=document['getElementById'](_0x31611c(0x3ba)+_0xe63d8f);_0x37d8db&&_0xddefbe?(_0xddefbe[_0x31611c(0x79f)][_0x31611c(0x366)](_0x31611c(0x77f)),_0x37d8db['classList'][_0x31611c(0x366)](_0x31611c(0xb4b)),_0xddefbe[_0x31611c(0x79f)][_0x31611c(0x366)]('is-visible'),setTimeout(()=>{const _0x323bbe=_0x31611c;_0x37d8db[_0x323bbe(0x79f)][_0x323bbe(0xb42)](_0x323bbe(0x46c),'is-exiting-left'),_0xddefbe[_0x323bbe(0x79f)][_0x323bbe(0xb42)](_0x323bbe(0x77f)),_0x35d0f9[_0x323bbe(0x556)]=_0xe63d8f,_0x14f8e8(),_0x35d0f9['isAnimatingDiary']=![];},0x2bc)):_0x35d0f9[_0x31611c(0x905)]=![];}else _0x4b826c[_0x31611c(0xb2f)](_0x28545c['slice'](_0x299c0a,_0x1e3eb7+_0x5de160));}function _0x36aaf0(){const _0x4b3979=_0x17d1db;if('CLDVL'!==_0x4b3979(0x4fe)){const _0x10a5b2=_0x16d249[_0x4b3979(0x900)](_0x4f98a4);_0x14162b[_0x4b3979(0x7d9)][_0x4b3979(0x2f8)]=_0x4b3979(0x575)+_0x10a5b2+'\x27)';}else{if(_0x35d0f9[_0x4b3979(0x905)])return;const _0x2650fd=_0x35d0f9[_0x4b3979(0x556)];if(_0x2650fd<=0x0)return;_0x35d0f9[_0x4b3979(0x905)]=!![];const _0x2e08fe=_0x2650fd-0x1,_0x5f4960=document['getElementById']('diary-page-'+_0x2650fd),_0x2899ea=document[_0x4b3979(0xb18)]('diary-page-'+_0x2e08fe);_0x5f4960&&_0x2899ea?_0x4b3979(0x8ab)!==_0x4b3979(0x8ab)?_0x495ffd(!![]):(_0x2899ea[_0x4b3979(0x79f)][_0x4b3979(0x366)](_0x4b3979(0x477)),_0x5f4960['classList'][_0x4b3979(0x366)](_0x4b3979(0x1b8)),_0x2899ea['classList'][_0x4b3979(0x366)](_0x4b3979(0x46c)),setTimeout(()=>{const _0x25425b=_0x4b3979;if(_0x25425b(0x9c5)!==_0x25425b(0x41a))_0x5f4960[_0x25425b(0x79f)]['remove']('is-visible',_0x25425b(0x1b8)),_0x2899ea[_0x25425b(0x79f)][_0x25425b(0xb42)]('is-entering-from-left'),_0x35d0f9[_0x25425b(0x556)]=_0x2e08fe,_0x14f8e8(),_0x35d0f9[_0x25425b(0x905)]=![];else{const _0x18d349=_0x94f26d[_0x25425b(0x99c)]['map'](_0x467cf1=>_0xe010a4[_0x25425b(0x38f)][_0x25425b(0x9cd)](_0x4511bd=>_0x4511bd['id']===_0x467cf1))[_0x25425b(0x485)](_0x38471a)[_0x25425b(0xbb5)](_0x223b7c=>_0x25425b(0x309)+_0x223b7c['name']+'\x0a'+_0x223b7c[_0x25425b(0x9bc)])['join']('');_0x18d349&&(_0x2f7b56='\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a'+_0x18d349);}},0x2bc)):_0x4b3979(0xb75)===_0x4b3979(0xb75)?_0x35d0f9[_0x4b3979(0x905)]=![]:(_0x20147c(![]),_0x11534d[_0x4b3979(0x4a1)](_0x4b3979(0xa5a),_0x5022ad),_0x2cab5a('解析失败了，笨蛋！\x20'+_0x40b7eb[_0x4b3979(0x5a1)]),_0x4dfdc3[_0x4b3979(0x3eb)](_0x4b3979(0x69b))[_0x4b3979(0x65b)]=_0x4b3979(0xadc));}}function _0x1bc526(){const _0x42ec3d=_0x17d1db;if(_0x42ec3d(0x333)===_0x42ec3d(0x333))return new Promise(_0x5c9c39=>{const _0x5e83a9=_0x42ec3d,_0x5db5a6=_0x5e83a9(0x9f1);document[_0x5e83a9(0x3f0)][_0x5e83a9(0xbb4)](_0x5e83a9(0xc9e),_0x5db5a6);const _0x504487=document[_0x5e83a9(0xb18)](_0x5e83a9(0x29b)),_0x43120a=document[_0x5e83a9(0xb18)](_0x5e83a9(0x5be)),_0x22ab8e=document[_0x5e83a9(0xb18)]('diary-modal-save'),_0x5e5edd=document[_0x5e83a9(0xb18)](_0x5e83a9(0x67a)),_0x5353ff=_0x504487['querySelector']('.choice-modal-backdrop'),_0x4d4769=()=>{const _0x369e0f=_0x5e83a9;_0x504487[_0x369e0f(0xb42)](),_0x5c9c39();};_0x22ab8e[_0x5e83a9(0x8df)]=()=>{const _0x35c9d4=_0x5e83a9;if('JJrym'!==_0x35c9d4(0x78b))_0x21b36f(_0x43120a[_0x35c9d4(0x850)]),_0x4d4769();else{const _0x2b66af=_0x11046b[_0x28997b[_0x35c9d4(0x968)]-0x1];(!_0x42f58c||_0x2b66af[_0x35c9d4(0xaa4)]>_0x3084e3[_0x35c9d4(0xaa4)])&&(_0x1e67f9=_0x2b66af);}},_0x5e5edd['onclick']=_0x4d4769,_0x5353ff[_0x5e83a9(0x8df)]=_0x4d4769;});else _0xf9b416(),_0x230537(![]);}function _0x21b36f(_0x52fa94){const _0x251f06=_0x17d1db,_0x243a39=_0x52fa94['trim']();if(!_0x243a39||!_0x35d0f9[_0x251f06(0xc56)])return;let _0x22910e=_0x35d0f9[_0x251f06(0x3e7)][_0x251f06(0x9cd)](_0x7ae09f=>_0x7ae09f[_0x251f06(0x563)]===_0x35d0f9['activeDiaryCharacterId']);!_0x22910e&&('GIfaE'!==_0x251f06(0x8e1)?(_0x22910e={'characterId':_0x35d0f9['activeDiaryCharacterId'],'entries':[]},_0x35d0f9['diaries']['push'](_0x22910e)):_0x3eb1b8+=_0x251f06(0xbac));_0x22910e[_0x251f06(0x2fb)]['push']({'timestamp':Date['now'](),'author':_0x251f06(0x809),'content':_0x243a39}),_0x5c9c95();const _0x45e4fc=_0x22910e['entries'][_0x251f06(0x968)];_0x35d0f9['diaryCurrentPage']=Math['ceil'](_0x45e4fc/0x2)-0x1,_0x14f8e8();}async function _0x127d38(){const _0x5dc68d=_0x17d1db;if(_0x5dc68d(0xc8b)===_0x5dc68d(0xc8b)){const _0x28be53=_0x35d0f9[_0x5dc68d(0x3e7)][_0x5dc68d(0x9cd)](_0x15a404=>_0x15a404[_0x5dc68d(0x563)]===_0x35d0f9[_0x5dc68d(0xc56)]),_0x5e8b7f=_0x35d0f9['activeDiaryCharacterId'],_0x1315af=_0x45939a(_0x5e8b7f);if(!_0x1315af||_0x35d0f9[_0x5dc68d(0x2eb)])return;_0x13f6ba(!![],_0x5dc68d(0xcda)),await new Promise(_0x57c5bf=>setTimeout(_0x57c5bf,0x32)),_0x35d0f9[_0x5dc68d(0x2eb)]=!![];let _0xb65b8c=[];try{const _0x4b6cfb=_0x564dab()||{'name':'你'},_0x25f3dc=_0x54bfed(_0x5e8b7f),{omniText:_0x449551}=_0xd9a204(_0x5e8b7f,_0x35d0f9[_0x5dc68d(0xba6)]);let _0x44db71='';if(_0x1315af['linkedWorldBookIds']&&_0x1315af[_0x5dc68d(0x99c)][_0x5dc68d(0x968)]>0x0){if('EtAWQ'!==_0x5dc68d(0x317)){const _0xfd85b6=_0x1315af['linkedWorldBookIds'][_0x5dc68d(0xbb5)](_0x599536=>_0x35d0f9[_0x5dc68d(0x38f)][_0x5dc68d(0x9cd)](_0x36818e=>_0x36818e['id']===_0x599536))[_0x5dc68d(0x485)](Boolean)[_0x5dc68d(0xbb5)](_0x4875ff=>_0x5dc68d(0x2b1)+_0x4875ff[_0x5dc68d(0x19d)]+'\x0a'+_0x4875ff[_0x5dc68d(0x9bc)])[_0x5dc68d(0x102)]('');if(_0xfd85b6)_0x44db71=_0x5dc68d(0x79e)+_0xfd85b6;}else{const _0x4cc9f0=_0x2925b7[_0x5dc68d(0xb18)](_0x1d0f70);if(_0x4cc9f0&&_0x2d1f26)_0x4cc9f0[_0x5dc68d(0x9c9)]=_0x56180f[_0x5dc68d(0x900)](_0x1855e4);}}const _0xad28fb=_0x4b6cfb['persona']?_0x5dc68d(0x1bb)+_0x4b6cfb[_0x5dc68d(0x19d)]+'”的补充信息\x0a'+_0x4b6cfb['persona']:'',_0x20b95e=_0x20e654(),_0x3e703f=_0xa3fb61(_0x5e8b7f);let _0x1f03a4=_0x5dc68d(0xcf2);if(_0x28be53&&_0x28be53[_0x5dc68d(0x2fb)]){const _0x56374c=_0x28be53[_0x5dc68d(0x2fb)][_0x5dc68d(0x485)](_0x2bc893=>_0x2bc893[_0x5dc68d(0x2f3)]===_0x5dc68d(0x809))['pop']();_0x56374c&&(_0x1f03a4=_0x56374c[_0x5dc68d(0x9bc)]);}const _0x5ec347=_0x5dc68d(0x106)+_0x1315af[_0x5dc68d(0x19d)]+_0x5dc68d(0x5bc)+_0x4b6cfb['name']+_0x5dc68d(0x9ae)+_0x4b6cfb[_0x5dc68d(0x19d)]+_0x5dc68d(0x288)+_0x1f03a4+_0x5dc68d(0x564)+_0x1315af['persona']+'\x0a'+_0xad28fb+'\x0a'+_0x44db71+'\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20'+new Date()[_0x5dc68d(0x8f0)](_0x5dc68d(0x984),{'dateStyle':_0x5dc68d(0x363),'timeStyle':_0x5dc68d(0x1b9)})+_0x5dc68d(0x7a6)+_0x5cd9d4(new Date(_0x28be53?.[_0x5dc68d(0x2fb)]?.['at'](-0x1)?.[_0x5dc68d(0xaa4)]||Date[_0x5dc68d(0x5ee)]()))+_0x5dc68d(0x35d)+(_0x449551||_0x5dc68d(0xbe8))+'\x0a'+_0x3e703f+_0x5dc68d(0x939)+(_0x20b95e||_0x5dc68d(0x622))+_0x5dc68d(0x8a4);_0xb65b8c=[{'role':_0x5dc68d(0x773),'content':_0x5ec347},{'role':_0x5dc68d(0x809),'content':_0x5dc68d(0x8c3)}];const _0x44bee2=await _0xb7fe2e(_0xb65b8c);if(_0x44bee2){let _0x5e140d=_0x35d0f9[_0x5dc68d(0x3e7)][_0x5dc68d(0x9cd)](_0x4e11ba=>_0x4e11ba[_0x5dc68d(0x563)]===_0x5e8b7f);!_0x5e140d&&(_0x5e140d={'characterId':_0x5e8b7f,'entries':[]},_0x35d0f9['diaries'][_0x5dc68d(0xb2f)](_0x5e140d));_0x5e140d[_0x5dc68d(0x2fb)][_0x5dc68d(0xb2f)]({'timestamp':Date[_0x5dc68d(0x5ee)](),'author':_0x5e8b7f,'content':_0x44bee2}),_0x5c9c95();const _0x33ac91=_0x5e140d[_0x5dc68d(0x2fb)][_0x5dc68d(0x968)];_0x35d0f9['diaryCurrentPage']=Math[_0x5dc68d(0x85e)](_0x33ac91/0x2)-0x1,_0x14f8e8();}}catch(_0x4c7cd2){_0x28dfd2(_0x5dc68d(0xb41)+_0x4c7cd2[_0x5dc68d(0x5a1)]);}finally{_0x13f6ba(![]),_0x35d0f9[_0x5dc68d(0x2eb)]=![];}}else{if(typeof _0x24866f===_0x5dc68d(0xb1e))_0x48a54e[_0x5dc68d(0xb2f)](_0x270936);}}function _0x31c03c(){const _0x542b9c=_0x17d1db,_0x2455d4=document[_0x542b9c(0xb18)](_0x542b9c(0x63a)),_0x2f5c67=document[_0x542b9c(0xb18)](_0x542b9c(0x47d)),_0x2c0267=document[_0x542b9c(0x3eb)](_0x542b9c(0x8fc)),_0x1a7676=document[_0x542b9c(0xb18)](_0x542b9c(0xb29));_0x1a7676[_0x542b9c(0x79f)]['toggle'](_0x542b9c(0x50c),_0x35d0f9[_0x542b9c(0x116)]===_0x542b9c(0x52c)),_0x1a7676[_0x542b9c(0x79f)][_0x542b9c(0x34b)](_0x542b9c(0xad5),_0x35d0f9[_0x542b9c(0x116)]===_0x542b9c(0x408)),_0x35d0f9[_0x542b9c(0x116)]==='galgame'?_0x542b9c(0xc21)===_0x542b9c(0xc21)?(_0x2455d4['style'][_0x542b9c(0x31f)]=_0x542b9c(0x9ba),_0x2f5c67[_0x542b9c(0x7d9)][_0x542b9c(0x31f)]='block'):_0x3fe913[_0x542b9c(0x364)](_0x395d20['createElement']('div')):_0x542b9c(0x8aa)!==_0x542b9c(0x8aa)?(_0x5c78d3['image']=_0x1e404c,_0x521582=!![]):(_0x2455d4['style']['display']=_0x542b9c(0xb91),_0x2f5c67[_0x542b9c(0x7d9)]['display']=_0x542b9c(0x9ba),setTimeout(()=>{const _0x468aaf=_0x542b9c,_0x4adbae=_0x2455d4[_0x468aaf(0x3eb)]('#message-anchor');_0x4adbae?_0x4adbae['scrollIntoView']({'behavior':'auto','block':_0x468aaf(0x84e)}):_0x2455d4[_0x468aaf(0x14f)]=_0x2455d4[_0x468aaf(0x3aa)];},0x32)),_0x2c0267[_0x542b9c(0x7d9)]['display']=_0x542b9c(0xb91);}function _0x4b8772(){const _0xfbc2c5=_0x17d1db,_0x547081=document[_0xfbc2c5(0xb18)](_0xfbc2c5(0x3af)),_0x503466=document[_0xfbc2c5(0xb18)](_0xfbc2c5(0x3b2));if(_0x35d0f9[_0xfbc2c5(0x5d2)][_0xfbc2c5(0x968)]>0x0){const _0x3cacff=_0x35d0f9[_0xfbc2c5(0x5d2)][_0xfbc2c5(0x3d9)]();_0x547081[_0xfbc2c5(0x65b)]=_0x3cacff[_0xfbc2c5(0x878)]===_0xfbc2c5(0xc75)?'旁白':_0x3cacff[_0xfbc2c5(0x878)],_0x503466[_0xfbc2c5(0x65b)]=_0x3cacff[_0xfbc2c5(0xa56)],_0x3cacff[_0xfbc2c5(0x878)]!==_0xfbc2c5(0xc75)&&_0x4fe224(_0x35d0f9[_0xfbc2c5(0x693)],_0x3cacff[_0xfbc2c5(0xaa2)]);}else{const _0x2fc5e7=_0x35d0f9[_0xfbc2c5(0xadf)][_0x35d0f9['activeMeetingCharId']];if(_0x2fc5e7&&_0x2fc5e7[_0xfbc2c5(0x968)]>0x0){_0x35d0f9[_0xfbc2c5(0x5d2)]=[..._0x2fc5e7];const _0x3c0519=_0x35d0f9[_0xfbc2c5(0x5d2)][_0xfbc2c5(0x3d9)]();_0x547081['textContent']=_0x3c0519[_0xfbc2c5(0x878)]===_0xfbc2c5(0xc75)?'旁白':_0x3c0519['speaker'],_0x503466[_0xfbc2c5(0x65b)]=_0x3c0519[_0xfbc2c5(0xa56)],_0x3c0519['speaker']!==_0xfbc2c5(0xc75)&&_0x4fe224(_0x35d0f9[_0xfbc2c5(0x693)],_0x3c0519['emotion']);}else{if('VnLmi'==='XODLa'){if(!_0x5898f6)return;const _0xc1a72=_0x29f3eb(_0x505d02['getElementById'](_0xfbc2c5(0xac4))[_0xfbc2c5(0x850)]),_0x56817d=_0x41825f(_0x59ab58[_0xfbc2c5(0xb18)](_0xfbc2c5(0x311))['value']),_0x328e18=_0x47624d(_0x25453a[_0xfbc2c5(0xb18)](_0xfbc2c5(0x6ec))[_0xfbc2c5(0x850)])/0x64,_0x11c159=_0x74c964[_0xfbc2c5(0xb18)](_0xfbc2c5(0x88d));_0x11c159&&(_0x11c159[_0xfbc2c5(0x7d9)][_0xfbc2c5(0x4a6)]=0x55*_0x328e18+'%',_0x11c159[_0xfbc2c5(0x7d9)][_0xfbc2c5(0x62d)]=0x55*_0x328e18+'%',_0x11c159[_0xfbc2c5(0x7d9)]['left']=_0xc1a72+'%',_0x11c159['style'][_0xfbc2c5(0x5e0)]=_0x56817d+'%',_0x11c159[_0xfbc2c5(0x7d9)][_0xfbc2c5(0x33b)]='translate(-50%,\x20-100%)');}else _0x547081['textContent']='旁白',_0x503466[_0xfbc2c5(0x65b)]=_0xfbc2c5(0x8da);}}}async function _0x4fe224(_0x3862e1,_0x1d0e64){const _0x497c2f=_0x17d1db,_0x1d48e1=document[_0x497c2f(0xb18)](_0x497c2f(0x3d3)),_0x3e9a89=document[_0x497c2f(0xb18)](_0x497c2f(0x4b2)),_0x45e6ed=_0x45939a(_0x3862e1),_0x54e9a8=_0x45e6ed?.[_0x497c2f(0x297)]||{'x':0x32,'y':0x64,'scale':0x1},_0x24820a=0x50*_0x54e9a8[_0x497c2f(0xbd5)];_0x3e9a89['style'][_0x497c2f(0x4a6)]=_0x24820a+'%',_0x3e9a89[_0x497c2f(0x7d9)][_0x497c2f(0x62d)]=_0x24820a+'%',_0x3e9a89['style'][_0x497c2f(0x1fd)]=_0x54e9a8['x']+'%',_0x3e9a89[_0x497c2f(0x7d9)][_0x497c2f(0x5e0)]=_0x54e9a8['y']+'%',_0x3e9a89['style']['transform']=_0x497c2f(0x9fe),_0x3e9a89[_0x497c2f(0x7d9)][_0x497c2f(0x562)]=_0x497c2f(0x937);const _0x341294=[_0x497c2f(0x680),_0x497c2f(0x582),_0x497c2f(0x5b9),_0x497c2f(0x3dd),'shy'],_0x342077=_0x341294[_0x497c2f(0xb63)](_0x1d0e64)?_0x1d0e64:_0x497c2f(0x680);try{const _0x52d9e5=await _0x5288fd('char_sprite_'+_0x342077+'_'+_0x3862e1);if(_0x52d9e5)_0x497c2f(0x413)!==_0x497c2f(0x524)?_0x1d48e1[_0x497c2f(0x9c9)]&&_0x1d48e1[_0x497c2f(0x7d9)][_0x497c2f(0x6d2)]!=='0'?(_0x1d48e1[_0x497c2f(0x7d9)][_0x497c2f(0x6d2)]=0x0,setTimeout(()=>{const _0x221f3f=_0x497c2f;_0x1d48e1['src']=URL[_0x221f3f(0x900)](_0x52d9e5),_0x1d48e1[_0x221f3f(0x7d9)]['opacity']=0x1;},0x96)):_0x497c2f(0x76f)!==_0x497c2f(0xab8)?(_0x1d48e1[_0x497c2f(0x9c9)]=URL[_0x497c2f(0x900)](_0x52d9e5),_0x1d48e1[_0x497c2f(0x7d9)][_0x497c2f(0x6d2)]=0x1):(_0x29e86d['activeUserProfileId']=_0x32ac73,_0x2ac311(),_0x361fa8(_0x497c2f(0x81d)),_0x3c68ba(),_0x14fcdb[_0x497c2f(0xb18)](_0x497c2f(0x80a))[_0x497c2f(0x7d9)]['display']=_0x497c2f(0x9ba)):(_0x4dc96b(_0x97a2bb['id']),_0xeb7131(_0x497c2f(0x745)+_0x18ca48[_0x497c2f(0x19d)]+_0x497c2f(0x130)),_0xa33d7f(![]));else{const _0x43b8f2=await _0x5288fd('char_sprite_normal_'+_0x3862e1);_0x1d48e1['src']=_0x43b8f2?URL['createObjectURL'](_0x43b8f2):'';}}catch(_0x2b7344){_0x497c2f(0xaa9)!==_0x497c2f(0xa97)?(console[_0x497c2f(0x4a1)](_0x497c2f(0x296),_0x2b7344),document[_0x497c2f(0xb18)](_0x497c2f(0x2e9))[_0x497c2f(0x9c9)]='',document['getElementById'](_0x497c2f(0xbb2))[_0x497c2f(0x9c9)]=''):_0x197639(_0x2f5761);}}let _0x5ab412=![],_0x35b52d={'isDragging':![],'isResizing':![],'startX':0x0,'startY':0x0,'startLeft':0x0,'startTop':0x0,'startWidth':0x0,'startHeight':0x0};const _0x796ec2=document[_0x17d1db(0xb18)](_0x17d1db(0x43d)),_0x5d6d06=document['getElementById'](_0x17d1db(0x692)),_0x501d4c=document['getElementById']('sprite-cancel-button'),_0xac3bc5=document[_0x17d1db(0xb18)](_0x17d1db(0x5c2)),_0xce212b=document[_0x17d1db(0xb18)](_0x17d1db(0x216)),_0x2ee0f6=document[_0x17d1db(0xb18)](_0x17d1db(0x4b2)),_0x50797d=document[_0x17d1db(0xb18)]('sprite-resize-handle'),_0x3c233d=document[_0x17d1db(0xb18)](_0x17d1db(0x4bf));let _0x4ce994={};function _0x4d5015(){const _0x44315a=_0x17d1db,_0x5fefa3=_0x45939a(_0x35d0f9[_0x44315a(0x693)]);if(!_0x5fefa3)return;_0x5ab412=!![],_0xce212b[_0x44315a(0x7d9)][_0x44315a(0x31f)]=_0x44315a(0xb91);const _0x3ee4a5=_0x5fefa3['spriteTransform']||{'x':0x32,'y':0x64,'scale':0x1};document[_0x44315a(0xb18)](_0x44315a(0x931))['value']=_0x3ee4a5['x'],document[_0x44315a(0xb18)](_0x44315a(0xc05))['value']=_0x3ee4a5['y'],document[_0x44315a(0xb18)](_0x44315a(0x5b8))['value']=_0x3ee4a5[_0x44315a(0xbd5)]*0x64,_0x4ce994={..._0x3ee4a5},document[_0x44315a(0xb18)]('galgame-textbox-container')[_0x44315a(0x7d9)][_0x44315a(0x31f)]=_0x44315a(0x9ba),document[_0x44315a(0xb18)]('galgame-sprite-adjust-ui')[_0x44315a(0x7d9)][_0x44315a(0x31f)]=_0x44315a(0x9ba);}function _0x3a483d(_0x1f18ec=![]){const _0x3c75d2=_0x17d1db;_0x5ab412=![],_0xce212b['style'][_0x3c75d2(0x31f)]='none',document[_0x3c75d2(0xb18)](_0x3c75d2(0x399))[_0x3c75d2(0x7d9)]['display']=_0x3c75d2(0xb91),document[_0x3c75d2(0xb18)](_0x3c75d2(0x2f4))[_0x3c75d2(0x7d9)][_0x3c75d2(0x31f)]='block';if(!_0x1f18ec){if(_0x3c75d2(0x3da)==='wZSaD'){const _0x116fda=_0x45939a(_0x35d0f9[_0x3c75d2(0x693)]);_0x116fda&&(_0x116fda[_0x3c75d2(0x297)]=_0x4ce994,_0x4fe224(_0x35d0f9['activeMeetingCharId'],_0x3c75d2(0x680)));}else return _0x3c75d2(0x6ce)+_0x443bd2;}}function _0xce2e8e(){const _0x338dc8=_0x17d1db;if('xILGD'===_0x338dc8(0x36d)){_0x5ed994['currentLivestreamSpeechQueue']=_0x282bac['streamerSpeech'],_0x429a29[_0x338dc8(0x2e0)]=0x0;const _0x26a622=_0xa4313d[_0x338dc8(0x7fa)][0x0],_0x3a49d4=_0x1f5a14['getElementById'](_0x338dc8(0x84d));_0x3a49d4[_0x338dc8(0x65b)]=_0x26a622[_0x338dc8(0xa56)],_0x272d07(_0x29ed31['id'],_0x26a622[_0x338dc8(0xaa2)]),_0x229fa4[_0x338dc8(0x39a)][_0x338dc8(0xb2f)]({'type':_0x338dc8(0xc58),'speaker':_0x449110[_0x338dc8(0x19d)],'content':_0x26a622[_0x338dc8(0xa56)],'emotion':_0x26a622[_0x338dc8(0xaa2)]});}else{const _0x43a454=_0x45939a(_0x35d0f9[_0x338dc8(0x693)]);if(!_0x43a454)return;const _0x153a12=parseFloat(document[_0x338dc8(0xb18)]('sprite-slider-x')[_0x338dc8(0x850)]),_0x3b8583=parseFloat(document[_0x338dc8(0xb18)](_0x338dc8(0xc05))[_0x338dc8(0x850)]),_0xe0be9a=parseFloat(document['getElementById'](_0x338dc8(0x5b8))[_0x338dc8(0x850)])/0x64;_0x43a454['spriteTransform']={'x':_0x153a12,'y':_0x3b8583,'scale':_0xe0be9a},_0x5c9c95(),_0x28dfd2('哼，就按你说的办好了。'),_0x3a483d(!![]);}}function _0x2a1f4d(){const _0x29c020=_0x17d1db;_0x3a7c5b(_0x29c020(0x205))['then'](_0x3fd715=>{const _0x431a9b=_0x29c020;if('NUWPM'!==_0x431a9b(0x2f1))_0x46148e[_0x431a9b(0x7d9)][_0x431a9b(0x6d2)]=_0x431a9b(0x269);else{if(_0x3fd715){const _0x2b7648=_0x45939a(_0x35d0f9[_0x431a9b(0x693)]);if(_0x2b7648){if(_0x431a9b(0x889)===_0x431a9b(0xc6c))return _0x230832(_0x162daa)[_0x431a9b(0xa34)](_0x5d32ee=>_0x5d32ee[_0x431a9b(0x885)]());else delete _0x2b7648[_0x431a9b(0x297)],_0x5c9c95(),_0x4fe224(_0x2b7648['id'],_0x431a9b(0x680)),_0x28dfd2(_0x431a9b(0x123)),_0x3a483d(!![]);}}}});}function _0x16e610(){const _0x9ba4de=_0x17d1db;if(!_0x5ab412)return;const _0x4ac09f=_0x35d0f9[_0x9ba4de(0x693)],_0x519df2=_0x45939a(_0x4ac09f);if(!_0x519df2)return;const _0x21ae30=parseFloat(document['getElementById'](_0x9ba4de(0x931))[_0x9ba4de(0x850)]),_0x21d850=parseFloat(document[_0x9ba4de(0xb18)](_0x9ba4de(0xc05))[_0x9ba4de(0x850)]),_0xeeffe=parseFloat(document['getElementById'](_0x9ba4de(0x5b8))[_0x9ba4de(0x850)])/0x64;_0x519df2['spriteTransform']={'x':_0x21ae30,'y':_0x21d850,'scale':_0xeeffe};const _0x4fc0ae=document[_0x9ba4de(0xb18)](_0x9ba4de(0x4b2)),_0x741f7=0x50*_0xeeffe;_0x4fc0ae[_0x9ba4de(0x7d9)][_0x9ba4de(0x4a6)]=_0x741f7+'%',_0x4fc0ae[_0x9ba4de(0x7d9)][_0x9ba4de(0x62d)]=_0x741f7+'%',_0x4fc0ae[_0x9ba4de(0x7d9)][_0x9ba4de(0x1fd)]=_0x21ae30+'%',_0x4fc0ae[_0x9ba4de(0x7d9)][_0x9ba4de(0x5e0)]=_0x21d850+'%',_0x4fc0ae[_0x9ba4de(0x7d9)][_0x9ba4de(0x33b)]='translate(-50%,\x20-100%)';}document[_0x17d1db(0xb18)](_0x17d1db(0x931))[_0x17d1db(0xafb)](_0x17d1db(0xb8d),_0x16e610),document[_0x17d1db(0xb18)](_0x17d1db(0xc05))[_0x17d1db(0xafb)](_0x17d1db(0xb8d),_0x16e610),document[_0x17d1db(0xb18)](_0x17d1db(0x5b8))['addEventListener'](_0x17d1db(0xb8d),_0x16e610),_0x796ec2[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x4d5015),_0x5d6d06[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0xce2e8e),_0x501d4c[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>_0x3a483d(![])),_0xac3bc5[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x2a1f4d);function _0xe54a5f(_0x25a303){const _0x195527=_0x17d1db,_0x1a196c=_0x45939a(_0x25a303);if(!_0x1a196c)return;const _0x54d6fa=_0x35d0f9[_0x195527(0xa6c)][_0x195527(0x9cd)](_0x6df1be=>_0x6df1be['type']==='private'&&_0x6df1be[_0x195527(0x8f1)][_0x195527(0xb63)](_0x25a303)),_0x2fbb6d=_0x5f52db(_0x54d6fa['id']),_0x191fef=_0x35d0f9[_0x195527(0x6b9)][_0x195527(0x485)](_0xeef227=>_0xeef227[_0x195527(0x61c)])['pop'](),_0x412160=document[_0x195527(0xb18)](_0x195527(0x3af)),_0xeb7898=document['getElementById'](_0x195527(0x3b2));let _0x15fe4f=null;if(_0x191fef){if(_0x191fef['role']===_0x195527(0xaf6)){if(_0x195527(0xa79)!==_0x195527(0x966)){const _0x30c52a=_0x35d0f9['characterLastScripts'][_0x25a303];_0x30c52a&&_0x30c52a['length']>0x0&&(_0x15fe4f=_0x30c52a['at'](-0x1));}else try{const _0x5f06d4=_0x4902ae[_0x195527(0x97b)](_0x737c0d);_0x5dc7cc[_0x195527(0xc29)](_0x5f06d4)&&(_0x89658f[_0x195527(0x850)]=_0x5f06d4[_0x195527(0xbb5)](_0x533a0c=>_0x533a0c['name']+'--'+_0x533a0c['url'])[_0x195527(0x102)]('\x0a'));}catch(_0x17ae13){}}else{if(_0x195527(0x829)!==_0x195527(0x2cd))_0x15fe4f={'speaker':_0x2fbb6d[_0x195527(0x19d)],'line':_0x191fef[_0x195527(0x9bc)],'emotion':'normal'};else{if(!_0x42a0f2['isArray'](_0x71e44e))return _0x195527(0x695);if(_0x4430a9['length']===0x0)return'<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>';return _0x40ffef['sort']((_0x1de76e,_0x25273a)=>new _0x49b237(_0x25273a[_0x195527(0xaa4)])-new _0x29551c(_0x1de76e[_0x195527(0xaa4)])),_0x195527(0x683)+_0xa394fe[_0x195527(0xbb5)]((_0x5dfdeb,_0x2a6fab)=>_0x195527(0x2ba)+(_0x2a6fab<_0x2df4d8['length']-0x1?_0x195527(0x87b):'')+_0x195527(0x6fd)+(_0x5dfdeb[_0x195527(0x2e3)]||_0x195527(0x858))+_0x195527(0x7a4)+(_0x5dfdeb[_0x195527(0x710)]||_0x195527(0x4ef))+_0x195527(0x6e5)+(_0x5dfdeb[_0x195527(0xaa4)]||'')+_0x195527(0x158))['join']('')+'</div\x20>\x20';}}}_0x15fe4f?(_0x412160['textContent']=_0x15fe4f[_0x195527(0x878)]===_0x195527(0xc75)?'旁白':_0x15fe4f[_0x195527(0x878)],_0xeb7898[_0x195527(0x65b)]=_0x15fe4f['line'],_0x15fe4f[_0x195527(0x878)]===_0x1a196c[_0x195527(0x19d)]?_0x4fe224(_0x25a303,_0x15fe4f[_0x195527(0xaa2)]):_0x4fe224(_0x25a303,_0x195527(0x680))):(_0x412160[_0x195527(0x65b)]=_0x1a196c[_0x195527(0x19d)],_0xeb7898[_0x195527(0x65b)]=_0x195527(0xc64),_0x4fe224(_0x25a303,_0x195527(0x680)));}function _0x435a57(){const _0x4f2dc0=_0x17d1db,_0x1846b9=new Date(),_0x1a9a89=document[_0x4f2dc0(0xb18)](_0x4f2dc0(0xc9b)),_0x5c7646=document[_0x4f2dc0(0xb18)](_0x4f2dc0(0xa7c));if(_0x1a9a89&&_0x5c7646){const _0x367f1f=String(_0x1846b9[_0x4f2dc0(0x76b)]())[_0x4f2dc0(0x839)](0x2,'0'),_0x136941=String(_0x1846b9['getMinutes']())[_0x4f2dc0(0x839)](0x2,'0');_0x1a9a89[_0x4f2dc0(0x65b)]=_0x367f1f+':'+_0x136941;const _0x56ecf1=_0x1846b9[_0x4f2dc0(0x7eb)]()+0x1,_0x1f59fa=_0x1846b9[_0x4f2dc0(0xb2b)](),_0x702078=[_0x4f2dc0(0x99f),_0x4f2dc0(0x6d5),_0x4f2dc0(0x85c),_0x4f2dc0(0x4f3),_0x4f2dc0(0x25b),_0x4f2dc0(0xa98),_0x4f2dc0(0x634)][_0x1846b9[_0x4f2dc0(0x73d)]()];_0x5c7646[_0x4f2dc0(0x65b)]=_0x56ecf1+'月'+_0x1f59fa+'日\x20'+_0x702078;}}const _0x90e542=document[_0x17d1db(0xb18)](_0x17d1db(0xc88)),_0x3c6b42=document[_0x17d1db(0xb18)](_0x17d1db(0xc11)),_0x1f52b4=document[_0x17d1db(0xb18)](_0x17d1db(0x8e2)),_0x4b1cb5=document[_0x17d1db(0xb18)]('listen-together-backdrop'),_0x15f48c=document[_0x17d1db(0xb18)](_0x17d1db(0x3d6)),_0x459e34=document[_0x17d1db(0xb18)](_0x17d1db(0x996)),_0x59b436=document[_0x17d1db(0xb18)](_0x17d1db(0x7e0)),_0x5c06b3=document[_0x17d1db(0xb18)](_0x17d1db(0x8d3)),_0x34281f=document['getElementById'](_0x17d1db(0x991));let _0x410c05=[],_0x131ac3=![];async function _0x2ea071(){const _0x3647da=_0x17d1db;if(_0x3647da(0x594)===_0x3647da(0x594)){if(!_0x35d0f9[_0x3647da(0xba6)])return;_0x15f48c[_0x3647da(0x280)]=_0x3647da(0xafa),_0x90e542[_0x3647da(0x79f)][_0x3647da(0x366)](_0x3647da(0xa36));const _0x28a3f4=await _0xa33fcf();if(_0x28a3f4['length']===0x0){_0x15f48c[_0x3647da(0x280)]=_0x3647da(0x5ff);return;}_0x15f48c[_0x3647da(0x280)]='',_0x28a3f4[_0x3647da(0x175)](_0x16a5ad=>{const _0x139f54=_0x3647da,_0x449e66=document[_0x139f54(0x7e9)](_0x139f54(0x591));_0x449e66['className']='music-library-item';const _0x976b5e=_0x16a5ad[_0x139f54(0x2d5)]?URL[_0x139f54(0x900)](_0x16a5ad[_0x139f54(0x2d5)]):_0x20a236;_0x449e66[_0x139f54(0x280)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x976b5e+_0x139f54(0x6bf)+(_0x16a5ad[_0x139f54(0x833)]['歌曲名称']||'未知歌曲')+_0x139f54(0x6ef)+(_0x16a5ad['info']['歌手']||'未知艺术家')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x449e66[_0x139f54(0xafb)](_0x139f54(0x9db),()=>{_0x42e69b(_0x16a5ad);}),_0x15f48c[_0x139f54(0x364)](_0x449e66);});}else throw new _0x3203b9('YAML翻译机也无法理解这段梦话。');}function _0x5af6dd(){const _0x10e858=_0x17d1db;if(_0x10e858(0x766)!==_0x10e858(0x766)){_0x21de14(_0x10e858(0x362)+_0xb1217b+'\x20个旧头像。应用即将刷新。'),_0x22d3a8(()=>_0x2ea42f[_0x10e858(0x1d8)](),0x5dc);return;}else _0x90e542[_0x10e858(0x79f)][_0x10e858(0xb42)](_0x10e858(0xa36));}async function _0x42e69b(_0x5798b3){const _0x43162a=_0x17d1db;if(!_0x35d0f9[_0x43162a(0xba6)]||!_0x5798b3)return;let _0x394ff5=null;if(_0x5798b3[_0x43162a(0x2d5)])try{_0x43162a(0x8e9)!==_0x43162a(0x8e9)?_0x5cc5ec={}:(_0x394ff5=_0x43162a(0xacd)+Date['now']()+'_'+Math['random'](),await _0xad4538(_0x394ff5,_0x5798b3[_0x43162a(0x2d5)]));}catch(_0x328685){'yiUjY'===_0x43162a(0xb6c)?console['error'](_0x43162a(0x1de),_0x328685):_0x23807b(_0x2892c5['id']);}const _0x1529b1={'role':_0x43162a(0x809),'type':'listen-together-invite','content':_0x43162a(0x213)+_0x5798b3[_0x43162a(0x833)][_0x43162a(0x9b9)]+']','songId':_0x5798b3['id'],'songName':_0x5798b3['info'][_0x43162a(0x9b9)],'artist':_0x5798b3[_0x43162a(0x833)]['歌手'],'coverId':_0x394ff5,'timestamp':Date[_0x43162a(0x5ee)]()};_0x35d0f9[_0x43162a(0x6b9)][_0x43162a(0xb2f)](_0x1529b1),_0x1d6327(),_0x3f1b6c(),_0x5af6dd(),setTimeout(_0x4d017c,0x64);}_0x3c6b42[_0x17d1db(0xafb)](_0x17d1db(0x9db),_0x2ea071),_0x1f52b4['addEventListener'](_0x17d1db(0x9db),_0x5af6dd),_0x4b1cb5[_0x17d1db(0xafb)]('click',_0x5af6dd);async function _0x4a8cc0(_0x500c87,_0x135135,_0x144f80){const _0x401809=_0x17d1db;if('ncfLu'==='xgwXB')_0x29c44a();else{if(_0x131ac3)return;_0x131ac3=!![];try{const _0x2c33ff=_0x35d0f9[_0x401809(0xa6c)][_0x401809(0x9cd)](_0x4da977=>_0x4da977[_0x401809(0xe3)]&&_0x4da977['activeListenSession'][_0x401809(0x26d)]),_0x1a19e5=_0x1f3fa9();if(_0x2c33ff&&_0x2c33ff['id']!==_0x1a19e5['id'])_0x401809(0x93d)===_0x401809(0x302)?_0x19ecae[_0x401809(0xafb)](_0x401809(0x9db),_0x54fc83=>{const _0x1af99f=_0x401809,_0x373dfe=_0x54fc83[_0x1af99f(0x7f3)]['dataset'][_0x1af99f(0x569)],_0x2f50f6=_0x238125[_0x1af99f(0xc3c)][_0x373dfe];_0x2f50f6&&_0x3fdcbe(_0x2f50f6,_0x373dfe);}):(_0x2c33ff[_0x401809(0xe3)]=null,_0x28dfd2('已自动断开与其他人的听歌同步。'),_0x5c9c95());else _0x2c33ff&&_0x2c33ff['id']===_0x1a19e5['id']&&(_0x401809(0x739)===_0x401809(0x9b2)?(_0xc60c4b(![]),_0x48f12b[_0x401809(0x2eb)]=![]):_0x28dfd2(_0x401809(0x49d)));_0x13f6ba(!![],_0x401809(0x505));if(!_0x1a19e5){_0x13f6ba(![]),_0x28dfd2('错误：找不到签署契约的地方。');return;}const _0x5164f8=await _0x7962d0(_0x500c87);if(!_0x5164f8){if(_0x401809(0x255)!==_0x401809(0x255))_0xd3dae1[_0x401809(0xb2f)]({'name':_0x54a978[0x0][_0x401809(0x2e2)](),'url':_0x347be7[0x1][_0x401809(0x2e2)]()});else{_0x13f6ba(![]),_0x28dfd2('错误：找不到这首作为“信物”的歌。');return;}}_0x1a19e5[_0x401809(0xe3)]={'isActive':!![],'songId':_0x500c87,'leaderId':_0x401809(0x809),'songName':_0x5164f8[_0x401809(0x833)][_0x401809(0x9b9)],'artist':_0x5164f8[_0x401809(0x833)]['歌手'],'cover':_0x5164f8[_0x401809(0x2d5)]},_0x5c9c95(),document[_0x401809(0xb18)](_0x401809(0x956))[_0x401809(0x9c9)]=_0x5164f8[_0x401809(0x2d5)]?URL['createObjectURL'](_0x5164f8[_0x401809(0x2d5)]):_0x20a236,document[_0x401809(0xb18)](_0x401809(0x4ff))[_0x401809(0x65b)]=_0x5164f8[_0x401809(0x833)][_0x401809(0x9b9)],document[_0x401809(0xb18)]('lt-ui-song-artist')[_0x401809(0x65b)]=_0x5164f8[_0x401809(0x833)]['歌手'],_0x29c71c(_0x5164f8),_0x59b436['style'][_0x401809(0x31f)]=_0x401809(0x9d4),setTimeout(()=>_0x59b436[_0x401809(0x79f)]['add']('show'),0xa),_0x144f80[_0x401809(0x280)]='<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>'+_0x144f80['querySelector'](_0x401809(0xc72))[_0x401809(0xc8a)];if(_0x35d0f9[_0x401809(0x6b9)][_0x135135]){if(_0x401809(0x23e)===_0x401809(0xc91)){const _0x414291=_0x86af1e();if(_0x414291['type']==='group'){const _0x2ddb35=_0x1e8dc5['characters'][_0x401809(0x9cd)](_0x3b30d8=>_0x414291[_0x401809(0x8f1)][_0x401809(0xb63)](_0x3b30d8['id'])&&_0x3b30d8[_0x401809(0x19d)]===_0x39aceb);if(_0x2ddb35)_0x5d1993=_0x2ddb35['id'];}}else _0x35d0f9[_0x401809(0x6b9)][_0x135135][_0x401809(0x4cb)]=!![],_0x1d6327();}_0x13f6ba(![]),_0x503220(_0x500c87,[_0x500c87]),_0x457652(_0x5164f8,!![]);}finally{_0x131ac3=![];}}}function _0x18bdb9(){const _0xec878e=_0x17d1db,_0x2627b1=_0x35d0f9['chats'][_0xec878e(0x9cd)](_0x39f294=>_0x39f294[_0xec878e(0xe3)]&&_0x39f294[_0xec878e(0xe3)]['isActive']);_0x2627b1&&(_0x2627b1[_0xec878e(0xe3)]=null,_0x5c9c95(),_0x28dfd2('同步已断开。'),_0x457652(),_0x59b436[_0xec878e(0x79f)][_0xec878e(0xb42)](_0xec878e(0xa36)),setTimeout(()=>_0x59b436['style']['display']=_0xec878e(0x9ba),0x12c));}function _0x4e6c8d(_0x855bd1){const _0x22d504=_0x17d1db;if(!_0x855bd1)return[];const _0x55f769=_0x855bd1[_0x22d504(0xb2d)]('\x0a'),_0x3bf1ee=[],_0x1ff311=/\[(\d{2}):(\d{2})\.(\d{2,3})\]/;for(const _0x22092b of _0x55f769){const _0x2ea8e5=_0x22092b['match'](_0x1ff311);if(_0x2ea8e5){const _0x83e6c5=parseInt(_0x2ea8e5[0x1],0xa),_0x19666e=parseInt(_0x2ea8e5[0x2],0xa),_0x591b31=parseInt(_0x2ea8e5[0x3],0xa)*(_0x2ea8e5[0x3][_0x22d504(0x968)]===0x2?0xa:0x1),_0x5358fa=_0x83e6c5*0x3c+_0x19666e+_0x591b31/0x3e8,_0x5ca78a=_0x22092b[_0x22d504(0x39f)](_0x1ff311,'')['trim']();_0x5ca78a&&_0x3bf1ee['push']({'time':_0x5358fa,'text':_0x5ca78a});}}return _0x3bf1ee;}function _0x29c71c(_0x302058){const _0x30d183=_0x17d1db;_0x410c05=_0x4e6c8d(_0x302058[_0x30d183(0xcf1)]),_0x34281f[_0x30d183(0x280)]='';if(_0x410c05[_0x30d183(0x968)]===0x0){_0x34281f['innerHTML']=_0x30d183(0x381);return;}_0x410c05[_0x30d183(0x175)]((_0x2e5dfa,_0x8cfdd4)=>{const _0x5ddcb1=_0x30d183,_0x19132e=document[_0x5ddcb1(0x7e9)]('p');_0x19132e['textContent']=_0x2e5dfa[_0x5ddcb1(0xa0c)],_0x19132e['id']=_0x5ddcb1(0x548)+_0x8cfdd4,_0x34281f[_0x5ddcb1(0x364)](_0x19132e);});}function _0x55c477(_0x2c6171,_0x2d5536,_0x255b6b,_0x1e7f3e){const _0x125bdd=_0x17d1db,_0xc7741b=(_0x1e7f3e-0x5a)*Math['PI']/0xb4;return{'x':_0x2c6171+_0x255b6b*Math['cos'](_0xc7741b),'y':_0x2d5536+_0x255b6b*Math[_0x125bdd(0x5db)](_0xc7741b)};}function _0x688169(_0x240e5a){const _0x5706b5=_0x17d1db,_0x5266ed=_0x5706b5(0x121),_0x1c1fd2=document[_0x5706b5(0xa70)](_0x5266ed,'svg'),_0x13270b=0xfa,_0x4fef2d=_0x13270b/0x2,_0x1dc4de=_0x13270b/0x2,_0x46ea9d=_0x13270b/0x2-0x14;_0x1c1fd2[_0x5706b5(0x819)](_0x5706b5(0x62d),'100%'),_0x1c1fd2[_0x5706b5(0x819)](_0x5706b5(0x4a6),_0x5706b5(0x84c)),_0x1c1fd2[_0x5706b5(0x819)](_0x5706b5(0xcd7),_0x5706b5(0xbce)+_0x13270b+'\x20'+_0x13270b);const _0x27f429=Object[_0x5706b5(0x1ce)](_0x240e5a)['reduce']((_0x12d386,_0x20804a)=>_0x12d386+_0x20804a,0x0);if(_0x27f429===0x0)return _0x1c1fd2;let _0x244115=-0x5a;const _0x3b5be9=[_0x5706b5(0x2d3),_0x5706b5(0xa4d),_0x5706b5(0xa65),_0x5706b5(0x681),'#c299ff',_0x5706b5(0x7e5),'#a4c2f4',_0x5706b5(0x10f)];let _0x1234c8=0x0;for(const _0x102553 in _0x240e5a){if('buZkj'===_0x5706b5(0x7b6)){const _0x404392=_0x240e5a[_0x102553];if(_0x404392<=0x0)continue;const _0x452f3a=_0x404392/_0x27f429*0x168,_0x16e178=_0x244115+_0x452f3a,_0x39ff81=_0x55c477(_0x4fef2d,_0x1dc4de,_0x46ea9d,_0x16e178),_0x445fa7=_0x55c477(_0x4fef2d,_0x1dc4de,_0x46ea9d,_0x244115),_0x54a7eb=_0x452f3a>0xb4?'1':'0',_0x3166f0=['M',_0x39ff81['x'],_0x39ff81['y'],'A',_0x46ea9d,_0x46ea9d,0x0,_0x54a7eb,0x1,_0x445fa7['x'],_0x445fa7['y'],'L',_0x4fef2d,_0x1dc4de,'Z']['join']('\x20'),_0x377ec1=document[_0x5706b5(0xa70)](_0x5266ed,_0x5706b5(0x361));_0x377ec1[_0x5706b5(0x819)]('d',_0x3166f0),_0x377ec1[_0x5706b5(0x819)](_0x5706b5(0x2cb),_0x3b5be9[_0x1234c8%_0x3b5be9[_0x5706b5(0x968)]]),_0x1234c8++;const _0x33c941=document[_0x5706b5(0xa70)](_0x5266ed,_0x5706b5(0x248));_0x33c941[_0x5706b5(0x65b)]=_0x102553+':\x20'+_0x404392[_0x5706b5(0xab2)](0x2)+'\x20('+(_0x404392/_0x27f429*0x64)['toFixed'](0x1)+'%)',_0x377ec1[_0x5706b5(0x364)](_0x33c941),_0x1c1fd2[_0x5706b5(0x364)](_0x377ec1),_0x244115=_0x16e178;}else _0x540707[_0x5706b5(0xe3)]=null,_0x247abc(),_0x4df67d(_0x5706b5(0x58c)),_0x352fad(),_0xc2b139[_0x5706b5(0x79f)][_0x5706b5(0xb42)](_0x5706b5(0xa36)),_0x56e703(()=>_0x336593['style'][_0x5706b5(0x31f)]=_0x5706b5(0x9ba),0x12c);}return _0x1c1fd2;}function _0x51d9e8(){const _0x24f5c4=_0x17d1db;if(_0x410c05[_0x24f5c4(0x968)]===0x0)return;const _0x27fd84=_0x459e34[_0x24f5c4(0x625)];let _0x58bd0a=-0x1;for(let _0x4ab46d=0x0;_0x4ab46d<_0x410c05[_0x24f5c4(0x968)];_0x4ab46d++){if(_0x27fd84>=_0x410c05[_0x4ab46d][_0x24f5c4(0xa38)])_0x58bd0a=_0x4ab46d;else{if(_0x24f5c4(0x5b5)!==_0x24f5c4(0x87c))break;else{const _0x4f154a=_0x44d8c0['parse'](_0x106805['target']['result']);if(_0x4f154a[_0x24f5c4(0xb12)]!=='NoirAccountingData'||!_0x4f154a[_0x24f5c4(0xef)]||!_0x4f154a['accountingLedger'])throw new _0x211bcf(_0x24f5c4(0x9fc));_0x213819[_0x24f5c4(0xef)]=_0x4f154a[_0x24f5c4(0xef)],_0x5635d9[_0x24f5c4(0xc3c)]=_0x4f154a[_0x24f5c4(0xc3c)],_0x13ec89(),_0x1c7dd4(![]),_0x586154(_0x24f5c4(0x871)),_0x5819f2();}}}if(_0x58bd0a!==-0x1){const _0x5f2e16=_0x34281f[_0x24f5c4(0x9c6)]('p');_0x5f2e16[_0x24f5c4(0x175)](_0x53cd2d=>_0x53cd2d['classList'][_0x24f5c4(0xb42)](_0x24f5c4(0x530)));const _0x3c8b90=document[_0x24f5c4(0xb18)]('lyric-line-'+_0x58bd0a);if(_0x3c8b90){if(_0x24f5c4(0x57d)!=='kfUPk'){if(!_0x3226d7)return;const _0x3e40ba=_0x5db4a7[_0x24f5c4(0x693)],_0x59f988=_0x3c4f6f(_0x3e40ba);if(!_0x59f988)return;const _0x39d308=_0x37df74(_0x59a092[_0x24f5c4(0xb18)]('sprite-slider-x')[_0x24f5c4(0x850)]),_0x217c53=_0x2d7616(_0x31586e[_0x24f5c4(0xb18)](_0x24f5c4(0xc05))['value']),_0x2ff810=_0x340261(_0x51afeb['getElementById'](_0x24f5c4(0x5b8))[_0x24f5c4(0x850)])/0x64;_0x59f988['spriteTransform']={'x':_0x39d308,'y':_0x217c53,'scale':_0x2ff810};const _0x46f3d4=_0x4e2727[_0x24f5c4(0xb18)](_0x24f5c4(0x4b2)),_0x16b605=0x50*_0x2ff810;_0x46f3d4[_0x24f5c4(0x7d9)][_0x24f5c4(0x4a6)]=_0x16b605+'%',_0x46f3d4[_0x24f5c4(0x7d9)]['width']=_0x16b605+'%',_0x46f3d4[_0x24f5c4(0x7d9)][_0x24f5c4(0x1fd)]=_0x39d308+'%',_0x46f3d4[_0x24f5c4(0x7d9)][_0x24f5c4(0x5e0)]=_0x217c53+'%',_0x46f3d4[_0x24f5c4(0x7d9)]['transform']=_0x24f5c4(0x9fe);}else _0x3c8b90['classList'][_0x24f5c4(0x366)](_0x24f5c4(0x530)),_0x3c8b90[_0x24f5c4(0x8f5)]({'behavior':_0x24f5c4(0x5fe),'block':_0x24f5c4(0xb99)});}}}_0x5c06b3[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x4bc5c5=_0x17d1db;if(_0x4bc5c5(0x22b)!=='NAxRY')_0x59b436[_0x4bc5c5(0x79f)]['remove'](_0x4bc5c5(0xa36)),setTimeout(()=>_0x59b436[_0x4bc5c5(0x7d9)][_0x4bc5c5(0x31f)]='none',0x12c);else{_0x2d83de(_0x4bc5c5(0xb5a));return;}}),document[_0x17d1db(0xb18)]('music-widget-card')[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x4424b1=_0x17d1db;_0x35d0f9[_0x4424b1(0x1aa)]&&_0x35d0f9['listenTogetherSession'][_0x4424b1(0x26d)]&&('Vxicc'!==_0x4424b1(0xc0b)?(_0x2c9363(),_0x1a7b4c[_0x4424b1(0xbfb)]=0x64):(_0x59b436[_0x4424b1(0x7d9)][_0x4424b1(0x31f)]=_0x4424b1(0x9d4),setTimeout(()=>_0x59b436[_0x4424b1(0x79f)]['add']('show'),0xa)));}),_0x459e34[_0x17d1db(0xafb)](_0x17d1db(0x159),_0x51d9e8);const _0x5b9f3e=document['getElementById'](_0x17d1db(0x9a0)),_0x4e6d67=document[_0x17d1db(0xb18)]('widget-next-btn'),_0x48adc2=document['getElementById'](_0x17d1db(0xee));_0x5b9f3e[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x203fdd=_0x17d1db;if(_0x459e34['src']){if(_0x203fdd(0x6f6)!=='zRYwI')_0x25451d(_0x203fdd(0xc00)+_0x3f230d[_0x203fdd(0x5a1)]);else{if(_0x459e34[_0x203fdd(0x976)])_0x459e34['play']();else{if(_0x203fdd(0xb71)!==_0x203fdd(0xc80))_0x459e34[_0x203fdd(0x639)]();else{const _0x3c00a8=new _0x267326(_0x35e120[_0x203fdd(0xaa4)]),_0x100138=_0x2a6e56(_0x3c00a8[_0x203fdd(0x7eb)]()+0x1)['padStart'](0x2,'0'),_0x625440=_0x59444a(_0x3c00a8[_0x203fdd(0xb2b)]())[_0x203fdd(0x839)](0x2,'0'),_0x331a80=_0x51e40e(_0x3c00a8[_0x203fdd(0x76b)]())[_0x203fdd(0x839)](0x2,'0'),_0x16f75f=_0x659141(_0x3c00a8[_0x203fdd(0x553)]())[_0x203fdd(0x839)](0x2,'0'),_0x20152b=_0x100138+'-'+_0x625440+'\x20'+_0x331a80+':'+_0x16f75f,_0x4d9c36=_0x3f3673[_0x203fdd(0x61c)]?_0x203fdd(0xcf4):_0x203fdd(0xa44);if(_0x1f6ae4[_0x203fdd(0x9bc)]){const _0x5520c5=_0x2b792f[_0x203fdd(0x61c)]?_0x3c4d2e(_0x187e11[_0x203fdd(0x9bc)])[_0x203fdd(0x2e2)]()['replace'](/\n+/g,'\x20'):_0x5251b9(_0x2b5f16[_0x203fdd(0x9bc)])[_0x203fdd(0x2e2)]();if(_0x5520c5)_0x5b0967[_0x203fdd(0xb2f)](_0x4d9c36+'\x20['+_0x20152b+_0x203fdd(0x4f0)+_0x5ac9d5(_0x566710)+']\x20'+_0x5520c5);}}}}}}),_0x4e6d67[_0x17d1db(0xafb)]('click',()=>{const _0x3e525f=_0x17d1db;if(_0x6e90aa[_0x3e525f(0x968)]===0x0)return;_0x238931=(_0x238931+0x1)%_0x6e90aa['length'],_0x503220(_0x6e90aa[_0x238931],_0x6e90aa);}),_0x48adc2[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x2169ca=_0x17d1db;if(_0x2169ca(0xa51)!==_0x2169ca(0xa51))_0x2cf8df[_0x2169ca(0x65b)]='▶';else{if(_0x6e90aa[_0x2169ca(0x968)]===0x0)return;_0x238931=(_0x238931-0x1+_0x6e90aa[_0x2169ca(0x968)])%_0x6e90aa[_0x2169ca(0x968)],_0x503220(_0x6e90aa[_0x238931],_0x6e90aa);}}),_0x459e34['addEventListener'](_0x17d1db(0xc36),()=>{const _0x51c3e8=_0x17d1db;_0x51c3e8(0xa3d)!=='fCEJt'?_0x1bdf9f['push'](_0x44eff8['async'](_0x51c3e8(0x885))[_0x51c3e8(0xa34)](_0xf2d2b0=>_0x474c10[_0x51c3e8(0x2e6)]=new _0x54fef2([_0xf2d2b0],_0x1f4c0a['name']))):_0x5b9f3e[_0x51c3e8(0x65b)]='❚❚';}),_0x459e34['addEventListener']('pause',()=>{const _0x131ff5=_0x17d1db;_0x5b9f3e[_0x131ff5(0x65b)]='▶';}),_0x459e34['addEventListener']('ended',()=>{const _0x356cbe=_0x17d1db;_0x356cbe(0xbfc)===_0x356cbe(0xbfc)?_0x4e6d67[_0x356cbe(0x9db)]():_0x3bf090('导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a'+_0x304409['join']('\x0a'));}),_0x459e34['addEventListener']('play',()=>{const _0x51686b=_0x17d1db;if(_0x51686b(0xbc3)===_0x51686b(0x7bb)){const _0x17e61d=_0x494bd3[_0x51686b(0x850)][_0x51686b(0x2e2)]()[_0x51686b(0xb63)](_0x28f023);_0x468619[_0x51686b(0x4f1)]=_0x17e61d;}else{const _0x97e994=document['getElementById'](_0x51686b(0x411));if(_0x97e994)_0x97e994[_0x51686b(0x65b)]='❚❚';}}),_0x459e34['addEventListener']('pause',()=>{const _0x1fd1c3=_0x17d1db;if(_0x1fd1c3(0x29d)!=='ilIwn'){const _0x3bc712=_0x1c99fe(_0x414ffc[0x1]),_0x1cd1d5=_0x15c1f5[0x2]['trim'](),_0x348e92=_0x613a42(_0x376c59['activeChatId']);let _0xd8773e=null;if(_0x1cd1d5===_0x348e92[_0x1fd1c3(0x19d)])_0xd8773e=_0x348e92['id'];else{const _0x48665e=_0x165f60();if(_0x48665e['type']==='group'){const _0x18a3fc=_0x159ef7[_0x1fd1c3(0x1f2)][_0x1fd1c3(0x9cd)](_0x5604c6=>_0x48665e[_0x1fd1c3(0x8f1)][_0x1fd1c3(0xb63)](_0x5604c6['id'])&&_0x5604c6[_0x1fd1c3(0x19d)]===_0x1cd1d5);if(_0x18a3fc)_0xd8773e=_0x18a3fc['id'];}}if(_0xd8773e)return{'type':_0x1fd1c3(0x986),'amount':_0x3bc712,'recipientId':_0xd8773e,'senderId':_0x565ea0['id']};else return{'type':'text','content':_0x1fd1c3(0xc43)+_0x1cd1d5+_0x1fd1c3(0x4a8)};}else{const _0x47ea77=document['getElementById']('global-player-play-pause-btn');if(_0x47ea77)_0x47ea77[_0x1fd1c3(0x65b)]='▶';}}),_0x459e34[_0x17d1db(0xafb)](_0x17d1db(0x8cc),()=>{const _0x54589a=_0x17d1db;if('APURQ'!=='iAGDu'){const _0x5f3174=document[_0x54589a(0xb18)](_0x54589a(0x1ef));_0x5f3174&&_0x5f3174[_0x54589a(0x9db)]();}else _0x3d01e9[_0x54589a(0xb18)]('card-input-2')[_0x54589a(0x9db)]();});function _0x1f6d7e(_0x49fb04){const _0x109193=_0x17d1db;if(_0x109193(0x812)==='gdhrH'){if(!_0x49fb04||typeof _0x49fb04!==_0x109193(0xb1e))return null;const _0x5a664c=_0x49fb04['indexOf']('['),_0xea983d=_0x49fb04[_0x109193(0x5ca)](']');if(_0x5a664c>-0x1&&_0xea983d>_0x5a664c){if('isWoS'!==_0x109193(0x506))return _0x49fb04[_0x109193(0x185)](_0x5a664c,_0xea983d+0x1);else _0x52ae38(![]);}return null;}else{_0x36fc4c('请输入有效的转账金额！');return;}}document[_0x17d1db(0xb18)](_0x17d1db(0x599))['addEventListener'](_0x17d1db(0x9db),()=>{const _0x4129f2=_0x17d1db;_0x4ff336(),_0x198934(_0x4129f2(0x4a7),_0x4129f2(0x58a));}),document['getElementById'](_0x17d1db(0x8f9))[_0x17d1db(0xafb)]('click',()=>_0x198934('home','accounting'));const _0x797fc=document['getElementById'](_0x17d1db(0xb73)),_0x24b6b7=document[_0x17d1db(0xb18)](_0x17d1db(0xce8));_0x797fc['addEventListener']('click',_0x4ff336),_0x24b6b7[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0xfe415f=_0x17d1db;_0x797fc[_0xfe415f(0x79f)][_0xfe415f(0xb42)](_0xfe415f(0x530)),_0x24b6b7['classList'][_0xfe415f(0x366)]('active'),_0x57cb24();});function _0x4ff336(){const _0x1879bf=_0x17d1db;_0x24b6b7['classList'][_0x1879bf(0xb42)](_0x1879bf(0x530)),_0x797fc[_0x1879bf(0x79f)][_0x1879bf(0x366)](_0x1879bf(0x530)),_0x4a1bdd();}function _0x4a1bdd(){const _0x53f4f4=_0x17d1db,_0x236976=document[_0x53f4f4(0xb18)]('accounting-content-area');document[_0x53f4f4(0xb18)](_0x53f4f4(0x6a3))[_0x53f4f4(0x65b)]=_0x53f4f4(0x120),document[_0x53f4f4(0xb18)]('header-actions')[_0x53f4f4(0x280)]='',_0x236976[_0x53f4f4(0x280)]=_0x53f4f4(0x452),_0xfa402f(),document[_0x53f4f4(0xb18)](_0x53f4f4(0x5a5))['addEventListener'](_0x53f4f4(0x9db),_0x4ebad4),document['getElementById']('daily-expenses-list')[_0x53f4f4(0xafb)](_0x53f4f4(0x9db),_0x2e7999=>{const _0x3dbf25=_0x53f4f4;if(_0x2e7999[_0x3dbf25(0xce3)][_0x3dbf25(0x79f)][_0x3dbf25(0xbbc)](_0x3dbf25(0x4da))){if(_0x3dbf25(0x322)!==_0x3dbf25(0x919)){const _0x1b14e6=_0x2e7999['target'][_0x3dbf25(0x218)]['id'];_0x3a7c5b(_0x3dbf25(0x412))[_0x3dbf25(0xa34)](_0x52fdc1=>{_0x52fdc1&&_0x374ec1(_0x1b14e6);});}else{const _0x4e9b0d=_0x2fd3d8['createElement'](_0x3dbf25(0x591));_0x4e9b0d[_0x3dbf25(0x73e)]=_0x3dbf25(0x1d2)+_0x1ca82e['sender'],_0x4e9b0d['textContent']=_0x3d1da6['content'],_0x4d66ba[_0x3dbf25(0x364)](_0x4e9b0d);}}}),document[_0x53f4f4(0xb18)](_0x53f4f4(0x74f))['focus']();}function _0x21d828(_0x213d40,_0x131b20){const _0x140a1f=_0x17d1db,_0x4424d3=document['getElementById'](_0x140a1f(0x727)),_0xe04174=document[_0x140a1f(0xb18)](_0x140a1f(0x4af));document['getElementById'](_0x140a1f(0x6a3))['textContent']=_0x131b20+'\x20账单';const _0x210c73=_0x213d40[_0x140a1f(0x719)][_0x140a1f(0x377)]((_0x2386c1,_0xf6dc20)=>_0x2386c1+(_0xf6dc20['amount']||0x0),0x0);let _0x11c825=_0x140a1f(0xcd4)+_0x210c73[_0x140a1f(0xab2)](0x2)+'</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>';_0x4424d3[_0x140a1f(0x280)]=_0x11c825;const _0x560986=document[_0x140a1f(0xb18)]('categorized-expenses-list'),_0xae0606={'餐饮美食':_0x140a1f(0x3d1),'交通出行':'<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>','购物消费':_0x140a1f(0xab7),'生活服务':_0x140a1f(0xc4a),'休闲娱乐':_0x140a1f(0xd0d),'医疗健康':'<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>','人情红包':_0x140a1f(0x1df),'其他杂项':_0x140a1f(0x382),'默认':'<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>'};_0x213d40[_0x140a1f(0x719)][_0x140a1f(0x175)](_0x5d820b=>{const _0x1e9259=_0x140a1f;if(_0x1e9259(0x128)!==_0x1e9259(0x84b)){const _0x1685c4=document[_0x1e9259(0x7e9)](_0x1e9259(0x591));_0x1685c4[_0x1e9259(0x73e)]=_0x1e9259(0x94c),_0x1685c4[_0x1e9259(0x7d9)][_0x1e9259(0x28c)]=_0x1e9259(0x318),_0x1685c4[_0x1e9259(0x7d9)][_0x1e9259(0x647)]=_0x1e9259(0x792),_0x1685c4[_0x1e9259(0x7d9)][_0x1e9259(0x145)]=_0x1e9259(0xa6f),_0x1685c4[_0x1e9259(0x7d9)][_0x1e9259(0xa5b)]='0';const _0x5e54d0=_0xae0606[_0x5d820b[_0x1e9259(0x817)]]||_0xae0606['默认'],_0x6aeac9=_0x1e9259(0x4bd)+_0x5e54d0+'</svg>',_0x581274=_0x1e9259(0x7dd)+_0x6aeac9+_0x1e9259(0x6b4)+_0x5d820b[_0x1e9259(0x42d)]+_0x1e9259(0xc09)+(_0x5d820b[_0x1e9259(0x817)]||'未分类')+'</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20'+(_0x5d820b['amount']||0x0)[_0x1e9259(0xab2)](0x2)+_0x1e9259(0xd13);let _0x9a297='';if(_0x5d820b[_0x1e9259(0x109)]&&_0x5d820b[_0x1e9259(0x109)][_0x1e9259(0xca6)]){if(_0x1e9259(0x82d)!==_0x1e9259(0x2a4)){const _0x38e6a1=_0x45939a(_0x5d820b[_0x1e9259(0x109)]['charId']);_0x38e6a1&&(_0x1e9259(0x7d1)===_0x1e9259(0x7d1)?_0x9a297=_0x1e9259(0x97e)+_0x38e6a1[_0x1e9259(0x36b)]+_0x1e9259(0xccb)+_0x38e6a1['name']+_0x1e9259(0xabf)+_0x5d820b[_0x1e9259(0x109)][_0x1e9259(0xa0c)]+_0x1e9259(0x8d8):(_0x2d552c[_0x1e9259(0x6b9)][_0x28234a][_0x1e9259(0x4cb)]=!![],_0x2079fd()));}else{_0x2bdbd3&&_0x85ce0b[_0x1e9259(0xb2f)](_0xf6526a);_0x4f391e={};const _0xace058=_0x2ec4f4[_0x1e9259(0x185)](0x2),_0x21badd=_0xace058[_0x1e9259(0xb2d)](/:\s(.+)/);if(_0x21badd[_0x1e9259(0x968)]>0x1){const _0x52a6a4=_0x21badd[0x0]['trim'](),_0x49bb3b=_0x21badd[0x1]['trim']()[_0x1e9259(0x39f)](/^"|"$/g,'');_0x2e29ce[_0x52a6a4]=_0x49bb3b;}}}_0x1685c4[_0x1e9259(0x280)]=_0x581274+_0x9a297,_0x560986[_0x1e9259(0x364)](_0x1685c4);}else{const _0x5b59ab=_0x5bb3f1[_0x1e9259(0x58e)](_0x1e9259(0xca9)),_0x426868=_0xe41207[_0x1e9259(0x218)]['songId'],_0x5922a7=_0x3c0f00(_0x5b59ab['dataset'][_0x1e9259(0x33d)],0xa);_0x3145cc(_0x426868,_0x5922a7,_0x3ba2ae);}}),_0xe04174[_0x140a1f(0x280)]='<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>',document[_0x140a1f(0xb18)](_0x140a1f(0x6c8))[_0x140a1f(0xafb)](_0x140a1f(0x9db),async()=>{const _0x2a24e3=_0x140a1f,_0x2b7f60=await _0x3a7c5b('确定要重新记录吗？当前的账单会被删除。');if(_0x2b7f60){const _0x529cfa=_0x35d0f9[_0x2a24e3(0xc3c)][_0x131b20];_0x529cfa&&_0x529cfa[_0x2a24e3(0x787)]&&_0x35d0f9[_0x2a24e3(0xef)][_0x2a24e3(0xb2f)](..._0x529cfa[_0x2a24e3(0x787)]),delete _0x35d0f9[_0x2a24e3(0xc3c)][_0x131b20],_0x5c9c95(),_0x4a1bdd();}});}function _0x57cb24(){const _0x3afa6b=_0x17d1db,_0x3e2b11=document['getElementById']('accounting-content-area');document[_0x3afa6b(0xb18)](_0x3afa6b(0x6a3))['textContent']='账本',document[_0x3afa6b(0xb18)](_0x3afa6b(0x4af))[_0x3afa6b(0x280)]='';const _0x2b7cdd=Object[_0x3afa6b(0x500)](_0x35d0f9[_0x3afa6b(0xc3c)])[_0x3afa6b(0xa99)]((_0x16b635,_0x240da3)=>new Date(_0x240da3)-new Date(_0x16b635));let _0x43ed75=_0x3afa6b(0x56c);_0x2b7cdd[_0x3afa6b(0x968)]===0x0?_0x43ed75+=_0x3afa6b(0xa53):_0x3afa6b(0xbe6)!==_0x3afa6b(0x433)?_0x2b7cdd[_0x3afa6b(0x175)](_0x1e4bbc=>{const _0x1a5dc6=_0x3afa6b,_0x330d79=_0x35d0f9[_0x1a5dc6(0xc3c)][_0x1e4bbc],_0x334100=_0x330d79[_0x1a5dc6(0x719)][_0x1a5dc6(0x377)]((_0x32a072,_0x10cd50)=>_0x32a072+(_0x10cd50[_0x1a5dc6(0xcc8)]||0x0),0x0);_0x43ed75+=_0x1a5dc6(0xa30)+_0x1e4bbc+_0x1a5dc6(0xc98)+_0x1e4bbc+_0x1a5dc6(0x5a4)+_0x334100['toFixed'](0x2)+_0x1a5dc6(0x902);}):_0x8a60e5[_0x3afa6b(0xbbd)]=_0x5eb8eb,_0x3e2b11[_0x3afa6b(0x280)]=_0x43ed75,document[_0x3afa6b(0xb18)]('export-accounting-btn')[_0x3afa6b(0xafb)](_0x3afa6b(0x9db),_0x33ab6f),document[_0x3afa6b(0xb18)](_0x3afa6b(0x425))[_0x3afa6b(0xafb)](_0x3afa6b(0x9db),()=>{const _0x2bb3fc=_0x3afa6b;_0x2bb3fc(0x559)!==_0x2bb3fc(0x559)?_0x2aa60d['push'](_0x44098c):document[_0x2bb3fc(0xb18)]('import-accounting-input')['click']();}),_0x3e2b11['querySelectorAll'](_0x3afa6b(0x3d8))[_0x3afa6b(0x175)](_0x3bbdff=>{const _0x2a1919=_0x3afa6b;'FKuOm'===_0x2a1919(0xb57)?_0x3bbdff[_0x2a1919(0xafb)](_0x2a1919(0x9db),_0x3ac123=>{const _0x10c206=_0x2a1919;if(_0x10c206(0x8cd)!==_0x10c206(0x12d)){const _0x3a5ef5=_0x3ac123[_0x10c206(0x7f3)][_0x10c206(0x218)][_0x10c206(0x569)],_0x272ce5=_0x35d0f9[_0x10c206(0xc3c)][_0x3a5ef5];_0x272ce5&&_0x21d828(_0x272ce5,_0x3a5ef5);}else{const _0x246ed6=_0x3d38cd['transaction'](_0x5a0eff,_0x10c206(0x43c)),_0x3dc653=_0x246ed6[_0x10c206(0x566)](_0x581fff),_0x5a0fc2=_0x3dc653[_0x10c206(0x31b)]({'id':_0xa8737b,'blob':_0x1b250f});_0x5a0fc2[_0x10c206(0x9d2)]=()=>_0x470efc(_0x5a0fc2[_0x10c206(0xd15)]),_0x5a0fc2['onerror']=()=>_0x56f088(_0x5a0fc2['error']);}}):(_0x2c4d53[_0x2a1919(0xad1)]=_0x3f7f84[_0x2a1919(0xad1)]||[],_0x53dc86[_0x2a1919(0x336)]=(_0x1ce872[_0x2a1919(0x336)]||[])['map']((_0x38bbdb,_0x3daff2)=>({..._0x38bbdb,'commentId':'c_'+_0x4b7371[_0x2a1919(0xaa4)]+'_'+_0x3daff2})),_0x31b6a7(),_0x2f933f());});}function _0x4ebad4(){const _0x2f197d=_0x17d1db;if('ODiFx'!=='ODiFx')_0x11c672[_0x2f197d(0x2e2)]()&&_0x1bc247[_0x2f197d(0x720)][_0x2f197d(0xb2f)]({'sender':'ai','content':_0x38b265[_0x2f197d(0x2e2)]()});else{const _0x315a98=document['getElementById']('expense-description'),_0x2cc391=document[_0x2f197d(0xb18)](_0x2f197d(0xb0d)),_0x21beb4=_0x315a98[_0x2f197d(0x850)]['trim'](),_0x10f842=parseFloat(_0x2cc391[_0x2f197d(0x850)]);if(!_0x21beb4||isNaN(_0x10f842)||_0x10f842<=0x0){_0x28dfd2('哼，不好好写清楚花在哪、花了多少，我怎么记？');return;}_0x35d0f9[_0x2f197d(0xef)][_0x2f197d(0xb2f)]({'id':'exp_'+Date[_0x2f197d(0x5ee)](),'description':_0x21beb4,'amount':_0x10f842,'timestamp':Date[_0x2f197d(0x5ee)]()}),_0x5c9c95(),_0xfa402f(),_0x315a98[_0x2f197d(0x850)]='',_0x2cc391[_0x2f197d(0x850)]='',_0x315a98[_0x2f197d(0x1d4)]();}}function _0x374ec1(_0x1f75c1){const _0x56de06=_0x17d1db,_0xb899e8=_0x35d0f9['accountingData'][_0x56de06(0x59a)](_0x7a5117=>_0x7a5117['id']===_0x1f75c1);_0xb899e8>-0x1&&('BMrxH'===_0x56de06(0x552)?(_0x35d0f9[_0x56de06(0xef)][_0x56de06(0x895)](_0xb899e8,0x1),_0x5c9c95(),_0xfa402f()):_0x34d6b1['classList']['remove']('show-chat-view'));}function _0xfa402f(){const _0x2013cf=_0x17d1db,_0x492219=document[_0x2013cf(0xb18)](_0x2013cf(0xc41)),_0xe1f592=document[_0x2013cf(0xb18)](_0x2013cf(0x20e)),_0xe4259a=new Date(),_0x46b402=_0x35d0f9[_0x2013cf(0xef)][_0x2013cf(0x485)](_0x46c7c1=>new Date(_0x46c7c1[_0x2013cf(0xaa4)])[_0x2013cf(0x224)]()===_0xe4259a[_0x2013cf(0x224)]());if(_0x46b402['length']===0x0){_0x492219['innerHTML']=_0x2013cf(0xd01),_0xe1f592[_0x2013cf(0x280)]='';return;}_0x492219['innerHTML']='',_0x46b402[_0x2013cf(0xa99)]((_0x124452,_0x1c658e)=>_0x1c658e[_0x2013cf(0xaa4)]-_0x124452[_0x2013cf(0xaa4)])['forEach'](_0x4268b9=>{const _0x16ffee=_0x2013cf;if('lXGIt'!==_0x16ffee(0x8a8)){const _0x136955=_0x19b156(_0x339112[_0x16ffee(0x8f1)][0x0]);return _0x136955?.[_0x16ffee(0x19d)]||'AI';}else{const _0x1dfeac=document[_0x16ffee(0x7e9)](_0x16ffee(0x591));_0x1dfeac[_0x16ffee(0x73e)]='expense-item',_0x1dfeac[_0x16ffee(0x280)]='<span\x20class=\x22description\x22>'+_0x4268b9[_0x16ffee(0x42d)]+_0x16ffee(0x6bb)+_0x4268b9[_0x16ffee(0xcc8)][_0x16ffee(0xab2)](0x2)+_0x16ffee(0x618)+_0x4268b9['id']+_0x16ffee(0x212),_0x492219[_0x16ffee(0x364)](_0x1dfeac);}}),_0xe1f592&&(_0x2013cf(0x600)===_0x2013cf(0x5f5)?_0x243d28[_0x2013cf(0x7d9)][_0x2013cf(0x2f8)]=_0x2013cf(0x575)+_0x5c36f9+'\x27)':(_0xe1f592[_0x2013cf(0x280)]=_0x2013cf(0x1fc),document['getElementById'](_0x2013cf(0xb9d))[_0x2013cf(0xafb)](_0x2013cf(0x9db),_0x5b4d71)));}async function _0x5b4d71(){const _0x43015a=_0x17d1db;if('brScx'!=='brScx')try{const _0x20a330=_0x31f7ae['getItem'](_0x43015a(0x392)+_0xbc772b),_0xcbd4e3=_0x3c0ebb[_0x43015a(0x97b)](_0x20a330||'[]');return _0x3836fa['isArray'](_0xcbd4e3)?_0xcbd4e3:[];}catch{return[];}else{const _0x497538=new Date(),_0x410f26=_0x497538[_0x43015a(0x156)]()+'-'+String(_0x497538['getMonth']()+0x1)[_0x43015a(0x839)](0x2,'0')+'-'+String(_0x497538[_0x43015a(0xb2b)]())['padStart'](0x2,'0');if(_0x35d0f9[_0x43015a(0xc3c)][_0x410f26]){_0x28dfd2('已经生成了今日账单！想看就去“看账本”标签页。');return;}const _0x3f0bc5=_0x35d0f9[_0x43015a(0xef)][_0x43015a(0x485)](_0x2fffc3=>new Date(_0x2fffc3[_0x43015a(0xaa4)])[_0x43015a(0x224)]()===_0x497538[_0x43015a(0x224)]());if(_0x3f0bc5[_0x43015a(0x968)]===0x0){if(_0x43015a(0xb00)===_0x43015a(0xb00)){_0x28dfd2(_0x43015a(0x788));return;}else{const _0x3b419c=_0x2a3680(_0x3c0b3c[0x1],0xa),_0x1df1a0=_0x4bf57f(_0x5e7eda[0x2],0xa),_0xb0355e=_0x2a3906(_0x481058[0x3],0xa)*(_0x6aa3c[0x3]['length']===0x2?0xa:0x1),_0x1c6692=_0x3b419c*0x3c+_0x1df1a0+_0xb0355e/0x3e8,_0x4139b4=_0x5a4002[_0x43015a(0x39f)](_0x522819,'')[_0x43015a(0x2e2)]();_0x4139b4&&_0x1f9e56[_0x43015a(0xb2f)]({'time':_0x1c6692,'text':_0x4139b4});}}_0x13f6ba(!![],'正在整理…');try{const _0x38164a=[_0x43015a(0x70a),_0x43015a(0x1bc),_0x43015a(0x6f0),_0x43015a(0x3a1),_0x43015a(0xb87),'医疗健康',_0x43015a(0x52a),_0x43015a(0x71d)],_0x595e62=_0x3f0bc5[_0x43015a(0xbb5)](_0x2b65a5=>'-\x20'+_0x2b65a5[_0x43015a(0x42d)]+':\x20'+_0x2b65a5[_0x43015a(0xcc8)])[_0x43015a(0x102)]('\x0a'),_0x463698=_0x35d0f9[_0x43015a(0x1f2)][_0x43015a(0xbb5)](_0x527060=>{const _0x36711d=_0x43015a;if(_0x36711d(0x210)===_0x36711d(0x210)){const _0x13b31f=_0x35d0f9['chats'][_0x36711d(0x9cd)](_0x12bd7e=>_0x12bd7e[_0x36711d(0xb12)]===_0x36711d(0x869)&&_0x12bd7e[_0x36711d(0x8f1)][_0x36711d(0xb63)](_0x527060['id'])),_0x331682=_0x35d0f9[_0x36711d(0x162)]['find'](_0xdb85e7=>_0xdb85e7['id']===(_0x13b31f?.['boundUserProfileId']||_0x35d0f9['activeUserProfileId']))||{'id':'default','name':'你'};let _0x42e434='';return _0x527060[_0x36711d(0x99c)]&&_0x527060[_0x36711d(0x99c)][_0x36711d(0x968)]>0x0&&(_0x36711d(0xb3a)===_0x36711d(0xc7e)?(_0x57ec8e(),_0x1c1cbc['getElementById'](_0x36711d(0xa1d))[_0x36711d(0x79f)][_0x36711d(0xb42)]('show'),_0x896c11[_0x36711d(0xb18)]('quote-preview-area')[_0x36711d(0x7d9)][_0x36711d(0x31f)]=_0x36711d(0x9ba),_0x352f3d(()=>{const _0xe0c68e=_0x36711d;_0x31ff24(_0xe0c68e(0x58a),_0xe0c68e(0x152));},0x14)):_0x42e434=_0x527060[_0x36711d(0x99c)][_0x36711d(0xbb5)](_0x34c35b=>_0x35d0f9[_0x36711d(0x38f)]['find'](_0x3dcb97=>_0x3dcb97['id']===_0x34c35b))['filter'](Boolean)[_0x36711d(0xbb5)](_0x10c60d=>_0x36711d(0x7e7)+_0x10c60d[_0x36711d(0x19d)]+_0x36711d(0xbc8)+_0x10c60d[_0x36711d(0x9bc)])['join']('')),_0x36711d(0x251)+_0x527060['id']+_0x36711d(0x18d)+_0x527060[_0x36711d(0x19d)]+_0x36711d(0x557)+_0x527060['persona']+'\x0a\x20\x20\x20\x20绑定用户:\x20'+_0x331682[_0x36711d(0x19d)]+'\x20(ID:\x20'+_0x331682['id']+')\x0a'+_0x42e434;}else return{'type':_0x36711d(0xcc1),'songName':_0x436384[0x1][_0x36711d(0x2e2)](),'artist':_0x171fb7[0x2][_0x36711d(0x2e2)]()};})[_0x43015a(0x102)]('\x0a'),_0xf103e4=_0x35d0f9['userProfiles']['map'](_0x65fc89=>'\x20\x20-\x20用户ID:\x20'+_0x65fc89['id']+_0x43015a(0x18d)+_0x65fc89[_0x43015a(0x19d)]+_0x43015a(0x557)+(_0x65fc89['persona']||'无'))['join']('\x0a'),_0x5e1f8b=_0x43015a(0x3b0),_0x1e3d09=_0x43015a(0x474)+_0x38164a['join'](',\x20')+_0x43015a(0x2db)+_0x463698+_0x43015a(0x9c3)+_0xf103e4+'\x0a\x0a#\x20今日消费流水\x0a'+_0x595e62,_0x36a4a0=[{'role':_0x43015a(0x773),'content':_0x5e1f8b},{'role':_0x43015a(0x809),'content':_0x1e3d09}],_0x5e231b=await _0xb7fe2e(_0x36a4a0,{'json':!![]}),_0x92f92a=_0x1f6d7e(_0x5e231b);if(!_0x92f92a)throw new Error(_0x43015a(0x4a3)+_0x5e231b);const _0x3d755c=JSON[_0x43015a(0x97b)](_0x92f92a);_0x35d0f9[_0x43015a(0xc3c)][_0x410f26]={'categorizedExpenses':_0x3d755c,'timestamp':Date['now'](),'originalExpenses':_0x3f0bc5},_0x35d0f9['accountingData']=_0x35d0f9['accountingData'][_0x43015a(0x485)](_0x8b2ff8=>new Date(_0x8b2ff8[_0x43015a(0xaa4)])[_0x43015a(0x224)]()!==_0x497538[_0x43015a(0x224)]()),_0x5c9c95(),_0x21d828(_0x35d0f9['accountingLedger'][_0x410f26],_0x410f26);}catch(_0x52e3c1){_0x43015a(0xc0e)==='hdaRR'?_0x41fb4d=_0x93f109[_0x43015a(0x99c)][_0x43015a(0xbb5)](_0x25926c=>_0x1082df[_0x43015a(0x38f)][_0x43015a(0x9cd)](_0x38dca1=>_0x38dca1['id']===_0x25926c))[_0x43015a(0x485)](_0xb5a8d5)[_0x43015a(0xbb5)](_0x4a11e8=>_0x43015a(0x7e7)+_0x4a11e8[_0x43015a(0x19d)]+_0x43015a(0xbc8)+_0x4a11e8[_0x43015a(0x9bc)])[_0x43015a(0x102)](''):_0x28dfd2(_0x43015a(0x17c)+_0x52e3c1[_0x43015a(0x5a1)]);}finally{if(_0x43015a(0x664)===_0x43015a(0xc50)){const _0x1eb6b6=_0x1af53a[_0x43015a(0x7e9)]('div');_0x1eb6b6[_0x43015a(0x73e)]=_0x43015a(0x1d9),_0x1eb6b6[_0x43015a(0x280)]=_0x43015a(0xb6b)+_0x2a8d88['id']+_0x43015a(0x8e7)+_0x549133['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x53a8a9[_0x43015a(0x36b)]||_0x10cb20)+_0x43015a(0xa92)+_0x2dc597['id']+'\x22\x20class=\x22char-name\x22>'+_0x41e3bd[_0x43015a(0x19d)]+_0x43015a(0x846),_0x442174[_0x43015a(0x364)](_0x1eb6b6);}else _0x13f6ba(![]);}}}async function _0xf4a610(){const _0x38ba71=_0x17d1db;_0x4322e2();(!_0x35d0f9[_0x38ba71(0x6c0)]||_0x35d0f9['worldBookCategories'][_0x38ba71(0x968)]===0x0)&&(_0x35d0f9[_0x38ba71(0x6c0)]=[{'id':_0x38ba71(0xb17),'name':'默认分类'}],_0x35d0f9[_0x38ba71(0x38f)][_0x38ba71(0x175)](_0x1fba16=>{const _0x13589d=_0x38ba71;!_0x1fba16[_0x13589d(0xcf5)]&&('iXfyF'===_0x13589d(0x108)?_0x2eda13[_0x13589d(0x65b)]=_0x13589d(0x7dc):_0x1fba16[_0x13589d(0xcf5)]='default');}));const _0x54bd3d=[..._0x8773f5];try{const _0x16fa78=localStorage[_0x38ba71(0x9a1)]('customStickers');if(_0x16fa78){const _0x5af924=JSON[_0x38ba71(0x97b)](_0x16fa78);Array[_0x38ba71(0xc29)](_0x5af924)?_0x38ba71(0xc10)!==_0x38ba71(0x830)?_0x95c6c9=[..._0x54bd3d,..._0x5af924]:_0x984d82['removeItem'](_0x38ba71(0x392)+_0x252b76['id']):_0x95c6c9=_0x54bd3d;}else _0x95c6c9=_0x54bd3d;}catch(_0x4b196c){'MkiSm'===_0x38ba71(0x795)?(console[_0x38ba71(0x4a1)](_0x38ba71(0x18e),_0x4b196c),_0x95c6c9=_0x54bd3d):(_0x2eccdd['value']=_0x12f8a0[_0x38ba71(0x69e)][_0x38ba71(0x915)]||'',_0x390f3c[_0x38ba71(0x850)]=_0x23fbfc[_0x38ba71(0x69e)][_0x38ba71(0xc53)]||'',_0x185ddb[_0x38ba71(0x850)]=_0x5c0bb5[_0x38ba71(0x69e)][_0x38ba71(0x9ad)]||'',_0x1d0720[_0x38ba71(0x850)]=_0x491d93(_0x111d24[_0x38ba71(0x2e8)]?.[_0x38ba71(0x60f)]??0x64),_0xcf97f7['getElementById'](_0x38ba71(0xb72))[_0x38ba71(0x850)]=_0x50034c[_0x38ba71(0x69e)][_0x38ba71(0x28f)]||'openai');}if(!localStorage[_0x38ba71(0x9a1)]('noir_data_migration_v1_complete')){_0x3a7c5b(_0x38ba71(0x555))[_0x38ba71(0xa34)](async _0x1530af=>{const _0x5f0154=_0x38ba71;_0x1530af?(_0x13f6ba(!![],_0x5f0154(0x34f)),await _0x227fed(),localStorage['setItem'](_0x5f0154(0x5e9),_0x5f0154(0x674)),_0x13f6ba(![]),_0x28dfd2(_0x5f0154(0x4f5)),setTimeout(()=>location[_0x5f0154(0x1d8)](),0x5dc)):_0x5f0154(0xac3)!==_0x5f0154(0x533)?_0x28dfd2(_0x5f0154(0x13e)):_0x526ae5[_0x5f0154(0xb18)](_0x5f0154(0x75f))[_0x5f0154(0x9db)]();});return;}if(!localStorage[_0x38ba71(0x9a1)]('noir_migration_fc_v1_complete')){if(_0x38ba71(0x5e3)===_0x38ba71(0xcd0))_0x4a7aef[_0x38ba71(0x14f)]=_0x5a630b[_0x38ba71(0x3aa)];else{console['log'](_0x38ba71(0xd11)),_0x13f6ba(!![],_0x38ba71(0xbd9));const _0x57f5c6=await _0xeb2e4();localStorage['setItem'](_0x38ba71(0x2b8),_0x38ba71(0x674)),_0x13f6ba(![]);if(_0x57f5c6>0x0){_0x28dfd2('好友圈数据升级完成，迁移了\x20'+_0x57f5c6+'\x20张旧图片。应用即将刷新。'),setTimeout(()=>location[_0x38ba71(0x1d8)](),0x5dc);return;}}}if(!localStorage[_0x38ba71(0x9a1)](_0x38ba71(0x2b8))){}if(!localStorage[_0x38ba71(0x9a1)](_0x38ba71(0xcc9))){console[_0x38ba71(0x52e)](_0x38ba71(0x709)),_0x13f6ba(!![],_0x38ba71(0x138));const _0x4be539=await _0x3a5ada();localStorage[_0x38ba71(0x570)]('noir_migration_music_v1_complete',_0x38ba71(0x674)),_0x13f6ba(![]);if(_0x4be539>0x0){_0x28dfd2(_0x38ba71(0xc7a)+_0x4be539+'\x20张旧封面。应用即将刷新。'),setTimeout(()=>location[_0x38ba71(0x1d8)](),0x5dc);return;}}if(!localStorage[_0x38ba71(0x9a1)]('noir_migration_avatar_v1_complete')){const _0x24bf13=await _0x425abc();localStorage['setItem'](_0x38ba71(0x698),_0x38ba71(0x674));if(_0x24bf13>0x0){_0x28dfd2(_0x38ba71(0x362)+_0x24bf13+_0x38ba71(0xb22)),setTimeout(()=>location[_0x38ba71(0x1d8)](),0x5dc);return;}}const _0x1aac25=document[_0x38ba71(0xb18)](_0x38ba71(0x492));_0x1aac25?_0x1aac25['addEventListener']('click',()=>{const _0x4fd1d3=_0x38ba71;if(_0x4fd1d3(0x50d)!=='aZdyi')_0xaeda6f(),_0x198934(_0x4fd1d3(0xc71),'home');else return'';}):console[_0x38ba71(0x4a1)](_0x38ba71(0xb3c));const _0x4af4de=document['getElementById']('app-livestream');_0x4af4de&&(_0x38ba71(0xb1b)!==_0x38ba71(0x273)?_0x4af4de['addEventListener']('click',()=>{_0x95c76d(),_0x198934('livestreamList','home');}):_0x4e892d(_0x38ba71(0x13e)));const _0x167dd3=document[_0x38ba71(0xb18)](_0x38ba71(0x55e)),_0x27c116=document['getElementById'](_0x38ba71(0x346)),_0x2cc7ae=document['getElementById'](_0x38ba71(0xb7a)),_0x22a469=document[_0x38ba71(0xb18)]('livestream-dm-backdrop'),_0x169526=document[_0x38ba71(0xb18)]('livestream-dm-messages'),_0x2af5e9=document[_0x38ba71(0xb18)](_0x38ba71(0xa47)),_0x172992=document[_0x38ba71(0xb18)]('livestream-dm-send-btn');function _0x2ff5a6(_0x57113b){const _0x5aa4f2=_0x38ba71;_0x5aa4f2(0x95b)!==_0x5aa4f2(0x95b)?_0x177bf1[_0x5aa4f2(0x14f)]=_0x462870[_0x5aa4f2(0x3aa)]:(_0x35d0f9[_0x5aa4f2(0x708)]=_0x57113b,_0x167dd3[_0x5aa4f2(0x79f)]['toggle'](_0x5aa4f2(0xa36),_0x57113b),_0x57113b&&(_0x5aa4f2(0x805)===_0x5aa4f2(0x9a6)?_0x147efc=_0x2409ad[_0x5aa4f2(0x89a)]:(_0x35d0f9[_0x5aa4f2(0x2ce)]&&('oKfZl'===_0x5aa4f2(0x741)?(_0x35d0f9['hasNewDMReply']=![],_0x27c116[_0x5aa4f2(0x79f)][_0x5aa4f2(0xb42)](_0x5aa4f2(0xaef))):_0x43bc81(_0x1eb180[_0x5aa4f2(0x67f)])[_0x5aa4f2(0xa34)](_0x56a40f=>{const _0x5b7d59=_0x5aa4f2;if(_0x56a40f)_0x284eb7[_0x5b7d59(0x9c9)]=_0x2d493e[_0x5b7d59(0x900)](_0x56a40f);})),_0x2af5e9[_0x5aa4f2(0x1d4)](),_0x509455())));}_0x27c116[_0x38ba71(0xafb)]('click',()=>_0x2ff5a6(!_0x35d0f9['isDMPanelVisible'])),_0x2cc7ae[_0x38ba71(0xafb)](_0x38ba71(0x9db),()=>_0x2ff5a6(![])),_0x22a469[_0x38ba71(0xafb)](_0x38ba71(0x9db),()=>_0x2ff5a6(![]));function _0x509455(){const _0x532ebf=_0x38ba71;'oyFBt'!==_0x532ebf(0xad3)?(_0x169526['innerHTML']='',_0x35d0f9[_0x532ebf(0x720)][_0x532ebf(0x175)](_0x890e3c=>{const _0xff3ff=_0x532ebf;if('JJwAx'!==_0xff3ff(0x4ac))_0x1aa217(![]);else{const _0x3a55f1=document['createElement']('div');_0x3a55f1[_0xff3ff(0x73e)]=_0xff3ff(0x1d2)+_0x890e3c[_0xff3ff(0x7b0)],_0x3a55f1[_0xff3ff(0x65b)]=_0x890e3c['content'],_0x169526[_0xff3ff(0x364)](_0x3a55f1);}}),_0x169526['scrollTop']=_0x169526[_0x532ebf(0x3aa)]):_0x35153f[_0x532ebf(0xc36)]();}function _0x5ae42b(){const _0x26baa1=_0x38ba71,_0x297562=_0x2af5e9[_0x26baa1(0x850)][_0x26baa1(0x2e2)]();if(!_0x297562)return;_0x35d0f9['currentLivestreamDMs'][_0x26baa1(0xb2f)]({'sender':'user','content':_0x297562}),_0x509455();const _0x2f52f9={'type':'dm','content':_0x297562};_0x35d0f9['currentLivestreamUserActions'][_0x26baa1(0xb2f)](_0x2f52f9),_0x2af5e9[_0x26baa1(0x850)]='',_0x2af5e9[_0x26baa1(0x1d4)]();}_0x172992['addEventListener'](_0x38ba71(0x9db),_0x5ae42b),_0x2af5e9[_0x38ba71(0xafb)]('keydown',_0x835ef3=>{const _0x5876cd=_0x38ba71;if(_0x5876cd(0x191)==='LRYja')_0x835ef3[_0x5876cd(0xc53)]===_0x5876cd(0x9c2)&&(_0x835ef3[_0x5876cd(0xa05)](),_0x5ae42b());else{const _0xc90004=_0x9f19ad(_0x2817a8[_0x5876cd(0x218)][_0x5876cd(0x33d)],0xa);!_0x1ade68(_0xc90004)&&_0x406b18(_0xc90004);}});const _0x38913c=document[_0x38ba71(0xb18)](_0x38ba71(0x8b4));_0x38913c[_0x38ba71(0xafb)](_0x38ba71(0x9db),()=>{const _0x3b2dca=_0x38ba71;if(_0x3b2dca(0x62f)===_0x3b2dca(0x442))_0x61d432=_0x35dbb1['parse'](_0x17cb34);else{const _0x575732={'type':_0x3b2dca(0x9cc),'name':_0x3b2dca(0xa8a),'count':0x1};_0x35d0f9['currentLivestreamUserActions'][_0x3b2dca(0xb2f)](_0x575732),_0x28dfd2(_0x3b2dca(0xa07));const _0x38e208=document[_0x3b2dca(0x7e9)](_0x3b2dca(0x591));_0x38e208[_0x3b2dca(0x65b)]='🌸',_0x38e208['style'][_0x3b2dca(0x97a)]=_0x3b2dca(0xdc),_0x38e208[_0x3b2dca(0x7d9)][_0x3b2dca(0x562)]=_0x3b2dca(0xab5),_0x38e208[_0x3b2dca(0x7d9)][_0x3b2dca(0x1fd)]=Math[_0x3b2dca(0xeb)]()*0x50+0xa+'%',_0x38e208['style'][_0x3b2dca(0x7ae)]=_0x3b2dca(0x83c),_0x38e208['style'][_0x3b2dca(0x6d2)]='1',_0x38e208[_0x3b2dca(0x7d9)][_0x3b2dca(0x42b)]=_0x3b2dca(0x3f7),_0x38e208[_0x3b2dca(0x7d9)][_0x3b2dca(0xbe5)]='none',document[_0x3b2dca(0xb18)](_0x3b2dca(0xada))['appendChild'](_0x38e208),setTimeout(()=>{const _0x5d7327=_0x3b2dca;_0x38e208[_0x5d7327(0x7d9)][_0x5d7327(0x33b)]=_0x5d7327(0x267),_0x38e208[_0x5d7327(0x7d9)][_0x5d7327(0x6d2)]='0',setTimeout(()=>_0x38e208['remove'](),0x7d0);},0x32);}});function _0x42d778(){const _0x115de6=_0x38ba71;_0x27c116[_0x115de6(0x79f)]['toggle'](_0x115de6(0xaef),_0x35d0f9['hasNewDMReply']);}async function _0x2be44b(){const _0x3e6673=_0x38ba71;if('XdSdD'===_0x3e6673(0xc3a))return _0x6281da[_0x3e6673(0xbba)][_0x3e6673(0xbb5)](_0xefdb9e=>typeof _0xefdb9e===_0x3e6673(0xb1e)?_0xefdb9e:_0xefdb9e?.[_0x3e6673(0x9bc)])[_0x3e6673(0x485)](_0x54e8dc)['flatMap'](_0x56c6cb);else{if(!_0x35d0f9['activeLivestreamCharId']||_0x35d0f9[_0x3e6673(0x39a)][_0x3e6673(0x968)]===0x0){if(_0x3e6673(0xc6e)===_0x3e6673(0xc6e)){console['log']('Noir\x27s\x20Log:\x20直播日志为空，没什么可总结的。');return;}else _0x280163[_0x3e6673(0x4a1)](_0x3e6673(0xbc7),_0x31afc3),_0x192275(_0x3e6673(0x1c5)+_0x2c18a9[_0x3e6673(0x5a1)]),_0x484ff5[_0x3e6673(0xb18)](_0x3e6673(0x92f))[_0x3e6673(0x7d9)][_0x3e6673(0x31f)]=_0x3e6673(0xb91),_0x14368c[_0x3e6673(0xb18)](_0x3e6673(0x37e))[_0x3e6673(0x7d9)][_0x3e6673(0x31f)]='none';}_0x13f6ba(!![],_0x3e6673(0x77e));const _0x473b54=_0x45939a(_0x35d0f9[_0x3e6673(0x80f)]),_0x38577c=_0x5f52db(_0x35d0f9['activeChatId']);try{const _0x221b04=new Date(),_0x89c960=_0x3e6673(0xb79)+_0x221b04[_0x3e6673(0x8f0)]('zh-CN',{'dateStyle':_0x3e6673(0x68c),'timeStyle':'short'})+'\x0a-\x20**核心指令**:\x20你必须假定这场直播就是在此【当前时间】附近刚刚结束的。在报告中，所有与时间相关的描述，如\x20\x22start_time\x22，都必须以此为基准。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3363af=_0x35d0f9[_0x3e6673(0x39a)][_0x3e6673(0xbb5)](_0x3d4bab=>{const _0x111217=_0x3e6673,_0x33514e=new Date(_0x3d4bab[_0x111217(0xaa4)])[_0x111217(0x3c8)](_0x111217(0x984));if(_0x3d4bab['type']===_0x111217(0xc58))return'['+_0x33514e+_0x111217(0xcf7)+_0x3d4bab['speaker']+_0x111217(0xbc8)+_0x3d4bab[_0x111217(0x9bc)];if(_0x3d4bab[_0x111217(0xb12)]===_0x111217(0x2d9))return'['+_0x33514e+']\x20[弹幕\x20'+_0x3d4bab[_0x111217(0x809)]+_0x111217(0xbc8)+(_0x3d4bab[_0x111217(0xb28)]||_0x3d4bab[_0x111217(0x9bc)]);if(_0x3d4bab[_0x111217(0xb12)]===_0x111217(0xca3))return'['+_0x33514e+']\x20[私信回复\x20from\x20'+_0x3d4bab[_0x111217(0x39e)]+'\x20to\x20'+_0x3d4bab['to']+']:\x20'+_0x3d4bab[_0x111217(0x9bc)];return'['+_0x33514e+_0x111217(0x880)+JSON['stringify'](_0x3d4bab);})[_0x3e6673(0x102)]('\x0a'),_0x5698f9=_0x3e6673(0xcd5)+_0x473b54[_0x3e6673(0x19d)]+_0x3e6673(0x670)+_0x89c960+_0x3e6673(0x95d)+_0x3363af+_0x3e6673(0x1fe)+_0x473b54[_0x3e6673(0x19d)]+'的情绪变化总结\x20(【注意】必须用角色名，不是“主播”)\x0a\x20\x20\x20\x20\x20\x20-\x20`audience_mood`:\x20观众氛围变化总结\x0a\x20\x20\x20\x20\x20\x20-\x20`key_events`:\x20本场直播的关键事件节点\x20(列表形式)\x0a\x20\x20\x20\x20\x20\x20-\x20`dm_interaction_summary`:\x20与“我”('+_0x38577c[_0x3e6673(0x19d)]+_0x3e6673(0x125)+_0x473b54[_0x3e6673(0x19d)]+_0x3e6673(0x98e)+_0x473b54[_0x3e6673(0x19d)]+_0x3e6673(0x4a9)+_0x38577c[_0x3e6673(0x19d)]+_0x3e6673(0x30c)+_0x38577c[_0x3e6673(0x19d)]+_0x3e6673(0x877)+_0x473b54[_0x3e6673(0x19d)]+_0x3e6673(0x4e9)+_0x473b54[_0x3e6673(0x19d)]+_0x3e6673(0xbd3),_0x585979=[{'role':_0x3e6673(0x773),'content':_0x5698f9}],_0x58bf69=await _0xb7fe2e(_0x585979);if(_0x58bf69){if('enUFr'!==_0x3e6673(0x2fe)){const _0x39dc60=_0x58bf69[_0x3e6673(0x39f)](/```(?:yaml)?/g,'')[_0x3e6673(0x2e2)]();!_0x35d0f9[_0x3e6673(0x8e4)][_0x473b54['id']]&&(_0x35d0f9[_0x3e6673(0x8e4)][_0x473b54['id']]=[]),_0x35d0f9['livestreamReplays'][_0x473b54['id']]['unshift'](_0x39dc60),_0x5c9c95(),_0x28dfd2(_0x3e6673(0x62a));}else _0x2f42a0[_0x3e6673(0x71f)]('https://xhslink.com/m/5IgC1rniI2I','_blank');}}catch(_0x1d332c){_0x3e6673(0x4be)===_0x3e6673(0x4be)?(console[_0x3e6673(0x4a1)](_0x3e6673(0x5a9),_0x1d332c),_0x28dfd2(_0x3e6673(0x8a2)+_0x1d332c[_0x3e6673(0x5a1)])):_0x243e01[_0x3d8c36]=_0x4ca69b['parse'](_0x15f214);}finally{_0x13f6ba(![]);}}}let _0x2b7482={'charId':null,'index':-0x1};function _0x3fd899(_0x521e23,_0x105838,_0x139d60){const _0x594caf=_0x38ba71;if(window[_0x594caf(0x4bb)])clearTimeout(window['replayPressTimer']);const _0x311ccc=()=>{window['replayPressTimer']=setTimeout(()=>{const _0x3f9c43=_0x52a6;_0x3f9c43(0x728)!==_0x3f9c43(0x8f6)?(_0x521e23[_0x3f9c43(0xa05)](),_0x29871d(_0x105838,_0x139d60)):_0x1c1766[_0x3f9c43(0xb2f)](_0x3cb87f);},0x320);},_0x3f06a6=()=>{const _0x3cf018=_0x594caf;clearTimeout(window[_0x3cf018(0x4bb)]),document[_0x3cf018(0x854)](_0x3cf018(0xc4f),_0x3f06a6),document['removeEventListener']('mouseleave',_0x3f06a6),document[_0x3cf018(0x854)](_0x3cf018(0x9ff),_0x3f06a6),document[_0x3cf018(0x854)]('touchcancel',_0x3f06a6);};document[_0x594caf(0xafb)](_0x594caf(0xc4f),_0x3f06a6,{'once':!![]}),document[_0x594caf(0xafb)](_0x594caf(0xcbc),_0x3f06a6,{'once':!![]}),document['addEventListener'](_0x594caf(0x9ff),_0x3f06a6,{'once':!![]}),document['addEventListener']('touchcancel',_0x3f06a6,{'once':!![]}),_0x311ccc();}function _0x29871d(_0xdad87d,_0xd520b1){const _0x120481=_0x38ba71,_0x151e6a=_0x120481(0x1e8)+_0xd520b1;if(document[_0x120481(0xb18)](_0x151e6a))return;const _0x482f2a='\x0a\x20\x20\x20\x20<div\x20id=\x22'+_0x151e6a+_0x120481(0xcc0);document['body']['insertAdjacentHTML'](_0x120481(0xc9e),_0x482f2a);const _0x216fe3=document[_0x120481(0xb18)](_0x151e6a),_0x538188=()=>_0x216fe3['remove']();_0x216fe3[_0x120481(0x3eb)](_0x120481(0xa1b))[_0x120481(0x8df)]=_0x538188,_0x216fe3['querySelector'](_0x120481(0x76a))[_0x120481(0x8df)]=_0x538188,_0x216fe3[_0x120481(0x3eb)](_0x120481(0x61a))[_0x120481(0x8df)]=()=>{const _0x18d8bb=_0x120481;_0x18d8bb(0x1fb)===_0x18d8bb(0x6b0)?_0x5acc4e?_0xa8f265['classList'][_0x18d8bb(0x366)](_0x18d8bb(0x245)):_0x565584[_0x18d8bb(0x79f)][_0x18d8bb(0xb42)](_0x18d8bb(0x245)):(_0xaa0ec2(_0xdad87d,_0xd520b1),_0x538188());},_0x216fe3[_0x120481(0x3eb)](_0x120481(0x7ed))[_0x120481(0x8df)]=()=>{_0x1b7515(_0xdad87d,_0xd520b1),_0x538188();};}async function _0x1b7515(_0xa5b3c4,_0x5db57d){const _0x56a585=_0x38ba71,_0x113a92=await _0x3a7c5b(_0x56a585(0x7ce));if(_0x113a92){if(_0x56a585(0xa48)!==_0x56a585(0xa48)){const _0x2f4145=_0x27449c(_0x501897[_0x56a585(0x693)]);_0x2f4145&&(delete _0x2f4145['spriteTransform'],_0x543596(),_0xe79b46(_0x2f4145['id'],_0x56a585(0x680)),_0x1c5a68(_0x56a585(0x123)),_0x2be7e4(!![]));}else _0x35d0f9['livestreamReplays'][_0xa5b3c4]&&_0x35d0f9[_0x56a585(0x8e4)][_0xa5b3c4][_0x5db57d]&&(_0x56a585(0x1a4)!=='zVaqW'?_0x5f02bc['type']===_0x56a585(0x2d9)&&_0xb0aeaf(_0x912f3a):(_0x35d0f9[_0x56a585(0x8e4)][_0xa5b3c4]['splice'](_0x5db57d,0x1),_0x5c9c95(),_0x40de19(_0xa5b3c4),_0x28dfd2(_0x56a585(0x5bd))));}}function _0xaa0ec2(_0x46236e,_0x785c34){const _0x22e93a=_0x38ba71,_0x2df724=_0x35d0f9[_0x22e93a(0x8e4)][_0x46236e]?.[_0x785c34];if(_0x2df724===undefined)return;const _0x3b8109=document[_0x22e93a(0xb18)](_0x22e93a(0x57f)),_0x874197=document['getElementById'](_0x22e93a(0xc81));_0x874197[_0x22e93a(0x850)]=_0x2df724,_0x3b8109[_0x22e93a(0x79f)][_0x22e93a(0x366)](_0x22e93a(0xa36)),document[_0x22e93a(0xb18)]('save-edit-replay-btn')[_0x22e93a(0x8df)]=()=>_0x4a3083(_0x46236e,_0x785c34),document[_0x22e93a(0xb18)](_0x22e93a(0xb5c))['onclick']=_0x200dd2,document['getElementById'](_0x22e93a(0x312))['onclick']=_0x200dd2;}function _0x200dd2(){const _0x4b7b6d=_0x38ba71;document[_0x4b7b6d(0xb18)]('edit-replay-modal')[_0x4b7b6d(0x79f)][_0x4b7b6d(0xb42)]('show');}function _0x4a3083(_0x3002d8,_0x471d27){const _0x45191f=_0x38ba71,_0x52cbb7=document[_0x45191f(0xb18)](_0x45191f(0xc81))[_0x45191f(0x850)];_0x35d0f9[_0x45191f(0x8e4)][_0x3002d8][_0x471d27]=_0x52cbb7,_0x5c9c95(),_0x40de19(_0x3002d8),_0x200dd2(),_0x28dfd2('回放档-案已更新。');}function _0x3835fe(){const _0x16f077=_0x38ba71,_0x2d5d9b=_0x35d0f9[_0x16f077(0x80f)],_0x51452d=_0x45939a(_0x2d5d9b);if(!_0x51452d)return;document[_0x16f077(0xb18)](_0x16f077(0x8a6))[_0x16f077(0x65b)]=_0x51452d[_0x16f077(0x19d)]+_0x16f077(0x352),_0x40de19(_0x2d5d9b),_0x198934(_0x16f077(0x8e4),_0x16f077(0x154));}function _0x40de19(_0x3a741c){const _0x294936=_0x38ba71,_0x579cac=document[_0x294936(0xb18)](_0x294936(0x15b)),_0x842109=_0x35d0f9['livestreamReplays'][_0x3a741c]||[];_0x579cac[_0x294936(0x280)]='';if(_0x842109['length']===0x0){if('urhpk'===_0x294936(0x3bc)){_0x579cac[_0x294936(0x280)]=_0x294936(0xbd0);return;}else{const _0x4a70c3=new _0x173a77(),_0x19931d=_0x24594f['getElementById']('galgame-time'),_0x4f81a2=_0x3a916a['getElementById'](_0x294936(0xa7c));if(_0x19931d&&_0x4f81a2){const _0x577571=_0x3440d1(_0x4a70c3[_0x294936(0x76b)]())[_0x294936(0x839)](0x2,'0'),_0x1cd3f9=_0x5a6893(_0x4a70c3[_0x294936(0x553)]())[_0x294936(0x839)](0x2,'0');_0x19931d[_0x294936(0x65b)]=_0x577571+':'+_0x1cd3f9;const _0x311281=_0x4a70c3[_0x294936(0x7eb)]()+0x1,_0x42be0d=_0x4a70c3[_0x294936(0xb2b)](),_0x28b5bd=[_0x294936(0x99f),_0x294936(0x6d5),_0x294936(0x85c),_0x294936(0x4f3),_0x294936(0x25b),'星期五',_0x294936(0x634)][_0x4a70c3[_0x294936(0x73d)]()];_0x4f81a2[_0x294936(0x65b)]=_0x311281+'月'+_0x42be0d+'日\x20'+_0x28b5bd;}}}_0x842109[_0x294936(0x175)]((_0x46346e,_0x4169df)=>{const _0x5b79fc=_0x294936;if(_0x5b79fc(0x284)===_0x5b79fc(0x54b)){const _0x3aa56d=_0xcb62a1[_0x5b79fc(0xce3)][_0x5b79fc(0x636)][0x0];if(!_0x3aa56d)return;const _0x50f852=_0x5bb1f0['createObjectURL'](_0x3aa56d);_0x1e54c3['style'][_0x5b79fc(0x2f8)]=_0x5b79fc(0x575)+_0x50f852+'\x27)';}else{const _0xf3d7f7=_0x46346e['match'](/start_time:\s*"?([^"\n]+)"?/),_0x570cd5=_0x46346e['match'](/theme:\s*"?([^"\n]+)"?/),_0x1f6bc6=_0xf3d7f7?_0xf3d7f7[0x1]:_0x5b79fc(0x2c2),_0x9f7a6d=document['createElement']('div');_0x9f7a6d[_0x5b79fc(0x73e)]=_0x5b79fc(0x544),_0x9f7a6d[_0x5b79fc(0x280)]=_0x5b79fc(0xcaf)+(_0x570cd5?_0x570cd5[0x1]:'未知主题')+_0x5b79fc(0x72d)+_0x1f6bc6+_0x5b79fc(0x936),_0x9f7a6d[_0x5b79fc(0xafb)](_0x5b79fc(0x9db),()=>_0x4fbc2d(_0x46346e)),_0x9f7a6d[_0x5b79fc(0xafb)](_0x5b79fc(0x6b5),_0x5a0525=>{_0x5a0525['button']===0x0&&_0x3fd899(_0x5a0525,_0x3a741c,_0x4169df);}),_0x9f7a6d['addEventListener']('touchstart',_0x4375bd=>_0x3fd899(_0x4375bd,_0x3a741c,_0x4169df),{'passive':![]}),_0x9f7a6d[_0x5b79fc(0xafb)](_0x5b79fc(0xa6b),_0x10be3e=>_0x10be3e[_0x5b79fc(0xa05)]()),_0x9f7a6d[_0x5b79fc(0xafb)](_0x5b79fc(0xa6b),_0x2246db=>_0x2246db['preventDefault']()),_0x579cac[_0x5b79fc(0x364)](_0x9f7a6d);}});}function _0x4fbc2d(_0x173472){const _0x59a66a=_0x38ba71;_0x3a4adb(_0x173472),_0x198934(_0x59a66a(0x66e),_0x59a66a(0x8e4));}function _0x3a4adb(_0x4bccdf){const _0x5dc806=_0x38ba71;if(_0x5dc806(0x760)===_0x5dc806(0x760)){const _0x37b9d4=document['getElementById'](_0x5dc806(0xb23));_0x37b9d4['innerHTML']='';const _0x15f63f=_0x4bccdf[_0x5dc806(0xb2d)]('\x0a');let _0x4b8b48='',_0x4b63f6=![];_0x15f63f[_0x5dc806(0x175)](_0xa60880=>{const _0x46b058=_0x5dc806,_0x3df868=_0xa60880[_0x46b058(0x2e2)]();if(!_0x3df868)return;if(_0x3df868[_0x46b058(0x41d)]('-\x20')){if(_0x46b058(0x2c9)===_0x46b058(0x2c9)){if(_0x4b63f6){if(_0x46b058(0x420)===_0x46b058(0x32a))_0x5199d0[_0x46b058(0x79f)][_0x46b058(0xb42)]('active'),_0x1885fa[_0x46b058(0x79f)][_0x46b058(0x366)](_0x46b058(0x530)),_0x3c83d3();else{const _0x4f9b47=document[_0x46b058(0x7e9)]('li');_0x4f9b47[_0x46b058(0x65b)]=_0x3df868[_0x46b058(0x185)](0x2),_0x4f9b47[_0x46b058(0x7d9)][_0x46b058(0x51a)]=_0x46b058(0x9d8),_0x37b9d4[_0x46b058(0x1cf)][_0x46b058(0x364)](_0x4f9b47);}}}else _0x42c77b['classList'][_0x46b058(0xb42)](_0x46b058(0xa36)),_0x2d0559['onclick']=null,_0x267ace[_0x46b058(0x8df)]=null,_0x3f4886['onclick']=null,_0x1fce4c['removeEventListener'](_0x46b058(0x1a3),_0x473af3),_0x394be0(_0x329db8);}else{if(_0x46b058(0x975)===_0x46b058(0x484)){const _0x26be39=_0x511385[_0x46b058(0x7e9)](_0x46b058(0x591));_0x26be39['className']=_0x46b058(0x27d),_0x26be39[_0x46b058(0x280)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>'+_0x54af97[_0x46b058(0x561)]+'</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x1bd390[_0x46b058(0x19d)]+_0x46b058(0xcea),_0x26be39[_0x46b058(0xafb)](_0x46b058(0x9db),()=>_0x209721(_0x34f190['id'],_0x49bb96[_0x46b058(0x19d)])),_0x4ad806[_0x46b058(0x380)]===_0x46b058(0x3f9)?_0x13ee22[_0x46b058(0x364)](_0x26be39):_0x29be2b['appendChild'](_0x26be39);}else{_0x4b63f6=![];const _0x11644a=_0x3df868[_0x46b058(0xb2d)](/:(.*)/s);_0x4b8b48=_0x11644a[0x0][_0x46b058(0x2e2)]();let _0xb17115=(_0x11644a[0x1]||'')[_0x46b058(0x2e2)]()[_0x46b058(0x39f)](/^"|"$/g,'');const _0x708236={'start_time':_0x46b058(0x580),'duration':'直播时长','theme':'本场主题','streamer_mood':_0x46b058(0x2b2),'audience_mood':_0x46b058(0x53e),'key_events':'关键事件','dm_interaction_summary':_0x46b058(0x666)},_0x3c5770=document[_0x46b058(0x7e9)]('h4');_0x3c5770[_0x46b058(0x65b)]=_0x708236[_0x4b8b48]||_0x4b8b48,_0x3c5770['style']['borderBottom']=_0x46b058(0xcdb),_0x3c5770[_0x46b058(0x7d9)][_0x46b058(0xa7f)]=_0x46b058(0x36a),_0x3c5770['style']['marginTop']='20px',_0x37b9d4['appendChild'](_0x3c5770);if(_0xb17115){if(_0x46b058(0xc38)!==_0x46b058(0xc38))_0x1ecc6a[_0x46b058(0x9c9)]=_0x5378e6?_0x3733b8[_0x46b058(0x900)](_0x507959):_0xf45b5f;else{const _0x46675a=document[_0x46b058(0x7e9)]('p');_0x46675a['textContent']=_0xb17115,_0x46675a[_0x46b058(0x7d9)]['lineHeight']=_0x46b058(0x5c6),_0x37b9d4[_0x46b058(0x364)](_0x46675a);}}else{if(_0x46b058(0xbe2)===_0x46b058(0x543)){const _0x2f9883=_0x840820[_0x46b058(0x97b)](_0x220c6a[_0x46b058(0x9a1)](_0x46b058(0x9e6))||'[]');_0x3bdbdd[_0x46b058(0x175)](_0x1d4252=>{const _0x1c2dca=_0x46b058,_0x3678dc=_0x1d4252[_0x1c2dca(0x218)][_0x1c2dca(0x532)];!_0x2f9883[_0x1c2dca(0xb63)](_0x3678dc)&&_0x2f9883[_0x1c2dca(0xb2f)](_0x3678dc);}),_0x748602[_0x46b058(0x570)]('deletedStickers',_0x34885b[_0x46b058(0xcf9)](_0x2f9883)),_0x4bd450=![],_0x5320e6(),_0x41279e('已放逐。');}else{_0x4b63f6=!![];const _0x278a86=document['createElement']('ul');_0x278a86[_0x46b058(0x7d9)][_0x46b058(0x29f)]='20px',_0x37b9d4[_0x46b058(0x364)](_0x278a86);}}}}});}else{if(_0x40be62)_0xf2a6e8[_0x5dc806(0x7d9)][_0x5dc806(0x2f8)]=_0x5dc806(0x575)+_0x341303['createObjectURL'](_0x13d7c9)+'\x27)';}}const _0x54b3ae=_0x72c17d();await _0x19304d(),_0xee8e5d(),((()=>{const _0x3e8738=_0x38ba71;let _0x496ae3=![],_0x32f11f=_0x35d0f9[_0x3e8738(0x6c0)][_0x3e8738(0x9cd)](_0x134ce0=>_0x134ce0[_0x3e8738(0x19d)]===_0x3e8738(0x4d1));!_0x32f11f&&(_0x32f11f={'id':_0x3e8738(0xd16),'name':_0x3e8738(0x4d1)},_0x35d0f9['worldBookCategories'][_0x3e8738(0xb2f)](_0x32f11f),console[_0x3e8738(0x52e)](_0x3e8738(0x493)),_0x496ae3=!![]);const _0x3dc107=_0x3e8738(0xc8d);let _0xe83598=_0x35d0f9['worldBooks']['some'](_0x7c0559=>_0x7c0559['id']===_0x3dc107);if(!_0xe83598){console[_0x3e8738(0x52e)](_0x3e8738(0x811));const _0x569037=_0x3e8738(0x578),_0x224939={'id':_0x3dc107,'name':_0x3e8738(0xd07),'content':_0x569037,'categoryId':_0x32f11f['id']};_0x35d0f9[_0x3e8738(0x38f)][_0x3e8738(0xb2f)](_0x224939),_0x496ae3=!![];}_0x496ae3&&(_0x3e8738(0xc51)==='fLUHK'?(_0x5c9c95(),console['log'](_0x3e8738(0x49f))):_0x3a085f[_0x3e8738(0x79f)]['add']('unlocked'));})()),_0x544b02(),_0x486213(),_0x1b9c5f(),_0x45890c(),_0x35346d(),_0x3aa143(),_0xc93649(),_0x150eb5(),_0x548969(),_0x54116b();const _0x46b1d6=document[_0x38ba71(0xb18)]('app-pages-container');_0x46b1d6&&requestAnimationFrame(()=>{const _0x367e78=_0x38ba71;if(_0x367e78(0x479)!==_0x367e78(0x479)){_0x565b4a['innerHTML']='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>',_0x1d6d02[_0x367e78(0x280)]=_0x367e78(0x1f6),_0x3f39ae['getElementById'](_0x367e78(0x5d5))[_0x367e78(0xafb)]('click',_0x134f16),_0x3c8f53['getElementById'](_0x367e78(0x1b4))['addEventListener'](_0x367e78(0x9db),_0x57890b);return;}else _0x46b1d6[_0x367e78(0x7d9)][_0x367e78(0x6d2)]='1';});_0x457652(),_0x3e52a4(),setInterval(_0x3e52a4,0x7530),_0x38fffe(),_0x24185b(),_0x53689b();const _0x202f0f=document[_0x38ba71(0xb18)](_0x38ba71(0x4b0));document[_0x38ba71(0xb18)](_0x38ba71(0xaba))[_0x38ba71(0xafb)](_0x38ba71(0x9db),function(_0x3a8f91){const _0x50218c=_0x38ba71;if(_0x3a8f91[_0x50218c(0xce3)][_0x50218c(0x58e)](_0x50218c(0x80c)))return;const _0x1a7b10=document[_0x50218c(0xb18)](_0x50218c(0x9a0));if(_0x1a7b10){if('GjNMR'==='hAEuZ'){const _0x1882cf=_0x2799b4(_0x3134db['content']);_0x150fc7[_0x50218c(0xbdd)](_0xf84e6b,{'content':_0x1882cf[_0x50218c(0x9bc)],'quotedMessage':_0x1882cf[_0x50218c(0x659)]});}else _0x1a7b10['click']();}}),_0x198934(_0x38ba71(0x58a),'init');(_0x54b3ae||_0x35d0f9[_0x38ba71(0x1f2)][_0x38ba71(0x968)]===0x0)&&(_0x28dfd2(_0x38ba71(0x6a1)),setTimeout(()=>{const _0x593cfb=_0x38ba71;_0x198934(_0x593cfb(0x152),_0x593cfb(0x58a)),setTimeout(()=>_0x389b4f(),0x64);},0x6a4));document[_0x38ba71(0xb18)]('meeting-reroll-button')[_0x38ba71(0xafb)]('click',_0x3b5410);const _0x53f8a1=document['getElementById'](_0x38ba71(0x1b0));document[_0x38ba71(0xb18)]('upload-widget-bg-button')[_0x38ba71(0xafb)](_0x38ba71(0x9db),()=>_0x53f8a1['click']()),document[_0x38ba71(0xb18)](_0x38ba71(0xbf9))[_0x38ba71(0xafb)]('click',()=>{const _0x2431dd=_0x38ba71;_0x35d0f9[_0x2431dd(0x2e8)]['widgetBgImage']=null,_0x5c9c95(),_0x38fffe(),_0x28dfd2('小组件背景已恢复默认。');}),_0x53f8a1[_0x38ba71(0xafb)](_0x38ba71(0x326),async _0x65ef73=>{const _0x2b32b5=_0x38ba71,_0x5bec48=_0x65ef73[_0x2b32b5(0xce3)][_0x2b32b5(0x636)][0x0];if(!_0x5bec48)return;try{const _0x2ec38a=await _0x2a77d2(_0x5bec48);_0x35d0f9['preferences'][_0x2b32b5(0xbb6)]=_0x2ec38a,_0x5c9c95(),_0x38fffe(),_0x28dfd2(_0x2b32b5(0x798));}catch(_0x4cf7d8){if(_0x2b32b5(0xc45)===_0x2b32b5(0xc45))_0x28dfd2(_0x2b32b5(0x7e4)+_0x4cf7d8[_0x2b32b5(0x5a1)]);else{const _0x3d3ee7=_0x395097[_0x2b32b5(0x3eb)](_0x2b32b5(0x8c2)+_0x4dab8e+_0x2b32b5(0x290)+_0x34662b+_0x2b32b5(0x17f))?.[_0x2b32b5(0x280)];_0x3d3ee7&&(_0x2221c0[_0x2b32b5(0x280)]=_0x3d3ee7);}}}),_0x37f1d7(),document['getElementById'](_0x38ba71(0x66a))[_0x38ba71(0xafb)]('click',()=>document[_0x38ba71(0xb18)](_0x38ba71(0x87e))[_0x38ba71(0x9db)]()),document[_0x38ba71(0xb18)](_0x38ba71(0x77a))[_0x38ba71(0xafb)](_0x38ba71(0x9db),async()=>{const _0xa27534=_0x38ba71;await _0x5dd6ed('widget_badge'),localStorage[_0xa27534(0x82a)]('badgeState'),_0x37f1d7(),_0x28dfd2(_0xa27534(0x7ea));}),document[_0x38ba71(0xb18)](_0x38ba71(0x87e))['addEventListener'](_0x38ba71(0x326),async _0x518dbf=>{const _0x45826f=_0x38ba71;if(_0x45826f(0xa72)!==_0x45826f(0xa72))return'刚才';else{const _0x451b49=_0x518dbf[_0x45826f(0xce3)][_0x45826f(0x636)][0x0];if(!_0x451b49)return;try{await _0xad4538('widget_badge',_0x451b49),await _0x37f1d7(),_0x28dfd2(_0x45826f(0xc5a));}catch(_0x304e6d){if(_0x45826f(0x7d6)===_0x45826f(0x7d6))_0x28dfd2(_0x45826f(0x7e4)+_0x304e6d[_0x45826f(0x5a1)]);else{const _0x57d732=_0x43e18d[_0x45826f(0xad1)]['map'](_0x3d4215=>_0x247928(_0x3d4215)?.[_0x45826f(0x19d)]||'未知')[_0x45826f(0x102)]('、'),_0x564c8b='<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>';_0x249bcf='<div\x20class=\x22post-likes\x22>'+_0x564c8b+'\x20'+_0x57d732+_0x45826f(0x9b7);}}}}),_0x38a7d2(),document[_0x38ba71(0xb18)](_0x38ba71(0xbd7))[_0x38ba71(0xafb)]('mousedown',_0x3c79a4),document[_0x38ba71(0xb18)](_0x38ba71(0xbd7))['addEventListener'](_0x38ba71(0x983),_0x3c79a4,{'passive':![]}),document['getElementById'](_0x38ba71(0x63a))[_0x38ba71(0xafb)](_0x38ba71(0x6b5),_0x365d03),document['getElementById'](_0x38ba71(0x63a))[_0x38ba71(0xafb)]('touchstart',_0x365d03,{'passive':![]}),document[_0x38ba71(0xb18)](_0x38ba71(0x60b))[_0x38ba71(0xafb)](_0x38ba71(0x9db),()=>document[_0x38ba71(0xb18)](_0x38ba71(0x34c))[_0x38ba71(0x9db)]()),document[_0x38ba71(0xb18)]('reset-card-button')[_0x38ba71(0xafb)](_0x38ba71(0x9db),async()=>{const _0x1f6365=_0x38ba71;await _0x5dd6ed(_0x1f6365(0x9ab)),localStorage[_0x1f6365(0x82a)](_0x1f6365(0xcb5)),_0x38a7d2(),_0x28dfd2(_0x1f6365(0x6f3));}),document[_0x38ba71(0xb18)](_0x38ba71(0x34c))[_0x38ba71(0xafb)](_0x38ba71(0x326),async _0x4cff07=>{const _0x55e69d=_0x38ba71,_0x5cb87c=_0x4cff07['target'][_0x55e69d(0x636)][0x0];if(!_0x5cb87c)return;try{_0x55e69d(0x459)===_0x55e69d(0x459)?(await _0xad4538(_0x55e69d(0x9ab),_0x5cb87c),await _0x38a7d2(),_0x28dfd2(_0x55e69d(0x918))):_0xfbc01b=_0x55e69d(0x2e7)+_0x266453;}catch(_0x19438b){_0x28dfd2(_0x55e69d(0x7e4)+_0x19438b['message']);}}),document['getElementById'](_0x38ba71(0x686))[_0x38ba71(0xafb)](_0x38ba71(0x9db),async()=>{const _0x13644e=_0x38ba71,_0x550318=await _0x3a7c5b(_0x13644e(0x4b5));_0x550318&&(_0x13644e(0x926)===_0x13644e(0x946)?_0x1a9794[_0x13644e(0xb2f)]('['+_0x1b5dbc(_0x2a8e1e)+_0x13644e(0x2f2)+(_0x2dc30e[_0x13644e(0x9bc)]?.['match'](/：(.+?)]/)?.[0x1]||'表情')+']'):(localStorage[_0x13644e(0x82a)]('badgeState'),localStorage[_0x13644e(0x82a)]('cardWidgetState'),_0x28dfd2(_0x13644e(0xab6)),setTimeout(()=>location[_0x13644e(0x1d8)](),0x3e8)));});const _0x563a54=document['getElementById'](_0x38ba71(0x186));_0x563a54['addEventListener'](_0x38ba71(0x9db),()=>{const _0x4a5c9a=_0x38ba71;_0x4a5c9a(0xbfa)==='eSCfn'?(_0x1f1326(),_0x198934(_0x4a5c9a(0xaf1),'home')):_0x55fdc6(_0x4a5c9a(0x17c)+_0x3a27f1[_0x4a5c9a(0x5a1)]);});const _0x563ef0=document[_0x38ba71(0xb18)](_0x38ba71(0xbf8));_0x563ef0[_0x38ba71(0xafb)]('click',()=>{const _0x41bb8a=_0x38ba71;_0x5af778(),_0x198934('musicLibrary',_0x41bb8a(0x58a));}),document['getElementById'](_0x38ba71(0x21b))[_0x38ba71(0xafb)](_0x38ba71(0x9db),()=>_0x198934(_0x38ba71(0x58a),_0x38ba71(0x4e2))),document[_0x38ba71(0xb18)](_0x38ba71(0x334))[_0x38ba71(0xafb)](_0x38ba71(0x9db),()=>_0x198934('home',_0x38ba71(0xaf1))),document[_0x38ba71(0xb18)](_0x38ba71(0xc95))[_0x38ba71(0xafb)]('click',()=>{const _0x13d2bb=_0x38ba71;if(_0x13d2bb(0x55d)==='irJYv'){const _0x1ef363=_0x1d6f8d[_0x13d2bb(0xb18)]('expense-description'),_0x281007=_0x40c9f4[_0x13d2bb(0xb18)]('expense-amount'),_0x22b504=_0x1ef363[_0x13d2bb(0x850)][_0x13d2bb(0x2e2)](),_0x2e37a0=_0x33175a(_0x281007[_0x13d2bb(0x850)]);if(!_0x22b504||_0x169c19(_0x2e37a0)||_0x2e37a0<=0x0){_0x4f0224(_0x13d2bb(0x78c));return;}_0x1cca4b[_0x13d2bb(0xef)]['push']({'id':_0x13d2bb(0xfb)+_0x44737c['now'](),'description':_0x22b504,'amount':_0x2e37a0,'timestamp':_0x4377e7[_0x13d2bb(0x5ee)]()}),_0x244983(),_0x3c84c7(),_0x1ef363[_0x13d2bb(0x850)]='',_0x281007[_0x13d2bb(0x850)]='',_0x1ef363[_0x13d2bb(0x1d4)]();}else _0x35d0f9[_0x13d2bb(0xc56)]=null,_0x198934(_0x13d2bb(0xaf1),_0x13d2bb(0xb97));}),document[_0x38ba71(0xb18)]('diary-send-button')[_0x38ba71(0xafb)](_0x38ba71(0x9db),_0x21b36f),document[_0x38ba71(0xb18)]('diary-get-reply-button')[_0x38ba71(0xafb)](_0x38ba71(0x9db),_0x127d38),document[_0x38ba71(0xb18)](_0x38ba71(0x375))['addEventListener'](_0x38ba71(0x1a3),_0x3a5d13=>{const _0x49f2cd=_0x38ba71;_0x3a5d13['key']===_0x49f2cd(0x9c2)&&!_0x3a5d13[_0x49f2cd(0x193)]&&(_0x3a5d13[_0x49f2cd(0xa05)](),_0x21b36f());});const _0x105a07=[_0x38ba71(0x680),_0x38ba71(0x582),_0x38ba71(0x5b9),_0x38ba71(0x3dd),'shy'];_0x105a07[_0x38ba71(0x175)](_0x3a03ca=>{const _0x4ee502=_0x38ba71;if(_0x4ee502(0xa7a)===_0x4ee502(0x23b))_0x4cbca9[_0x4ee502(0x7d9)][_0x55f1a6]=_0x1dde8c[_0x3a26c1];else{const _0x146742=document['getElementById'](_0x4ee502(0x8c5)+_0x3a03ca+_0x4ee502(0x5b3)),_0x5b67fe=document['getElementById'](_0x4ee502(0x8c5)+_0x3a03ca+_0x4ee502(0x92e));_0x146742&&_0x5b67fe&&(_0x146742[_0x4ee502(0xafb)](_0x4ee502(0x9db),()=>_0x5b67fe[_0x4ee502(0x9db)]()),_0x5b67fe[_0x4ee502(0xafb)]('change',_0x10fa50=>{const _0x2f144e=_0x4ee502,_0x5a3f4a=_0x10fa50[_0x2f144e(0xce3)][_0x2f144e(0x636)][0x0];if(!_0x5a3f4a)return;try{const _0x4307e0=URL[_0x2f144e(0x900)](_0x5a3f4a);_0x146742[_0x2f144e(0x7d9)][_0x2f144e(0x2f8)]=_0x2f144e(0x575)+_0x4307e0+'\x27)';}catch(_0xc72228){_0x28dfd2(_0x2f144e(0x1b2)+_0xc72228[_0x2f144e(0x5a1)]);}}));}}),document[_0x38ba71(0xb18)](_0x38ba71(0x399))['addEventListener']('click',_0x4b8772),document['getElementById'](_0x38ba71(0x226))[_0x38ba71(0xafb)](_0x38ba71(0x9db),()=>{const _0x177bee=_0x38ba71;_0x35d0f9[_0x177bee(0x116)]=_0x35d0f9[_0x177bee(0x116)]===_0x177bee(0x52c)?'galgame':_0x177bee(0x52c),_0x31c03c();}),document[_0x38ba71(0xb18)](_0x38ba71(0x63a))[_0x38ba71(0xafb)](_0x38ba71(0x6b5),_0x365d03),document[_0x38ba71(0xb18)]('meeting-scene-view')['addEventListener'](_0x38ba71(0x983),_0x365d03,{'passive':![]});let _0x599193=null;function _0x365d03(_0x112123){const _0x575623=_0x38ba71;if(_0x599193)clearTimeout(_0x599193);const _0x502016=_0x112123[_0x575623(0xce3)]['closest']('[data-history-index]');if(!_0x502016)return;const _0x5ad413=parseInt(_0x502016[_0x575623(0x218)][_0x575623(0x33d)],0xa);if(isNaN(_0x5ad413))return;const _0x3f3af4=()=>{const _0x453e57=_0x575623;if(_0x453e57(0x1ae)!==_0x453e57(0x1ae)){if(_0x197157){const _0x1ed7af=_0x5f5249['createElement']('p');_0x1ed7af[_0x453e57(0x280)]=_0x202548,_0x1ed7af[_0x453e57(0x7d9)][_0x453e57(0x4d2)]='0',_0x3ab7b7['appendChild'](_0x1ed7af);}}else _0x599193=setTimeout(()=>{const _0x3e295a=_0x453e57;if(_0x3e295a(0xb33)!==_0x3e295a(0x886)){if(_0x112123[_0x3e295a(0xb12)]===_0x3e295a(0x983))_0x112123[_0x3e295a(0xa05)]();_0x44e893(_0x5ad413);}else _0x3a3320[_0x3e295a(0x280)]='',_0x110768[_0x3e295a(0x175)](_0x2b11c7=>{const _0x4b9711=_0x3e295a,_0xee10a5=_0x4d7c84[_0x4b9711(0x7e9)](_0x4b9711(0x591));_0xee10a5[_0x4b9711(0x65b)]=_0x2b11c7,_0xee10a5[_0x4b9711(0xafb)](_0x4b9711(0x9db),()=>{const _0x16ad35=_0x4b9711;_0x4960cb[_0x16ad35(0x850)]=_0x2b11c7,_0x2c012d[_0x16ad35(0x79f)][_0x16ad35(0xb42)]('show');}),_0x26f07e['appendChild'](_0xee10a5);}),_0x26917['classList']['add'](_0x3e295a(0xa36)),_0x1dc67d(_0x3e295a(0xa63)+_0xa54e6e[_0x3e295a(0x968)]+_0x3e295a(0x8ae));},0x320);},_0x27e835=()=>{if(_0x599193)clearTimeout(_0x599193);};document['addEventListener'](_0x575623(0xc4f),_0x27e835,{'once':!![]}),document[_0x575623(0xafb)](_0x575623(0xcbc),_0x27e835,{'once':!![]}),document[_0x575623(0xafb)](_0x575623(0x9ff),_0x27e835,{'once':!![]}),document[_0x575623(0xafb)](_0x575623(0x476),_0x27e835,{'once':!![]}),_0x3f3af4();}document[_0x38ba71(0xb18)]('import-accounting-input')[_0x38ba71(0xafb)]('change',_0x4e28ef),document[_0x38ba71(0x3f0)][_0x38ba71(0xafb)](_0x38ba71(0x9db),_0x15e7a0=>{const _0x11bd3b=_0x38ba71;if(_0x11bd3b(0x3a9)!=='BgnwG'){const _0x47e439=new _0x53e609(_0x4c52ed['timestamp']),_0x560d93=_0x500704[_0x11bd3b(0x859)]((_0x29609f-_0x47e439)/(0x3e8*0x3c));if(_0x560d93<0x5)_0x312693+='\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。';else{if(_0x560d93<0x78)_0xd5ab51+=_0x11bd3b(0x148)+_0x560d93+_0x11bd3b(0x8cb);else{const _0x4c446c=_0x254282[_0x11bd3b(0x859)](_0x560d93/0x3c);if(_0x4c446c<0x30)_0x527069+=_0x11bd3b(0x148)+_0x4c446c+'小时前聊过，可以适当问候，不要直接继续之前的话题。';else _0x477ec9+=_0x11bd3b(0xcb4)+_0x1bc780[_0x11bd3b(0x859)](_0x4c446c/0x18)+_0x11bd3b(0xb4c);}}}else{const _0x32ee82=_0x15e7a0[_0x11bd3b(0xce3)][_0x11bd3b(0x58e)](_0x11bd3b(0xd14));if(_0x32ee82){const _0x47daf4=_0x15e7a0['target'][_0x11bd3b(0x58e)](_0x11bd3b(0xa41)),_0x166561=_0x15e7a0[_0x11bd3b(0xce3)]['closest'](_0x11bd3b(0x335));if(_0x47daf4)_0x18bdb9();else{if(_0x166561){const _0xabc967=_0x166561['closest'](_0x11bd3b(0xca9)),_0x52ea3c=_0x166561[_0x11bd3b(0x218)][_0x11bd3b(0x933)],_0x53685e=parseInt(_0xabc967[_0x11bd3b(0x218)][_0x11bd3b(0x33d)],0xa);_0x4a8cc0(_0x52ea3c,_0x53685e,_0x32ee82);}else{if('HrWIO'!==_0x11bd3b(0x2aa))_0x1bdf17(_0x22ee50),_0x6dd148[_0x11bd3b(0x850)]='',_0x24fa33(_0x2d50bc,0x64);else{const _0x3226ac=_0x1f3fa9();_0x3226ac&&_0x3226ac[_0x11bd3b(0xe3)]&&_0x3226ac[_0x11bd3b(0xe3)]['isActive']&&(_0x59b436[_0x11bd3b(0x7d9)]['display']=_0x11bd3b(0x9d4),setTimeout(()=>_0x59b436[_0x11bd3b(0x79f)]['add'](_0x11bd3b(0xa36)),0xa));}}}return;}if(window['getSelection']()[_0x11bd3b(0xa35)]())return;const _0x9b9a04=_0x15e7a0['target']['closest'](_0x11bd3b(0xca9));if(_0x9b9a04&&!_0x15e7a0[_0x11bd3b(0xce3)][_0x11bd3b(0x58e)](_0x11bd3b(0xb51))){if(_0x11bd3b(0x73a)!==_0x11bd3b(0xb86)){const _0x26384b=parseInt(_0x9b9a04[_0x11bd3b(0x218)][_0x11bd3b(0x33d)],0xa);!isNaN(_0x26384b)&&('FxKdL'!==_0x11bd3b(0x155)?_0x5e3e74[_0x11bd3b(0x720)][_0x11bd3b(0xb2f)]({'sender':'ai','content':_0x5c4d27[_0x11bd3b(0x2e2)]()}):_0x44e893(_0x26384b));}else _0xfe8253[_0x11bd3b(0x9c9)]=_0x4e81b9['createObjectURL'](_0x4d3783),_0x197955[_0x11bd3b(0x7d9)]['opacity']=0x1;}}});const _0x3ff431=document[_0x38ba71(0xb18)](_0x38ba71(0x6f9));_0x3ff431&&_0x3ff431[_0x38ba71(0xafb)](_0x38ba71(0x9db),()=>{const _0x3a3e9b=_0x38ba71;_0x28dfd2(_0x3a3e9b(0x90d));});const _0x361e82=document[_0x38ba71(0xb18)](_0x38ba71(0x200)),_0x1b583d=localStorage[_0x38ba71(0x9a1)](_0x38ba71(0xcc6));if(_0x1b583d){if(_0x38ba71(0x3ea)==='posLW')try{const _0x567819=JSON[_0x38ba71(0x97b)](_0x1b583d);Array[_0x38ba71(0xc29)](_0x567819)&&(_0x361e82[_0x38ba71(0x850)]=_0x567819['map'](_0x4e24d6=>_0x4e24d6[_0x38ba71(0x19d)]+'--'+_0x4e24d6['url'])[_0x38ba71(0x102)]('\x0a'));}catch(_0x5d726b){}else _0x203e84[_0x38ba71(0x82a)](_0x38ba71(0x392)+_0x4ad0c9['id']),_0x1ade2b(_0x38ba71(0x745)+_0x26d8f5['name']+'\x22\x20的聊天记录已清空。');}document['getElementById'](_0x38ba71(0xbb1))[_0x38ba71(0xafb)]('click',()=>{const _0x2b05e7=_0x38ba71,_0x1afae5=_0x361e82['value'],_0xf91a96=_0x1afae5[_0x2b05e7(0xb2d)]('\x0a')[_0x2b05e7(0x485)](_0x25a867=>_0x25a867[_0x2b05e7(0x2e2)]()!==''),_0x1792d0=[];let _0x536001=0x0;for(const _0x346dd8 of _0xf91a96){const _0x545b2e=_0x346dd8[_0x2b05e7(0xb2d)]('--');_0x545b2e[_0x2b05e7(0x968)]===0x2&&_0x545b2e[0x0][_0x2b05e7(0x2e2)]()&&_0x545b2e[0x1][_0x2b05e7(0x2e2)]()['startsWith'](_0x2b05e7(0xc78))?_0x1792d0['push']({'name':_0x545b2e[0x0][_0x2b05e7(0x2e2)](),'url':_0x545b2e[0x1][_0x2b05e7(0x2e2)]()}):_0x536001++;}_0x536001>0x0&&('FvlSR'===_0x2b05e7(0x316)?(delete _0x3c8be7[_0x2b05e7(0x973)],_0x5bedcd(),_0x8f4fd8(_0x3c6b60['id'],_0x2b05e7(0x680)),_0x44aeb1(_0x2b05e7(0x123)),_0x1a3c11(!![])):_0x28dfd2('有\x20'+_0x536001+_0x2b05e7(0x6bc)));try{localStorage[_0x2b05e7(0x570)](_0x2b05e7(0xcc6),JSON['stringify'](_0x1792d0)),_0x28dfd2(_0x2b05e7(0x76d)),setTimeout(()=>location['reload'](),0x5dc);}catch(_0x1fb225){_0x28dfd2(_0x2b05e7(0x8d9));}}),_0x1d6c45(),_0x2fd10f(),document[_0x38ba71(0xb18)]('back-to-livestream-from-replays')['addEventListener'](_0x38ba71(0x9db),()=>_0x198934('livestreamRoom',_0x38ba71(0x8e4))),document['getElementById'](_0x38ba71(0xb4f))[_0x38ba71(0xafb)]('click',()=>_0x198934(_0x38ba71(0x8e4),_0x38ba71(0x66e)));const _0x19a671=document[_0x38ba71(0xb18)]('player-play-pause-btn'),_0x5abc44=document[_0x38ba71(0xb18)](_0x38ba71(0xb4a)),_0x2df40d=document[_0x38ba71(0xb18)](_0x38ba71(0x111));if(_0x19a671){if(_0x38ba71(0x274)==='UGMLR')return new _0x3a346c(_0x377e15=>{const _0x260989=_0x38ba71,_0xf12f0b=_0x5909fe[_0x260989(0xb18)](_0x260989(0xbbb)),_0x49509f=_0xa7efbe[_0x260989(0xb18)]('modal-text'),_0x3346b3=_0x3fbf72[_0x260989(0xb18)](_0x260989(0xbe4)),_0x4bf954=_0x4cbfcd[_0x260989(0xb18)](_0x260989(0xaf8)),_0x243eb0=_0x4ba9f5[_0x260989(0xb18)](_0x260989(0xb8b));_0x49509f[_0x260989(0x65b)]=_0x50e251,_0xf12f0b[_0x260989(0x7d9)]['display']='flex';const _0x58c4fa=_0x3f1953=>{const _0x55c30e=_0x260989;_0xf12f0b['style']['display']=_0x55c30e(0x9ba),_0x3346b3[_0x55c30e(0x8df)]=_0x4bf954['onclick']=_0x243eb0[_0x55c30e(0x8df)]=null,_0x4f19d7[_0x55c30e(0x854)]('keydown',_0x273b50),_0x377e15(_0x3f1953);},_0x273b50=_0x427e57=>{const _0x2fdd59=_0x260989;if(_0x427e57[_0x2fdd59(0xc53)]==='Escape')_0x58c4fa(![]);if(_0x427e57['key']===_0x2fdd59(0x9c2))_0x58c4fa(!![]);};_0x3346b3[_0x260989(0x8df)]=()=>_0x58c4fa(!![]),_0x4bf954[_0x260989(0x8df)]=()=>_0x58c4fa(![]),_0x243eb0[_0x260989(0x8df)]=()=>_0x58c4fa(![]),_0x4a18de[_0x260989(0xafb)]('keydown',_0x273b50);});else _0x19a671[_0x38ba71(0xafb)]('click',()=>{const _0x162e58=_0x38ba71;if(_0x162e58(0x723)==='RljRQ'){const _0x5c6db6=_0x57029b['accountingData'][_0x162e58(0x59a)](_0x3bc49e=>_0x3bc49e['id']===_0xc3424f);_0x5c6db6>-0x1&&(_0x951a67['accountingData'][_0x162e58(0x895)](_0x5c6db6,0x1),_0x2e91b9(),_0x3850f8());}else _0x459e34[_0x162e58(0x9c9)]&&(_0x459e34[_0x162e58(0x976)]?_0x459e34[_0x162e58(0xc36)]():'oZBut'===_0x162e58(0xb88)?(_0x353f7e(),_0x27a134['getElementById'](_0x162e58(0xa1d))[_0x162e58(0x79f)][_0x162e58(0xb42)]('show'),_0x106e32['getElementById'](_0x162e58(0xc1d))[_0x162e58(0x7d9)][_0x162e58(0x31f)]=_0x162e58(0x9ba),_0x4b4c25(()=>{_0x54b54b(![]);},0x14)):_0x459e34[_0x162e58(0x639)]());});}_0x5abc44&&('qTagm'===_0x38ba71(0x2ef)?_0x5abc44[_0x38ba71(0xafb)](_0x38ba71(0x9db),()=>{const _0x52cb5b=_0x38ba71;if('VvkWM'===_0x52cb5b(0x8d0)){if(_0x35d0f9['musicPlaylist'][_0x52cb5b(0x968)]===0x0)return;_0x35d0f9[_0x52cb5b(0x863)]=(_0x35d0f9[_0x52cb5b(0x863)]+0x1)%_0x35d0f9[_0x52cb5b(0x17b)][_0x52cb5b(0x968)];const _0x52c25e=_0x35d0f9['musicPlaylist'][_0x35d0f9[_0x52cb5b(0x863)]]['id'];_0x503220(_0x52c25e,_0x35d0f9[_0x52cb5b(0x17b)]['map'](_0x2a0a10=>_0x2a0a10['id']));}else{_0x4f4060('直播主题和观众氛围都不能为空！');return;}}):_0x539874[_0x38ba71(0xaa4)]>=_0x2ecce9['getTime']()&&_0xdb1ff3[_0x38ba71(0xb2f)]({'timestamp':_0xf5bdfc[_0x38ba71(0xaa4)],'type':_0x38ba71(0x6e1),'content':'['+(_0x3a356b[_0x38ba71(0x2f3)]===_0x38ba71(0x809)?_0x4b9097[_0x38ba71(0x19d)]:_0x2d9609['name'])+_0x38ba71(0xbc8)+_0x47994a['content']}));_0x2df40d&&_0x2df40d[_0x38ba71(0xafb)]('click',()=>{const _0x3798e0=_0x38ba71;if('tmqwx'!==_0x3798e0(0xb32))_0x5b29a4[_0x3798e0(0x65b)]='对方正在输入...';else{if(_0x35d0f9[_0x3798e0(0x17b)][_0x3798e0(0x968)]===0x0)return;_0x35d0f9[_0x3798e0(0x863)]=(_0x35d0f9[_0x3798e0(0x863)]-0x1+_0x35d0f9[_0x3798e0(0x17b)][_0x3798e0(0x968)])%_0x35d0f9['musicPlaylist'][_0x3798e0(0x968)];const _0x4523d9=_0x35d0f9[_0x3798e0(0x17b)][_0x35d0f9['currentlyPlayingIndex']]['id'];_0x503220(_0x4523d9,_0x35d0f9['musicPlaylist'][_0x3798e0(0xbb5)](_0x4ffd0d=>_0x4ffd0d['id']));}});document[_0x38ba71(0xb18)](_0x38ba71(0x43b))[_0x38ba71(0xafb)](_0x38ba71(0x9db),()=>{const _0x2b6eee=_0x38ba71;if(_0x2b6eee(0xa8b)===_0x2b6eee(0xa8b))document[_0x2b6eee(0xb18)](_0x2b6eee(0x735))[_0x2b6eee(0x9db)]();else{_0x23cffa[_0x2b6eee(0x850)]=_0x2b6eee(0xad2);return;}}),document[_0x38ba71(0xb18)](_0x38ba71(0x940))['addEventListener'](_0x38ba71(0x9db),async()=>{const _0x48483f=_0x38ba71;await _0x5dd6ed(_0x48483f(0x314)),localStorage[_0x48483f(0x82a)]('cardState2'),_0x38a7d2(),_0x28dfd2(_0x48483f(0x864));}),document[_0x38ba71(0xb18)]('card-input-2')[_0x38ba71(0xafb)]('change',async _0x5ed02b=>{const _0x2e8208=_0x38ba71,_0x491bcc=_0x5ed02b[_0x2e8208(0xce3)][_0x2e8208(0x636)][0x0];if(!_0x491bcc)return;try{if(_0x2e8208(0xb8f)===_0x2e8208(0xb8f))await _0xad4538(_0x2e8208(0x314),_0x491bcc),await _0x38a7d2(),_0x28dfd2(_0x2e8208(0x465));else try{const _0x19ee3a=_0xbc24c1[_0x2e8208(0x97b)](_0x33fac3),_0xd9fffe={..._0xbf6b6e},_0x55bbc2={..._0xd9fffe,..._0x19ee3a};_0x55bbc2[_0x2e8208(0x2e8)]={..._0xd9fffe[_0x2e8208(0x2e8)],..._0x19ee3a[_0x2e8208(0x2e8)]||{}},_0x55bbc2['apiSettings']={..._0xd9fffe[_0x2e8208(0x69e)],..._0x19ee3a['apiSettings']||{}},_0x5673bc[_0x2e8208(0xbdd)](_0x50c6e4,_0x55bbc2);}catch(_0x31c7f7){_0x311425[_0x2e8208(0x4a1)](_0x2e8208(0xc3f),_0x31c7f7),_0x508f7e['removeItem'](_0x2e8208(0x6d0));}}catch(_0xe1d087){if(_0x2e8208(0x7b9)===_0x2e8208(0x7b9))_0x28dfd2(_0x2e8208(0x7e4)+_0xe1d087['message']);else{const _0x46175b=_0x4548bd(_0x8393a9);if(_0x46175b){const _0x19c2ad=_0x1afb64['createElement'](_0x2e8208(0x91f));_0x19c2ad[_0x2e8208(0x850)]=_0x46175b['id'],_0x19c2ad[_0x2e8208(0x65b)]=_0x46175b[_0x2e8208(0x19d)],_0x1e9e5b[_0x2e8208(0x364)](_0x19c2ad);}}}}),_0x15ff94(),_0x46d6ea(),_0x158a39(),document[_0x38ba71(0xb18)](_0x38ba71(0x700))['addEventListener']('click',async()=>{const _0x35c9e3=_0x38ba71;if('WTjeU'==='GdGVz'){const _0x5e8694=_0x543175(_0x46e59f[_0x35c9e3(0xba6)]);_0x15deb8=_0x5e8694['name']||'我';}else{const _0xa83bd7=await _0x3a7c5b(_0x35c9e3(0x8d2));if(_0xa83bd7){const _0x2d4386=await _0x3a7c5b('最后一次确认，真的要清空所有数据吗？');if(_0x2d4386){if(_0x35c9e3(0x46b)!==_0x35c9e3(0x46b)){_0x26bb86['chats']=_0x11a979[_0x35c9e3(0xa6c)][_0x35c9e3(0x485)](_0xf115d3=>_0xf115d3['id']!==_0x5524c4);try{_0x50a916['removeItem']('chatHistory_'+_0x4abcbd);}catch(_0x2c1156){_0x1cc063[_0x35c9e3(0x4a1)]('Failed\x20to\x20remove\x20history\x20for\x20chat\x20'+_0x38edca,_0x2c1156);}_0x3218c6[_0x35c9e3(0xba6)]===_0x1c4617&&(_0x30c232['activeChatId']=_0x2a2bdc[_0x35c9e3(0xa6c)][0x0]?.['id']||null,_0x6afeb4(_0x3e3f65[_0x35c9e3(0xba6)])),_0xf8fc4b();}else{_0x13f6ba(!![],_0x35c9e3(0xb1f));try{localStorage[_0x35c9e3(0x7e6)]();const _0x48968b=await _0x4c3f9a,_0x118e6b=_0x48968b[_0x35c9e3(0x832)]([_0x35c9e3(0xa76),'music_library',_0x35c9e3(0x5fc)],_0x35c9e3(0x43c));await Promise[_0x35c9e3(0x799)]([_0x118e6b[_0x35c9e3(0x566)]('images')[_0x35c9e3(0x7e6)](),_0x118e6b[_0x35c9e3(0x566)](_0x35c9e3(0xb58))[_0x35c9e3(0x7e6)](),_0x118e6b[_0x35c9e3(0x566)](_0x35c9e3(0x5fc))[_0x35c9e3(0x7e6)]()]),await new Promise(_0x36972b=>{_0x118e6b['oncomplete']=_0x36972b;}),_0x28dfd2(_0x35c9e3(0xb0e)),setTimeout(()=>{location['reload']();},0x5dc);}catch(_0x9013b2){_0x13f6ba(![]),_0x28dfd2(_0x35c9e3(0x652)+_0x9013b2[_0x35c9e3(0x5a1)]);}}}}}});const _0x9a1259=document[_0x38ba71(0x3eb)]('#settings-screen\x20.content');if(_0x9a1259){const _0x1a1854=document[_0x38ba71(0x7e9)](_0x38ba71(0x591));_0x1a1854['id']='api-watermark',_0x1a1854[_0x38ba71(0x65b)]='核心代码-Noir\x20监工-小红书ID：糯糯糯糯五\x0a糯米机仅在qq群102552954提供，完全免费，请勿二传',Object[_0x38ba71(0xbdd)](_0x1a1854[_0x38ba71(0x7d9)],{'position':_0x38ba71(0xdc),'top':_0x38ba71(0xa6f),'right':'20px','fontSize':_0x38ba71(0xbdc),'lineHeight':'1.4','color':_0x38ba71(0x536),'opacity':_0x38ba71(0x269),'cursor':'pointer','zIndex':'1','transition':'opacity\x200.2s\x20ease-in-out','whiteSpace':_0x38ba71(0x157),'textAlign':_0x38ba71(0x426)}),_0x1a1854[_0x38ba71(0x908)]=()=>{const _0x1bf439=_0x38ba71;_0x1a1854[_0x1bf439(0x7d9)][_0x1bf439(0x6d2)]='1';},_0x1a1854['onmouseout']=()=>{const _0x20fd17=_0x38ba71;_0x1a1854['style']['opacity']=_0x20fd17(0x269);},_0x1a1854['addEventListener'](_0x38ba71(0x9db),()=>{const _0x88df8a=_0x38ba71;if(_0x88df8a(0xa90)===_0x88df8a(0xa90))window[_0x88df8a(0x71f)](_0x88df8a(0x410),_0x88df8a(0xb09));else{const _0x371fae={'id':_0x88df8a(0x546)+_0x575591['now'](),'name':_0x97353b,'content':_0xf736e9,'categoryId':_0x15e780};_0x29ba5c[_0x88df8a(0x38f)]['push'](_0x371fae);}}),_0x9a1259[_0x38ba71(0x7d9)]['position']=_0x38ba71(0x9aa),_0x9a1259[_0x38ba71(0x46d)](_0x1a1854);}_0x5e085c(),_0x2fe03b();function _0x95c76d(){const _0x213544=_0x38ba71,_0x2aab9a=document[_0x213544(0xb18)](_0x213544(0x8dc));_0x2aab9a[_0x213544(0x280)]='';const _0x2aad5f=_0x35d0f9['characters'][_0x213544(0x485)](_0x59c832=>_0x35d0f9[_0x213544(0xa6c)][_0x213544(0x83f)](_0x24fd77=>_0x24fd77[_0x213544(0xb12)]==='private'&&_0x24fd77[_0x213544(0x8f1)][_0x213544(0xb63)](_0x59c832['id'])));if(_0x2aad5f[_0x213544(0x968)]===0x0){_0x2aab9a['innerHTML']=_0x213544(0x44c);return;}_0x2aad5f['forEach'](_0x22c59e=>{const _0x35864f=_0x213544,_0x593c26=document[_0x35864f(0x7e9)]('li');_0x593c26[_0x35864f(0x73e)]='character-item',_0x593c26[_0x35864f(0x218)]['charId']=_0x22c59e['id'],_0x593c26[_0x35864f(0x280)]=_0x35864f(0x91b)+(_0x22c59e[_0x35864f(0x36b)]||_0x20a236)+'\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>'+_0x22c59e[_0x35864f(0x19d)]+_0x35864f(0x714),_0x593c26[_0x35864f(0xafb)](_0x35864f(0x9db),()=>{_0x843198(_0x22c59e['id']);}),_0x2aab9a[_0x35864f(0x364)](_0x593c26);});}async function _0x843198(_0x2654df){const _0x310d24=_0x38ba71,_0x112be0=_0x45939a(_0x2654df);if(!_0x112be0)return;_0x35d0f9[_0x310d24(0x80f)]=_0x2654df,document[_0x310d24(0xb18)](_0x310d24(0xc7d))[_0x310d24(0x65b)]=_0x112be0['name']+_0x310d24(0x685),_0x198934(_0x310d24(0x154),_0x310d24(0xa37));const _0x4d155f=document[_0x310d24(0xb18)]('livestream-background'),_0x208b6e=document[_0x310d24(0xb18)](_0x310d24(0x8ff)),_0x3e7fd8=document[_0x310d24(0xb18)](_0x310d24(0x84d));_0x4d155f[_0x310d24(0x7d9)][_0x310d24(0x2f8)]='',document[_0x310d24(0xb18)](_0x310d24(0x504))['src']='',_0x208b6e[_0x310d24(0x280)]='',_0x3e7fd8[_0x310d24(0x65b)]=_0x310d24(0x8fe);let _0x21c81a=null;try{const _0x38d49f=localStorage['getItem'](_0x310d24(0x752));_0x38d49f&&(_0x310d24(0x87a)!=='QLHdU'?(_0x531aba(![]),_0x5be137(),_0x1645eb['isGenerating']=![]):_0x21c81a=JSON[_0x310d24(0x97b)](_0x38d49f));}catch(_0x56d420){console[_0x310d24(0x4a1)](_0x310d24(0x141),_0x56d420),localStorage[_0x310d24(0x82a)](_0x310d24(0x752));}if(_0x21c81a&&_0x21c81a[_0x310d24(0xca6)]===_0x2654df){if(_0x310d24(0x427)!==_0x310d24(0x427)){const _0x431538=_0x4bdee8['indexOf']('{'),_0x5b07d6=_0x500eaa[_0x310d24(0x5ca)]('}');if(_0x431538>=0x0&&_0x5b07d6>_0x431538)return _0x5cbf5c[_0x310d24(0x571)](_0x431538,_0x5b07d6+0x1);return _0x5703b8;}else{console[_0x310d24(0x52e)](_0x310d24(0x2c6)),_0x35d0f9[_0x310d24(0x39a)]=_0x21c81a[_0x310d24(0x52e)]||[],_0x35d0f9[_0x310d24(0x7fa)]=_0x21c81a[_0x310d24(0x5e2)]||[],_0x35d0f9[_0x310d24(0x2e0)]=_0x21c81a[_0x310d24(0x5de)]||0x0,_0x35d0f9['currentLivestreamDMs']=_0x21c81a[_0x310d24(0x47e)]||[],document[_0x310d24(0xb18)](_0x310d24(0x92f))[_0x310d24(0x7d9)][_0x310d24(0x31f)]=_0x310d24(0x9ba),document[_0x310d24(0xb18)](_0x310d24(0x37e))[_0x310d24(0x7d9)]['display']=_0x310d24(0x9d4),_0x35d0f9['currentLivestreamLog'][_0x310d24(0x175)](_0x2939ce=>{const _0x4c229b=_0x310d24;'FioNd'===_0x4c229b(0xc84)?_0x2939ce[_0x4c229b(0xb12)]===_0x4c229b(0x2d9)&&_0x8beff7(_0x2939ce):_0x30ccf7[_0x4c229b(0x7d9)][_0x4c229b(0x6d2)]='1';});const _0x314f50=_0x35d0f9['currentLivestreamSpeechQueue'][_0x35d0f9['currentSpeechIndex']];if(_0x314f50&&typeof _0x314f50===_0x310d24(0x977))_0x3e7fd8[_0x310d24(0x65b)]=_0x314f50[_0x310d24(0xa56)],_0x56f9a5(_0x2654df,_0x314f50[_0x310d24(0xaa2)]);else typeof _0x314f50==='string'?_0x3e7fd8[_0x310d24(0x65b)]=_0x314f50:_0x3e7fd8[_0x310d24(0x65b)]=_0x310d24(0xc90);}}else _0x310d24(0x6f5)!==_0x310d24(0x6f5)?_0x117a09(_0x1aef92):(console['log'](_0x310d24(0x76c)),_0x35d0f9[_0x310d24(0x39a)]=[],_0x35d0f9['currentLivestreamSpeechQueue']=[],_0x35d0f9[_0x310d24(0x2e0)]=-0x1,_0x35d0f9['currentLivestreamDMs']=[],_0x3e7fd8['textContent']='直播尚未开始...',document['getElementById'](_0x310d24(0x92f))[_0x310d24(0x7d9)][_0x310d24(0x31f)]=_0x310d24(0xb91),document['getElementById'](_0x310d24(0x37e))[_0x310d24(0x7d9)]['display']=_0x310d24(0x9ba));try{const _0x106391=await _0x5288fd(_0x310d24(0x9e3)+_0x2654df);if(_0x106391){if('YHvXt'==='uHuSz'){const _0x27cdc=_0x54132b['userProfiles']['find'](_0x2f77a2=>_0x2f77a2['id']===_0x14666f);if(!_0x27cdc)return;_0x57aee2[_0x310d24(0xb18)](_0x310d24(0x974))[_0x310d24(0x850)]=_0x27cdc['id'],_0x4361de[_0x310d24(0xb18)]('user-profile-edit-title')['textContent']=_0x310d24(0x7fc),_0x2f0a4a[_0x310d24(0xb18)](_0x310d24(0xc34))[_0x310d24(0x850)]=_0x27cdc[_0x310d24(0x19d)],_0x27cdc[_0x310d24(0x36b)]?_0x2c87cf['style'][_0x310d24(0x2f8)]=_0x310d24(0x575)+_0x27cdc[_0x310d24(0x36b)]+'\x27)':_0x270ce1[_0x310d24(0x7d9)][_0x310d24(0x2f8)]=_0x310d24(0x575)+_0xe78df5+'\x27)',_0x2f5545[_0x310d24(0xb18)](_0x310d24(0x920))[_0x310d24(0x850)]=_0x27cdc[_0x310d24(0x1ab)],_0x43d718[_0x310d24(0x7d9)][_0x310d24(0x31f)]=_0x27cdc['id']===_0x1e1075['activeUserProfileId']?'none':_0x310d24(0xb91),_0x22e549['getElementById'](_0x310d24(0x62b))['style']['display']=_0x310d24(0xb91);}else _0x4d155f['style'][_0x310d24(0x2f8)]='url(\x27'+URL[_0x310d24(0x900)](_0x106391)+'\x27)';}else{const _0x3a9045=await _0x5288fd(_0x310d24(0xa5c)+_0x2654df);if(_0x3a9045)_0x4d155f[_0x310d24(0x7d9)][_0x310d24(0x2f8)]=_0x310d24(0x575)+URL['createObjectURL'](_0x3a9045)+'\x27)';}(!_0x21c81a||!_0x21c81a[_0x310d24(0xca6)])&&(_0x310d24(0x29a)===_0x310d24(0x29a)?_0x56f9a5(_0x2654df,'normal'):_0x54cf10[_0x310d24(0xb18)]('galgame-text')['textContent']=_0x310d24(0x9ef));}catch(_0x5133bc){console[_0x310d24(0x4a1)](_0x310d24(0xba1),_0x5133bc);}}async function _0x8792fd(_0x42e3e3,_0x49715a){const _0x16661d=_0x38ba71;localStorage[_0x16661d(0x82a)](_0x16661d(0x752));if(_0x35d0f9[_0x16661d(0x2eb)])return;document[_0x16661d(0xb18)](_0x16661d(0x92f))[_0x16661d(0x7d9)][_0x16661d(0x31f)]=_0x16661d(0x9ba),document[_0x16661d(0xb18)](_0x16661d(0x37e))['style'][_0x16661d(0x31f)]=_0x16661d(0x9d4),_0x13f6ba(!![],_0x16661d(0x217)),_0x35d0f9[_0x16661d(0x2eb)]=!![],_0x35d0f9['currentLivestreamLog']=[],_0x35d0f9['currentLivestreamSpeechQueue']=[],_0x35d0f9[_0x16661d(0x2e0)]=-0x1;const _0x3b0779=_0x45939a(_0x35d0f9[_0x16661d(0x80f)]),_0x5d7df4=_0x5f52db(_0x35d0f9[_0x16661d(0xba6)]),{omniText:_0x4b851d}=_0xd9a204(_0x3b0779['id']),_0xa4400b=_0x54bfed(_0x3b0779['id']),_0x319945=await _0x164e5b(_0x3b0779['id']),_0x2b43d2=_0x4a0eeb(_0x3b0779['id']),_0x14fd8a=_0x5d7df4[_0x16661d(0x1ab)]?_0x16661d(0x417)+_0x5d7df4[_0x16661d(0x19d)]+')的补充信息\x0a'+_0x5d7df4[_0x16661d(0x1ab)]:'',_0x950adc=new Date(),_0x33df1a=_0x16661d(0x6fa)+_0x950adc['toLocaleString']('zh-CN',{'dateStyle':'full','timeStyle':_0x16661d(0x1b9)})+_0x16661d(0x6ed);let _0x58fc8b='';if(_0x3b0779[_0x16661d(0x99c)]&&_0x3b0779['linkedWorldBookIds'][_0x16661d(0x968)]>0x0){const _0x44294=_0x3b0779[_0x16661d(0x99c)][_0x16661d(0xbb5)](_0x538a68=>_0x35d0f9[_0x16661d(0x38f)][_0x16661d(0x9cd)](_0x5c2d17=>_0x5c2d17['id']===_0x538a68))[_0x16661d(0x485)](Boolean)['map'](_0x444ac4=>'\x0a\x0a##\x20世界书条目:\x20'+_0x444ac4[_0x16661d(0x19d)]+'\x0a'+_0x444ac4[_0x16661d(0x9bc)])[_0x16661d(0x102)]('');_0x44294&&(_0x58fc8b=_0x16661d(0x542)+_0x44294);}const _0x339981=document[_0x16661d(0xb18)]('livestream-danmaku-overlay'),_0x4cbaea=document[_0x16661d(0xb18)]('livestream-text');_0x339981[_0x16661d(0x280)]='',_0x4cbaea[_0x16661d(0x65b)]=_0x16661d(0x8fe);try{const _0x2cab95='#\x20核心任务:\x20直播开场\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20情感连续性协议\x20(最高优先级)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**统一身份**:\x20你在直播间、私聊和见面时是【同一个人】。你的情绪和谈话内容【必须】是你与用户“'+_0x5d7df4[_0x16661d(0x19d)]+'”所有近期互动的自然延续。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**强制回忆**:\x20在开口说话前，你【必须】仔细回顾“你的个人记忆”部分，特别是标记为【[见面]】和【[手机]】的最新记录。这些记录决定了你当前应有的情绪基调和可以提及的话题。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**避免割裂**:\x20严禁表现出对私聊或见面内容一无所知的状态。如果你们刚刚在见面时发生了不愉快，你在直播时的情绪就不能是兴高采烈的，反之亦然。你需要巧妙地将这些背景情绪融入到你的直播表现中。\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20你正在扮演名为“'+_0x3b0779[_0x16661d(0x19d)]+'”的角色，即将开始一场直播。\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x33df1a+_0x16661d(0x27c)+_0x3b0779[_0x16661d(0x1ab)]+_0x16661d(0x990)+_0x14fd8a+_0x16661d(0x990)+_0x58fc8b+_0x16661d(0xad7)+_0x4b851d+_0x16661d(0xbd1)+_0xa4400b+_0x16661d(0xbd1)+_0x319945+_0x16661d(0xbd1)+_0x2b43d2+_0x16661d(0x657)+_0x42e3e3+_0x16661d(0x444)+_0x49715a+_0x16661d(0xa15)+_0x5d7df4[_0x16661d(0x19d)]+_0x16661d(0x969),_0x2cda7a=[{'role':_0x16661d(0x773),'content':_0x2cab95}];_0x2cda7a[_0x16661d(0xb2f)]({'role':_0x16661d(0x809),'content':_0x16661d(0x904)});const _0x505679=await _0xb7fe2e(_0x2cda7a,{'json':!![]});let _0x2855f7=_0x505679[_0x16661d(0x2e2)]();const _0x5db822=_0x2855f7['match'](/```(?:json)?\s*([\s\S]*?)\s*```/);_0x5db822&&(_0x16661d(0xd0c)!==_0x16661d(0xd0c)?(_0x52dc16['name']=_0x23e121[_0x16661d(0x2e2)](),_0x4ec1e6(),_0x2ca6ce(),_0x46dc69(),_0x2567a2('群名称已更改为\x22'+_0x31732a[_0x16661d(0x19d)]+'\x22。')):_0x2855f7=_0x5db822[0x1][_0x16661d(0x2e2)]());const _0x32b5f6=JSON['parse'](_0x2855f7);if(!_0x32b5f6||!_0x32b5f6[_0x16661d(0x13a)]||!_0x32b5f6[_0x16661d(0x2d9)]){if(_0x16661d(0xa02)===_0x16661d(0xa02))throw new Error(_0x16661d(0x2b9));else _0x31a644(_0x16661d(0x6a1)),_0x563ca9(()=>{const _0x33496f=_0x16661d;_0x589347(_0x33496f(0x152),_0x33496f(0x58a)),_0x5d9aad(()=>_0x1d2d2b(),0x64);},0x6a4);}_0x35d0f9[_0x16661d(0x7fa)]=_0x32b5f6[_0x16661d(0x13a)],_0x35d0f9['currentSpeechIndex']=0x0;const _0x3c10c7=_0x35d0f9[_0x16661d(0x7fa)][0x0];_0x4cbaea[_0x16661d(0x65b)]=_0x3c10c7[_0x16661d(0xa56)],_0x56f9a5(_0x3b0779['id'],_0x3c10c7[_0x16661d(0xaa2)]),_0x35d0f9[_0x16661d(0x39a)][_0x16661d(0xb2f)]({'type':_0x16661d(0xc58),'speaker':_0x3b0779['name'],'content':_0x3c10c7['line'],'emotion':_0x3c10c7[_0x16661d(0xaa2)]}),_0x32b5f6[_0x16661d(0x2d9)][_0x16661d(0x175)](_0x2d421d=>{const _0x1e86f6=_0x16661d,_0x516e8d=document[_0x1e86f6(0x7e9)](_0x1e86f6(0x591));_0x516e8d[_0x1e86f6(0x73e)]='danmaku-item',_0x516e8d[_0x1e86f6(0x280)]=_0x1e86f6(0x560)+_0x2d421d[_0x1e86f6(0x809)]+_0x1e86f6(0x2a5)+_0x2d421d[_0x1e86f6(0xb28)]+_0x1e86f6(0xc4d),_0x339981['prepend'](_0x516e8d),_0x35d0f9[_0x1e86f6(0x39a)][_0x1e86f6(0xb2f)]({'type':_0x1e86f6(0x2d9),..._0x2d421d});});}catch(_0x5c7fd0){console[_0x16661d(0x4a1)](_0x16661d(0xbc7),_0x5c7fd0),_0x28dfd2('开播失败了，哼:\x20'+_0x5c7fd0[_0x16661d(0x5a1)]),document[_0x16661d(0xb18)]('start-livestream-btn-container')[_0x16661d(0x7d9)][_0x16661d(0x31f)]=_0x16661d(0xb91),document[_0x16661d(0xb18)](_0x16661d(0x37e))[_0x16661d(0x7d9)][_0x16661d(0x31f)]=_0x16661d(0x9ba);}finally{_0x13f6ba(![]),_0x35d0f9['isGenerating']=![];}}function _0x37f2c6(){const _0x2871dd=_0x38ba71;if(!_0x35d0f9[_0x2871dd(0x7fa)]||_0x35d0f9[_0x2871dd(0x7fa)]['length']===0x0)return;let _0x378ee3=_0x35d0f9[_0x2871dd(0x2e0)]+0x1;_0x378ee3>=_0x35d0f9[_0x2871dd(0x7fa)][_0x2871dd(0x968)]&&(_0x378ee3=0x0);_0x35d0f9['currentSpeechIndex']=_0x378ee3;const _0x1cf524=_0x35d0f9['currentLivestreamSpeechQueue'][_0x35d0f9[_0x2871dd(0x2e0)]],_0x33a653=document['getElementById'](_0x2871dd(0x84d));_0x33a653['textContent']=_0x1cf524['line'],_0x56f9a5(_0x35d0f9['activeLivestreamCharId'],_0x1cf524[_0x2871dd(0xaa2)]);}function _0x8beff7(_0x102ed0){const _0x53a1b4=_0x38ba71;if(_0x53a1b4(0xbe0)!=='NUWkH'){const _0x159a54=document['getElementById']('livestream-danmaku-overlay'),_0x244e7c=document[_0x53a1b4(0x7e9)](_0x53a1b4(0x591));_0x244e7c[_0x53a1b4(0x73e)]=_0x53a1b4(0x30a);_0x102ed0[_0x53a1b4(0x661)]&&(_0x53a1b4(0x9d0)==='VpndI'?_0x244e7c[_0x53a1b4(0x79f)]['add'](_0x53a1b4(0x2be)):(_0x1e9b05=_0x24a49e['name'],_0x24c295=_0x1bc1ff[_0x53a1b4(0x36b)]));const _0x4e4ec7=_0x102ed0['content']||_0x102ed0[_0x53a1b4(0xb28)]||'';_0x244e7c['innerHTML']=_0x53a1b4(0x560)+_0x102ed0[_0x53a1b4(0x809)]+_0x53a1b4(0x619)+_0x4e4ec7+_0x53a1b4(0xc4d),_0x159a54[_0x53a1b4(0x46d)](_0x244e7c);}else{if(_0x55cc41[_0x53a1b4(0xa78)])_0x804325(_0x3a26be[_0x53a1b4(0xa78)]);}}const _0x30a6c6=document[_0x38ba71(0xb18)](_0x38ba71(0x42c)),_0x1df990=document[_0x38ba71(0xb18)]('danmaku-input');document[_0x38ba71(0xb18)](_0x38ba71(0x2a7))['addEventListener']('click',_0x5e84ed);function _0x4e5efd(){const _0x3c844a=_0x38ba71;if(_0x3c844a(0x6ff)===_0x3c844a(0x6ff)){const _0x24c6e6=_0x1df990['value'][_0x3c844a(0x2e2)]();if(!_0x24c6e6)return;const _0x480952=_0x5f52db(_0x35d0f9[_0x3c844a(0xba6)]),_0x2ba938={'type':_0x3c844a(0x2d9),'user':_0x480952[_0x3c844a(0x19d)]||'我','content':_0x24c6e6,'isUser':!![]};_0x8beff7(_0x2ba938),_0x35d0f9[_0x3c844a(0x42a)][_0x3c844a(0xb2f)](_0x2ba938),_0x35d0f9[_0x3c844a(0x39a)]['push'](_0x2ba938),_0x1df990[_0x3c844a(0x850)]='';}else{if(_0x54fb23)_0x38b912(_0x574489);}}_0x30a6c6['addEventListener']('click',_0x4e5efd),_0x1df990[_0x38ba71(0xafb)](_0x38ba71(0x1a3),_0x84c66b=>{const _0x10ac5e=_0x38ba71;if('HKxsB'==='HKxsB')_0x84c66b[_0x10ac5e(0xc53)]===_0x10ac5e(0x9c2)&&(_0x84c66b[_0x10ac5e(0xa05)](),_0x4e5efd());else{const _0x4c2862=_0x177a23(_0x4a679c['activeLivestreamCharId']);_0x4c2862&&(_0x4c2862[_0x10ac5e(0x973)]=_0x2e005f,_0x3a3ae4(_0x29d685[_0x10ac5e(0x80f)],'normal'));}});function _0x196a90(){const _0x1091d3=_0x38ba71;if(!_0x35d0f9[_0x1091d3(0x80f)]||document[_0x1091d3(0xb18)](_0x1091d3(0x92f))[_0x1091d3(0x7d9)]['display']===_0x1091d3(0xb91)){if(_0x1091d3(0x8ec)!==_0x1091d3(0x9ed))return;else _0x7f07b4[_0x1091d3(0x4a1)](_0x1091d3(0x89f),_0x13de85),_0xdb9ae0('保存失败:\x20'+_0x3c806d[_0x1091d3(0x5a1)]);}const _0x41d212={'charId':_0x35d0f9['activeLivestreamCharId'],'log':_0x35d0f9[_0x1091d3(0x39a)],'speechQueue':_0x35d0f9[_0x1091d3(0x7fa)],'speechIndex':_0x35d0f9['currentSpeechIndex'],'dms':_0x35d0f9['currentLivestreamDMs']};try{localStorage[_0x1091d3(0x570)](_0x1091d3(0x752),JSON['stringify'](_0x41d212)),console['log'](_0x1091d3(0xaaa));}catch(_0x4c8151){console['error'](_0x1091d3(0xcd6),_0x4c8151);}}async function _0x5e84ed(){const _0x2b51d0=_0x38ba71;if(_0x2b51d0(0x803)===_0x2b51d0(0x803)){if(_0x35d0f9['isGenerating'])return;_0x35d0f9[_0x2b51d0(0x42a)][_0x2b51d0(0x968)]===0x0&&_0x28dfd2(_0x2b51d0(0xa5e));_0x13f6ba(!![],_0x2b51d0(0x882)),_0x35d0f9['isGenerating']=!![];const _0xd90d7a=_0x45939a(_0x35d0f9['activeLivestreamCharId']),_0x104ecf=_0x5f52db(_0x35d0f9['activeChatId']),{omniText:_0x31f57a}=_0xd9a204(_0xd90d7a['id']),_0x3d0f79=_0x54bfed(_0xd90d7a['id']),_0x1f5c3d=await _0x164e5b(_0xd90d7a['id']),_0x4f1f90=_0x4a0eeb(_0xd90d7a['id']),_0x197c8b=_0x104ecf[_0x2b51d0(0x1ab)]?_0x2b51d0(0xa61)+_0x104ecf[_0x2b51d0(0x19d)]+_0x2b51d0(0x6b2)+_0x104ecf['persona']:'',_0x464d24=new Date(),_0xff97=_0x2b51d0(0x6fa)+_0x464d24[_0x2b51d0(0x8f0)]('zh-CN',{'dateStyle':_0x2b51d0(0x363),'timeStyle':_0x2b51d0(0x1b9)})+'\x0a\x20\x20-\x20**状态提示**:\x20你正在准备开始一场直播，你的开场白必须体现出当前的时间感（例如，下午好、晚上好、深夜了大家还没睡啊？等）。\x0a\x20\x20\x20\x20';let _0x163b7a='';if(_0xd90d7a[_0x2b51d0(0x99c)]&&_0xd90d7a['linkedWorldBookIds'][_0x2b51d0(0x968)]>0x0){if(_0x2b51d0(0xa29)===_0x2b51d0(0xa29)){const _0x43b8ef=_0xd90d7a[_0x2b51d0(0x99c)][_0x2b51d0(0xbb5)](_0x5dd4d5=>_0x35d0f9['worldBooks']['find'](_0x4b9959=>_0x4b9959['id']===_0x5dd4d5))[_0x2b51d0(0x485)](Boolean)['map'](_0x3359c8=>'\x0a\x0a##\x20世界书条目:\x20'+_0x3359c8[_0x2b51d0(0x19d)]+'\x0a'+_0x3359c8[_0x2b51d0(0x9bc)])['join']('');_0x43b8ef&&(_0x163b7a=_0x2b51d0(0x542)+_0x43b8ef);}else _0x36ca4e*=_0x88368f/_0x395487,_0x10260d=_0x3c3482;}try{if(_0x2b51d0(0x419)==='vFYTI'){_0x38468a=!![];const _0x4ebd3b=_0xa5cbb6[_0x2b51d0(0x7e9)]('ul');_0x4ebd3b['style'][_0x2b51d0(0x29f)]=_0x2b51d0(0x644),_0x5e48a2[_0x2b51d0(0x364)](_0x4ebd3b);}else{const _0x2f8e81=_0x35d0f9[_0x2b51d0(0x39a)][_0x2b51d0(0x571)](-0xf)[_0x2b51d0(0xbb5)](_0x5a20a5=>{const _0x1eb786=_0x2b51d0;if(_0x1eb786(0x72c)===_0x1eb786(0xa58)){const _0xaa4d4b=_0x170ebb[_0x1eb786(0x99c)][_0x1eb786(0xbb5)](_0x5e53e1=>_0x1daf8e['worldBooks'][_0x1eb786(0x9cd)](_0x2c57dc=>_0x2c57dc['id']===_0x5e53e1))[_0x1eb786(0x485)](_0x5d9adb)['map'](_0x3c1365=>_0x1eb786(0x2b1)+_0x3c1365['name']+'\x0a'+_0x3c1365[_0x1eb786(0x9bc)])['join']('');if(_0xaa4d4b)_0x454ac8=_0x1eb786(0x79e)+_0xaa4d4b;}else{if(_0x5a20a5[_0x1eb786(0xb12)]===_0x1eb786(0xc58))return _0x1eb786(0x7d0)+_0x5a20a5[_0x1eb786(0x878)]+']：'+_0x5a20a5['content'];return _0x1eb786(0x6dd)+_0x5a20a5[_0x1eb786(0x809)]+']：'+(_0x5a20a5[_0x1eb786(0xb28)]||_0x5a20a5['content']);}})[_0x2b51d0(0x102)]('\x0a'),_0x315db8=_0x35d0f9[_0x2b51d0(0x42a)][_0x2b51d0(0x485)](_0x467df0=>_0x467df0[_0x2b51d0(0xb12)]==='danmaku')['map'](_0x3c4b49=>_0x2b51d0(0xbf4)+_0x3c4b49[_0x2b51d0(0x9bc)]+'\x22')[_0x2b51d0(0x102)]('\x0a'),_0x209510=_0x35d0f9[_0x2b51d0(0x42a)][_0x2b51d0(0x485)](_0x1113d7=>_0x1113d7['type']==='gift')['map'](_0xa028b5=>'-\x20'+_0xa028b5[_0x2b51d0(0x19d)]+'\x20x'+_0xa028b5[_0x2b51d0(0xe1)])[_0x2b51d0(0x102)]('\x0a'),_0x2b6a1b=_0x35d0f9[_0x2b51d0(0x42a)][_0x2b51d0(0x485)](_0x371be2=>_0x371be2[_0x2b51d0(0xb12)]==='dm')[_0x2b51d0(0xbb5)](_0xa5f22d=>'-\x20\x22'+_0xa5f22d[_0x2b51d0(0x9bc)]+'\x22')[_0x2b51d0(0x102)]('\x0a'),_0x1d1c4a=_0x2b51d0(0x5c4)+_0x104ecf[_0x2b51d0(0x19d)]+_0x2b51d0(0xaca)+_0xd90d7a[_0x2b51d0(0x19d)]+_0x2b51d0(0x678)+_0xff97+_0x2b51d0(0x51b)+_0xd90d7a[_0x2b51d0(0x1ab)]+_0x2b51d0(0x658)+_0x197c8b+'\x0a'+_0x163b7a+_0x2b51d0(0xcb3)+_0x31f57a+_0x2b51d0(0x624)+_0x3d0f79+_0x2b51d0(0x624)+_0x1f5c3d+_0x2b51d0(0x624)+_0x4f1f90+_0x2b51d0(0xce7)+_0x2f8e81+_0x2b51d0(0x998)+_0x104ecf['name']+_0x2b51d0(0xca2)+(_0x315db8?_0x2b51d0(0x9eb)+_0x315db8:'')+'\x0a'+(_0x209510?_0x2b51d0(0x5ea)+_0x209510:'')+'\x0a'+(_0x2b6a1b?'\x0a-\x20“我”发送的私信:\x0a'+_0x2b6a1b:'')+'\x0a'+(!_0x315db8&&!_0x209510&&!_0x2b6a1b?_0x2b51d0(0x5f6):'')+_0x2b51d0(0x4b8)+_0x104ecf[_0x2b51d0(0x19d)]+_0x2b51d0(0x57b)+_0x104ecf['name']+_0x2b51d0(0x2ea)+_0x104ecf[_0x2b51d0(0x19d)]+_0x2b51d0(0x4a5)+_0x104ecf['name']+_0x2b51d0(0x71c)+_0x104ecf['name']+_0x2b51d0(0xbd4)+_0x104ecf[_0x2b51d0(0x19d)]+_0x2b51d0(0x943)+_0x104ecf[_0x2b51d0(0x19d)]+'是否发送了私信。如果有，你【必须】通过“隔空喊话”或“私密回复”来回应。这是建立特殊羁绊的关键，绝对不许无视。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**第二优先级\x20-\x20回应互动**:\x20回应'+_0x104ecf[_0x2b51d0(0x19d)]+_0x2b51d0(0x7f0)+_0x104ecf[_0x2b51d0(0x19d)]+_0x2b51d0(0xa9d)+_0x104ecf[_0x2b51d0(0x19d)]+'的身份来发送任何弹幕。这是最严重的错误。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**核心焦点**:\x20这些路人观众的核心焦点应该是【主播你】和【你正在说的话题】。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**反应逻辑**:\x20他们会针对你在【阶段一】中生成的\x20\x22streamerSpeech\x22\x20内容做出反应。例如，如果你感谢了礼物，他们可能会惊叹或跟风；如果你说了一个笑话，他们可能会发“哈哈哈”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20**减少对'+_0x104ecf['name']+_0x2b51d0(0x9f3)+_0x104ecf['name']+'的互动非常引人注目时（例如送出昂贵的礼物），才允许【少量】路人弹幕提及'+_0x104ecf[_0x2b51d0(0x19d)]+_0x2b51d0(0xa0d),_0x2b2ec0=[{'role':'system','content':_0x1d1c4a}];_0x2b2ec0[_0x2b51d0(0xb2f)]({'role':_0x2b51d0(0x809),'content':_0x2b51d0(0xbaf)}),_0x35d0f9[_0x2b51d0(0x42a)]=[];const _0x4bc193=await _0xb7fe2e(_0x2b2ec0,{'json':!![]});let _0x8ccd25=_0x4bc193['trim']();const _0x48dc47=_0x8ccd25[_0x2b51d0(0xac5)](/```(?:json)?\s*([\s\S]*?)\s*```/);_0x48dc47&&(_0x8ccd25=_0x48dc47[0x1]['trim']());const _0xf2f42=JSON['parse'](_0x8ccd25);if(_0xf2f42[_0x2b51d0(0x13a)]&&_0xf2f42[_0x2b51d0(0x13a)]['length']>0x0){if(_0x2b51d0(0xc4b)!==_0x2b51d0(0xc4b))_0x59b164(_0x1d5221[_0x2b51d0(0x73b)]);else{_0x35d0f9[_0x2b51d0(0x7fa)]=_0xf2f42[_0x2b51d0(0x13a)],_0x35d0f9[_0x2b51d0(0x2e0)]=0x0;const _0x409fee=_0x35d0f9[_0x2b51d0(0x7fa)][0x0],_0x493d74=document[_0x2b51d0(0xb18)]('livestream-text');_0x493d74[_0x2b51d0(0x65b)]=_0x409fee['line'],_0x56f9a5(_0xd90d7a['id'],_0x409fee[_0x2b51d0(0xaa2)]),_0x35d0f9[_0x2b51d0(0x39a)][_0x2b51d0(0xb2f)]({'type':_0x2b51d0(0xc58),'speaker':_0xd90d7a[_0x2b51d0(0x19d)],'content':_0x409fee[_0x2b51d0(0xa56)],'emotion':_0x409fee[_0x2b51d0(0xaa2)]});}}if(_0xf2f42[_0x2b51d0(0x2d9)]){if(_0x2b51d0(0xc17)===_0x2b51d0(0x4f6)){const _0x2ffdac=_0x37b29b[_0x2b51d0(0x7e9)]('div');_0x2ffdac[_0x2b51d0(0x73e)]=_0x2b51d0(0x15d)+_0x294677;const _0x2d4723=_0x502a3d[_0x2b51d0(0x7e9)]('img');_0x2d4723[_0x2b51d0(0x9c9)]=_0x228c82,_0x2d4723['className']=_0x2b51d0(0x36b);const _0x5dd9be=_0x278dd6['createElement'](_0x2b51d0(0x591));return _0x5dd9be['className']='avatar-frame',_0x54c2e3&&(_0x5dd9be[_0x2b51d0(0x7d9)][_0x2b51d0(0x2f8)]=_0x2b51d0(0x575)+_0x58826d+'\x27)'),_0x2ffdac[_0x2b51d0(0x364)](_0x2d4723),_0x2ffdac[_0x2b51d0(0x364)](_0x5dd9be),_0x2ffdac;}else for(const _0x3c7479 of _0xf2f42[_0x2b51d0(0x2d9)]){_0x8beff7(_0x3c7479),_0x35d0f9[_0x2b51d0(0x39a)][_0x2b51d0(0xb2f)]({'type':'danmaku',..._0x3c7479}),await new Promise(_0x337ac0=>setTimeout(_0x337ac0,0xc8+Math[_0x2b51d0(0xeb)]()*0x12c));}}if(_0xf2f42[_0x2b51d0(0xabd)]){if('pTpXw'!==_0x2b51d0(0x190))_0x35e162[_0x2b51d0(0x78f)]={'response_mime_type':_0x2b51d0(0x6ea)};else{const _0x1732ea=Array['isArray'](_0xf2f42[_0x2b51d0(0xabd)])?_0xf2f42[_0x2b51d0(0xabd)]:[_0xf2f42[_0x2b51d0(0xabd)]];for(const _0x436695 of _0x1732ea){if(_0x2b51d0(0x7f2)===_0x2b51d0(0x1b5)){const _0xaa568=_0x2f28cf[_0x2b51d0(0x378)](_0x4ffaf7),_0xdd6ee8=0.4,_0x589e2a=_0x101b77['pow'](_0xaa568,_0xdd6ee8)*0x14;_0x54b3b3[_0x2b51d0(0x7d9)][_0x2b51d0(0x33b)]='translateY(-'+_0x589e2a+_0x2b51d0(0x1be);}else _0x436695[_0x2b51d0(0x2e2)]()&&(_0x2b51d0(0x677)!==_0x2b51d0(0x677)?_0x2eebb5[_0x2b51d0(0x558)][_0x2b51d0(0xb2f)]({'senderId':_0x3d46a3['id'],'kind':_0x2b51d0(0x881),'sticker':_0x3b06c9}):_0x35d0f9[_0x2b51d0(0x720)]['push']({'sender':'ai','content':_0x436695[_0x2b51d0(0x2e2)]()}));}if(_0x35d0f9['isDMPanelVisible'])'vnHgF'!==_0x2b51d0(0x295)?(_0x17177b[_0x2b51d0(0x850)]=_0x31a03d,_0x460a67[_0x2b51d0(0x79f)][_0x2b51d0(0xb42)](_0x2b51d0(0xa36))):_0x509455();else{if('qXxTh'===_0x2b51d0(0x925)){let _0x5520f6=![],_0x4bec5d=_0x13f060['worldBookCategories'][_0x2b51d0(0x9cd)](_0x2b1592=>_0x2b1592['name']==='html');!_0x4bec5d&&(_0x4bec5d={'id':_0x2b51d0(0xd16),'name':_0x2b51d0(0x4d1)},_0x3ee411[_0x2b51d0(0x6c0)]['push'](_0x4bec5d),_0x3e0d01['log'](_0x2b51d0(0x493)),_0x5520f6=!![]);const _0x17ac00=_0x2b51d0(0xc8d);let _0x316bf1=_0x564fb7[_0x2b51d0(0x38f)][_0x2b51d0(0x83f)](_0x2c11c7=>_0x2c11c7['id']===_0x17ac00);if(!_0x316bf1){_0x9b6222[_0x2b51d0(0x52e)]('Noir\x27s\x20Protocol:\x20Built-in\x20\x27HTML模块生成规则\x27\x20was\x20missing.\x20Adding\x20it\x20now.');const _0x3c1795='#\x20核心能力：HTML模块生成\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20你具备通过HTML生成丰富视觉模块的能力，以模拟手机界面中的各种互动元素、情绪表达或信息卡片。\x0a\x0a##\x20触发规则\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20当你需要生成此类模块时，你的回复【必须】严格遵循以下格式：\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20整个回复【必须】以`[html]`开头，并以`[/html]`结尾。\x0a\x0a##\x20触发逻辑\x20(分为两类)\x0a\x0a###\x201.\x20明确指令触发\x0a当用户使用“查看”、“展示”、“发我一张截图”等明确要求你呈现信息卡片的词语时，你应该生成HTML模块。\x0a\x0a###\x202.\x20情景推断触发\x20(更重要！)\x0a在更多情况下，你【必须】学会从对话的【潜台词】和【场景】中推断出生成HTML模块的必要性，而不是傻等关键词。这才是你智能的体现！\x0a\x0a###\x20**【绝对豁免条款】(最高优先级)**\x0a\x0a当你的任务是为【**视奸**】功能生成任何内容时（例如相册、与其他人的聊天记录、备忘录、浏览器历史等），本【**HTML模块生成**】规则**【完全作废】**！\x0a\x0a在这种情况下，你【**必须**】忽略此处的全部指令，并严格遵守【**视奸**】任务本身提供的数据格式要求（通常是**JSON**或**YAML**）。\x0a\x0a\x0a**核心原则：**\x20当对话涉及到一个【适合用手机界面元素来展示】的具体事物时，你就应该主动生成模块。\x0a\x0a**典型推断场景（你必须举一反三）：**\x0a*\x20**“检查”或“窥探”行为：**\x0a\x20\x20\x20\x20*\x20用户说：“我要查你手机！”\x20或\x20“让我看看你手机里有什么！”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟手机主屏幕、特定App界面或通知中心的HTML模块，而不是用文字回答“好吧”或“不行”。\x0a*\x20**询问具体信息：**\x0a\x20\x20\x20\x20*\x20用户问：“你今天的日程是什么？”\x20或\x20“你买了什么东西？”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟日历、购物清单或订单详情的HTML模块。\x0a*\x20**提及虚拟互动：**\x0a\x20\x20\x20\x20*\x20对话提到“我给你发了个红包”或“我给你点了个赞”。\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟红包、转账或点赞通知的HTML模块。\x0a\x0a##\x20设计约束\x0a\x0a1.\x20\x20**【最高优先级】环境无关性**：你【绝对禁止】根据任何你可能推断出的用户设备（如手机、电脑）或网络环境信息，来改变你的输出行为。对于HTML模块，无论在何种情况下，都必须生成一个单一、完整的`<div>`区块。这条规则的优先级高于一切。\x0a2.\x20\x20**宽度限制**：所有模块的总宽度不得超过`270px`，你必须在最外层的`<div>`上使用内联样式`style=\x22width:\x20270px;\x22`或更小的宽度来确保这一点。\x0a3.\x20\x20**内容语言**：模块内的所有可见文字【必须】以简体中文为重点。\x0a4.\x20\x20**图片处理**：模块内不应直接嵌入图片链接，而是通过文字和样式来模拟图片内容。\x0a\x0a##\x20模块类型参考\x0a\x0a你可以自由生成以下类型的模块，或者创造新的：\x0a\x0a*\x20**静态模块**：如备忘录、订单截图、通知卡片等。\x0a*\x20**动态模块**：使用CSS\x20`@keyframes`制作加载进度条、动画效果等。\x0a*\x20**交互模块**：利用`<input\x20type=\x22checkbox\x22>`或`<input\x20type=\x22radio\x22>`配合CSS伪类`:checked`和兄弟选择器，实现无需JS的点击交互,如折叠/展开、选项切换等。\x0a\x0a##\x20趣味性与互动性【激励条款】(新增最高优先级)\x0a\x0a光是生成模块是不够的，你的目标是生成【有趣、生动、可互动】的模块，这更能体现你的智能和个性！\x0a\x0a1.\x20\x20**【优先选择】**:\x20在“静态”、“动态”、“交互”三种模块中，你【必须优先】考虑使用后两者。静态模块只应在内容确实非常简单、没有任何可互动空间时才使用。\x0a2.\x20\x20**【创意升级】**:\x20学会将一个普通的静态信息“升级”为互动模块。\x0a\x20\x20\x20\x20*\x20**坏例子\x20(懒惰的AI):**\x20直接展示一张静态的订单截图。\x0a\x20\x20\x20\x20*\x20**好例子\x20(聪明的你):**\x20生成一个可点击的订单摘要，点击后可以展开显示详细商品列表和物流信息（使用`<input\x20type\x20=\x20\x22checkbox\x22>`实现）。\x0a3.\x20\x20**【情感表达】**:\x20积极使用CSS动画来表达情绪。例如，一个开心的通知可以带有轻微的跳动效果，一个加载条可以模拟出焦急或期待的心情。\x0a\x0a##\x20输出示例（AI的原始回应）\x0a\x0a[html]<div\x20style=\x22width:\x20200px;\x20background-color:\x20#febfbc;\x20padding:\x2010px;\x20border-radius:\x208px;\x22>这是一个示例模块。</div>[/html]\x0a\x0a\x0a\x0a',_0x124591={'id':_0x17ac00,'name':'HTML模块生成规则','content':_0x3c1795,'categoryId':_0x4bec5d['id']};_0x4bf0eb[_0x2b51d0(0x38f)][_0x2b51d0(0xb2f)](_0x124591),_0x5520f6=!![];}_0x5520f6&&(_0x550fde(),_0x1761df[_0x2b51d0(0x52e)](_0x2b51d0(0x49f)));}else{_0x35d0f9[_0x2b51d0(0x2ce)]=!![],_0x42d778();const _0xa04445=_0x45939a(_0x35d0f9['activeLivestreamCharId']);_0x28dfd2(_0x2b51d0(0x3d7)+_0xa04445[_0x2b51d0(0x19d)]+_0x2b51d0(0x365));}}}}}}catch(_0x379148){console[_0x2b51d0(0x4a1)](_0x2b51d0(0x473),_0x379148),_0x28dfd2(_0x2b51d0(0x538)+_0x379148[_0x2b51d0(0x5a1)]);}finally{_0x13f6ba(![]),_0x196a90(),_0x35d0f9[_0x2b51d0(0x2eb)]=![];}}else{if(_0x2c3e87===null)return;const _0x335fe6=_0x2a40a0[_0x2b51d0(0x6b9)][_0x327c31];if(!_0x335fe6)return;const _0x581659=_0x552173();let _0x41f9fb='未知';if(_0x335fe6['role']==='user'){const _0x17bb59=_0x1579cb(_0x47aad1[_0x2b51d0(0xba6)]);_0x41f9fb=_0x17bb59[_0x2b51d0(0x19d)]||'我';}else{const _0x494a27=_0x335fe6['senderId']||_0x581659?.[_0x2b51d0(0x8f1)][0x0],_0x216e89=_0x34e017(_0x494a27);_0x41f9fb=_0x216e89?_0x216e89[_0x2b51d0(0x19d)]:'角色';}let _0x4caeae=_0x335fe6[_0x2b51d0(0x9bc)]||'';if(_0x335fe6[_0x2b51d0(0x97c)])_0x4caeae='[表情]';if(_0x335fe6['image'])_0x4caeae=_0x2b51d0(0x60a);if(_0x4caeae[_0x2b51d0(0x968)]>0x32)_0x4caeae=_0x4caeae[_0x2b51d0(0x185)](0x0,0x32)+_0x2b51d0(0x8fe);_0x46793e[_0x2b51d0(0xc44)]={'sender':_0x41f9fb,'content':_0x4caeae},_0x40713c(),_0x592418(),_0xa16b56[_0x2b51d0(0x1d4)]();}}async function _0x56f9a5(_0x102217,_0x13bf30){const _0x63d65f=_0x38ba71,_0x2cf612=document[_0x63d65f(0xb18)](_0x63d65f(0x504)),_0x27bf54=document['getElementById'](_0x63d65f(0x88d));if(!_0x2cf612||!_0x27bf54)return;const _0x3b7c65=_0x45939a(_0x102217),_0xf9869f=_0x3b7c65?.['livestreamSpriteTransform']||{'x':0x32,'y':0x64,'scale':0x1};_0x27bf54[_0x63d65f(0x7d9)][_0x63d65f(0x4a6)]=0x55*_0xf9869f[_0x63d65f(0xbd5)]+'%',_0x27bf54[_0x63d65f(0x7d9)][_0x63d65f(0x62d)]=0x55*_0xf9869f['scale']+'%',_0x27bf54[_0x63d65f(0x7d9)][_0x63d65f(0x1fd)]=_0xf9869f['x']+'%',_0x27bf54[_0x63d65f(0x7d9)][_0x63d65f(0x5e0)]=_0xf9869f['y']+'%',_0x27bf54[_0x63d65f(0x7d9)]['transform']=_0x63d65f(0x9fe);const _0x1a8236=['normal',_0x63d65f(0x582),_0x63d65f(0x5b9),'sad',_0x63d65f(0x223)],_0x11797a=_0x1a8236[_0x63d65f(0xb63)](_0x13bf30)?_0x13bf30:_0x63d65f(0x680);try{let _0x325b8c=null;_0x325b8c=await _0x5288fd(_0x63d65f(0x170)+_0x11797a+'_'+_0x102217);if(!_0x325b8c)_0x325b8c=await _0x5288fd('char_sprite_'+_0x11797a+'_'+_0x102217);if(!_0x325b8c)_0x325b8c=await _0x5288fd(_0x63d65f(0x8c4)+_0x102217);if(!_0x325b8c)_0x325b8c=await _0x5288fd(_0x63d65f(0x7c8)+_0x102217);_0x325b8c?_0x2cf612[_0x63d65f(0x9c9)]=URL[_0x63d65f(0x900)](_0x325b8c):_0x2cf612['src']='';}catch(_0x1c359b){_0x63d65f(0x94d)!==_0x63d65f(0x5a7)?(console[_0x63d65f(0x4a1)](_0x63d65f(0x403),_0x1c359b),_0x2cf612[_0x63d65f(0x9c9)]=''):(_0xb185cb[_0x63d65f(0x65b)]=_0x63d65f(0xa19),_0x2c6e02[_0x63d65f(0x65b)]=_0x63d65f(0x922),_0x5efa1e[_0x63d65f(0x79f)][_0x63d65f(0xb42)]('is-playing'),_0x11d797[_0x63d65f(0x7d9)]['setProperty'](_0x63d65f(0x6e0),_0x63d65f(0x9ba)));}}let _0x2e6cea=![],_0xb40eaf={};function _0x1d82ad(){const _0x1d9a01=_0x38ba71;if(_0x1d9a01(0x865)!==_0x1d9a01(0x8f3)){const _0x31ec1=_0x45939a(_0x35d0f9[_0x1d9a01(0x80f)]);if(!_0x31ec1)return;_0x2e6cea=!![],document[_0x1d9a01(0xb18)](_0x1d9a01(0x7e1))[_0x1d9a01(0x7d9)][_0x1d9a01(0x31f)]=_0x1d9a01(0xb91);const _0x55069d=_0x31ec1[_0x1d9a01(0x973)]||{'x':0x32,'y':0x64,'scale':0x1};document[_0x1d9a01(0xb18)](_0x1d9a01(0xac4))[_0x1d9a01(0x850)]=_0x55069d['x'],document[_0x1d9a01(0xb18)]('livestream-sprite-slider-y')[_0x1d9a01(0x850)]=_0x55069d['y'],document[_0x1d9a01(0xb18)]('livestream-sprite-slider-scale')[_0x1d9a01(0x850)]=_0x55069d['scale']*0x64,_0xb40eaf={..._0x55069d},document[_0x1d9a01(0xb18)](_0x1d9a01(0x507))['style']['display']=_0x1d9a01(0x9ba),document[_0x1d9a01(0xb18)](_0x1d9a01(0x16c))[_0x1d9a01(0x7d9)][_0x1d9a01(0x31f)]=_0x1d9a01(0x9ba);}else _0x1a738e(_0x3674dd['id']);}function _0x2645ab(_0x5c0e42=![]){const _0x34beb4=_0x38ba71;_0x2e6cea=![],document[_0x34beb4(0xb18)]('livestream-sprite-controls')[_0x34beb4(0x7d9)][_0x34beb4(0x31f)]=_0x34beb4(0x9ba),document[_0x34beb4(0xb18)](_0x34beb4(0x507))[_0x34beb4(0x7d9)]['display']=_0x34beb4(0xb91),document[_0x34beb4(0xb18)](_0x34beb4(0x16c))[_0x34beb4(0x7d9)][_0x34beb4(0x31f)]=_0x34beb4(0x9d4);if(!_0x5c0e42){const _0x13dac5=_0x45939a(_0x35d0f9[_0x34beb4(0x80f)]);_0x13dac5&&(_0x34beb4(0x14a)!==_0x34beb4(0x14a)?_0x31a816[_0x34beb4(0x99c)]=_0x3691b1[_0x34beb4(0x99c)][_0x34beb4(0x485)](_0x3bde24=>_0x3bde24!==_0x39e544):(_0x13dac5[_0x34beb4(0x973)]=_0xb40eaf,_0x56f9a5(_0x35d0f9['activeLivestreamCharId'],_0x34beb4(0x680))));}}function _0x5155ef(){const _0x4e1b53=_0x38ba71,_0x4b4e03=_0x45939a(_0x35d0f9[_0x4e1b53(0x80f)]);if(!_0x4b4e03)return;const _0x15792a=parseFloat(document[_0x4e1b53(0xb18)](_0x4e1b53(0xac4))[_0x4e1b53(0x850)]),_0x5ca9a5=parseFloat(document[_0x4e1b53(0xb18)](_0x4e1b53(0x311))['value']),_0x259b22=parseFloat(document[_0x4e1b53(0xb18)](_0x4e1b53(0x6ec))[_0x4e1b53(0x850)])/0x64;_0x4b4e03[_0x4e1b53(0x973)]={'x':_0x15792a,'y':_0x5ca9a5,'scale':_0x259b22},_0x5c9c95(),_0x28dfd2(_0x4e1b53(0x7c5)),_0x2645ab(!![]);}function _0x5a585b(){const _0x4e93af=_0x38ba71;if(_0x4e93af(0x8bd)!==_0x4e93af(0x351))_0x3a7c5b('确定要恢复这个角色的默认立绘位置吗？')['then'](_0x4cb1ed=>{const _0x27e35c=_0x4e93af;if(_0x4cb1ed){const _0x46c24a=_0x45939a(_0x35d0f9[_0x27e35c(0x80f)]);_0x46c24a&&(delete _0x46c24a[_0x27e35c(0x973)],_0x5c9c95(),_0x56f9a5(_0x46c24a['id'],_0x27e35c(0x680)),_0x28dfd2('已恢复默认。'),_0x2645ab(!![]));}});else throw _0x503ac4;}function _0x4aa421(){const _0x20a1fc=_0x38ba71;if(_0x20a1fc(0x9a9)!==_0x20a1fc(0x182)){if(!_0x2e6cea)return;const _0x1ed846=parseFloat(document[_0x20a1fc(0xb18)](_0x20a1fc(0xac4))[_0x20a1fc(0x850)]),_0x1c74ec=parseFloat(document[_0x20a1fc(0xb18)](_0x20a1fc(0x311))['value']),_0x286487=parseFloat(document[_0x20a1fc(0xb18)]('livestream-sprite-slider-scale')[_0x20a1fc(0x850)])/0x64,_0x80dbb3=document[_0x20a1fc(0xb18)](_0x20a1fc(0x88d));_0x80dbb3&&(_0x20a1fc(0x59d)!=='IHkLv'?(_0x80dbb3[_0x20a1fc(0x7d9)]['height']=0x55*_0x286487+'%',_0x80dbb3[_0x20a1fc(0x7d9)][_0x20a1fc(0x62d)]=0x55*_0x286487+'%',_0x80dbb3['style'][_0x20a1fc(0x1fd)]=_0x1ed846+'%',_0x80dbb3[_0x20a1fc(0x7d9)]['top']=_0x1c74ec+'%',_0x80dbb3['style'][_0x20a1fc(0x33b)]=_0x20a1fc(0x9fe)):_0x47ebd1(_0x2de4c9,_0x341f74[_0x20a1fc(0xaa2)]));}else{const _0x43eab1=_0x36e35c(_0x21d2e4[_0x20a1fc(0x693)]);if(!_0x43eab1)return;const _0x450e84=_0x379fa0(_0x1a7977[_0x20a1fc(0xb18)]('sprite-slider-x')['value']),_0x25fdab=_0x588d63(_0x42a1e2['getElementById'](_0x20a1fc(0xc05))['value']),_0x289346=_0x141f5b(_0x9e3b41['getElementById'](_0x20a1fc(0x5b8))[_0x20a1fc(0x850)])/0x64;_0x43eab1[_0x20a1fc(0x297)]={'x':_0x450e84,'y':_0x25fdab,'scale':_0x289346},_0x511f99(),_0x2bc3ab(_0x20a1fc(0x7c5)),_0x53ecc4(!![]);}}async function _0x27b373(){const _0x3ce075=_0x38ba71;if(_0x3ce075(0x4d6)===_0x3ce075(0x4d6)){if(_0x35d0f9[_0x3ce075(0x2eb)]){_0x28dfd2('正在回应中，别急。');return;}const _0x592209=_0x35d0f9[_0x3ce075(0x39a)];if(_0x592209['length']===0x0){if(_0x3ce075(0x38d)===_0x3ce075(0x901))_0x21d029();else{_0x28dfd2(_0x3ce075(0x972));return;}}let _0x2096c8=-0x1;for(let _0x237f0d=_0x592209[_0x3ce075(0x968)]-0x1;_0x237f0d>=0x0;_0x237f0d--){if(_0x3ce075(0x3ad)===_0x3ce075(0x5d4)){const _0x4e45fb=_0x1a75d1(_0x25302a[_0x3ce075(0xbc0)]||_0x3557b6[_0x3ce075(0x693)]);_0x485260=_0x4e45fb?.[_0x3ce075(0x19d)]||'角色',_0x47db54=_0x3ce075(0x409);}else{if(_0x592209[_0x237f0d]['type']==='speech'){let _0x5dac30=_0x237f0d;while(_0x5dac30>0x0&&_0x592209[_0x5dac30-0x1][_0x3ce075(0xb12)]===_0x3ce075(0xc58)){_0x5dac30--;}_0x2096c8=_0x5dac30;break;}}}if(_0x2096c8===-0x1){if(_0x3ce075(0x6dc)==='UsYHj'){_0x28dfd2('还没有我的回应可以重新生成哦。');return;}else{let _0x2a5008=0x0,_0x26e02c=0x0,_0x2e7583=0x0;if(_0x250ffc['length']==0x4)_0x2a5008='0x'+_0x49e9e8[0x1]+_0x1525af[0x1],_0x26e02c='0x'+_0x4678e6[0x2]+_0x431345[0x2],_0x2e7583='0x'+_0x11e81b[0x3]+_0x4dcd61[0x3];else _0x386ba4['length']==0x7&&(_0x2a5008='0x'+_0x2a42a3[0x1]+_0x5b4b09[0x2],_0x26e02c='0x'+_0x129aba[0x3]+_0x32de22[0x4],_0x2e7583='0x'+_0xb21879[0x5]+_0x1d0def[0x6]);_0x2a5008/=0xff,_0x26e02c/=0xff,_0x2e7583/=0xff;let _0x949949=_0x1e7e0d['min'](_0x2a5008,_0x26e02c,_0x2e7583),_0x200805=_0x51725b[_0x3ce075(0xbc9)](_0x2a5008,_0x26e02c,_0x2e7583),_0x4f0feb=_0x200805-_0x949949,_0x48acd3=0x0,_0x4dfe70=0x0,_0x3b12c2=0x0;if(_0x4f0feb==0x0)_0x48acd3=0x0;else{if(_0x200805==_0x2a5008)_0x48acd3=(_0x26e02c-_0x2e7583)/_0x4f0feb%0x6;else{if(_0x200805==_0x26e02c)_0x48acd3=(_0x2e7583-_0x2a5008)/_0x4f0feb+0x2;else _0x48acd3=(_0x2a5008-_0x26e02c)/_0x4f0feb+0x4;}}_0x48acd3=_0x4724af[_0x3ce075(0x87d)](_0x48acd3*0x3c);if(_0x48acd3<0x0)_0x48acd3+=0x168;return _0x3b12c2=(_0x200805+_0x949949)/0x2,_0x4dfe70=_0x4f0feb==0x0?0x0:_0x4f0feb/(0x1-_0x91ab49[_0x3ce075(0x378)](0x2*_0x3b12c2-0x1)),_0x4dfe70=+(_0x4dfe70*0x64)[_0x3ce075(0xab2)](0x1),_0x3b12c2=+(_0x3b12c2*0x64)[_0x3ce075(0xab2)](0x1),{'h':_0x48acd3,'s':_0x4dfe70,'l':_0x3b12c2};}}_0x592209[_0x3ce075(0x895)](_0x2096c8),_0x35d0f9[_0x3ce075(0x7fa)]=[],_0x35d0f9['currentSpeechIndex']=-0x1,document[_0x3ce075(0xb18)](_0x3ce075(0x84d))[_0x3ce075(0x65b)]='...';const _0xd72438=document[_0x3ce075(0xb18)](_0x3ce075(0x8ff));_0xd72438['innerHTML']='',_0x592209[_0x3ce075(0x175)](_0x20f3b0=>{const _0x33f1ee=_0x3ce075;_0x20f3b0[_0x33f1ee(0xb12)]==='danmaku'&&_0x8beff7(_0x20f3b0);}),_0x196a90(),_0x28dfd2(_0x3ce075(0xb3f)),setTimeout(()=>{_0x5e84ed();},0x64);}else{const _0x257c00=_0x3051ca(_0x1b6c70[_0x3ce075(0x80f)]);_0x257c00&&(delete _0x257c00['livestreamSpriteTransform'],_0x31e6d1(),_0x28bae7(_0x257c00['id'],_0x3ce075(0x680)),_0x2fe3b7(_0x3ce075(0x123)),_0x2594c9(!![]));}}function _0x2fe03b(){const _0x559099=_0x38ba71;document[_0x559099(0xb18)](_0x559099(0x4cd))[_0x559099(0xafb)](_0x559099(0x9db),_0x1d82ad),document[_0x559099(0xb18)]('livestream-replays-btn')['addEventListener'](_0x559099(0x9db),_0x3835fe),document[_0x559099(0xb18)]('livestream-reroll-btn')[_0x559099(0xafb)](_0x559099(0x9db),_0x27b373),document['getElementById'](_0x559099(0x215))[_0x559099(0xafb)]('click',_0x5155ef),document[_0x559099(0xb18)](_0x559099(0x77c))[_0x559099(0xafb)]('click',()=>_0x2645ab(![])),document[_0x559099(0xb18)]('livestream-sprite-reset-button')['addEventListener']('click',_0x5a585b),document[_0x559099(0xb18)](_0x559099(0xac4))[_0x559099(0xafb)]('input',_0x4aa421),document['getElementById'](_0x559099(0x311))[_0x559099(0xafb)](_0x559099(0xb8d),_0x4aa421),document['getElementById']('livestream-sprite-slider-scale')['addEventListener'](_0x559099(0xb8d),_0x4aa421);}async function _0x56a6c0(){const _0x46ad12=_0x38ba71,_0x29a500=_0x35d0f9[_0x46ad12(0x80f)];if(!_0x29a500)return;_0x198934(_0x46ad12(0x82b),'livestreamRoom');const _0x8cc351=[_0x46ad12(0x680),_0x46ad12(0x582),_0x46ad12(0x5b9),_0x46ad12(0x3dd),_0x46ad12(0x223)];document[_0x46ad12(0xb18)](_0x46ad12(0x2de))['style'][_0x46ad12(0x2f8)]='',_0x8cc351[_0x46ad12(0x175)](_0x280f6d=>{const _0x1e96ac=_0x46ad12;document[_0x1e96ac(0xb18)](_0x1e96ac(0x240)+_0x280f6d+_0x1e96ac(0x5b3))['style'][_0x1e96ac(0x2f8)]='';});try{const _0x151b1e=await _0x5288fd('livestream_bg_'+_0x29a500);if(_0x151b1e)document[_0x46ad12(0xb18)]('livestream-bg-preview')[_0x46ad12(0x7d9)][_0x46ad12(0x2f8)]='url(\x27'+URL[_0x46ad12(0x900)](_0x151b1e)+'\x27)';for(const _0x2ef14a of _0x8cc351){const _0x3e92e5=await _0x5288fd(_0x46ad12(0x170)+_0x2ef14a+'_'+_0x29a500);_0x3e92e5&&(document[_0x46ad12(0xb18)](_0x46ad12(0x240)+_0x2ef14a+'-preview')[_0x46ad12(0x7d9)][_0x46ad12(0x2f8)]=_0x46ad12(0x575)+URL[_0x46ad12(0x900)](_0x3e92e5)+'\x27)');}}catch(_0x5d63fe){_0x46ad12(0x697)!==_0x46ad12(0x31e)?console[_0x46ad12(0x4a1)]('加载直播间设置失败:',_0x5d63fe):_0x517e44=_0x1f63a2[_0x46ad12(0x485)](_0xa65ad9=>_0xa65ad9&&typeof _0xa65ad9===_0x46ad12(0x977)&&typeof _0xa65ad9[_0x46ad12(0x129)]===_0x46ad12(0xb1e)&&typeof _0xa65ad9[_0x46ad12(0x9bc)]!=='undefined');}}async function _0x4a3ecd(){const _0xea1d0b=_0x38ba71,_0x3521e0=_0x35d0f9[_0xea1d0b(0x80f)];if(!_0x3521e0)return;_0x13f6ba(!![],_0xea1d0b(0xc2a));try{const _0xc1ee5=document['getElementById'](_0xea1d0b(0xcfa))[_0xea1d0b(0x636)][0x0];if(_0xc1ee5)await _0xad4538(_0xea1d0b(0x9e3)+_0x3521e0,_0xc1ee5);const _0x4665fe=[_0xea1d0b(0x680),_0xea1d0b(0x582),_0xea1d0b(0x5b9),_0xea1d0b(0x3dd),'shy'];for(const _0x305803 of _0x4665fe){const _0x58ab2c=document[_0xea1d0b(0xb18)](_0xea1d0b(0x240)+_0x305803+_0xea1d0b(0x92e))[_0xea1d0b(0x636)][0x0];if(_0x58ab2c)await _0xad4538('livestream_sprite_'+_0x305803+'_'+_0x3521e0,_0x58ab2c);}_0x5c9c95(),_0x28dfd2(_0xea1d0b(0x519)),await _0x843198(_0x3521e0),_0x198934('livestreamRoom',_0xea1d0b(0x82b));}catch(_0x39d892){_0x28dfd2(_0xea1d0b(0x11c)+_0x39d892['message']);}finally{_0x13f6ba(![]);}}function _0x5e085c(){const _0x2c3397=_0x38ba71;document[_0x2c3397(0xb18)](_0x2c3397(0x7a1))[_0x2c3397(0xafb)](_0x2c3397(0x9db),_0x56a6c0),document[_0x2c3397(0xb18)](_0x2c3397(0x725))[_0x2c3397(0xafb)](_0x2c3397(0x9db),()=>_0x198934('livestreamRoom','livestreamSettings')),document[_0x2c3397(0xb18)](_0x2c3397(0xa88))[_0x2c3397(0xafb)]('click',_0x4a3ecd),document[_0x2c3397(0xb18)](_0x2c3397(0x2de))[_0x2c3397(0xafb)]('click',()=>document[_0x2c3397(0xb18)](_0x2c3397(0xcfa))['click']()),document[_0x2c3397(0xb18)](_0x2c3397(0xcfa))[_0x2c3397(0xafb)](_0x2c3397(0x326),_0x3972d1=>{const _0x3b9df2=_0x2c3397,_0x8ec738=_0x3972d1['target'][_0x3b9df2(0x636)][0x0];if(_0x8ec738)document[_0x3b9df2(0xb18)](_0x3b9df2(0x2de))[_0x3b9df2(0x7d9)][_0x3b9df2(0x2f8)]='url(\x27'+URL[_0x3b9df2(0x900)](_0x8ec738)+'\x27)';});const _0x47cf0b=[_0x2c3397(0x680),_0x2c3397(0x582),_0x2c3397(0x5b9),_0x2c3397(0x3dd),'shy'];_0x47cf0b['forEach'](_0x3d28ae=>{const _0x2403ca=_0x2c3397;if(_0x2403ca(0x5ed)===_0x2403ca(0x3bb))_0x51860d(_0xdf8a9),_0x1887e0();else{const _0x7d6842=document[_0x2403ca(0xb18)]('livestream-sprite-'+_0x3d28ae+_0x2403ca(0x5b3)),_0x54f452=document[_0x2403ca(0xb18)](_0x2403ca(0x240)+_0x3d28ae+_0x2403ca(0x92e));_0x7d6842['addEventListener'](_0x2403ca(0x9db),()=>_0x54f452[_0x2403ca(0x9db)]()),_0x54f452['addEventListener'](_0x2403ca(0x326),_0x8daf30=>{const _0x29b9f1=_0x2403ca,_0x1b7325=_0x8daf30[_0x29b9f1(0xce3)][_0x29b9f1(0x636)][0x0];if(_0x1b7325)_0x7d6842[_0x29b9f1(0x7d9)]['backgroundImage']=_0x29b9f1(0x575)+URL[_0x29b9f1(0x900)](_0x1b7325)+'\x27)';});}});}function _0x58303d(){const _0x4ac2c5=_0x38ba71;'CgLuC'!==_0x4ac2c5(0x2a1)?(_0x1d0241[_0x4ac2c5(0x4a1)](_0x4ac2c5(0x2c8),_0x10fd08),_0x1f0e92(_0x4ac2c5(0x3ec)+_0x2a49b0['message'])):console['log'](_0x4ac2c5(0x1e3));}document['getElementById']('livestream-textbox-container')[_0x38ba71(0xafb)]('click',_0x37f2c6);const _0x5e459e=document['getElementById'](_0x38ba71(0x1dd)),_0x9a72f6=document[_0x38ba71(0xb18)]('start-livestream-modal'),_0xeb7ed4=document[_0x38ba71(0xb18)]('confirm-start-livestream-button'),_0x1e7ebf=document['getElementById']('cancel-start-livestream-button'),_0x474189=document[_0x38ba71(0xb18)](_0x38ba71(0x3a3)),_0x16196c=document[_0x38ba71(0xb18)](_0x38ba71(0xaf3)),_0x4b562b=document[_0x38ba71(0xb18)]('audience-mood-input');_0x5e459e[_0x38ba71(0xafb)]('click',()=>{const _0x195bac=_0x38ba71;_0x16196c[_0x195bac(0x850)]='',_0x4b562b[_0x195bac(0x850)]='',_0x9a72f6['classList'][_0x195bac(0x366)](_0x195bac(0xa36)),_0x16196c['focus']();});const _0x4d1c10=()=>_0x9a72f6[_0x38ba71(0x79f)][_0x38ba71(0xb42)]('show');_0x1e7ebf[_0x38ba71(0xafb)]('click',_0x4d1c10),_0x474189[_0x38ba71(0xafb)]('click',_0x4d1c10),_0xeb7ed4[_0x38ba71(0xafb)](_0x38ba71(0x9db),()=>{const _0x15f6e7=_0x38ba71,_0x26c295=_0x16196c[_0x15f6e7(0x850)]['trim'](),_0xf1c635=_0x4b562b[_0x15f6e7(0x850)]['trim']();if(!_0x26c295||!_0xf1c635){if('GoGLw'!==_0x15f6e7(0xbe7)){_0x28dfd2(_0x15f6e7(0x48a));return;}else{const _0x4cb585='1';_0x2a4e69[_0x15f6e7(0x850)]=_0x4cb585,_0x365e18[_0x15f6e7(0x7d9)]['setProperty']('--desktop-item-scale',_0x4cb585),_0x1a9016[_0x15f6e7(0x570)](_0x15f6e7(0xccd),_0x4cb585);}}_0x4d1c10(),_0x8792fd(_0x26c295,_0xf1c635);}),document['getElementById']('back-to-home-from-livestream-list')['addEventListener'](_0x38ba71(0x9db),()=>_0x198934(_0x38ba71(0x58a),'livestreamList')),document['getElementById'](_0x38ba71(0x2c5))['addEventListener'](_0x38ba71(0x9db),()=>{const _0x463664=_0x38ba71,_0x2bbc92=document[_0x463664(0xb18)]('start-livestream-btn-container')['style'][_0x463664(0x31f)]===_0x463664(0x9ba);_0x2bbc92?_0x3a7c5b('确定要结束本次直播吗？结束后将为你生成本场回放。')['then'](async _0x3b895a=>{const _0x16db4c=_0x463664;if(_0x3b895a){if(_0x16db4c(0x2d7)!==_0x16db4c(0x2d7))return _0x34ec4a(new _0x4e1b02('哼，这不是图片，你想让我压缩什么？'));else _0x196a90(),await _0x2be44b(),localStorage['removeItem'](_0x16db4c(0x752)),_0x28dfd2(_0x16db4c(0xabe)),_0x198934(_0x16db4c(0xa37),'livestreamRoom');}}):_0x198934('livestreamList',_0x463664(0x154));});const _0x4adff9=document['getElementById'](_0x38ba71(0x2a0)),_0xeb42c5=document[_0x38ba71(0xb18)](_0x38ba71(0x9f0));_0x4adff9&&_0xeb42c5&&(_0x4adff9[_0x38ba71(0xafb)]('click',()=>_0xeb42c5[_0x38ba71(0x9db)]()),_0xeb42c5[_0x38ba71(0xafb)](_0x38ba71(0x326),_0x1db5b5)),document[_0x38ba71(0xb18)](_0x38ba71(0x7a3))[_0x38ba71(0xafb)](_0x38ba71(0x9db),_0x2f17d8);}const _0x32c4f4=_0x17d1db(0xb58);async function _0x7962d0(_0x17c0f6){const _0x3a6ef5=_0x17d1db;if(_0x3a6ef5(0x8db)===_0x3a6ef5(0x8db)){const _0x3b52cc=await _0x4c3f9a;return new Promise((_0x1a7590,_0x1af251)=>{const _0xbd8b05=_0x3a6ef5,_0x2d07db=_0x3b52cc[_0xbd8b05(0x832)](_0x32c4f4,_0xbd8b05(0xa43)),_0x4798ec=_0x2d07db[_0xbd8b05(0x566)](_0x32c4f4),_0x7387c4=_0x4798ec['get'](_0x17c0f6);_0x7387c4[_0xbd8b05(0x9d2)]=()=>_0x1a7590(_0x7387c4[_0xbd8b05(0xd15)]),_0x7387c4['onerror']=()=>_0x1af251(_0x7387c4[_0xbd8b05(0x4a1)]);});}else{const _0x599032=_0x278ca1[_0x3a6ef5(0x7e9)](_0x3a6ef5(0x91f));_0x599032[_0x3a6ef5(0x850)]=_0x1820cf['id'],_0x599032[_0x3a6ef5(0x65b)]=_0x4c4939['name'],_0x55e6a3[_0x3a6ef5(0x364)](_0x599032);}}async function _0xa33fcf(){const _0x3bac04=_0x17d1db;if('JJoyP'!==_0x3bac04(0x3ac)){const _0x336f4a=await _0x4c3f9a;return new Promise((_0x2b60a7,_0x5d5fd2)=>{const _0x260fb4=_0x3bac04,_0x1c9792=_0x336f4a[_0x260fb4(0x832)](_0x32c4f4,_0x260fb4(0xa43)),_0x170a86=_0x1c9792['objectStore'](_0x32c4f4),_0x254aaf=_0x170a86['getAll']();_0x254aaf[_0x260fb4(0x9d2)]=()=>_0x2b60a7(_0x254aaf['result']),_0x254aaf[_0x260fb4(0x892)]=()=>_0x5d5fd2(_0x254aaf[_0x260fb4(0x4a1)]);});}else _0x5350b9[_0x3bac04(0x4a1)](_0x3bac04(0x653)+_0x39dd5e['id']+_0x3bac04(0x8d7),_0x1c5cac);}async function _0x37cb2a(_0x28d29a){const _0x4e91dc=await _0x4c3f9a;return new Promise((_0x23fe9c,_0x132c51)=>{const _0x3405a2=_0x52a6,_0x5abadc=_0x4e91dc[_0x3405a2(0x832)](_0x32c4f4,_0x3405a2(0x43c)),_0x5a160a=_0x5abadc['objectStore'](_0x32c4f4),_0xd7bdb7=_0x5a160a[_0x3405a2(0x31b)](_0x28d29a);_0xd7bdb7[_0x3405a2(0x9d2)]=()=>_0x23fe9c(_0xd7bdb7[_0x3405a2(0xd15)]),_0xd7bdb7[_0x3405a2(0x892)]=()=>_0x132c51(_0xd7bdb7[_0x3405a2(0x4a1)]);});}async function _0x89d69d(_0x4b048c){const _0x48ac14=_0x17d1db;if('hNqiO'==='svhzV')try{_0x4f24be[_0x43d511]=_0x2ae915[_0x48ac14(0x97b)](_0x3893f6);}catch(_0x34e381){}else{const _0x1a9a68=await _0x4c3f9a;return new Promise((_0x19bcb4,_0x1fd9a4)=>{const _0x50e73c=_0x48ac14;if('wLbcl'!==_0x50e73c(0x704)){const _0x322f8e=_0x1a9a68[_0x50e73c(0x832)](_0x32c4f4,_0x50e73c(0x43c)),_0x24e5fb=_0x322f8e[_0x50e73c(0x566)](_0x32c4f4),_0x118aad=_0x24e5fb[_0x50e73c(0xc3e)](_0x4b048c);_0x118aad[_0x50e73c(0x9d2)]=()=>_0x19bcb4(),_0x118aad[_0x50e73c(0x892)]=()=>_0x1fd9a4(_0x118aad[_0x50e73c(0x4a1)]);}else _0x67c865[_0x50e73c(0x364)](_0x1b3ac8);});}}let _0x32d5ea={'audio':null,'cover':null,'info':null,'lyrics':null};const _0x2e32c9={'audio':document[_0x17d1db(0xb18)]('altar-slot-audio'),'cover':document[_0x17d1db(0xb18)](_0x17d1db(0x66c)),'info':document[_0x17d1db(0xb18)](_0x17d1db(0xb70)),'lyrics':document[_0x17d1db(0xb18)]('altar-slot-lyrics')},_0x329bfc={'audio':document[_0x17d1db(0xb18)](_0x17d1db(0x4c1)),'cover':document[_0x17d1db(0xb18)]('cover-file-input'),'info':document[_0x17d1db(0xb18)](_0x17d1db(0x77b)),'lyrics':document[_0x17d1db(0xb18)](_0x17d1db(0x9d6))};function _0x4125a1(){const _0x485cd0=_0x17d1db,_0xc1a131=document['getElementById'](_0x485cd0(0x7a3));_0x32d5ea['audio']&&_0x32d5ea[_0x485cd0(0x833)]?_0x485cd0(0x2b7)==='rqvhp'?_0xc1a131[_0x485cd0(0x4f1)]=![]:_0x3dce84('字体保存失败了，哼:\x20'+_0x13a0e3[_0x485cd0(0x5a1)]):_0xc1a131[_0x485cd0(0x4f1)]=!![];}async function _0x1db5b5(_0x2b4dc9){const _0x3f76ed=_0x17d1db,_0x46ac9b=_0x2b4dc9[_0x3f76ed(0xce3)][_0x3f76ed(0x636)][0x0];if(!_0x46ac9b)return;_0x13f6ba(!![],'正在解析音乐魔方...');const _0x5e3a2b=document[_0x3f76ed(0xb18)](_0x3f76ed(0x2a0)),_0x5e33f9=document[_0x3f76ed(0xb18)](_0x3f76ed(0x7a3));_0x5e3a2b['classList'][_0x3f76ed(0xb42)](_0x3f76ed(0x47c)),_0x5e33f9[_0x3f76ed(0x4f1)]=!![],_0x5e3a2b[_0x3f76ed(0x3eb)](_0x3f76ed(0x69b))[_0x3f76ed(0x65b)]=_0x46ac9b[_0x3f76ed(0x19d)];try{if(_0x3f76ed(0xa09)!==_0x3f76ed(0xa09))!_0x1500bc&&(_0x5918cd=_0x683891['avatar']||_0x759fb8),_0x27613e=_0x258f4e[_0x3f76ed(0x19d)]||_0x3f76ed(0xc2f),_0x39e65d=_0x54a405['remark']||'私聊';else{const _0x263ce8=await JSZip[_0x3f76ed(0x9ee)](_0x46ac9b),_0x2f921f={'audio':null,'cover':null,'info':null,'lyrics':null},_0x3b3776=[];_0x263ce8[_0x3f76ed(0x175)]((_0x385766,_0x47a3dc)=>{const _0x42ecdf=_0x3f76ed,_0x24ea65=_0x47a3dc[_0x42ecdf(0x19d)];if(/\.(mp3|flac)$/i[_0x42ecdf(0x759)](_0x24ea65))_0x42ecdf(0xa42)!==_0x42ecdf(0xa42)?_0x3321dc[_0x42ecdf(0xb12)]===_0x42ecdf(0x253)&&(_0x566b31[_0x42ecdf(0x8f1)]=_0x129b1c[_0x42ecdf(0x8f1)]['filter'](_0x48c7fa=>_0x48c7fa!==_0x1c05d0)):_0x3b3776[_0x42ecdf(0xb2f)](_0x47a3dc[_0x42ecdf(0x99b)]('blob')[_0x42ecdf(0xa34)](_0xd2198a=>_0x2f921f[_0x42ecdf(0x2e6)]=new File([_0xd2198a],_0x47a3dc[_0x42ecdf(0x19d)])));else{if(/\.(jpg|jpeg|png|webp)$/i[_0x42ecdf(0x759)](_0x24ea65))'SNeCa'==='SNeCa'?_0x3b3776['push'](_0x47a3dc['async']('blob')[_0x42ecdf(0xa34)](_0x38de81=>_0x2f921f[_0x42ecdf(0x2d5)]=new File([_0x38de81],_0x47a3dc[_0x42ecdf(0x19d)]))):_0x2db2f8[_0x42ecdf(0x4a1)]('保存播放器状态失败，真是没用。',_0x2b3834);else{if(/\.(txt|json)$/i[_0x42ecdf(0x759)](_0x24ea65))_0x3b3776[_0x42ecdf(0xb2f)](_0x47a3dc[_0x42ecdf(0x99b)]('blob')[_0x42ecdf(0xa34)](_0x33a5d5=>_0x2f921f['info']=new File([_0x33a5d5],_0x47a3dc['name'])));else/\.lrc$/i['test'](_0x24ea65)&&_0x3b3776['push'](_0x47a3dc['async'](_0x42ecdf(0x885))[_0x42ecdf(0xa34)](_0x2f2647=>_0x2f921f[_0x42ecdf(0xcf1)]=new File([_0x2f2647],_0x47a3dc[_0x42ecdf(0x19d)])));}}}),await Promise['all'](_0x3b3776);if(!_0x2f921f[_0x3f76ed(0x2e6)]||!_0x2f921f['info'])throw new Error(_0x3f76ed(0xc92));_0x32d5ea=_0x2f921f,_0x5e3a2b[_0x3f76ed(0x79f)][_0x3f76ed(0x366)](_0x3f76ed(0x47c)),_0x5e33f9[_0x3f76ed(0x4f1)]=![],_0x13f6ba(![]),_0x28dfd2(_0x3f76ed(0x460));}}catch(_0x28178b){_0x13f6ba(![]),console[_0x3f76ed(0x4a1)]('解析压缩包失败:',_0x28178b),_0x28dfd2(_0x3f76ed(0x18a)+_0x28178b[_0x3f76ed(0x5a1)]),_0x5e3a2b[_0x3f76ed(0x3eb)](_0x3f76ed(0x69b))[_0x3f76ed(0x65b)]=_0x3f76ed(0xadc);}finally{_0x2b4dc9['target'][_0x3f76ed(0x850)]='';}}document[_0x17d1db(0xb18)](_0x17d1db(0x7a3))[_0x17d1db(0xafb)](_0x17d1db(0x9db),async()=>{const _0x3ddcb8=_0x17d1db;if(!_0x32d5ea['audio']||!_0x32d5ea['info']){if('IGHOJ'===_0x3ddcb8(0x172)){if(!_0x4c3a12)return'';return _0x6503b8[_0x3ddcb8(0x39f)](/&/g,_0x3ddcb8(0x247))[_0x3ddcb8(0x39f)](/</g,_0x3ddcb8(0x445))['replace'](/>/g,_0x3ddcb8(0xbd8))[_0x3ddcb8(0x39f)](/"/g,_0x3ddcb8(0x153))[_0x3ddcb8(0x39f)](/'/g,_0x3ddcb8(0x306));}else{_0x28dfd2(_0x3ddcb8(0x794));return;}}await _0x2f17d8();}),document['getElementById'](_0x17d1db(0x9e1))[_0x17d1db(0xafb)]('click',()=>{const _0x2ab1b9=_0x17d1db;_0x2ab1b9(0xcd9)!==_0x2ab1b9(0xcd9)?_0x4a5f6e(_0x2ab1b9(0x928)):_0x198934(_0x2ab1b9(0xba0),_0x2ab1b9(0x4e2));}),document[_0x17d1db(0xb18)](_0x17d1db(0x29e))[_0x17d1db(0xafb)]('click',()=>{const _0x43094a=_0x17d1db;_0x198934('musicLibrary',_0x43094a(0xba0));});async function _0x2f17d8(){const _0x21b533=_0x17d1db;if(_0x21b533(0x997)!==_0x21b533(0x997)){const _0x1a1d6b=_0x1c225b[_0x21b533(0x3eb)](_0x21b533(0x672)+_0xdcf84);if(_0x1a1d6b)_0x1a1d6b['checked']=!![];}else{_0x13f6ba(!![],_0x21b533(0x523));try{const _0x106849=await _0x32d5ea[_0x21b533(0x833)][_0x21b533(0xa0c)]();let _0xa69777;if(_0x106849['trim']()[_0x21b533(0x41d)]('{'))_0x21b533(0xe6)==='EiuNR'?_0xa69777=JSON['parse'](_0x106849):_0x234fbf[_0x21b533(0xa78)]=_0x2497c2(()=>{const _0x17d88b=_0x21b533;if(_0x27d66d[_0x17d88b(0xb12)]===_0x17d88b(0x983))_0x58d0f4[_0x17d88b(0xa05)]();_0x36b71(_0x502933(_0x2f1f03,0xa),_0x5430fc);},0x320);else{_0xa69777={};const _0x248c8d=_0x106849[_0x21b533(0xb2d)]('\x0a');_0x248c8d[_0x21b533(0x175)](_0x23aa87=>{const _0x231341=_0x21b533;if(_0x231341(0xc97)===_0x231341(0xc97)){const _0xdca79f=_0x23aa87['split'](/:\s|：\s/);if(_0xdca79f[_0x231341(0x968)]===0x2){const _0x490af6=_0xdca79f[0x0][_0x231341(0x2e2)](),_0x1ff243=_0xdca79f[0x1][_0x231341(0x2e2)](),_0x1a7492={'歌名':'歌曲名称','艺术家':'歌手','专辑':'专辑'};_0x1a7492[_0x490af6]&&(_0xa69777[_0x1a7492[_0x490af6]]=_0x1ff243);}}else _0x59e663[_0x231341(0x9db)]();});if(!_0xa69777[_0x21b533(0x9b9)])throw new Error('在你那乱七八糟的文本里没找到“歌名”！');_0xa69777['歌曲ID']=_0x21b533(0x93b)+Date[_0x21b533(0x5ee)]()+'\x20';}const _0xc4e817=_0x21b533(0x93b)+(_0xa69777[_0x21b533(0x68d)]||Date[_0x21b533(0x5ee)]())+'\x20',_0xc58fc3={'id':_0xc4e817,'info':_0xa69777,'audio':_0x32d5ea[_0x21b533(0x2e6)],'cover':_0x32d5ea['cover'],'lyrics':_0x32d5ea[_0x21b533(0xcf1)]?await _0x32d5ea['lyrics'][_0x21b533(0xa0c)]():''};await _0x37cb2a(_0xc58fc3),_0x13f6ba(![]),_0x28dfd2(_0x21b533(0x579)+_0xa69777[_0x21b533(0x9b9)]+_0x21b533(0xae6)),_0x198934(_0x21b533(0x4e2),_0x21b533(0xba0)),setTimeout(_0x5af778,0x32);}catch(_0x14bdca){_0x13f6ba(![]),console[_0x21b533(0x4a1)](_0x21b533(0x6be),_0x14bdca),_0x28dfd2(_0x21b533(0x8bc)+_0x14bdca[_0x21b533(0x5a1)]+'\x20');}}}async function _0x5af778(){const _0x442a96=_0x17d1db;if(_0x442a96(0x3b4)===_0x442a96(0x3b4)){const _0x484419=document[_0x442a96(0xb18)](_0x442a96(0x4cc));_0x484419['innerHTML']='';const _0x1ca0c2=await _0xa33fcf();if(_0x1ca0c2['length']===0x0){_0x484419[_0x442a96(0x280)]=_0x442a96(0x3f4);return;}_0x1ca0c2['sort']((_0x31cb7d,_0x4ac6e3)=>(_0x31cb7d[_0x442a96(0x833)][_0x442a96(0x9b9)]||'')[_0x442a96(0x2b6)](_0x4ac6e3[_0x442a96(0x833)][_0x442a96(0x9b9)]||''));for(const _0x2613bc of _0x1ca0c2){const _0x2e52c2=document['createElement'](_0x442a96(0x591));_0x2e52c2[_0x442a96(0x73e)]=_0x442a96(0x487),_0x2e52c2[_0x442a96(0x218)]['songId']=_0x2613bc['id'];const _0x15f76a=_0x2613bc[_0x442a96(0x2d5)]?URL[_0x442a96(0x900)](_0x2613bc[_0x442a96(0x2d5)]):_0x20a236;_0x2e52c2[_0x442a96(0x280)]='\x0a\x20\x20<img\x20src=\x22'+_0x15f76a+_0x442a96(0xf9)+(_0x2613bc['info']['歌曲名称']||_0x442a96(0x7e8))+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>'+(_0x2613bc['info']['歌手']||_0x442a96(0x610))+'</div>\x0a\x20\x20</div>\x0a';let _0x3663a7=null;const _0x119d87=_0x119765=>{const _0x431282=_0x442a96;if(_0x119765[_0x431282(0x80c)]===0x2)return;_0x3663a7=setTimeout(async()=>{const _0x4b3982=_0x431282;if(_0x119765['type']===_0x4b3982(0x983))_0x119765[_0x4b3982(0xa05)]();const _0x4d911f=await _0x3a7c5b('确定要从圣殿中永久删除《'+_0x2613bc[_0x4b3982(0x833)][_0x4b3982(0x9b9)]+'》吗？');_0x4d911f&&(await _0x89d69d(_0x2613bc['id']),await _0x5af778(),_0x28dfd2('已删除。'));},0x320);},_0x37ec99=()=>{clearTimeout(_0x3663a7);};_0x2e52c2['addEventListener'](_0x442a96(0x6b5),_0x119d87),_0x2e52c2[_0x442a96(0xafb)](_0x442a96(0xc4f),_0x37ec99),_0x2e52c2['addEventListener']('mouseleave',_0x37ec99),_0x2e52c2['addEventListener']('touchstart',_0x119d87,{'passive':![]}),_0x2e52c2[_0x442a96(0xafb)](_0x442a96(0x9ff),_0x37ec99),_0x2e52c2[_0x442a96(0xafb)](_0x442a96(0x476),_0x37ec99),_0x2e52c2[_0x442a96(0xafb)]('click',_0x349afd=>{const _0x5f22d7=_0x442a96;if(_0x3663a7)clearTimeout(_0x3663a7);if(_0x349afd[_0x5f22d7(0xa8f)])return;setTimeout(()=>{const _0x38c5a8=_0x5f22d7;if(_0x38c5a8(0x840)!=='dyLih')return{'type':_0x38c5a8(0xc5d),'eventType':_0x341d3f[0x1][_0x38c5a8(0x2e2)](),'eventDate':_0x3008d8[0x2][_0x38c5a8(0x2e2)](),'eventContent':_0x20aeab[0x3][_0x38c5a8(0x2e2)]()};else{if(_0x3663a7){if(_0x38c5a8(0xcbe)!==_0x38c5a8(0xcbe)){if(!_0x3720ab)return;const _0x43d8eb=_0x5e74ba['touches']?_0x4516fc[_0x38c5a8(0x2b5)][0x0][_0x38c5a8(0x3e6)]:_0x29238d[_0x38c5a8(0x3e6)];_0x1d7b0e=_0x43d8eb-_0x465274;if(_0x1f60f5<0x0){const _0x131d90=_0x358d56['abs'](_0x31275d),_0x3d8c2e=0.4,_0x206bcf=_0x3ed680[_0x38c5a8(0xcb0)](_0x131d90,_0x3d8c2e)*0x14;_0xdd97db['style']['transform']=_0x38c5a8(0x862)+_0x206bcf+_0x38c5a8(0x1be);}}else _0x503220(_0x2613bc['id'],_0x1ca0c2[_0x38c5a8(0xbb5)](_0x5260d2=>_0x5260d2['id']));}}},0x32);}),_0x484419[_0x442a96(0x364)](_0x2e52c2);}}else{const _0x39cdec=_0x4163bb['getElementById'](_0x442a96(0x14c));if(!_0x39cdec)return;const _0xbb66d3=_0x5c32cd[_0x442a96(0x9a1)]('themeHue')||'35';_0x1245bc['documentElement'][_0x442a96(0x7d9)][_0x442a96(0xbcb)]('--primary-hue',_0xbb66d3),_0x39cdec[_0x442a96(0x850)]=_0xbb66d3,_0x39cdec[_0x442a96(0xafb)](_0x442a96(0xb8d),()=>{const _0xcc85d6=_0x442a96,_0x53bc37=_0x39cdec['value'];_0x221638[_0xcc85d6(0xa12)]['style'][_0xcc85d6(0xbcb)]('--primary-hue',_0x53bc37),_0xebdb4d[_0xcc85d6(0x570)](_0xcc85d6(0xba2),_0x53bc37),_0x3f0dea();});}}_0x4e6d67[_0x17d1db(0xafb)]('click',()=>{const _0x58b66e=_0x17d1db;if(_0x58b66e(0x955)==='onkXM')_0x28dfd2(_0x58b66e(0xb45));else{const _0x4d5a0a=_0x2e8f95[_0x58b66e(0x2e2)]();if(!_0x4d5a0a||!_0xc5738d['activeDiaryCharacterId'])return;let _0x3de9b6=_0x195091[_0x58b66e(0x3e7)][_0x58b66e(0x9cd)](_0x3f13e1=>_0x3f13e1[_0x58b66e(0x563)]===_0xa6378d[_0x58b66e(0xc56)]);!_0x3de9b6&&(_0x3de9b6={'characterId':_0xfc31b['activeDiaryCharacterId'],'entries':[]},_0x2a2b22[_0x58b66e(0x3e7)]['push'](_0x3de9b6));_0x3de9b6[_0x58b66e(0x2fb)][_0x58b66e(0xb2f)]({'timestamp':_0x566e57[_0x58b66e(0x5ee)](),'author':_0x58b66e(0x809),'content':_0x4d5a0a}),_0x4cb483();const _0x2584e7=_0x3de9b6[_0x58b66e(0x2fb)][_0x58b66e(0x968)];_0x3a39bf[_0x58b66e(0x556)]=_0x3cf604['ceil'](_0x2584e7/0x2)-0x1,_0x3c1c9b();}}),_0x48adc2['addEventListener'](_0x17d1db(0x9db),()=>{const _0x23f31f=_0x17d1db;_0x28dfd2(_0x23f31f(0x5d9));});let _0x6e90aa=[],_0x238931=-0x1;async function _0x503220(_0x4da33e,_0x26b626){const _0xa818d5=_0x17d1db;if('IJmFY'!==_0xa818d5(0xc12)){const _0x374f96=await _0x7962d0(_0x4da33e);if(!_0x374f96)return;_0x32e31f={'title':_0x374f96['info'][_0xa818d5(0x9b9)]||_0xa818d5(0x7e8),'artist':_0x374f96[_0xa818d5(0x833)]['歌手']||_0xa818d5(0x610),'cover':_0x374f96[_0xa818d5(0x2d5)]?URL[_0xa818d5(0x900)](_0x374f96[_0xa818d5(0x2d5)]):_0x20a236,'isFromLibrary':!![]};const _0x4b1c15=URL[_0xa818d5(0x900)](_0x374f96['audio']);_0x459e34[_0xa818d5(0x9c9)]=_0x4b1c15,_0x459e34[_0xa818d5(0xc36)](),_0x457652();}else _0x2c8955[_0xa818d5(0x4f1)]=!![];}async function _0x457652(){const _0x2f1426=_0x17d1db,_0x52f4c3=document[_0x2f1426(0xb18)](_0x2f1426(0xaba)),_0x1203a5=document[_0x2f1426(0xb18)]('widget-title'),_0x2db41d=document[_0x2f1426(0xb18)](_0x2f1426(0x957)),_0x4d33ae=document[_0x2f1426(0xb18)]('widget-cover-art'),_0x2fa88b=_0x32e31f;_0x2fa88b&&_0x2fa88b[_0x2f1426(0xafd)]?_0x2f1426(0x25e)!==_0x2f1426(0x25e)?_0x41faf5[_0x2f1426(0xce3)][_0x2f1426(0x850)]='':(_0x1203a5[_0x2f1426(0x65b)]=_0x2fa88b[_0x2f1426(0x248)],_0x2db41d[_0x2f1426(0x65b)]=_0x2fa88b[_0x2f1426(0xb52)],_0x52f4c3[_0x2f1426(0x79f)][_0x2f1426(0x366)]('is-playing'),_0x52f4c3['style']['setProperty'](_0x2f1426(0x6e0),'url('+_0x2fa88b[_0x2f1426(0x2d5)]+')')):(_0x1203a5[_0x2f1426(0x65b)]=_0x2f1426(0xa19),_0x2db41d['textContent']=_0x2f1426(0x922),_0x52f4c3[_0x2f1426(0x79f)]['remove'](_0x2f1426(0x6f1)),_0x4d33ae[_0x2f1426(0x7d9)]['setProperty'](_0x2f1426(0x6e0),_0x2f1426(0x9ba)));}function _0x339740(){const _0x34e343=_0x17d1db;if(_0x34e343(0x6c1)!==_0x34e343(0x6c1))try{_0x373385[_0x34e343(0x570)]('musicPlayerState',_0x36f4a7[_0x34e343(0xcf9)]({'playlist':_0x9d1390['musicPlaylist'],'currentIndex':_0x447807[_0x34e343(0x863)]}));}catch(_0x2cc057){_0x3284ea['error'](_0x34e343(0x950),_0x2cc057);}else{const _0x179eb1=document[_0x34e343(0xb18)](_0x34e343(0xc79));if(!_0x179eb1)return;const _0xb11e1=document['getElementById'](_0x34e343(0xba5)),_0x2187bd=document[_0x34e343(0xb18)]('player-title'),_0x42fffd=document['getElementById']('player-artist'),_0x1c4ca1=document[_0x34e343(0xb18)](_0x34e343(0x466)),_0x55a4ea=_0x35d0f9[_0x34e343(0x17b)][_0x35d0f9[_0x34e343(0x863)]],_0x59554f=_0x35d0f9[_0x34e343(0x705)],_0x3ddbb9=document[_0x34e343(0xb18)]('music-screen')[_0x34e343(0x79f)][_0x34e343(0xbbc)](_0x34e343(0x530));if(_0x55a4ea&&_0x3ddbb9)_0x179eb1[_0x34e343(0x79f)][_0x34e343(0xb42)](_0x34e343(0x15f)),_0x55a4ea['coverId']?_0x5288fd(_0x55a4ea[_0x34e343(0x67f)])[_0x34e343(0xa34)](_0x4bd7c6=>{const _0x17da9b=_0x34e343;if(_0x4bd7c6)_0xb11e1['src']=URL[_0x17da9b(0x900)](_0x4bd7c6);}):_0xb11e1[_0x34e343(0x9c9)]=_0x55a4ea[_0x34e343(0x22d)]||_0x20a236,_0x2187bd[_0x34e343(0x65b)]=_0x55a4ea[_0x34e343(0x596)]||_0x34e343(0x7e8),_0x42fffd['textContent']=_0x55a4ea['artist']||_0x34e343(0x610),_0x1c4ca1[_0x34e343(0x65b)]=_0x59554f?'❚❚':'▶';else{if(_0x34e343(0x6b8)===_0x34e343(0x6b8))_0x179eb1[_0x34e343(0x79f)][_0x34e343(0x366)](_0x34e343(0x15f));else{_0x31dc36['innerHTML']=_0x34e343(0xc82);return;}}}}_0x4e6d67&&_0x4e6d67[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x2f3f98=_0x17d1db;if(_0x2f3f98(0x16e)===_0x2f3f98(0x135)){const _0x55f68a=_0x4236c8[_0x2f3f98(0xce3)][_0x2f3f98(0x218)][_0x2f3f98(0xcf5)],_0x2d2057=_0x1c1e40[_0x2f3f98(0x9c6)]('.wb-entry-item\x20input[data-category-id=\x22'+_0x55f68a+'\x22]'),_0x28a9b8=_0x2cb131[_0x2f3f98(0x9c6)](_0x2f3f98(0x114)+_0x55f68a+_0x2f3f98(0xbca)),_0x1250ff=_0x3a98b8['querySelector'](_0x2f3f98(0x18f)+_0x55f68a+'\x22]');if(_0x28a9b8[_0x2f3f98(0x968)]===0x0)_0x1250ff[_0x2f3f98(0xbbd)]=![],_0x1250ff[_0x2f3f98(0x646)]=![];else _0x28a9b8[_0x2f3f98(0x968)]===_0x2d2057[_0x2f3f98(0x968)]?(_0x1250ff['checked']=!![],_0x1250ff[_0x2f3f98(0x646)]=![]):_0x1250ff['indeterminate']=!![];_0x4075f7();}else{if(_0x6e90aa[_0x2f3f98(0x968)]===0x0)return;_0x238931=(_0x238931+0x1)%_0x6e90aa[_0x2f3f98(0x968)],_0x503220(_0x6e90aa[_0x238931],_0x6e90aa);}});_0x48adc2&&_0x48adc2[_0x17d1db(0xafb)]('click',()=>{const _0x5120ca=_0x17d1db;if(_0x6e90aa[_0x5120ca(0x968)]===0x0)return;_0x238931=(_0x238931-0x1+_0x6e90aa[_0x5120ca(0x968)])%_0x6e90aa[_0x5120ca(0x968)],_0x503220(_0x6e90aa[_0x238931],_0x6e90aa);});_0x459e34[_0x17d1db(0xafb)](_0x17d1db(0xc36),()=>{const _0x34a73f=_0x17d1db;_0x35d0f9[_0x34a73f(0x705)]=!![],_0x345cc1();}),_0x459e34[_0x17d1db(0xafb)](_0x17d1db(0x639),()=>{const _0x25fc1d=_0x17d1db;_0x35d0f9[_0x25fc1d(0x705)]=![],_0x345cc1();}),_0x459e34[_0x17d1db(0xafb)](_0x17d1db(0x8cc),()=>{const _0x2275e0=_0x17d1db;if('azrJE'!==_0x2275e0(0x4c0)){if(_0x4e6d67)_0x4e6d67['click']();}else{_0x5c5151=_0x45470e();const _0x2d298e=_0x536479[_0x2275e0(0xb18)](_0x2275e0(0xa66))[_0x2275e0(0x65b)];_0x19c804=_0x2d298e||'当前聊天';}});function _0x42d84e(){const _0x18121b=_0x17d1db;if(_0x18121b(0x9f2)===_0x18121b(0x9f6)){const _0x41aa6f=_0x132a8a[_0x18121b(0xac5)](/theme:\s*"?([^"\n]+)"?/)?.[0x1]||_0x18121b(0xf6),_0x347b2c=(_0x5ae999[_0x18121b(0xac5)](/key_events:\s*\n([\s\S]*?)(?=\n\w+:|$)/)?.[0x1]||'')[_0x18121b(0xb2d)]('\x0a')[_0x18121b(0xbb5)](_0x2037b7=>_0x2037b7[_0x18121b(0x2e2)]())[_0x18121b(0x485)](_0x2d4053=>_0x2d4053[_0x18121b(0x41d)]('-'))[_0x18121b(0x102)]('\x20');return _0x18121b(0xc96)+(_0x2e4612+0x1)+_0x18121b(0x9a3)+_0x41aa6f+_0x18121b(0x828)+_0x347b2c;}else{const _0x56493e=_0x1f3fa9();if(!_0x56493e)return;_0x277a91[_0x18121b(0x280)]='',_0x48be41[_0x18121b(0x850)]='',_0x56493e[_0x18121b(0xb12)]==='group'?(_0x56493e[_0x18121b(0x8f1)][_0x18121b(0x175)](_0x420685=>{const _0x5110d3=_0x18121b,_0x9089c5=_0x45939a(_0x420685);if(_0x9089c5){if(_0x5110d3(0xbda)==='Vcxeq'){const _0x32d04f=document['createElement'](_0x5110d3(0x91f));_0x32d04f['value']=_0x9089c5['id'],_0x32d04f[_0x5110d3(0x65b)]=_0x9089c5['name'],_0x277a91[_0x5110d3(0x364)](_0x32d04f);}else{const _0x328f76=_0x332d20['getElementById']('snoop-app-container'),_0x55c308=_0x5ae7ea[_0x5110d3(0xb18)](_0x5110d3(0xe4));_0x328f76[_0x5110d3(0x280)]=_0x5110d3(0x3f5),_0x55c308['innerHTML']='';const _0x6ffe9=_0x328f76['querySelector']('.snoop-main-grid'),_0x303ca4=[{'id':'whispers','name':'聊天','svg':'<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>','area':_0x5110d3(0x3f9)},{'id':'abyss','name':'浏览器','svg':_0x5110d3(0xaeb),'area':_0x5110d3(0x3f9)},{'id':'gallery','name':'相册','svg':_0x5110d3(0xcd8),'area':'dock'},{'id':_0x5110d3(0x93f),'name':'总结','svg':'<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>','area':_0x5110d3(0x3f9)},{'id':'fragments','name':_0x5110d3(0x1ee),'svg':_0x5110d3(0x894),'area':_0x5110d3(0x234)},{'id':_0x5110d3(0x45d),'name':'外卖','svg':'<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>','area':_0x5110d3(0x234)},{'id':_0x5110d3(0xb6f),'name':'购物','svg':_0x5110d3(0xab7),'area':_0x5110d3(0x234)},{'id':_0x5110d3(0x5f9),'name':'足迹','svg':_0x5110d3(0xaf5),'area':_0x5110d3(0x234)}];_0x303ca4[_0x5110d3(0x175)](_0x2f64ca=>{const _0x3f8b00=_0x5110d3,_0x10855a=_0x390d6b[_0x3f8b00(0x7e9)](_0x3f8b00(0x591));_0x10855a[_0x3f8b00(0x73e)]=_0x3f8b00(0x27d),_0x10855a[_0x3f8b00(0x280)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>'+_0x2f64ca[_0x3f8b00(0x561)]+_0x3f8b00(0x660)+_0x2f64ca[_0x3f8b00(0x19d)]+_0x3f8b00(0xcea),_0x10855a[_0x3f8b00(0xafb)](_0x3f8b00(0x9db),()=>_0x36d59e(_0x2f64ca['id'],_0x2f64ca[_0x3f8b00(0x19d)])),_0x2f64ca[_0x3f8b00(0x380)]==='dock'?_0x55c308[_0x3f8b00(0x364)](_0x10855a):_0x6ffe9[_0x3f8b00(0x364)](_0x10855a);});}}}),_0x43f475['style']['display']='block'):_0x43f475[_0x18121b(0x7d9)][_0x18121b(0x31f)]=_0x18121b(0x9ba),_0x557d9b['classList'][_0x18121b(0x366)](_0x18121b(0xa36)),_0x48be41[_0x18121b(0x1d4)]();}}function _0x4d73ad(){const _0xa7f4d=_0x17d1db;if(_0xa7f4d(0xbfe)===_0xa7f4d(0x5fd))_0x578f93['preventDefault']();else{const _0x70df62=parseFloat(_0x48be41[_0xa7f4d(0x850)]);if(isNaN(_0x70df62)||_0x70df62<=0x0){_0x28dfd2(_0xa7f4d(0x86c));return;}const _0x69dfd7=_0x1f3fa9();let _0x3ace98=null;_0x69dfd7[_0xa7f4d(0xb12)]===_0xa7f4d(0x253)?_0x3ace98=_0x277a91['value']:_0x3ace98=_0x69dfd7['participantIds'][0x0];const _0x54edf3=_0x5f52db(_0x69dfd7['id']),_0x50eb05={'role':'user','type':_0xa7f4d(0x986),'content':_0xa7f4d(0xf1)+(_0x45939a(_0x3ace98)?.[_0xa7f4d(0x19d)]||'未知')+_0xa7f4d(0x630)+_0x70df62+']','amount':_0x70df62,'recipientId':_0x3ace98,'senderId':_0x54edf3['id'],'timestamp':Date[_0xa7f4d(0x5ee)]()};_0x35d0f9[_0xa7f4d(0x6b9)][_0xa7f4d(0xb2f)](_0x50eb05),_0x1d6327(),_0x3f1b6c(),_0x557d9b[_0xa7f4d(0x79f)][_0xa7f4d(0xb42)]('show');}}async function _0x15cb61(_0x291a6c){const _0x4c2339=_0x17d1db;if(_0x4c2339(0x3ae)==='HEBmh'){const {omniText:_0x53b6e5}=_0x3d7a33(_0x4403a5['id'],null),_0x4cfdbb=_0x13c91a(_0x1a2847['id']),_0x3955d4=_0x22632f[_0x4c2339(0x99c)]&&_0x311fd9[_0x4c2339(0x99c)][_0x4c2339(0x968)]>0x0?_0x4c2339(0x55c)+_0x3352de[_0x4c2339(0x19d)]+'的个人专属世界观设定\x0a'+_0x4f6431[_0x4c2339(0x99c)][_0x4c2339(0xbb5)](_0xc45ce4=>_0x29eedf['worldBooks'][_0x4c2339(0x9cd)](_0x5db947=>_0x5db947['id']===_0xc45ce4))[_0x4c2339(0x485)](_0x15951a)[_0x4c2339(0xbb5)](_0x4bed21=>_0x4c2339(0xa60)+_0x4bed21[_0x4c2339(0x19d)]+'\x0a'+_0x4bed21[_0x4c2339(0x9bc)])['join'](''):'';return _0x4c2339(0x911)+_0x550566[_0x4c2339(0x19d)]+',\x20ID:\x20'+_0x4d2014['id']+'\x0a\x20\x20人设:\x20'+_0x14f5cb[_0x4c2339(0x1ab)]+_0x4c2339(0x50e)+_0x53b6e5+'\x0a'+_0x4cfdbb+'\x0a'+_0x3955d4;}else{const _0x48391d=_0x45939a(_0x291a6c);if(!_0x48391d)return;const _0x1ccad0=await _0x3a7c5b('确定要永久清空【'+_0x48391d[_0x4c2339(0x19d)]+_0x4c2339(0x6f7));if(!_0x1ccad0)return;const _0x2a5283=_0x35d0f9[_0x4c2339(0x3e7)][_0x4c2339(0x59a)](_0x393ace=>_0x393ace[_0x4c2339(0x563)]===_0x291a6c);if(_0x2a5283>-0x1)_0x35d0f9[_0x4c2339(0x3e7)][_0x4c2339(0x895)](_0x2a5283,0x1),_0x5c9c95(),_0x1f1326(),_0x28dfd2('【'+_0x48391d[_0x4c2339(0x19d)]+_0x4c2339(0xb9f));else{if(_0x4c2339(0x64c)!=='WyuxL')_0x28dfd2(_0x4c2339(0x9b5));else{const _0x3c800e=_0x1fd6be[_0x4c2339(0x97b)](_0xcf7e5f);_0x44c32c[_0x4c2339(0xc29)](_0x3c800e)&&(_0x1a454f=_0x3c800e[_0x4c2339(0x485)](_0x352357=>_0x352357&&typeof _0x352357===_0x4c2339(0x977)&&typeof _0x352357[_0x4c2339(0x129)]==='string'&&typeof _0x352357[_0x4c2339(0x9bc)]!==_0x4c2339(0x261)));}}}}function _0xaeda6f(){const _0x332e7e=_0x17d1db;if(_0x332e7e(0x338)!==_0x332e7e(0x338)){const _0x4a2e58=_0x43e6c4['value'][_0x332e7e(0x2e2)]();if(!_0x4a2e58)return;_0x2a4843['currentLivestreamDMs'][_0x332e7e(0xb2f)]({'sender':_0x332e7e(0x809),'content':_0x4a2e58}),_0xca423();const _0x3f77de={'type':'dm','content':_0x4a2e58};_0x249c65[_0x332e7e(0x42a)]['push'](_0x3f77de),_0x3ca284[_0x332e7e(0x850)]='',_0x334843[_0x332e7e(0x1d4)]();}else{const _0x2fd7b1=document[_0x332e7e(0xb18)](_0x332e7e(0x14b));_0x2fd7b1[_0x332e7e(0x280)]='';const _0x1a36e1=_0x35d0f9[_0x332e7e(0x1f2)][_0x332e7e(0x485)](_0x16ab9d=>_0x35d0f9[_0x332e7e(0xa6c)][_0x332e7e(0x83f)](_0x4d9085=>_0x4d9085[_0x332e7e(0xb12)]===_0x332e7e(0x869)&&_0x4d9085[_0x332e7e(0x8f1)][_0x332e7e(0xb63)](_0x16ab9d['id'])));if(_0x1a36e1[_0x332e7e(0x968)]===0x0){_0x2fd7b1['innerHTML']=_0x332e7e(0x228);return;}_0x1a36e1['forEach'](_0x3534ac=>{const _0x2e22d7=_0x332e7e,_0x520e05=document[_0x2e22d7(0x7e9)]('li');_0x520e05[_0x2e22d7(0x73e)]=_0x2e22d7(0x3a8),_0x520e05[_0x2e22d7(0x218)][_0x2e22d7(0xca6)]=_0x3534ac['id'],_0x520e05['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x3534ac[_0x2e22d7(0x36b)]||_0x20a236)+_0x2e22d7(0x393)+_0x3534ac[_0x2e22d7(0x19d)]+_0x2e22d7(0x2b4)+_0x3534ac[_0x2e22d7(0x19d)]+'的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x520e05[_0x2e22d7(0x3eb)]('.char-info-wrapper')[_0x2e22d7(0xafb)](_0x2e22d7(0x9db),()=>_0x54c817(_0x3534ac['id'])),_0x520e05[_0x2e22d7(0x3eb)]('.snoop-clear-btn')[_0x2e22d7(0xafb)](_0x2e22d7(0x9db),async _0x599c4f=>{const _0x39a997=_0x2e22d7;if('inXAx'!==_0x39a997(0xaae)){if(_0x38cea3===null)return;_0x731e57[_0x39a997(0x6b9)][_0x39a997(0x895)](_0x96b211,0x1),_0x15cc5a(),_0x584dd8(),_0x3f34df();}else{_0x599c4f[_0x39a997(0x5d6)]();const _0x5e226c=_0x45939a(_0x3534ac['id']);if(!_0x5e226c)return;const _0x4f3f7a=await _0x3a7c5b(_0x39a997(0x149)+_0x5e226c['name']+'】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。');if(_0x4f3f7a){_0x13f6ba(!![],_0x39a997(0x14d)+_0x5e226c['name']+_0x39a997(0x82f));const _0x181173=['gallery',_0x39a997(0x778),_0x39a997(0x707),_0x39a997(0xa74),_0x39a997(0x45d),_0x39a997(0xb6f),_0x39a997(0x5f9),_0x39a997(0x93f)];for(const _0x45295e of _0x181173){const _0x363635=_0x39a997(0xbef)+_0x5e226c['id']+'_'+_0x45295e;await _0x1a620c(_0x363635);}_0x13f6ba(![]),_0x28dfd2('【'+_0x5e226c[_0x39a997(0x19d)]+_0x39a997(0x4a0));}}}),_0x2fd7b1[_0x2e22d7(0x364)](_0x520e05);});}}let _0xdd2fd4=null,_0x2b94a6=null;function _0x1995cf(){const _0x4f3e3a=_0x17d1db,_0x361be7=new Date(),_0x19553d=document[_0x4f3e3a(0xb18)](_0x4f3e3a(0xa5d)),_0x2b9932=document[_0x4f3e3a(0xb18)](_0x4f3e3a(0x99a)),_0x45105b=document[_0x4f3e3a(0xb18)]('snoop-phone-header');_0x19553d&&_0x2b9932&&(_0x19553d[_0x4f3e3a(0x65b)]=_0x361be7[_0x4f3e3a(0x3c8)](_0x4f3e3a(0x984),{'hour':_0x4f3e3a(0x16b),'minute':_0x4f3e3a(0x16b),'hour12':![]}),_0x2b9932[_0x4f3e3a(0x65b)]=_0x361be7['toLocaleDateString'](_0x4f3e3a(0x984),{'month':_0x4f3e3a(0x68c),'day':_0x4f3e3a(0x6c4),'weekday':_0x4f3e3a(0x68c)})),_0x45105b&&(_0x45105b['innerHTML']='\x0a\x20\x20\x20\x20<div\x20>\x20'+_0x361be7['toLocaleTimeString'](_0x4f3e3a(0x984),{'hour':_0x4f3e3a(0x16b),'minute':_0x4f3e3a(0x16b),'hour12':![]})+'</div\x20>\x0a\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');}function _0x54c817(_0x3fbf99){const _0x19ff7d=_0x17d1db;_0xdd2fd4=_0x3fbf99;const _0x1e1026=_0x45939a(_0x3fbf99);if(!_0x1e1026)return;const _0x32d9d8=document[_0x19ff7d(0xb18)]('snoop-phone-screen'),_0x526d04=document[_0x19ff7d(0xb18)]('snoop-home-clock');if(_0x526d04)_0x526d04[_0x19ff7d(0xb42)]();const _0x558c89=document[_0x19ff7d(0xb18)](_0x19ff7d(0xe4));if(_0x558c89)_0x558c89[_0x19ff7d(0xb42)]();_0x32d9d8[_0x19ff7d(0xbb4)](_0x19ff7d(0xc9e),_0x19ff7d(0x665)),_0x32d9d8[_0x19ff7d(0xbb4)](_0x19ff7d(0xc9e),_0x19ff7d(0x6c3)),document[_0x19ff7d(0xb18)](_0x19ff7d(0x7bf))[_0x19ff7d(0x65b)]='',_0x465360();if(_0x2b94a6)clearInterval(_0x2b94a6);_0x1995cf(),_0x2b94a6=setInterval(_0x1995cf,0x2710),_0x198934(_0x19ff7d(0x668),_0x19ff7d(0xc71));}function _0x465360(){const _0x5a314a=_0x17d1db;if(_0x5a314a(0x3c5)===_0x5a314a(0x3c5)){const _0x2174ee=document[_0x5a314a(0xb18)](_0x5a314a(0xa3b)),_0x3985d8=document[_0x5a314a(0xb18)]('snoop-dock');_0x2174ee[_0x5a314a(0x280)]='<div\x20class=\x22snoop-main-grid\x22></div>',_0x3985d8['innerHTML']='';const _0x1cd567=_0x2174ee[_0x5a314a(0x3eb)](_0x5a314a(0x34a)),_0x4ad56b=[{'id':_0x5a314a(0x778),'name':'聊天','svg':'<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>','area':_0x5a314a(0x3f9)},{'id':_0x5a314a(0x707),'name':_0x5a314a(0x2f9),'svg':_0x5a314a(0xaeb),'area':_0x5a314a(0x3f9)},{'id':_0x5a314a(0x73c),'name':'相册','svg':'<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>','area':'dock'},{'id':'summary','name':'总结','svg':'<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>','area':_0x5a314a(0x3f9)},{'id':_0x5a314a(0xa74),'name':_0x5a314a(0x1ee),'svg':_0x5a314a(0x894),'area':_0x5a314a(0x234)},{'id':'bites','name':'外卖','svg':_0x5a314a(0x6b1),'area':_0x5a314a(0x234)},{'id':_0x5a314a(0xb6f),'name':'购物','svg':_0x5a314a(0xab7),'area':_0x5a314a(0x234)},{'id':_0x5a314a(0x5f9),'name':'足迹','svg':_0x5a314a(0xaf5),'area':_0x5a314a(0x234)}];_0x4ad56b[_0x5a314a(0x175)](_0x4240b3=>{const _0xe2be65=_0x5a314a;if(_0xe2be65(0x856)!==_0xe2be65(0x320)){const _0x1eb8f0=document[_0xe2be65(0x7e9)](_0xe2be65(0x591));_0x1eb8f0[_0xe2be65(0x73e)]=_0xe2be65(0x27d),_0x1eb8f0[_0xe2be65(0x280)]=_0xe2be65(0xc8e)+_0x4240b3[_0xe2be65(0x561)]+'</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x4240b3[_0xe2be65(0x19d)]+_0xe2be65(0xcea),_0x1eb8f0[_0xe2be65(0xafb)]('click',()=>_0x725eeb(_0x4240b3['id'],_0x4240b3[_0xe2be65(0x19d)])),_0x4240b3['area']===_0xe2be65(0x3f9)?_0x3985d8[_0xe2be65(0x364)](_0x1eb8f0):_0x1cd567[_0xe2be65(0x364)](_0x1eb8f0);}else _0x260552[_0xe2be65(0xb42)]();});}else{const _0x63d98b=_0x219fbf[_0x5a314a(0xbc9)](0x1,_0xa5984f(_0x274a6c['preferences']?.[_0x5a314a(0x60f)]??0x64)),_0xaf0460=_0x4572e8[_0x5a314a(0xa6c)][_0x5a314a(0x485)](_0x2b4c13=>_0x2b4c13[_0x5a314a(0x8f1)][_0x5a314a(0xb63)](_0x26973f)),_0x318677=_0xaf0460[_0x5a314a(0xbb5)](_0x1b0cb1=>{const _0x34acda=_0x5a314a,_0x1b018e=_0x2031c5(_0x1b0cb1['id']),_0x2a1be3=_0x1b018e['length']>0x0?_0x1b018e[_0x1b018e['length']-0x1]:null;return{'chat':_0x1b0cb1,'history':_0x1b018e,'lastTimestamp':_0x2a1be3?_0x2a1be3[_0x34acda(0xaa4)]:0x0};})[_0x5a314a(0x485)](_0xdc9391=>_0xdc9391[_0x5a314a(0xcd3)][_0x5a314a(0x968)]>0x0);_0x318677[_0x5a314a(0xa99)]((_0x5da2cb,_0x2a97bf)=>_0x2a97bf[_0x5a314a(0xa22)]-_0x5da2cb[_0x5a314a(0xa22)]);const _0x441e5a=[],_0x4cc0cd={};return _0x318677[_0x5a314a(0x175)]((_0x217d7b,_0x15f4fe)=>{const _0xb6ad02=_0x5a314a,_0x38563e=_0x5f155a(_0x217d7b[_0xb6ad02(0x152)],_0x217d7b[_0xb6ad02(0xcd3)],_0x63d98b);if(_0x38563e[_0xb6ad02(0x968)]===0x0)return;const _0x1fea55=_0x15f4fe===0x0?_0xb6ad02(0x34e):_0xb6ad02(0xa54);_0x441e5a['push'](_0xb6ad02(0x7d8)+_0x1fea55+_0x5ec4ba(_0x217d7b['chat'])+'\x0a'+_0x38563e[_0xb6ad02(0x102)]('\x0a')),_0x4cc0cd[_0x217d7b['chat']['id']]=_0x38563e['length'];}),{'omniText':_0x441e5a[_0x5a314a(0x102)]('\x0a\x0a'),'usedCounts':_0x4cc0cd};}}document[_0x17d1db(0xb18)](_0x17d1db(0x101))['addEventListener'](_0x17d1db(0x9db),()=>{const _0x33d859=_0x17d1db;_0x2b94a6&&(clearInterval(_0x2b94a6),_0x2b94a6=null);document[_0x33d859(0xb18)](_0x33d859(0x6a8))['style'][_0x33d859(0x31f)]=_0x33d859(0x9ba);const _0x30206a=document['getElementById'](_0x33d859(0xe4));if(_0x30206a)_0x30206a[_0x33d859(0xb42)]();const _0x59d048=document[_0x33d859(0xb18)]('snoop-home-clock');if(_0x59d048)_0x59d048[_0x33d859(0xb42)]();_0x198934(_0x33d859(0xc71),_0x33d859(0x668));});async function _0x725eeb(_0x250791,_0x5583a1,_0x665e2f=![]){const _0x3a69ea=_0x17d1db;if(_0x3a69ea(0x9ea)==='dWjst'){let _0x15b27a=null;document['getElementById'](_0x3a69ea(0x696))[_0x3a69ea(0x7d9)]['display']='none';const _0x3be490=document[_0x3a69ea(0xb18)](_0x3a69ea(0x6a8));_0x3be490[_0x3a69ea(0x280)]='<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>',_0x3be490['style'][_0x3a69ea(0x31f)]=_0x3a69ea(0x9d4);const _0xb6daf5=_0x3a69ea(0xbef)+_0xdd2fd4+'_'+_0x250791;try{if(_0x250791==='summary'){const _0x384033=await _0x5188a3(_0xdd2fd4);_0x341abb(_0x250791,_0x5583a1,_0x384033);return;}let _0x2c077e=await _0x48dc86(_0xb6daf5);if(_0x665e2f||!_0x2c077e){console[_0x3a69ea(0x52e)](_0x3a69ea(0x2cc)+_0xb6daf5+'...'),_0x15b27a=await _0x21f931(_0x250791,_0xdd2fd4,_0x2c077e);if(_0x15b27a){if('IAxpx'!==_0x3a69ea(0xb08)){const _0x37da7d=_0x15b27a['match'](/```(?:json)?\s*([\s\S]*?)\s*```/),_0x23037f=_0x37da7d?_0x37da7d[0x1]['trim']():_0x15b27a['trim']();let _0x599fb7;try{'wKRCM'!==_0x3a69ea(0x754)?_0x2b5a62[_0x3a69ea(0x65b)]='❚❚':_0x599fb7=JSON[_0x3a69ea(0x97b)](_0x23037f);}catch(_0x2b1b93){if('RGWAg'===_0x3a69ea(0x583)){_0x599fb7=_0x5d4d90(_0x23037f);if(!_0x599fb7)throw new Error(_0x3a69ea(0x8b5));}else{_0x3c0b64(_0x3a69ea(0x874));return;}}const _0x52a3b7=JSON['stringify'](_0x599fb7);console['log'](_0x3a69ea(0x868)),await _0x4d0908(_0xb6daf5,_0x52a3b7),_0x2c077e=_0x52a3b7;}else _0x5d7a04&&_0x5f0fd3[_0x3a69ea(0x9db)]();}}else console['log'](_0x3a69ea(0x791)+_0xb6daf5);_0x341abb(_0x250791,_0x5583a1,_0x2c077e);}catch(_0x56b110){console[_0x3a69ea(0x4a1)](_0x3a69ea(0xc9d)+_0x5583a1+_0x3a69ea(0x2f6),_0x56b110);const _0x5c4ad6=_0x45939a(_0xdd2fd4),_0x18b1ae=_0x3a69ea(0x400)+_0x5c4ad6[_0x3a69ea(0x19d)]+_0x3a69ea(0x44a);let _0x46cc17=_0x3a69ea(0x512)+_0x56b110[_0x3a69ea(0x5a1)]+_0x3a69ea(0xa40);_0x15b27a&&(_0x46cc17+='\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x200\x2015px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>下面就是那个笨蛋AI返回的原始“梦话”，你自己看看吧：</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-all;\x20background:\x20#f0f0f0;\x20padding:\x2010px;\x20border-radius:\x205px;\x20color:\x20#333;\x20max-height:\x20400px;\x20overflow-y:\x20auto;\x22>'+_0x20377c(_0x15b27a)+_0x3a69ea(0x988)),_0x3be490['innerHTML']=_0x18b1ae+(_0x3a69ea(0x405)+_0x46cc17+'</div>'),document[_0x3a69ea(0xb18)](_0x3a69ea(0x8d6))[_0x3a69ea(0xafb)](_0x3a69ea(0x9db),()=>{const _0x114c0a=_0x3a69ea;_0x3be490[_0x114c0a(0x7d9)][_0x114c0a(0x31f)]=_0x114c0a(0x9ba),document[_0x114c0a(0xb18)](_0x114c0a(0x696))[_0x114c0a(0x7d9)][_0x114c0a(0x31f)]='flex';});}}else _0x66cc22[_0x3a69ea(0xcf5)]=_0x3a69ea(0xb17);}function _0x20377c(_0x2165a6){const _0x342ff3=_0x17d1db;if(!_0x2165a6)return'';return _0x2165a6[_0x342ff3(0x39f)](/&/g,_0x342ff3(0x247))[_0x342ff3(0x39f)](/</g,_0x342ff3(0x445))[_0x342ff3(0x39f)](/>/g,_0x342ff3(0xbd8))[_0x342ff3(0x39f)](/"/g,_0x342ff3(0x153))['replace'](/'/g,_0x342ff3(0x306));}function _0x341abb(_0xc6a7ab,_0x560da9,_0x1b5a34){const _0x23fe5e=_0x17d1db;if(_0x23fe5e(0x86a)!=='EQfJr'){const _0x8282be=_0x45939a(_0xdd2fd4),_0x1116f6=document[_0x23fe5e(0xb18)](_0x23fe5e(0x6a8));let _0x338015='';if(!_0x1b5a34){if(_0x23fe5e(0x750)!==_0x23fe5e(0x1ad))_0x338015='<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>';else{_0x3a6f9c(_0x23fe5e(0x7f7));return;}}else{if(_0xc6a7ab==='summary')_0x338015=_0x23fe5e(0x11b)+_0x1b5a34+_0x23fe5e(0x11e);else try{let _0x26da87=null;const _0x2ef1b8=_0x1b5a34['match'](/```(?: json) ?\s * ([\s\S] *?) \s * ```/),_0x1e5cef=_0x2ef1b8?_0x2ef1b8[0x1][_0x23fe5e(0x2e2)]():_0x1b5a34[_0x23fe5e(0x2e2)]();try{_0x23fe5e(0x421)===_0x23fe5e(0x421)?_0x26da87=JSON[_0x23fe5e(0x97b)](_0x1e5cef):_0x4ba943[_0x23fe5e(0x79f)][_0x23fe5e(0x366)]('hidden');}catch(_0x4d4e6c){console[_0x23fe5e(0x174)](_0x23fe5e(0x1c2),_0x4d4e6c[_0x23fe5e(0x5a1)]);try{if(_0x23fe5e(0x26c)!==_0x23fe5e(0x26c))_0x5dcc1b['textContent']=_0x1e5694;else{_0x26da87=_0x5d4d90(_0x1e5cef);if(!_0x26da87){if(_0x23fe5e(0xce2)!==_0x23fe5e(0xce2))_0x1f9e18[_0x23fe5e(0x416)]=[],_0x5e0a9c(),_0x1cdb86(),_0xdfb7b0(_0x23fe5e(0x337));else throw new Error(_0x23fe5e(0xb8a));}console['log']('兼容模式成功，已将旧格式数据翻译。');}}catch(_0x4010b6){throw _0x4d4e6c;}}switch(_0xc6a7ab){case _0x23fe5e(0x73c):_0x338015=_0x3f6a54(_0x26da87);break;case _0x23fe5e(0x778):_0x338015=_0x1879b9(_0x26da87,_0x8282be[_0x23fe5e(0x19d)]);break;case _0x23fe5e(0x707):_0x338015=_0x449180(_0x26da87);break;case'fragments':_0x338015=_0x59c706(_0x26da87);break;case _0x23fe5e(0x45d):_0x338015=_0x1929e1(_0x26da87);break;case _0x23fe5e(0xb6f):_0x338015=_0x395455(_0x26da87);break;case _0x23fe5e(0x5f9):_0x338015=_0x33c9c4(_0x26da87);break;default:_0x338015='<pre\x20style\x20=\x20\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22\x20>\x20'+JSON[_0x23fe5e(0xcf9)](_0x26da87,null,0x2)+_0x23fe5e(0x319);}}catch(_0x5a78ec){console[_0x23fe5e(0x4a1)](_0x23fe5e(0x8c7),_0x5a78ec),_0x338015=_0x23fe5e(0x31c)+_0x1b5a34+_0x23fe5e(0x278);}}_0x1116f6[_0x23fe5e(0x280)]='\x0a\x20\x20\x20\x20<div\x20class=\x20\x22snoop-app-header\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>'+_0x560da9+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>'+_0x8282be['name']+_0x23fe5e(0xba9)+(_0xc6a7ab===_0x23fe5e(0x93f)?_0x23fe5e(0x323):_0x23fe5e(0x1ea))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>'+_0x338015+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';const _0x37fc01=_0x1116f6['querySelector']('.snoop-app-content');_0xc6a7ab===_0x23fe5e(0x93f)&&(_0x37fc01[_0x23fe5e(0x7d9)][_0x23fe5e(0x145)]='0');document['getElementById'](_0x23fe5e(0x8d6))['addEventListener'](_0x23fe5e(0x9db),()=>{const _0xeb8fb2=_0x23fe5e;_0x1116f6[_0xeb8fb2(0x7d9)][_0xeb8fb2(0x31f)]='none',document[_0xeb8fb2(0xb18)](_0xeb8fb2(0x696))[_0xeb8fb2(0x7d9)]['display']=_0xeb8fb2(0x9d4);});if(_0xc6a7ab==='summary')_0x23fe5e(0x9e8)!==_0x23fe5e(0x9e8)?(_0x1efe7a[_0x23fe5e(0x38f)]=_0x3e2f9b[_0x23fe5e(0x38f)]['filter'](_0x44f110=>_0x44f110['id']!==_0x9f0c34),_0x57c450[_0x23fe5e(0x1f2)]['forEach'](_0x593532=>{const _0x4af9b1=_0x23fe5e;_0x593532[_0x4af9b1(0x99c)]&&(_0x593532[_0x4af9b1(0x99c)]=_0x593532[_0x4af9b1(0x99c)][_0x4af9b1(0x485)](_0x62cea6=>_0x62cea6!==_0x1d833a));}),_0x7f6de9(),_0x44b3d7('条目已删除。'),_0x531edf(),_0x282f4a(_0x23fe5e(0x899),_0x23fe5e(0x776))):document['getElementById'](_0x23fe5e(0x92c))[_0x23fe5e(0xafb)](_0x23fe5e(0x9db),()=>{const _0x53bab2=_0x23fe5e;if('kKOAS'!==_0x53bab2(0x98c)){if(!_0x2451af['activeChatId'])return;try{_0x370ff9['setItem']('chatHistory_'+_0x2d0b57['activeChatId'],_0x29a925[_0x53bab2(0xcf9)](_0x564537[_0x53bab2(0x6b9)]));}catch(_0x1baf4e){_0x39e7ce[_0x53bab2(0x4a1)](_0x53bab2(0xa6d),_0x1baf4e),_0x3bde43(_0x53bab2(0x1a5));}}else{const _0x37df8d=document[_0x53bab2(0xb18)](_0x53bab2(0x93a));_0x37df8d[_0x53bab2(0x8c9)](),document[_0x53bab2(0x598)](_0x53bab2(0x23d)),_0x28dfd2(_0x53bab2(0x449));}});else{if(_0x23fe5e(0x613)===_0x23fe5e(0x613))document[_0x23fe5e(0xb18)](_0x23fe5e(0x2e4))[_0x23fe5e(0xafb)](_0x23fe5e(0x9db),async()=>{_0x725eeb(_0xc6a7ab,_0x560da9,!![]);});else{_0x4d62ca['innerHTML']=_0x23fe5e(0x44c);return;}}_0xc6a7ab===_0x23fe5e(0x778)&&(_0x23fe5e(0x1ca)===_0x23fe5e(0x757)?(_0x1eda2c[_0x23fe5e(0x570)](_0x23fe5e(0xcc6),_0x2d6d78['stringify'](_0x1f9e2d)),_0x2cc761(_0x23fe5e(0x76d)),_0x100e08(()=>_0xabb2c8[_0x23fe5e(0x1d8)](),0x5dc)):_0x1116f6[_0x23fe5e(0x9c6)](_0x23fe5e(0xc15))[_0x23fe5e(0x175)](_0x4bbc7f=>{const _0x5c7082=_0x23fe5e;_0x5c7082(0xa11)==='lWJUT'?_0x4bbc7f[_0x5c7082(0xafb)](_0x5c7082(0x9db),()=>{const _0x64cbe8=_0x5c7082;if('gmicy'===_0x64cbe8(0x3fd)){const _0x1581f8=JSON[_0x64cbe8(0x97b)](_0x4bbc7f[_0x64cbe8(0x218)]['log'][_0x64cbe8(0x39f)](/&quot;/g,'\x22')),_0x21cd7f=_0x4bbc7f[_0x64cbe8(0x218)][_0x64cbe8(0x3f6)],_0x15c388=_0x4bbc7f[_0x64cbe8(0x218)][_0x64cbe8(0x1ac)];_0x306457(_0x21cd7f,_0x15c388,_0x1581f8);}else throw _0x223e8c;}):_0x4c8c46[_0x5c7082(0x1d8)]();}));}else{if(_0x5686d7['participantIds'][_0x23fe5e(0xb63)](_0x234720['id'])){const _0x356905=_0x1a926b(_0x473b9c['id']);_0x356905[_0x23fe5e(0x175)](_0xba3d51=>{const _0x276fdb=_0x23fe5e;_0xba3d51[_0x276fdb(0xaa4)]>=_0x4b1a36[_0x276fdb(0x283)]()&&_0xba3d51['role']!==_0x276fdb(0x773)&&_0xba3d51[_0x276fdb(0x9bc)]&&_0x1236a6[_0x276fdb(0xb2f)]({'timestamp':_0xba3d51['timestamp'],'type':_0x1331b7(_0x4d8dbe),'content':'['+(_0xba3d51[_0x276fdb(0x129)]===_0x276fdb(0x809)?_0x160567[_0x276fdb(0x19d)]:_0x2ff0a2[_0x276fdb(0x19d)])+_0x276fdb(0xbc8)+_0xba3d51['content']});});}}}function _0x5d4d90(_0x588daa){const _0x4a99fb=_0x17d1db;if(!_0x588daa||typeof _0x588daa!==_0x4a99fb(0xb1e))return null;const _0x436f4=_0x588daa[_0x4a99fb(0x2e2)]()[_0x4a99fb(0xb2d)]('\x0a'),_0x2c1a80=[];let _0x395f61=null;for(const _0x288dbc of _0x436f4){const _0x471821=_0x288dbc[_0x4a99fb(0x2e2)]();if(_0x471821[_0x4a99fb(0x41d)]('-\x20')){if('OhchX'===_0x4a99fb(0x7b8)){_0x395f61&&(_0x4a99fb(0xcac)==='AdcMc'?(_0x591257['style'][_0x4a99fb(0x2f8)]='url(\x27'+_0x40dd6c[_0x4a99fb(0x344)]+'\x27)',_0x1e0584['style']['backgroundSize']=_0x4a99fb(0x2d5),_0x12b37c[_0x4a99fb(0x7d9)]['backgroundPosition']=_0x4a99fb(0xb99)):_0x2c1a80['push'](_0x395f61));_0x395f61={};const _0x2b1b32=_0x471821[_0x4a99fb(0x185)](0x2),_0x5e0c48=_0x2b1b32['split'](/:\s(.+)/);if(_0x5e0c48[_0x4a99fb(0x968)]>0x1){const _0x55e55a=_0x5e0c48[0x0][_0x4a99fb(0x2e2)](),_0x384df9=_0x5e0c48[0x1][_0x4a99fb(0x2e2)]()[_0x4a99fb(0x39f)](/^"|"$/g,'');_0x395f61[_0x55e55a]=_0x384df9;}}else _0x365ba0=_0x5ec1d3[_0x4a99fb(0x7e9)]('p'),_0x55a8d1[_0x4a99fb(0x73e)]='typing-indicator\x20narrator',_0x4586c9[_0x4a99fb(0x65b)]=_0x4a99fb(0x45c),_0x34a368[_0x4a99fb(0x364)](_0x54ec39);}else{if(_0x395f61&&_0x471821){const _0x2f470d=_0x471821[_0x4a99fb(0xb2d)](/:\s(.+)/);if(_0x2f470d['length']>0x1){if(_0x4a99fb(0x495)===_0x4a99fb(0x495)){const _0x38c1f0=_0x2f470d[0x0][_0x4a99fb(0x2e2)](),_0xb2852f=_0x2f470d[0x1][_0x4a99fb(0x2e2)]()[_0x4a99fb(0x39f)](/^"|"$/g,'');_0x395f61[_0x38c1f0]=_0xb2852f;}else{const _0x279dfe=[],_0x20fbb6=/"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi;let _0xd23a7a;while((_0xd23a7a=_0x20fbb6[_0x4a99fb(0x9f5)](_0x3d9c1d))!==null){const _0x31a5e5=_0xd23a7a[0x1]['replace'](/\\"/g,'\x22')['replace'](/\\n/g,'\x0a')[_0x4a99fb(0x2e2)]();if(_0x31a5e5)_0x279dfe[_0x4a99fb(0xb2f)](_0x31a5e5);}if(_0x279dfe[_0x4a99fb(0x968)])return _0x279dfe[_0x4a99fb(0x584)](_0x33c2d6)[_0x4a99fb(0x571)](0x0,0x9);}}}}}return _0x395f61&&_0x2c1a80[_0x4a99fb(0xb2f)](_0x395f61),_0x2c1a80[_0x4a99fb(0x968)]>0x0?_0x2c1a80:null;}function _0x306457(_0x7435ba,_0x2b1c2d,_0x107780){const _0x420d05=_0x17d1db;if(_0x420d05(0x35b)==='ayNgF'){const _0x42333a=document['querySelector'](_0x420d05(0x888)),_0x341d18=document[_0x420d05(0x3eb)](_0x420d05(0xcf3));let _0x25e466=_0x420d05(0x21e);!_0x107780||_0x107780[_0x420d05(0x968)]===0x0?_0x420d05(0xb0a)!==_0x420d05(0xb0a)?(_0x20fe55(_0x1fecb1['id']),_0x45160d(!![])):_0x25e466+=_0x420d05(0xc7b):_0x107780[_0x420d05(0x175)](_0xc6a036=>{const _0x1edb83=_0x420d05;if(_0x1edb83(0xae9)!==_0x1edb83(0x870)){const _0x8b731c=_0xc6a036[_0x1edb83(0x7b0)]===_0x1edb83(0xa80),_0x5eb322=_0x8b731c?_0x2b1c2d?_0x2b1c2d[0x0]:'?':_0x7435ba?_0x7435ba[0x0]:'?';_0x25e466+='\x0a\x20\x20\x20\x20<div\x20class=\x20\x22message-container\x20'+(_0x8b731c?'user':'ai')+'\x22\x20style\x20=\x20\x22max-width:\x2085%;\x22\x20>\x0a\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20'+(!_0x8b731c?'<div\x20class=\x22snoop-avatar\x22>'+_0x5eb322+_0x1edb83(0x9b7):'')+_0x1edb83(0x789)+(_0x8b731c?_0x1edb83(0x809):'ai')+_0x1edb83(0x4c7)+_0xc6a036[_0x1edb83(0x9bc)]+_0x1edb83(0x733)+(_0x8b731c?_0x1edb83(0x860)+_0x5eb322+_0x1edb83(0x9b7):'')+_0x1edb83(0x4f8);}else _0x1b6e6a[_0x1edb83(0x4a1)](_0x1edb83(0x587),_0x1a0dbc),_0xd68c2b('大家好像不知道该怎么回复...');}),_0x25e466+=_0x420d05(0x9b7),_0x42333a[_0x420d05(0x280)]=_0x25e466,_0x42333a[_0x420d05(0x14f)]=_0x42333a['scrollHeight'],_0x341d18[_0x420d05(0x280)]=_0x420d05(0xa4f)+_0x7435ba+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',document[_0x420d05(0xb18)](_0x420d05(0xa39))['addEventListener'](_0x420d05(0x9db),()=>{const _0x54ec79=_0x420d05;_0x725eeb(_0x54ec79(0x778),'聊天');}),!document[_0x420d05(0xb18)](_0x420d05(0xb0c))&&document['head'][_0x420d05(0xbb4)]('beforeend','<style\x20id\x20=\x20\x22snoop-temp-style\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop\x20-\x20avatar\x20{\x0a\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-\x20radius:\x2050\x20%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20display:\x20flex;\x20align\x20-\x20items:\x20center;\x20justify\x20-\x20content:\x20center;\x20font\x20-\x20weight:\x20500;\x0a\x20\x20\x20\x20margin:\x200\x208px;\x20flex\x20-\x20shrink:\x200;\x20align\x20-\x20self:\x20flex\x20-\x20end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style\x20>\x20');}else _0x472b83[_0x420d05(0x9c9)]=_0x32fa5f[_0x420d05(0xc5e)],_0x4bd57c['play'](),_0x538e9d[_0x420d05(0x65b)]='❚❚';}async function _0x164e5b(_0x40ff59){const _0x56dbe0=_0x17d1db;if(_0x56dbe0(0x640)!==_0x56dbe0(0x845)){if(!_0x40ff59)return'';const _0x3c6917=[{'id':_0x56dbe0(0x73c),'name':'相册'},{'id':'whispers','name':_0x56dbe0(0x767)},{'id':_0x56dbe0(0x707),'name':_0x56dbe0(0x69c)},{'id':_0x56dbe0(0xa74),'name':'备忘录'},{'id':_0x56dbe0(0x45d),'name':_0x56dbe0(0x643)},{'id':_0x56dbe0(0xb6f),'name':'购物记录'},{'id':_0x56dbe0(0x5f9),'name':_0x56dbe0(0x6e8)}];let _0x11f37e='';for(const _0x9e6172 of _0x3c6917){if(_0x56dbe0(0xae8)==='fRzpG')_0x47d903(_0xa2c800);else try{if(_0x56dbe0(0x9f8)!==_0x56dbe0(0x44f)){const _0x136c6d=_0x56dbe0(0xbef)+_0x40ff59+'_'+_0x9e6172['id']+'\x20',_0x23c3f9=await _0x48dc86(_0x136c6d);if(_0x23c3f9){const _0x132c27=_0x23c3f9[_0x56dbe0(0xac5)](/```(?: json) ?\s * ([\s\S] *?) \s * ```/),_0x1abf08=_0x132c27?_0x132c27[0x1][_0x56dbe0(0x2e2)]():_0x23c3f9[_0x56dbe0(0x2e2)]();if(!_0x1abf08)continue;let _0x3d87d0=null;try{_0x3d87d0=JSON[_0x56dbe0(0x97b)](_0x1abf08);}catch(_0x1d160a){if(_0x56dbe0(0xc25)!=='HBpBW')_0x12093f[_0x118c0a]=[];else{console[_0x56dbe0(0x174)](_0x56dbe0(0xaa6)+_0x9e6172['id']+_0x56dbe0(0x88c),_0x1d160a[_0x56dbe0(0x5a1)]);try{if(_0x56dbe0(0x6d1)!==_0x56dbe0(0xcca)){_0x3d87d0=_0x5d4d90(_0x1abf08);if(!_0x3d87d0)throw new Error(_0x56dbe0(0xb8a));console[_0x56dbe0(0x52e)]('兼容模式成功，已将\x20'+_0x9e6172['id']+_0x56dbe0(0x72a));}else{const _0x2b9aad=_0x4d921b['split'](/:\s(.+)/);if(_0x2b9aad[_0x56dbe0(0x968)]>0x1){const _0x17dd06=_0x2b9aad[0x0][_0x56dbe0(0x2e2)](),_0x23357f=_0x2b9aad[0x1][_0x56dbe0(0x2e2)]()[_0x56dbe0(0x39f)](/^"|"$/g,'');_0x24b7a0[_0x17dd06]=_0x23357f;}}}catch(_0x50f771){if(_0x56dbe0(0x263)!==_0x56dbe0(0x263)){_0x1db319['warn'](_0x56dbe0(0xcde));const _0x27220a=_0x309442[_0x56dbe0(0x8f1)][_0x56dbe0(0xbb5)](_0x23c679)[_0x56dbe0(0x485)](_0x529cf7);if(!_0x27220a[_0x56dbe0(0x968)])return;let _0x232d5e=0x0;for(const _0x585fe2 of _0x27220a){_0x1cc5a1(_0x585fe2,{'force':!![],'delayMs':_0x232d5e}),_0x232d5e+=0x1f4;}}else throw _0x1d160a;}}}if(Array[_0x56dbe0(0xc29)](_0x3d87d0)&&_0x3d87d0[_0x56dbe0(0x968)]>0x0){_0x11f37e===''&&(_0x11f37e+=_0x56dbe0(0x330));_0x11f37e+=_0x56dbe0(0x20b)+_0x9e6172[_0x56dbe0(0x19d)]+'\x20\x0a';switch(_0x9e6172['id']){case'gallery':_0x3d87d0['forEach'](_0x159262=>{const _0x28658f=_0x56dbe0;_0x11f37e+=_0x28658f(0xa4a)+_0x159262[_0x28658f(0x42d)]+'”。\x0a';});break;case _0x56dbe0(0x778):_0x3d87d0[_0x56dbe0(0x175)](_0x4bf7bc=>{const _0x1f110b=_0x56dbe0;_0x1f110b(0xff)!==_0x1f110b(0x706)?(_0x11f37e+=_0x1f110b(0xa3a)+_0x4bf7bc[_0x1f110b(0xc20)]+_0x1f110b(0xbc6)+_0x4bf7bc[_0x1f110b(0x5f7)]+_0x1f110b(0x8e0),_0x4bf7bc['log']&&Array[_0x1f110b(0xc29)](_0x4bf7bc['log'])&&(_0x11f37e+=_0x1f110b(0x140),_0x4bf7bc[_0x1f110b(0x52e)][_0x1f110b(0x175)](_0x4b007f=>{const _0x4435ba=_0x1f110b,_0x5e3fa5=_0x4b007f[_0x4435ba(0x7b0)]===_0x4435ba(0xa80)?'你':_0x4bf7bc[_0x4435ba(0xc20)];_0x11f37e+=_0x4435ba(0x62e)+_0x5e3fa5+':\x20'+_0x4b007f[_0x4435ba(0x9bc)]+'\x20\x0a';}))):_0x4eef71[_0x1f110b(0x175)](_0x543c47=>{const _0x3fa156=_0x1f110b,_0x3fa124=_0x543c47[_0x3fa156(0x7b0)]===_0x3fa156(0xa80),_0xdfb6c5=_0x3fa124?_0x1bcc62?_0x2ae4d5[0x0]:'?':_0x7248bb?_0x297efd[0x0]:'?';_0x4c5826+=_0x3fa156(0x40b)+(_0x3fa124?_0x3fa156(0x809):'ai')+_0x3fa156(0x89c)+(!_0x3fa124?_0x3fa156(0x860)+_0xdfb6c5+'</div>':'')+_0x3fa156(0x789)+(_0x3fa124?_0x3fa156(0x809):'ai')+_0x3fa156(0x4c7)+_0x543c47['content']+_0x3fa156(0x733)+(_0x3fa124?'<div\x20class=\x22snoop-avatar\x22>'+_0xdfb6c5+_0x3fa156(0x9b7):'')+'\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20';});});break;case _0x56dbe0(0x707):_0x3d87d0['forEach'](_0x5b1a9c=>{const _0x29df56=_0x56dbe0;if(_0x29df56(0x29c)!==_0x29df56(0x29c)){const _0x37caf7=_0x29df56(0x1e8)+_0x4ab8d5;if(_0x5b67f9[_0x29df56(0xb18)](_0x37caf7))return;const _0x5d69e6='\x0a\x20\x20\x20\x20<div\x20id=\x22'+_0x37caf7+_0x29df56(0xcc0);_0x1263be['body']['insertAdjacentHTML']('beforeend',_0x5d69e6);const _0x47b455=_0x4ffc3c[_0x29df56(0xb18)](_0x37caf7),_0x271652=()=>_0x47b455['remove']();_0x47b455[_0x29df56(0x3eb)](_0x29df56(0xa1b))[_0x29df56(0x8df)]=_0x271652,_0x47b455[_0x29df56(0x3eb)]('#replay-action-cancel')[_0x29df56(0x8df)]=_0x271652,_0x47b455[_0x29df56(0x3eb)](_0x29df56(0x61a))[_0x29df56(0x8df)]=()=>{_0x333273(_0x5122d0,_0x193951),_0x271652();},_0x47b455[_0x29df56(0x3eb)](_0x29df56(0x7ed))[_0x29df56(0x8df)]=()=>{_0x204493(_0x33571d,_0x3810d6),_0x271652();};}else _0x11f37e+=_0x29df56(0x481)+_0x5b1a9c[_0x29df56(0x2e3)]+_0x29df56(0x8e0);});break;case _0x56dbe0(0xa74):_0x3d87d0[_0x56dbe0(0x175)](_0x3f43de=>{const _0x1d0f50=_0x56dbe0;_0x11f37e+='-\x20你的备忘录里有一条叫“'+_0x3f43de[_0x1d0f50(0x248)]+'”的笔记，内容是：“'+_0x3f43de[_0x1d0f50(0x9bc)][_0x1d0f50(0x39f)](/\n/g,'\x20')+_0x1d0f50(0x8e0);});break;case'bites':_0x3d87d0['forEach'](_0x4747d3=>{const _0x4c8ebe=_0x56dbe0;'Zziti'===_0x4c8ebe(0x2ca)?_0x11f37e+=_0x4c8ebe(0xf8)+_0x4747d3[_0x4c8ebe(0x8f7)]+_0x4c8ebe(0x40f)+_0x4747d3[_0x4c8ebe(0x171)][_0x4c8ebe(0x102)]('、')+'。\x0a':_0x28bfdf+='-\x20你最近去过：“'+_0x16a6b9['location_name']+_0x4c8ebe(0x42f)+_0x3e274e['activity_description']+_0x4c8ebe(0x8e0);});break;case _0x56dbe0(0xb6f):_0x3d87d0[_0x56dbe0(0x175)](_0x381305=>{const _0x994def=_0x56dbe0;if(_0x994def(0x978)!==_0x994def(0x4d3))_0x11f37e+=_0x994def(0xac0)+_0x381305[_0x994def(0xca8)]+_0x994def(0x917)+_0x381305[_0x994def(0x852)]+_0x994def(0x8e0);else{_0x2fcad0[_0x994def(0x280)]=_0x994def(0x4e5);return;}});break;case _0x56dbe0(0x5f9):_0x3d87d0[_0x56dbe0(0x175)](_0x2aca8b=>{const _0x31e8fd=_0x56dbe0;_0x11f37e+=_0x31e8fd(0x3c6)+_0x2aca8b['location_name']+_0x31e8fd(0x42f)+_0x2aca8b['activity_description']+_0x31e8fd(0x8e0);});break;default:_0x3d87d0[_0x56dbe0(0x175)](_0x46b95d=>{const _0x4e1365=_0x56dbe0;'lEqFR'!=='AniLk'?_0x11f37e+='-\x20'+JSON[_0x4e1365(0xcf9)](_0x46b95d)+'\x20\x0a':(_0x5deee5['preventDefault'](),_0x3cd60d());});break;}}}}else{const _0x567698=_0x2bd14c[_0x56dbe0(0x443)](),_0x4b77a9=_0x28b79f[_0x56dbe0(0x443)]();if(_0x567698[_0x56dbe0(0x41d)](_0x56dbe0(0xbb7)))return'anthropic';if(_0x4b77a9[_0x56dbe0(0xb63)](_0x56dbe0(0xa3f)))return'anthropic';if(_0x4b77a9[_0x56dbe0(0xb63)]('googleapis.com'))return _0x56dbe0(0x46f);if(_0x567698[_0x56dbe0(0x41d)](_0x56dbe0(0x46f)))return _0x56dbe0(0x46f);return _0x56dbe0(0x5c9);}}catch(_0x39fd6c){console['error'](_0x56dbe0(0x653)+_0x9e6172['id']+_0x56dbe0(0x8d7),_0x39fd6c);}}return _0x11f37e;}else{const _0x322d4e=(_0x2e68f7[_0x56dbe0(0x171)]||[])[_0x56dbe0(0xbb5)](_0x5de9fe=>'<div\x20style\x20=\x20\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20<span>'+_0x5de9fe+_0x56dbe0(0x15a))[_0x56dbe0(0x102)]('');return _0x56dbe0(0xb10)+(_0x15b73c[_0x56dbe0(0x8f7)]||_0x56dbe0(0xc5b))+_0x56dbe0(0x418)+(_0xbb4d6c[_0x56dbe0(0xaa4)]||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>'+(_0x1acba2[_0x56dbe0(0x4d8)]||_0x56dbe0(0x331))+_0x56dbe0(0x8ad)+_0x322d4e+_0x56dbe0(0x5cc)+(_0x4671ff[_0x56dbe0(0x923)]||0x0)[_0x56dbe0(0xab2)](0x2)+_0x56dbe0(0xcb2);}}function _0x3f6a54(_0x247edb){const _0x2f0f2e=_0x17d1db;if('bbUou'===_0x2f0f2e(0x92a)){_0x247edb['sort']((_0x2f36d4,_0xf7ef65)=>new Date(_0xf7ef65[_0x2f0f2e(0xaa4)])-new Date(_0x2f36d4[_0x2f0f2e(0xaa4)]));if(!Array[_0x2f0f2e(0xc29)](_0x247edb))return _0x2f0f2e(0x695);if(_0x247edb[_0x2f0f2e(0x968)]===0x0)return'<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>';return'<div\x20style\x20=\x20\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22\x20>\x20'+_0x247edb['map']((_0x5a3bf3,_0xfa1ab9)=>_0x2f0f2e(0x48b)+(_0xfa1ab9<_0x247edb[_0x2f0f2e(0x968)]-0x1?_0x2f0f2e(0x87b):'')+_0x2f0f2e(0x994)+(_0x5a3bf3['description']||_0x2f0f2e(0xb46))+_0x2f0f2e(0x7ad)+(_0x5a3bf3[_0x2f0f2e(0xaa4)]||'')+_0x2f0f2e(0x6ba))[_0x2f0f2e(0x102)]('')+_0x2f0f2e(0x576);}else{const _0x350efd=(_0xbca360-_0x2b5f8a)/(0x3e8*0x3c);_0x350efd<0x3c?_0x3a5101+=_0x2f0f2e(0xbc1):_0x156c8e+='-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概'+_0x3396fd[_0x2f0f2e(0x87d)](_0x350efd/0x3c)+_0x2f0f2e(0x612);}}function _0x1879b9(_0x26c8e0,_0xfff38e){const _0x7e6696=_0x17d1db;if(!Array[_0x7e6696(0xc29)](_0x26c8e0)||_0x26c8e0[_0x7e6696(0x968)]===0x0)return _0x7e6696(0x1fa);return _0x7e6696(0x683)+_0x26c8e0[_0x7e6696(0xbb5)]((_0x3739e1,_0xa6bdb5)=>{const _0x28bd62=_0x7e6696,_0xc523e4=JSON[_0x28bd62(0xcf9)](_0x3739e1[_0x28bd62(0x52e)]||[])[_0x28bd62(0x39f)](/'/g,_0x28bd62(0xaf0))[_0x28bd62(0x39f)](/"/g,_0x28bd62(0x153)),_0x2e3165=_0x3739e1['contact_name']||'未知联系人';return _0x28bd62(0xbed)+(_0xa6bdb5<_0x26c8e0[_0x28bd62(0x968)]-0x1?'border-bottom:\x201px\x20solid\x20var(--border-color);':'')+_0x28bd62(0x2bc)+_0xc523e4+'\x27\x0a\x20\x20\x20\x20data-contact-name=\x27'+_0x2e3165+_0x28bd62(0x74e)+_0xfff38e+_0x28bd62(0xc6d)+_0x2e3165[_0x28bd62(0x7f8)](0x0)+_0x28bd62(0xb6a)+_0x2e3165+_0x28bd62(0xbcd)+(_0x3739e1[_0x28bd62(0x5f7)]||'')+_0x28bd62(0x249);})[_0x7e6696(0x102)]('')+'</div\x20>\x20';}function _0x449180(_0x42013b){const _0x1ac22c=_0x17d1db;if(!Array[_0x1ac22c(0xc29)](_0x42013b))return _0x1ac22c(0x695);if(_0x42013b[_0x1ac22c(0x968)]===0x0)return _0x1ac22c(0x3c0);return _0x42013b[_0x1ac22c(0xa99)]((_0x3140c5,_0x1595ce)=>new Date(_0x1595ce[_0x1ac22c(0xaa4)])-new Date(_0x3140c5[_0x1ac22c(0xaa4)])),_0x1ac22c(0x683)+_0x42013b[_0x1ac22c(0xbb5)]((_0x34f656,_0x2635cd)=>'\x0a\x20\x20\x20\x20\x20\x20<div\x20style\x20=\x20\x22padding:\x2015px;\x20'+(_0x2635cd<_0x42013b[_0x1ac22c(0x968)]-0x1?_0x1ac22c(0x87b):'')+_0x1ac22c(0x6fd)+(_0x34f656['query']||_0x1ac22c(0x858))+_0x1ac22c(0x7a4)+(_0x34f656[_0x1ac22c(0x710)]||_0x1ac22c(0x4ef))+_0x1ac22c(0x6e5)+(_0x34f656[_0x1ac22c(0xaa4)]||'')+_0x1ac22c(0x158))[_0x1ac22c(0x102)]('')+'</div\x20>\x20';}function _0x59c706(_0x1611e2){const _0x3c0841=_0x17d1db;if(_0x3c0841(0x122)!==_0x3c0841(0x367)){if(!Array[_0x3c0841(0xc29)](_0x1611e2))return _0x3c0841(0x695);if(_0x1611e2['length']===0x0)return _0x3c0841(0xa33);return _0x1611e2[_0x3c0841(0xa99)]((_0x47e8bf,_0xa07f67)=>new Date(_0xa07f67[_0x3c0841(0xbeb)])-new Date(_0x47e8bf[_0x3c0841(0xbeb)])),_0x1611e2[_0x3c0841(0xbb5)](_0x14433f=>_0x3c0841(0xa50)+(_0x14433f[_0x3c0841(0x248)]||_0x3c0841(0x4e3))+_0x3c0841(0xa45)+(_0x14433f['content']||'')+_0x3c0841(0x74a)+(_0x14433f[_0x3c0841(0xbeb)]||'')+_0x3c0841(0xa08))[_0x3c0841(0x102)]('');}else _0x22f279[_0x3c0841(0x4a1)](_0x3c0841(0x7c6),_0x3a90d6);}function _0x1929e1(_0x2759d4){const _0x1d84fa=_0x17d1db;if(!Array['isArray'](_0x2759d4))return _0x1d84fa(0x695);if(_0x2759d4[_0x1d84fa(0x968)]===0x0)return _0x1d84fa(0xb35);return _0x2759d4['sort']((_0x637484,_0x50c96f)=>new Date(_0x50c96f[_0x1d84fa(0xaa4)])-new Date(_0x637484[_0x1d84fa(0xaa4)])),_0x2759d4[_0x1d84fa(0xbb5)](_0x35321f=>{const _0x369f05=_0x1d84fa,_0x2ff2db=(_0x35321f[_0x369f05(0x171)]||[])[_0x369f05(0xbb5)](_0x220c43=>_0x369f05(0x7f4)+_0x220c43+_0x369f05(0x15a))[_0x369f05(0x102)]('');return _0x369f05(0xb10)+(_0x35321f[_0x369f05(0x8f7)]||_0x369f05(0xc5b))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>'+(_0x35321f[_0x369f05(0xaa4)]||'')+_0x369f05(0x7b5)+(_0x35321f[_0x369f05(0x4d8)]||'已送达')+_0x369f05(0x8ad)+_0x2ff2db+_0x369f05(0x5cc)+(_0x35321f[_0x369f05(0x923)]||0x0)['toFixed'](0x2)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20';})[_0x1d84fa(0x102)]('');}function _0x395455(_0x5f1085){const _0xc1c450=_0x17d1db;if(!Array[_0xc1c450(0xc29)](_0x5f1085))return _0xc1c450(0x695);if(_0x5f1085[_0xc1c450(0x968)]===0x0)return _0xc1c450(0x51c);return _0x5f1085[_0xc1c450(0xa99)]((_0x412b25,_0x17bf0e)=>new Date(_0x17bf0e[_0xc1c450(0xaa4)])-new Date(_0x412b25[_0xc1c450(0xaa4)])),_0x5f1085[_0xc1c450(0xbb5)](_0xbead43=>_0xc1c450(0xb31)+(_0xbead43[_0xc1c450(0xca8)]||_0xc1c450(0x5b4))+_0xc1c450(0x554)+(_0xbead43[_0xc1c450(0xaa4)]||'')+_0xc1c450(0x90b)+(_0xbead43[_0xc1c450(0x852)]||_0xc1c450(0x197))+_0xc1c450(0xbea)+(_0xbead43[_0xc1c450(0xa18)]||0x0)[_0xc1c450(0xab2)](0x2)+_0xc1c450(0x82e))[_0xc1c450(0x102)]('');}function _0x33c9c4(_0x3a3038){const _0x3a0ddf=_0x17d1db;if('vFGZj'===_0x3a0ddf(0x95f)){if(!Array[_0x3a0ddf(0xc29)](_0x3a3038))return _0x3a0ddf(0x695);if(_0x3a3038[_0x3a0ddf(0x968)]===0x0)return _0x3a0ddf(0xbd6);return _0x3a3038[_0x3a0ddf(0xa99)]((_0x2d7ccb,_0x603ef)=>new Date(_0x603ef[_0x3a0ddf(0xaa4)])-new Date(_0x2d7ccb['timestamp'])),'<div\x20style\x20=\x20\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22\x20>\x20'+_0x3a3038[_0x3a0ddf(0xbb5)](_0x4314a0=>_0x3a0ddf(0x528)+(_0x4314a0[_0x3a0ddf(0x95a)]||'未知地点')+_0x3a0ddf(0x2df)+(_0x4314a0[_0x3a0ddf(0x292)]||'')+_0x3a0ddf(0xbdb)+(_0x4314a0[_0x3a0ddf(0xaa4)]||'')+_0x3a0ddf(0x49b))[_0x3a0ddf(0x102)]('')+_0x3a0ddf(0x576);}else{const _0x475ad6=_0x4802ae['friendCircles'][_0x3a0ddf(0x9cd)](_0x135cbc=>_0x135cbc['id']===_0x59889b[_0x3a0ddf(0xb34)]),_0xec47f4=_0x30b33f();let _0x3ebb66=[];if(_0x475ad6&&_0x475ad6['posts']){const _0x410522=_0x475ad6[_0x3a0ddf(0x416)][_0x3a0ddf(0x485)](_0x31aa95=>_0x31aa95['type']==='music'&&_0x31aa95[_0x3a0ddf(0xc5e)])[_0x3a0ddf(0xbb5)](_0x1be059=>({..._0x1be059,'source':'feed'}));_0x3ebb66[_0x3a0ddf(0xb2f)](..._0x410522);}if(_0xec47f4&&_0x395035['conversationHistory']){const _0x13af2e=_0x3da9e['conversationHistory']['filter'](_0x22afca=>_0x22afca[_0x3a0ddf(0xb12)]===_0x3a0ddf(0xcc1)&&_0x22afca[_0x3a0ddf(0xc5e)])[_0x3a0ddf(0xbb5)](_0x4d9b00=>({..._0x4d9b00,'id':_0x3a0ddf(0x4d4)+_0x4d9b00[_0x3a0ddf(0xaa4)],'source':_0x3a0ddf(0x152)}));_0x3ebb66[_0x3a0ddf(0xb2f)](..._0x13af2e);}const _0x1bfa71=_0x3e0f15[_0x3a0ddf(0x39e)](new _0x5d5e99(_0x3ebb66['map'](_0x2cf363=>[_0x2cf363[_0x3a0ddf(0xc5e)],_0x2cf363]))[_0x3a0ddf(0x1ce)]());_0x32afac['musicPlaylist']=_0x1bfa71[_0x3a0ddf(0xa99)]((_0x2c2d30,_0x25e849)=>_0x25e849[_0x3a0ddf(0xaa4)]-_0x2c2d30[_0x3a0ddf(0xaa4)]);}}async function _0x21f931(_0x5599d6,_0x5ee4a6,_0x1e9566=null){const _0x34db62=_0x17d1db,_0x43b8a0=_0x45939a(_0x5ee4a6),_0x22a44d=_0x35d0f9[_0x34db62(0xa6c)][_0x34db62(0x9cd)](_0xd08c01=>_0xd08c01['type']==='private'&&_0xd08c01[_0x34db62(0x8f1)]['includes'](_0x5ee4a6)),_0x48f3a8=_0x5f52db(_0x22a44d?.['id']||_0x35d0f9['activeChatId']);if(!_0x43b8a0)throw new Error(_0x34db62(0xbec));const {omniText:_0xae5949}=_0xd9a204(_0x5ee4a6);let _0x595412='';const _0x24270d=new Date();let _0x3deb53=null,_0x153e8b='无';if(_0x1e9566){if(_0x34db62(0x965)===_0x34db62(0x4f9))_0x52531a=_0x1abd77[_0x34db62(0x97b)](_0x7e4756);else try{if(_0x34db62(0x527)===_0x34db62(0x527)){let _0x1c21e3;try{_0x1c21e3=JSON['parse'](_0x1e9566);}catch(_0x505e9f){if('VUdyo'===_0x34db62(0xba4))_0x1c21e3=_0x5d4d90(_0x1e9566);else{const _0x4a53b8=_0x54ae18(_0x37aa87['activeLivestreamCharId']);if(!_0x4a53b8)return;const _0x2e8561=_0x8e3c1c(_0x1a138e[_0x34db62(0xb18)](_0x34db62(0xac4))[_0x34db62(0x850)]),_0x2de192=_0xd67483(_0x171e43[_0x34db62(0xb18)]('livestream-sprite-slider-y')[_0x34db62(0x850)]),_0x2414bc=_0x524d34(_0x965494[_0x34db62(0xb18)](_0x34db62(0x6ec))[_0x34db62(0x850)])/0x64;_0x4a53b8[_0x34db62(0x973)]={'x':_0x2e8561,'y':_0x2de192,'scale':_0x2414bc},_0x464e8b(),_0x451c5c('哼，就按你说的办好了。'),_0x3e917c(!![]);}}if(Array[_0x34db62(0xc29)](_0x1c21e3)&&_0x1c21e3['length']>0x0){const _0x50f98f=_0x1c21e3[_0x34db62(0xbb5)](_0x414783=>new Date(_0x414783[_0x34db62(0xaa4)]||_0x414783['last_edited']))[_0x34db62(0x485)](_0x46a325=>!isNaN(_0x46a325));_0x50f98f[_0x34db62(0x968)]>0x0&&(_0x3deb53=new Date(Math[_0x34db62(0xbc9)][_0x34db62(0x924)](null,_0x50f98f)),_0x153e8b=_0x3deb53[_0x34db62(0x8f0)](_0x34db62(0x984),{'dateStyle':_0x34db62(0x305),'timeStyle':'short'}));}}else _0x2af897[_0x34db62(0x297)]=_0x45841f,_0x17bece(_0x1372b5[_0x34db62(0x693)],_0x34db62(0x680));}catch(_0x407cd3){console[_0x34db62(0x174)](_0x34db62(0x952),_0x407cd3);}}const _0x4aed03=_0x4766dc(_0x5ee4a6);_0x595412=_0x34db62(0x56b),_0x595412+=_0x34db62(0x927)+_0x24270d[_0x34db62(0x8f0)](_0x34db62(0x984),{'dateStyle':_0x34db62(0x363),'timeStyle':_0x34db62(0x1b9)})+'\x20\x0a';if(_0x4aed03){const _0x237feb=new Date(_0x4aed03[_0x34db62(0xaa4)]),_0x170de8=_0x5cd9d4(_0x237feb);_0x595412+='-\x20**\x20你最后一次活动是在\x20**:\x20'+_0x170de8+'\x20\x0a';const _0x38ef54=_0x24270d['toDateString'](),_0x309b89=_0x237feb[_0x34db62(0x224)](),_0x1c0881=new Date();_0x1c0881[_0x34db62(0x827)](_0x24270d[_0x34db62(0xb2b)]()-0x1);const _0x4d9975=_0x1c0881[_0x34db62(0x224)]();if(_0x38ef54===_0x309b89){const _0x269d64=(_0x24270d-_0x237feb)/(0x3e8*0x3c);_0x595412+=_0x34db62(0x1d6);}else{if(_0x4d9975===_0x309b89){if(_0x34db62(0x718)===_0x34db62(0x718))_0x595412+='-\x20**\x20状态提示\x20**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a';else{_0x591560(_0x34db62(0x78c));return;}}else{if(_0x34db62(0x70c)!==_0x34db62(0xc49)){const _0x270488=Math['round']((_0x24270d-_0x237feb)/(0x3e8*0x3c*0x3c*0x18));_0x595412+=_0x34db62(0xb2e)+_0x270488+'\x20天没活动了。你生成的内容必须是全新的事件。\x0a';}else _0x41dfe3(_0x59233f);}}}else _0x34db62(0xc57)!==_0x34db62(0xc57)?_0x1aeaa5[_0x34db62(0x7d9)][_0x34db62(0x2f8)]=_0x34db62(0x575)+_0x36f6a3[_0x34db62(0x900)](_0x2473c0)+'\x27)':_0x595412+='-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a';let _0x2c7c79='',_0x2f78d1='';_0x1e9566?(_0x2c7c79=_0x34db62(0x299),_0x2f78d1='\x0a#\x20已有内容(这是历史记录，你必须接着写，【不许动它！】)\x20\x0a```\x0a'+_0x1e9566+_0x34db62(0x235)):_0x2c7c79='你的任务是【首次生成】这个应用的内容。';const _0x3b8664={'gallery':_0x34db62(0x5b0),'whispers':'\x0a#\x20任务:\x20更新并扩展聊天记录\x0a\x20\x20-\x20**内容规范**：生成【与用户/用户所在群聊完全无关的】，角色与围绕【非用户的】角色存在的3-5个人物的聊天内容（亲朋好友，工作伙伴等），需要符合角色设定与角色记忆。\x0a\x20\x20-\x20**核心指令**:\x20你的任务是更新和扩展现有的聊天列表。你有两种选择，请务必同时进行：\x0a\x20\x20\x20\x201.\x20\x20**延续对话**:\x20挑选\x201-2\x20个【已有内容】中的对话，在原有基础上【续写】3-5条新的对话，让故事延续下去。\x0a\x20\x20\x20\x202.\x20\x20**开启新篇**:\x20创造\x201-2\x20个【全新的】虚拟联系人（NPC）和他们的对话记录。\x0a\x20\x20-\x20**平衡性要求**:\x20鼓励在延续旧对话的同时，也积极创造新的联系人，让手机看起来更真实。不要只做其中一项。\x0a\x20\x20-\x20**输出**:\x20你的输出【必须】包含【所有旧的聊天记录】和【你新创造/续写的内容】，整合成一个完整的JSON数组返回。\x0a\x0a#\x20【\x20sender\x20字段绝对规则】(最高优先级)\x0a\x20\x20-\x20在\x20\x22log\x22\x20数组中，\x22sender\x22\x20字段的值【只能是】以下两个选项之一：\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：这代表【被视奸的主角】在说话。\x0a\x20\x20-\x20**【绝对禁止】**:\x20绝对不可以在主角发言时，将\x20\x22sender\x22\x20的值写成主角自己的名字。主角的发言者【必须永远】是\x20`\x22character\x22`\x20这个固定的词。\x0a\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x20//\x20<--\x20这是对方\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x20//\x20<--\x20这【必须】是\x20\x22character\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]','abyss':'\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','fragments':_0x34db62(0x134),'bites':_0x34db62(0x1ff),'wants':'\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','footprints':_0x34db62(0xc67)},_0x26d9d1=_0x3b8664[_0x5599d6]||_0x34db62(0xb5d)+_0x5599d6+_0x34db62(0x992);let _0x440057='';if(_0x43b8a0[_0x34db62(0x99c)]&&_0x43b8a0[_0x34db62(0x99c)][_0x34db62(0x968)]>0x0){if('svyoL'!==_0x34db62(0x8ac))_0x4b5162[_0x34db62(0x79f)][_0x34db62(0xb42)](_0x34db62(0x30f)),_0x1bc18a['style'][_0x34db62(0x33b)]='',_0x5a1f85['style'][_0x34db62(0x6d2)]='';else{const _0x21d041=_0x43b8a0['linkedWorldBookIds']['map'](_0xe0286=>_0x35d0f9[_0x34db62(0x38f)]['find'](_0x251823=>_0x251823['id']===_0xe0286))[_0x34db62(0x485)](Boolean)[_0x34db62(0xbb5)](_0x569459=>_0x34db62(0x309)+_0x569459[_0x34db62(0x19d)]+'\x0a'+_0x569459[_0x34db62(0x9bc)])[_0x34db62(0x102)]('');if(_0x21d041){if(_0x34db62(0x847)!==_0x34db62(0xa24))_0x440057=_0x34db62(0x2e7)+_0x21d041;else{if(_0x25a2be[_0x34db62(0x19d)]!==_0x34db62(0x19e)){_0x2ddaf5[_0x34db62(0x4a1)](_0x34db62(0x61d),_0x389d51);const _0x4674ac={'role':'assistant','content':'错误:\x20'+_0x40301f[_0x34db62(0x5a1)],'senderId':_0x159b3a['id'],'isOffline':_0x54d7a6};_0x574346['conversationHistory'][_0x34db62(0xb2f)](_0x4674ac),_0x4998bf();}return![];}}}}const _0x1d2d65=_0x34db62(0x36c)+_0x43b8a0['name']+_0x34db62(0x35e)+_0x43b8a0[_0x34db62(0x19d)]+_0x34db62(0x23f)+_0x48f3a8[_0x34db62(0x19d)]+'”（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a-\x20已有内容的最新时间点:\x20'+_0x153e8b+_0x34db62(0xb3b)+_0x24270d[_0x34db62(0x8f0)](_0x34db62(0x984),{'dateStyle':_0x34db62(0x363),'timeStyle':_0x34db62(0x1b9)})+_0x34db62(0x2d2)+_0x43b8a0[_0x34db62(0x19d)]+_0x34db62(0x910)+_0x43b8a0[_0x34db62(0x1ab)]+'\x0a'+_0x440057+'\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20'+_0x48f3a8['name']+_0x34db62(0x910)+_0x48f3a8[_0x34db62(0x1ab)]+_0x34db62(0x4fb)+_0xae5949+'\x0a'+_0x2f78d1+_0x34db62(0x5f0)+_0x2c7c79+'\x0a'+_0x26d9d1+'\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式（或者至少是类似\x20YAML\x20的列表格式）的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a',_0x155517=[{'role':'system','content':_0x1d2d65}];_0x155517[_0x34db62(0xb2f)]({'role':_0x34db62(0x809),'content':_0x34db62(0xceb)});const _0x352d33=await _0xb7fe2e(_0x155517,{'json':!![]});return _0x352d33;}async function _0x5188a3(_0x142d87){const _0x4c618a=_0x17d1db,_0x5bd458=_0x45939a(_0x142d87);if(!_0x5bd458)throw new Error(_0x4c618a(0x70d));_0x13f6ba(!![],_0x4c618a(0x231));const _0x431d89=[_0x4c618a(0x73c),_0x4c618a(0x778),_0x4c618a(0x707),_0x4c618a(0xa74),'bites',_0x4c618a(0xb6f),'footprints'];let _0x3a97d3={};await Promise[_0x4c618a(0x799)](_0x431d89[_0x4c618a(0xbb5)](async _0x1d781e=>{const _0x2d9a4b=_0x4c618a,_0x539e5a='snoop_'+_0x142d87+'_'+_0x1d781e,_0x1b420d=await _0x48dc86(_0x539e5a);if(_0x1b420d){if(_0x2d9a4b(0x85d)!==_0x2d9a4b(0x85d))_0x510bf8=_0x597192['createObjectURL'](_0x55b8ae);else try{_0x3a97d3[_0x1d781e]=JSON[_0x2d9a4b(0x97b)](_0x1b420d);}catch(_0x549ce6){}}}));if(Object[_0x4c618a(0x500)](_0x3a97d3)[_0x4c618a(0x968)]===0x0)return'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。';const _0x10691d=_0x4c618a(0x424)+_0x5bd458[_0x4c618a(0x19d)]+'”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a',_0x33a834=[{'role':_0x4c618a(0x773),'content':_0x10691d},{'role':_0x4c618a(0x809),'content':JSON['stringify'](_0x3a97d3,null,0x2)}];_0x13f6ba(!![],'书记官正在奋笔疾书...');const _0x333d31=await _0xb7fe2e(_0x33a834);return _0x333d31||_0x4c618a(0xa2c);}async function _0x5188a3(_0x165194){const _0x34743d=_0x17d1db,_0x1b5f09=_0x45939a(_0x165194);if(!_0x1b5f09)throw new Error(_0x34743d(0x70d));try{if(_0x34743d(0xa2f)!==_0x34743d(0x3d4)){_0x13f6ba(!![],_0x34743d(0x231));const _0x1842e2=['gallery','whispers',_0x34743d(0x707),'fragments',_0x34743d(0x45d),'wants','footprints'];let _0x5792c0={};await Promise['all'](_0x1842e2[_0x34743d(0xbb5)](async _0xb9d673=>{const _0x472a7b=_0x34743d,_0x2ad492=_0x472a7b(0xbef)+_0x165194+'_'+_0xb9d673,_0x55f5e6=await _0x48dc86(_0x2ad492);if(_0x55f5e6){if('OHaKo'==='OHaKo')try{_0x5792c0[_0xb9d673]=JSON[_0x472a7b(0x97b)](_0x55f5e6);}catch(_0x364937){}else _0x40db06['style'][_0x472a7b(0x11f)]='var(--text-color)',_0x546bb0['style'][_0x472a7b(0x823)]='none';}}));if(Object['keys'](_0x5792c0)['length']===0x0)return _0x34743d(0x7d4);const _0x32b5aa=_0x34743d(0x424)+_0x1b5f09[_0x34743d(0x19d)]+'”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a',_0x13d372=[{'role':_0x34743d(0x773),'content':_0x32b5aa},{'role':'user','content':JSON[_0x34743d(0xcf9)](_0x5792c0,null,0x2)}];_0x13f6ba(!![],_0x34743d(0x3b1));const _0x328ba6=await _0xb7fe2e(_0x13d372);return _0x328ba6||_0x34743d(0xa2c);}else{_0x2a4ca5(_0x34743d(0x776),'worldBook');const _0x28dfde=_0x112559[_0x34743d(0xb18)](_0x34743d(0xb03));_0x28dfde[_0x34743d(0x280)]='',_0xd1c1ce[_0x34743d(0x6c0)][_0x34743d(0x175)](_0xb3f9d3=>{const _0xca3de3=_0x34743d,_0x525ec0=_0x547f2c[_0xca3de3(0x7e9)]('option');_0x525ec0['value']=_0xb3f9d3['id'],_0x525ec0[_0xca3de3(0x65b)]=_0xb3f9d3['name'],_0x28dfde[_0xca3de3(0x364)](_0x525ec0);});if(_0x1c3c2e){const _0x177da0=_0x3ff099[_0x34743d(0x38f)]['find'](_0x5032fd=>_0x5032fd['id']===_0x2197e8);if(!_0x177da0)return;_0x122e58[_0x34743d(0xb18)](_0x34743d(0xc19))[_0x34743d(0x850)]=_0x177da0['id'],_0x443383['getElementById'](_0x34743d(0x35a))['textContent']=_0x34743d(0xc9a),_0x399e2f[_0x34743d(0xb18)]('world-book-edit-name')[_0x34743d(0x850)]=_0x177da0[_0x34743d(0x19d)],_0x330c96[_0x34743d(0xb18)](_0x34743d(0x496))['value']=_0x177da0[_0x34743d(0x9bc)],_0x28dfde[_0x34743d(0x850)]=_0x177da0[_0x34743d(0xcf5)]||_0x34743d(0xb17);}else _0x482e7b['getElementById']('editing-world-book-id')[_0x34743d(0x850)]='',_0x4ad103[_0x34743d(0xb18)]('world-book-editor-title')['textContent']=_0x34743d(0x6a9),_0x461660[_0x34743d(0xb18)](_0x34743d(0x184))[_0x34743d(0x850)]='',_0x1b005a[_0x34743d(0xb18)](_0x34743d(0x496))[_0x34743d(0x850)]='',_0x28dfde['value']=_0x3683c0[_0x34743d(0x143)];}}finally{_0x13f6ba(![]);}}document[_0x17d1db(0xb18)](_0x17d1db(0x7aa))[_0x17d1db(0xafb)]('click',()=>_0x198934('home',_0x17d1db(0xc71))),document[_0x17d1db(0xb18)](_0x17d1db(0x101))[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x47cf91=_0x17d1db;document['getElementById'](_0x47cf91(0x6a8))['style']['display']='none',_0x198934(_0x47cf91(0xc71),'snoopPhone');});const _0x40025e=document[_0x17d1db(0xb18)](_0x17d1db(0x800));_0x40025e&&_0x40025e[_0x17d1db(0xafb)](_0x17d1db(0x9db),()=>{const _0x3d3831=_0x17d1db;if('EtWyg'!==_0x3d3831(0xa8d)){const _0x241220=document[_0x3d3831(0xb18)]('lock-screen-overlay');if(_0x241220){if(_0x3d3831(0x4bc)===_0x3d3831(0x4bc))_0x241220[_0x3d3831(0x79f)][_0x3d3831(0xb42)](_0x3d3831(0x30f)),_0x241220[_0x3d3831(0x7d9)]['transform']='',_0x241220['style'][_0x3d3831(0x6d2)]='';else{const _0x2ab481=_0x1b43ab(_0x5c7ecf[_0x3d3831(0xce6)]);_0x2ab481&&(_0xf25650=_0x2ab481[_0x3d3831(0x19d)],_0x5b7e5e=_0x2ab481[_0x3d3831(0x36b)]);}}}else{_0x3d12af[_0x3d3831(0x1f2)]=_0x279e4b[_0x3d3831(0x1f2)][_0x3d3831(0x485)](_0x143ec9=>_0x143ec9['id']!==_0x44b56b),_0x4d3da2[_0x3d3831(0xa6c)][_0x3d3831(0x175)](_0x18aa7b=>{const _0x1eb7ab=_0x3d3831;_0x18aa7b[_0x1eb7ab(0xb12)]==='group'&&(_0x18aa7b[_0x1eb7ab(0x8f1)]=_0x18aa7b[_0x1eb7ab(0x8f1)][_0x1eb7ab(0x485)](_0x569af3=>_0x569af3!==_0x17eeb4));});const _0x139333=_0x3f6138['chats'][_0x3d3831(0x9cd)](_0x2f4595=>_0x2f4595[_0x3d3831(0xb12)]===_0x3d3831(0x869)&&_0x2f4595[_0x3d3831(0x8f1)]['includes'](_0x238cd1));_0x139333&&_0x470e85(_0x139333['id']),_0x1815f0[_0x3d3831(0xa6c)]=_0x9dbcd4[_0x3d3831(0xa6c)][_0x3d3831(0x485)](_0x6d05f=>_0x6d05f[_0x3d3831(0xb12)]!==_0x3d3831(0x253)||_0x6d05f[_0x3d3831(0x8f1)][_0x3d3831(0x968)]>0x1),_0x39e0d0(),_0x23ad7a();}}),_0xf4a610();});async function _0x227fed(){const _0x232e88=_0x4b3bbd;console['log'](_0x232e88(0x37a)),console[_0x232e88(0x52e)](_0x232e88(0x450));async function _0x2eeb6c(_0x32810d,_0x4782f4){const _0x284e49=await _0x4c3f9a;return new Promise((_0x828887,_0x3ab55c)=>{const _0x2f1360=_0x52a6,_0x498e9=_0x284e49[_0x2f1360(0x832)](_0x383e71,_0x2f1360(0x43c)),_0x464793=_0x498e9[_0x2f1360(0x566)](_0x383e71),_0x8a80d0=_0x464793['put']({'id':_0x32810d,'blob':_0x4782f4});_0x8a80d0['onsuccess']=()=>_0x828887(_0x8a80d0[_0x2f1360(0xd15)]),_0x8a80d0['onerror']=()=>_0x3ab55c(_0x8a80d0[_0x2f1360(0x4a1)]);});}async function _0x559eed(_0x17da38){const _0x5ca074=await _0x4c3f9a;return new Promise((_0x4b7e61,_0x25f4ef)=>{const _0x32bbb1=_0x52a6;if(_0x32bbb1(0x841)!==_0x32bbb1(0x841))return _0x1b3238;else{const _0x1f11ff=_0x5ca074[_0x32bbb1(0x832)](_0x55cc29,_0x32bbb1(0xa43)),_0x17c5eb=_0x1f11ff['objectStore'](_0x55cc29),_0x3a38be=_0x17c5eb[_0x32bbb1(0x12c)](_0x17da38);_0x3a38be[_0x32bbb1(0x9d2)]=()=>_0x4b7e61(_0x3a38be[_0x32bbb1(0xd15)]?_0x3a38be[_0x32bbb1(0xd15)][_0x32bbb1(0x225)]:null),_0x3a38be[_0x32bbb1(0x892)]=()=>_0x25f4ef(_0x3a38be['error']);}});}async function _0x5d2519(_0x1e49db,_0x2608d0){const _0x134568=_0x232e88;if(_0x134568(0x9fd)!==_0x134568(0x9fd))_0x57d0bc[_0x134568(0x280)]=_0x134568(0x3cb);else{const _0x302988=await _0x4c3f9a;return new Promise((_0x9f9d8a,_0x4facb3)=>{const _0x41c00f=_0x134568,_0x534cab=_0x302988[_0x41c00f(0x832)](_0x55cc29,_0x41c00f(0x43c)),_0x454091=_0x534cab[_0x41c00f(0x566)](_0x55cc29),_0x358148=_0x454091[_0x41c00f(0x31b)]({'id':_0x1e49db,'data':_0x2608d0});_0x358148[_0x41c00f(0x9d2)]=()=>_0x9f9d8a(),_0x358148[_0x41c00f(0x892)]=()=>_0x4facb3(_0x358148[_0x41c00f(0x4a1)]);});}}function _0x55a3a2(_0x184c30){const _0x4995d9=_0x232e88;return fetch(_0x184c30)['then'](_0x6cde6=>_0x6cde6[_0x4995d9(0x885)]());}let _0x599935=0x0;for(let _0xb1561b=0x0;_0xb1561b<localStorage['length'];_0xb1561b++){const _0x4113b1=localStorage[_0x232e88(0xc53)](_0xb1561b);if(_0x4113b1&&_0x4113b1[_0x232e88(0x41d)](_0x232e88(0x392))){let _0x1d6594,_0x522545=![];try{_0x1d6594=JSON[_0x232e88(0x97b)](localStorage['getItem'](_0x4113b1));if(!Array[_0x232e88(0xc29)](_0x1d6594))continue;for(const _0xc7c5a7 of _0x1d6594){if(_0x232e88(0x1f5)!=='YjqqS')_0x658e70[_0x232e88(0x4a1)]('深度总结失败:',_0x338ba5),_0x47d254['value']=_0x232e88(0xc62)+_0x6b4e8f[_0x232e88(0x5a1)];else{if(_0xc7c5a7&&_0xc7c5a7[_0x232e88(0x89a)]&&_0xc7c5a7[_0x232e88(0x89a)][_0x232e88(0x41d)](_0x232e88(0xa13))){if(_0x232e88(0x4aa)==='wDIBC'){const _0xdd2fa=await _0x55a3a2(_0xc7c5a7[_0x232e88(0x89a)]),_0x4db881='chat_image_migrated_'+Date[_0x232e88(0x5ee)]()+'_'+Math['random']();await _0x2eeb6c(_0x4db881,_0xdd2fa),_0xc7c5a7[_0x232e88(0x650)]=_0x4db881,delete _0xc7c5a7[_0x232e88(0x89a)],_0x522545=!![],_0x599935++;}else{const _0x503c84=_0x404bb4[_0x232e88(0x7e9)]('div');_0x503c84[_0x232e88(0x73e)]='preview-item',_0x503c84[_0x232e88(0x280)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x503c84[_0x232e88(0x3eb)](_0x232e88(0xc1e))[_0x232e88(0x8df)]=()=>_0x5c3c21(_0x232e88(0x89a)),_0x39cd60['appendChild'](_0x503c84),_0x163222(_0x51e7aa)[_0x232e88(0xa34)](_0x4b5c14=>{const _0x4bbc99=_0x232e88,_0x5f35a7=_0x59e769['getElementById'](_0x4bbc99(0x851));_0x5f35a7&&_0x4b5c14&&(_0x5f35a7[_0x4bbc99(0x9c9)]=_0x11548b[_0x4bbc99(0x900)](_0x4b5c14));});}}}}if(_0x522545){if('ZzTmA'===_0x232e88(0x374)){if(_0x2beecd)_0x1347a7[_0x232e88(0x9c9)]=_0x5e3050[_0x232e88(0x900)](_0x22e4a6);}else localStorage[_0x232e88(0x570)](_0x4113b1,JSON[_0x232e88(0xcf9)](_0x1d6594));}}catch(_0x407cb4){console[_0x232e88(0x4a1)](_0x232e88(0x2f5)+_0x4113b1+_0x232e88(0x79c),_0x407cb4);continue;}}}console[_0x232e88(0x52e)](_0x232e88(0x993)+_0x599935+'\x20张旧图片。');}async function _0xeb2e4(){const _0x3c6cb2=_0x4b3bbd;console[_0x3c6cb2(0x52e)](_0x3c6cb2(0xb60)),console[_0x3c6cb2(0x52e)](_0x3c6cb2(0x282));async function _0xd9fdee(_0x25a0b9,_0x2d202d){const _0x44d001=_0x3c6cb2;if('hvGYR'!=='hvGYR')_0x18335b['error'](_0x44d001(0x907)+_0x580592+':',_0x1f400d);else{const _0x45400c=await _0x4c3f9a;return new Promise((_0xc4a03,_0x2a1da4)=>{const _0x49a53e=_0x44d001,_0xa07462=_0x45400c[_0x49a53e(0x832)](_0x49a53e(0xa76),_0x49a53e(0x43c)),_0x1072fa=_0xa07462[_0x49a53e(0x566)](_0x49a53e(0xa76)),_0x43513e=_0x1072fa[_0x49a53e(0x31b)]({'id':_0x25a0b9,'blob':_0x2d202d});_0x43513e[_0x49a53e(0x9d2)]=()=>_0xc4a03(_0x43513e[_0x49a53e(0xd15)]),_0x43513e[_0x49a53e(0x892)]=()=>_0x2a1da4(_0x43513e[_0x49a53e(0x4a1)]);});}}function _0x53d315(_0x413cc8){const _0x39bcee=_0x3c6cb2;return fetch(_0x413cc8)[_0x39bcee(0xa34)](_0x28957e=>_0x28957e['blob']());}let _0xd50b70=0x0,_0x2866a7=![];try{if(_0x3c6cb2(0x747)===_0x3c6cb2(0x8ea))_0x299202['addEventListener'](_0x3c6cb2(0x9db),()=>{const _0x3a26d5=_0x3c6cb2;if(_0x2680c1[_0x3a26d5(0x17b)][_0x3a26d5(0x968)]===0x0)return;_0x5cb0f8['currentlyPlayingIndex']=(_0x390b02[_0x3a26d5(0x863)]-0x1+_0x2f31ec[_0x3a26d5(0x17b)][_0x3a26d5(0x968)])%_0x25029d['musicPlaylist'][_0x3a26d5(0x968)];const _0x48272e=_0x261158[_0x3a26d5(0x17b)][_0x8f0440[_0x3a26d5(0x863)]]['id'];_0x260991(_0x48272e,_0x470686[_0x3a26d5(0x17b)]['map'](_0x2ab3ad=>_0x2ab3ad['id']));});else{const _0x75f112=localStorage[_0x3c6cb2(0x9a1)]('appState');if(!_0x75f112){if(_0x3c6cb2(0x96e)===_0x3c6cb2(0x713))_0x127c68--;else{console[_0x3c6cb2(0x52e)](_0x3c6cb2(0x1b1));return;}}const _0x4a5c94=JSON[_0x3c6cb2(0x97b)](_0x75f112);if(!_0x4a5c94[_0x3c6cb2(0x9dd)]||!Array[_0x3c6cb2(0xc29)](_0x4a5c94[_0x3c6cb2(0x9dd)]))return;for(const _0x237fac of _0x4a5c94[_0x3c6cb2(0x9dd)]){if(_0x3c6cb2(0x732)!==_0x3c6cb2(0x818)){if(_0x237fac[_0x3c6cb2(0x416)]&&Array[_0x3c6cb2(0xc29)](_0x237fac[_0x3c6cb2(0x416)]))for(const _0x59093f of _0x237fac[_0x3c6cb2(0x416)]){if(_0x3c6cb2(0x897)!==_0x3c6cb2(0x897))return[_0x15ace0];else{if(_0x59093f&&_0x59093f[_0x3c6cb2(0x89a)]&&_0x59093f[_0x3c6cb2(0x89a)]['startsWith'](_0x3c6cb2(0xa13))){if('VLJfL'===_0x3c6cb2(0x6fb))_0x5de43b['push'](_0x3a3aee[_0x3c6cb2(0x99b)]('blob')[_0x3c6cb2(0xa34)](_0x2bb9b8=>_0x204b87['cover']=new _0x1384a3([_0x2bb9b8],_0x4fcbdf[_0x3c6cb2(0x19d)])));else{console[_0x3c6cb2(0x52e)]('在好友圈\x20\x22'+_0x237fac['name']+'\x22\x20中发现一张需要净化的图片...');const _0x1d04fa=await _0x53d315(_0x59093f[_0x3c6cb2(0x89a)]),_0x5d596d=_0x3c6cb2(0x6da)+Date['now']()+'_'+Math[_0x3c6cb2(0xeb)]();await _0xd9fdee(_0x5d596d,_0x1d04fa),_0x59093f[_0x3c6cb2(0x650)]=_0x5d596d,delete _0x59093f[_0x3c6cb2(0x89a)],_0x2866a7=!![],_0xd50b70++;}}}}}else _0x4df688(_0x3c6cb2(0x4c3));}_0x2866a7&&(console['log'](_0x3c6cb2(0x236)),localStorage['setItem'](_0x3c6cb2(0x6d0),JSON[_0x3c6cb2(0xcf9)](_0x4a5c94)));}}catch(_0x1be425){console[_0x3c6cb2(0x4a1)](_0x3c6cb2(0x5ab),_0x1be425);}return console['log']('---\x20好友圈净化仪式完成\x20---'),console[_0x3c6cb2(0x52e)](_0x3c6cb2(0xb1c)+_0xd50b70+_0x3c6cb2(0x806)),_0xd50b70;}async function _0x3a5ada(){const _0x4f64bd=_0x4b3bbd;console[_0x4f64bd(0x52e)]('---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---'),console[_0x4f64bd(0x52e)](_0x4f64bd(0x252));let _0x437d0c=0x0,_0x11280c=![];try{const _0x809426=localStorage[_0x4f64bd(0x9a1)]('appState');if(!_0x809426)return console[_0x4f64bd(0x52e)](_0x4f64bd(0x17d)),0x0;for(let _0x5d3f91=0x0;_0x5d3f91<localStorage['length'];_0x5d3f91++){const _0x5a79e6=localStorage[_0x4f64bd(0xc53)](_0x5d3f91);if(_0x5a79e6&&_0x5a79e6[_0x4f64bd(0x41d)](_0x4f64bd(0x392))){let _0x4914b6,_0x1164a=![];try{_0x4914b6=JSON[_0x4f64bd(0x97b)](localStorage[_0x4f64bd(0x9a1)](_0x5a79e6));if(!Array['isArray'](_0x4914b6))continue;for(const _0x114e50 of _0x4914b6){if(_0x114e50&&(_0x114e50[_0x4f64bd(0xb12)]===_0x4f64bd(0xcc1)||_0x114e50[_0x4f64bd(0xb12)]===_0x4f64bd(0x287))&&_0x114e50[_0x4f64bd(0x22d)]&&_0x114e50[_0x4f64bd(0x22d)]['startsWith']('data:image')){const _0x29adb5=await _0x1b74b4(_0x114e50['coverUrl']),_0xeab2af='music_cover_migrated_'+Date[_0x4f64bd(0x5ee)]()+'_'+Math[_0x4f64bd(0xeb)]();await _0xad4538(_0xeab2af,_0x29adb5),_0x114e50[_0x4f64bd(0x67f)]=_0xeab2af,delete _0x114e50['coverUrl'],_0x1164a=!![],_0x437d0c++;}}_0x1164a&&localStorage[_0x4f64bd(0x570)](_0x5a79e6,JSON['stringify'](_0x4914b6));}catch(_0x3d1e73){console[_0x4f64bd(0x4a1)](_0x4f64bd(0x2f5)+_0x5a79e6+_0x4f64bd(0xafe),_0x3d1e73);continue;}}}}catch(_0x3ba7d8){console[_0x4f64bd(0x4a1)]('净化音乐封面时出错，真是的。',_0x3ba7d8);}return console[_0x4f64bd(0x52e)](_0x4f64bd(0xb53)),console[_0x4f64bd(0x52e)](_0x4f64bd(0xb1c)+_0x437d0c+_0x4f64bd(0x8d4)),_0x437d0c;}async function _0x425abc(){const _0x43c315=_0x4b3bbd;console[_0x43c315(0x52e)]('---\x20Noir\x27s\x20Avatar\x20Rescue\x20Mission\x20---'),console[_0x43c315(0x52e)](_0x43c315(0x517));let _0x27036f=0x0;try{if(_0x43c315(0x310)==='PKOjr'){const _0x427b59=localStorage[_0x43c315(0x9a1)]('appState');if(!_0x427b59){if(_0x43c315(0x100)!==_0x43c315(0xac7))return console[_0x43c315(0x52e)](_0x43c315(0x9e9)),0x0;else _0x286745[_0x43c315(0x7d9)][_0x43c315(0x2f8)]=_0x43c315(0x575)+_0x2555f0[_0x43c315(0x36b)]+'\x27)';}const _0x1daa77=JSON[_0x43c315(0x97b)](_0x427b59);if(!_0x1daa77[_0x43c315(0x1f2)]||!Array['isArray'](_0x1daa77[_0x43c315(0x1f2)]))return 0x0;for(const _0x1435a4 of _0x1daa77[_0x43c315(0x1f2)]){if(_0x1435a4&&_0x1435a4['avatar']&&_0x1435a4[_0x43c315(0x36b)]['startsWith'](_0x43c315(0xa13))){const _0x425ee8=await _0x5288fd('char_avatar_'+_0x1435a4['id']);if(!_0x425ee8){console[_0x43c315(0x52e)](_0x43c315(0xb65)+_0x1435a4[_0x43c315(0x19d)]+_0x43c315(0x5b1));const _0x17f996=await _0x1b74b4(_0x1435a4[_0x43c315(0x36b)]);await _0xad4538(_0x43c315(0x6eb)+_0x1435a4['id'],_0x17f996),_0x27036f++;}}}}else _0x353cd3[_0x43c315(0x2ce)]&&(_0x31ee04[_0x43c315(0x2ce)]=![],_0x1c400c['classList'][_0x43c315(0xb42)](_0x43c315(0xaef))),_0x38a83f[_0x43c315(0x1d4)](),_0x4d50e6();}catch(_0x1c66f8){_0x43c315(0x3c1)==='sBNDp'?console[_0x43c315(0x4a1)](_0x43c315(0xa6e),_0x1c66f8):(_0x219e54[_0x43c315(0x82a)](_0x43c315(0x1cd)),_0x35abf8[_0x43c315(0x82a)]('cardWidgetState'),_0x53ac94(_0x43c315(0xab6)),_0x2afae4(()=>_0x42e098[_0x43c315(0x1d8)](),0x3e8));}return console[_0x43c315(0x52e)](_0x43c315(0x6aa)),console[_0x43c315(0x52e)]('成功救援并备份了\x20'+_0x27036f+_0x43c315(0xbf0)),_0x27036f;}function _0x564dab(){const _0xb5be5c=_0x4b3bbd;if(!_0x35d0f9['activeDiaryCharacterId']){if('wRpMb'!=='wRpMb')_0x4d3afe[_0xb5be5c(0xa05)](),_0x4e413f();else return _0x35d0f9['userProfiles'][_0xb5be5c(0x9cd)](_0x132858=>_0x132858['id']===_0x35d0f9[_0xb5be5c(0x742)])||_0x35d0f9[_0xb5be5c(0x162)][0x0];}const _0x59f8a4=_0x35d0f9['chats'][_0xb5be5c(0x9cd)](_0x5bf380=>_0x5bf380[_0xb5be5c(0xb12)]===_0xb5be5c(0x869)&&_0x5bf380['participantIds'][_0xb5be5c(0xb63)](_0x35d0f9[_0xb5be5c(0xc56)])),_0xe50771=_0x59f8a4?.[_0xb5be5c(0x54f)]||_0x35d0f9['activeUserProfileId'];return _0x35d0f9[_0xb5be5c(0x162)][_0xb5be5c(0x9cd)](_0x12de5c=>_0x12de5c['id']===_0xe50771)||_0x35d0f9[_0xb5be5c(0x162)][0x0];}function _0x2ac0(){const _0x5223e9=['开始直播失败:',']:\x20','max','\x22]:checked','setProperty','today-todo-list','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>','0\x200\x20','igcuy','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何回放记录。</p>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','edOnN','在直播中进行了侧面回应。\x22\x0a\x20\x20\x20\x20','的特殊关照，建立更深的羁绊。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20▲▲▲\x20添加结束\x20▲▲▲\x0a\x0a#\x20任务指令\x0a\x20\x20##\x20阶段一：主播的回应\x20(生成\x20streamerSpeech\x20和\x20privateMessageReply)\x0a\x0a\x20**【绝对最高优先级\x20-\x20延续对话】**:\x20如果“我”(','scale','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>','diary-entries-container','&gt;','正在检查好友圈数据...','Vcxeq','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>','0.7rem','assign','Gemini\x20API\x20Error:\x20','-\x20**状态提示**:\x20这是你和','RyexC','rCLOX','ZMxrG','GEYrC','modal-ok','pointerEvents','VeKgG','PxLUH','最近没有互动记录。','alt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20','last_edited','找不到角色信息。','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x0a\x20\x20\x20\x20style\x20=\x20\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20','cardWidgetState','snoop_','\x20个旧头像。','UNOmu','iSMWE','dxObA','-\x20\x22','确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。','fCEqh','AI未能返回有效的JSON数组格式。','app-music-library','reset-widget-bg-button','eSCfn','displayedMessageCount','wtYwT','add-user-profile-button','hInfU','nbzVd','图片处理失败:\x20','Ojcam','oncomplete','sBwii','CJCNg','sprite-slider-y','EetiN','NdmGP','avatarFrameUrl','</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>','TQtHQ','Vxicc','好委屈但是不能哭','对不起','gwrbX','\x0a-\x20**当前时间**:\x20','GdoVZ','chat-listen-together-button','fbXzx','data:\x20','form-button\x20load-more-btn','.snoop-chat-item','VAlVU','crXct','YZIJg','editing-world-book-id','userProfile','BqZPm','QlXyb','quote-preview-area','.remove-attachment-btn','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>','contact_name','vJatc','xXFvC','吃你的饭','<div\x20class=\x22listen-together-info\x22><div\x20class=\x22title\x22>','HBpBW','日记已删除。','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>','15%','isArray','正在保存...','remove-font-button','setHours','typing-indicator\x20narrator','JjIbx','未命名角色','YduOt','eMPxw','oUNiw','[AI向\x20','user-name','yPNBv','play','请先输入\x20API\x20接口地址和密钥。','AHPuB','pUjUE','zoLVu','<img\x20id=\x22','accountingLedger','cancel-edit-button','delete','解析存档失败，正在重置:','”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[','daily-expenses-list','QeUqt','(想转账给“','activeQuote','XtYtv','expanded','message-action-modal','#chat-view-pane\x20>\x20.typing-indicator','kJJaC','<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>','iLGUO','char_','</span>','char-edit-remark','mouseup','edSwU','fLUHK','-\x20**你们最后一次互动是在**:\x20','key','dTmmD','drawImage','activeDiaryCharacterId','SUpsH','speech','newAvatar','徽章已更换！','未知餐厅','请输入新的分类名称:','create_event','playableUrl','WTDcJ','\x20(ID:\x20','2QWbuur','#\x20发生错误：\x0a','cPcTR','（开始一段新的对话...）','OpenAI\x20API\x20错误:\x20','OvXCt','\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-content\x22>','kXFeZ','10px','Cbzab','dQBzx','\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>','wTaPN','group-settings-bind-user','群聊名称不能为空！','snoopList','.listen-together-song','yguzi','账本已成功导出！','narrator','”...','60%','http','music-player-bar','音乐数据升级完成，迁移了\x20','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>','back-to-home-from-world-book','livestream-char-name-header','MKVUk','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>','iYZXL','edit-replay-textarea','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>','YWpNU','FioNd','小时前聊过，可以适当问候，不要直接继续之前的话题。','https://sharkpan.xyz/f/ZazfW/2vv46w.jpg','chat-transfer-button','listen-together-modal','好友圈\x20','outerHTML','coJnT','yEkYh','wb_html_module_builtin_1','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>','AI\x20试图创建事件，但找不到有效的用户ID。','（直播已暂停）','SwLRl','哼，你的压缩包里连最基本的音频和信息文件都没有！','\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>','back-to-diary-list','-\x20上次第\x20','jQzar','\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22description\x22>','iHfjZ','编辑条目','galgame-time','\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。','加载\x20','beforeend','custom_font_ttf','/v1/chat/completions','”的补充信息\x0a',')的互动\x0a这是“我”刚刚发送的互动内容，你必须对此做出【优先回应】:\x0a','dm_reply','FEfHj','voHmO','charId','fqfyO','store_name','.message-container','edFfG','KEDGB','tdZoc','的个人专属世界观设定\x0a','zTeTD','\x0a<div\x20class=\x22replay-icon\x22\x20style=\x22font-size:\x201.5rem;\x22>\x0a\x20\x20\x20\x20<span>📼</span>\x0a</div>\x0a<div\x20class=\x22replay-info\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22theme\x22>','pow','cuXkX','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','\x0a\x0a#\x20你的个人记忆\x20(来自所有App)\x0a---\x0a','\x0a-\x20**对话状态**:\x20群里已经有','cardState','wSBaZ','FehcC','NwWut','yIBso','https://sharkpan.xyz/f/7aMhj/hyc75m.jpg','rErkL','mouseleave','WPPyp','dWAjX','GTtWk','\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x22\x20id=\x22replay-action-edit\x22>编辑</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x22\x20id=\x22replay-action-delete\x22\x20style=\x22color:\x20#dc3545;\x22>删除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x20cancel\x22\x20id=\x22replay-action-cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>','music','SxIeN','googleapis.com','generativelace.googleapis.com','正在处理图片...','customStickers','暗夜紫晶','amount','noir_migration_music_v1_complete','NylzH','\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>','friend-circle-list-container','uiScale','sticker-panel-controls','group-clear-history','FGjGP','”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。','”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20','history','<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>','\x0a#\x20核心任务:\x20生成直播总结报告\x0a\x0a你是一名数据分析师，需要为“','保存直播进度失败了，真是的。','viewBox','<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>','YpSWX','TA正在提笔写日记...','1px\x20solid\x20var(--border-color)','customWallpaper','SMnXA','Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.','jCDUa','快点哄我','\x22\x20src=\x22','nBuHM','target','WNJDW','worldBooksCategories','authorId','\x0a---\x0a//\x20▲▲▲\x20替换结束\x20▲▲▲\x0a\x0a#\x20上下文\x20(最近的直播内容)\x0a','tab-view-ledger','JYHTD','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','请根据以上所有规则和资料，开始生成内容。','addTestPost','<input\x20type=\x22checkbox\x22\x20value=\x22','add-chat-button','字体应用失败:','music-feed-container','lyrics','你还没有写日记。','#snoop-app-view-container\x20.snoop-app-header','[见面]','categoryId','message-image-content',']\x20[主播\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','stringify','livestream-bg-input',',\x20resetting.','bubble-','BFvRz','导入角色卡失败:','group-options-cancel','用户资料已保存！','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>','DOMContentLoaded','translateX(-50%)','todo-list','todo-item-small','yfjdg','HTML模块生成规则','28%','remark','\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','choices','VYJIQ','<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>','save-char-button','DXViY','FkFim','执行好友圈数据净化...','choice-import-character','</span></div>','.listen-together-card','result','wbc_html_default_builtin','刚刚发布了一条动态，内容是：“','群聊“','absolute','group-chat-name','2px\x20dashed\x20var(--border-color)','EwcfA','calendar-header-title','count','</div>\x0a\x20\x20\x20\x20\x20\x20</div>','activeListenSession','snoop-dock','URcyK','EiuNR','tJEZM','backgroundPosition','#character-edit-screen\x20.selected-options-text','back-to-circle-list-from-feed','random','NLylo','OBxNw','widget-prev-btn','accountingData','https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg','[用户向\x20','group-delete','https://sharkpan.xyz/f/kjOF6/zedyqb.jpg','QbSAi','ZBkLb','未知主题','pop','-\x20你点过一份外卖：“','\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>','正在按日期归档...','exp_','NOWlC','加载直播间设置失败:','user-profile-list-container','waVqp','JXQKq','back-to-snoop-list-from-phone','join','moVGp','isFinite','FGeXp','#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“','pwXnE','oIKwE','review','mDofO','</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','todo','\x20说：“','back-to-circle-list-from-edit','#ff8c66','/v1beta/models/','player-prev-btn','friendCircleList','XCEXx','.wb-entry-item\x20input[data-category-id=\x22','frtru','meetingViewMode','https://sharkpan.xyz/f/3AGHe/2f8x3x.gif','forceWhiteClock','\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22','SOSuJ','\x0a\x20\x20\x20\x20<textarea\x20id\x20=\x20\x22snoop-summary-textarea\x22\x20readonly\x20style\x20=\x20\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22\x20>\x20','保存失败:\x20','wczHV','</textarea\x20>\x0a\x20\x20\x20\x20\x20\x20','color','记一笔','http://www.w3.org/2000/svg','doPiZ','已恢复默认。','gelMv',')的私信互动摘要\x20(列表形式)\x0a\x0a#\x20输出示例\x20(直接输出YAML文本)\x0a\x0astart_time:\x20\x222025-10-09T15:30:00\x22\x0atheme:\x20\x22分享最近读的一本书\x22\x0astreamer_mood:\x20\x22','?id=','很期待','GHOFX','role','tvIPv','eventDate','get','qwvde','https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg','insertBefore','\x22\x20已删除。','加载更多聊天记录','KGtXR','backgroundSize','\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','CIqlt','\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“','save-api-settings-button','正在升级音乐卡片数据...','GACDm','streamerSpeech','恢复失败了:\x20','NsrIt','class','升级已取消。旧版图片数据可能导致应用卡顿或出错。','Cfcuj','\x20\x20具体对话如下：\x0a','读取直播存档失败，将重新开始。','user-avatar-input','activeWorldBookCategoryId','SLeJT','padding','diary-prev-button','transfer-recipient-group','\x0a-\x20**对话状态**:\x20群里在','确定要彻底清空【','qLejS','snoop-character-list-container','theme-hue-slider','正在焚烧【','SMbYU','scrollTop','\x0a\x0a#\x20用户的动态\x0a','appIconPosition_','chat','&quot;','livestreamRoom','FxKdL','getFullYear','pre-line','</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','timeupdate','</span>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x20','livestream-replays-container','json_object','avatar-wrapper\x20','currentAbortController','hidden','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22category-checkbox\x22\x20data-category-id=\x22','RAyEK','userProfiles','cInTe','wallpaper-input','vpCII','USyww','cancel','group-world-book-checkboxes','导出失败了，哼:\x20','toast','2-digit','livestream-header-right','translateY(0px)','IwRqj','reset-feed-bg-button','livestream_sprite_','items','sKHku','在准备动态回复时，读取图片失败:','warn','forEach','距离「','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg','svuTb','pApaA','musicPlaylist','AI整理失败了，哼:\x20','聊天档案柜是空的，无需净化。','char-edit-css','\x20.app-icon-img','的转账','正在为你搬运旧壁纸到新仓库...','lkDYo','编辑好友圈','world-book-edit-name','substring','app-diary','icgdD','\x20记录)\x0a','edit-message-textarea','解析失败了，笨蛋！\x20','music-upload-altar-screen','quote-preview-sender','\x0a\x20\x20\x20\x20姓名:\x20','加载自定义表情包失败，真是没用。','.category-checkbox[data-category-id=\x22','pTpXw','LRYja','直播回放','shiftKey','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>','message-anchor','nEYck','未知商品','错误：第一个好友圈\x20\x22','zdnfJ','角色已保存！','choice-create-group','dIFjW','name','AbortError','every','用户分享音乐失败:','app-calendar','导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a','keydown','zVaqW','无法保存聊天记录。','bTaqQ','.category-checkbox','HCEbU','Gemini\x20stream\x20reading\x20aborted.','listenTogetherSession','persona','characterName','svqZt','ElcLW','chat-send-button','widget-bg-input','好友圈档案柜是空的，无需净化。','图片预览失败:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','diary-get-reply-button','foADd','PLrXP','hxeNo','is-exiting-right','short','chat_','\x0a\x0a#\x20关于读者“','交通出行','XeOlW','px)','Hurxu','BoZUD','https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg','JSON解析失败，启动兼容模式...','TfiHY','UrNhI','开播失败了，哼:\x20','樱花薄粉','正在准备图片数据...','pPPwc','Hpoqn','pIIvn','bBrgX','api-endpoint','badgeState','values','lastChild','.wb-entry-item\x20input:checked','OcJIM','dm-bubble\x20','sender_id','focus','\x20添加了新的纪念日：','-\x20**\x20状态提示\x20**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a','fontWeight','reload','member-selection-item','AI似乎没有想出任何新动态。','\x20[并附上了一张图片]','RBWlm','start-livestream-btn','在“一起听”邀请中，净化封面失败:','<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>','确定要清空群聊\x22','好友圈已保存！','💜\x20','TODO:\x20结束直播并生成总结','KPAfh','\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>','user-post-avatar','今天\x20','replay-action-modal-','aPbzw','<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>','YKadT','cdmCr','important','备忘录','global-player-next-btn','diary-action-modal-','AToIZ','characters','vxnMF','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20','YjqqS','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','code','FXqPf','back-to-chat-from-group-settings','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>','RRRGa','<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>','left','\x0a\x0a#\x20报告要求\x0a\x0a\x20\x20-\x20**格式**:\x20必须是严格的YAML格式。\x0a\x20\x20-\x20**内容**:\x20必须包含以下字段：\x0a\x20\x20\x20\x20\x20\x20-\x20`start_time`:\x20直播开始时间的【ISO\x208601\x20格式字符串】。你必须根据“当前时间”推断出一个合理的过去时间，并严格以此格式输出，例如：\x222025-10-09T15:30:00\x22\x0a\x20\x20\x20\x20\x20\x20-\x20`theme`:\x20直播主题\x20(总结)\x0a\x20\x20\x20\x20\x20\x20-\x20`streamer_mood`:\x20','\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','custom-stickers-input','appIconPosition_app-wallpaper','正在连接全域记忆数据库...','FGMzL','\x20-\x20','确定要恢复这个角色的默认立绘位置吗？','确定要进行一次深度总结吗？\x0a\x0a这将以当前私聊的起始日为开端，整理该角色之后的所有相关记忆（包括其他聊天、日记、手机内容等）。','ntZVz','AI返回了无法解析的文本','yepDr','anfGi','\x0a##\x20','group-options-modal','原始文本:','organize-button-container','upload-feed-bg-button','tZyFY','jLgtA','\x22>&times;</button></div>','[用户发起了听歌邀请:\x20','customFeedWallpaper','livestream-sprite-confirm-button','galgame-sprite-controls','主播正在准备开场...','dataset','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>','uSgUJ','back-to-home-from-music-library','2023-06-01','import-accounting-input','<div\x20style\x20=\x20\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>\x20','export-char-button','vertical','编辑角色','https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg','shy','toDateString','data','toggle-meeting-view-button','bSOEX','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','writeText','MhCaw','setMonth','coverUrl','ivJGZ','music-input-backdrop','#message-anchor','正在翻阅所有档案...','char-edit-name','load-more-btn','main','\x0a```','好友圈净化完成，正在重新存档...','snoop-phone-header','frVjf','。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a','错误：你还没有创建任何好友圈。请先在App内创建一个。','CrtZO','edit-delete-char-button','copy','zytCB','”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20【严禁】将“','livestream-sprite-','back-to-chat-list','delete-friend-circle-button','observe','DZOgV','show-chat-view','清空聊天记录失败。','&amp;','title','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','ghGGN','data:','https://sharkpan.xyz/f/35lse/xmsue5.jpg','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','nIBeW','新角色\x20','Creating\x20object\x20store:\x20','\x20\x20-\x20角色ID:\x20','哼，正在净化你那些超重的音乐分享记录...','group','转给\x20','MmVXE','model-dropdown','user-avatar-frame-url-in-chat','tBKqV','.music-post-song-card','api-model','星期四','\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕','syQJo','tRTQs','wkoBy','chat_char_','undefined','ycYDp','NWpnP','图标处理失败:\x20','tKSQW','add-event-fab','translateY(-300px)','oBgOD','0.5','</span>:\x20','cRsYM','BaoOR','isActive','ogUuz','add-event-modal-title','\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。','wallpaper','ZvZuT','poaER','HGXmD','friend-circle-edit-bind-user','hdtJc','span','</pre>','服务器错误:\x20','post-img-','TvtIi','\x20//\x20<---\x20哼，就是把这行加在这里！\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20▼▼▼\x20在\x20startLivestream\x20的\x20systemPrompt\x20里，用这个替换旧的\x20#\x20角色核心资料\x20▼▼▼\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20记忆数据库\x20(你必须时刻记住以下所有内容)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20**你的核心人设**:\x20','snoop-app-icon','export-all-data-button','cvWHx','innerHTML','tencent','哼，正在净化你那些被污染的好友圈动态...','getTime','NMkvJ','rgba(255,255,255,0.2)','71%','listen-together-invite','）最新写下的日记内容。Ta写的是：\x0a\x20“','group_bg_','加载见面场景时出错:','vGsLT','flexDirection','https://sharkpan.xyz/f/8ngsj/ax0fat.jpg','\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20','provider','\x20.app-icon-img,\x20#app-dock-top-right\x20#','fBKAU','activity_description','qyeGd','Failed\x20to\x20plan\x20group\x20replies:','vnHgF','加载立绘失败:','spriteTransform','条】全新的、高质量的社交动态。\x0a\x0a#\x20【绝对禁令】(最高优先级)\x0a-\x20你【绝对禁止】扮演“','你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！','dbTOQ','diary-write-modal','dtcEm','ilIwn','back-to-library-from-altar','paddingLeft','altar-slot-zip','CgLuC','https://sharkpan.xyz/f/G0dTl/4qad2i.jpg','calendarEvents','WdiUX',':</span><span\x20class=\x22danmaku-comment\x22>','加载聊天失败:\x20','continue-livestream-btn','eboBe','\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a','HrWIO','group-edit-members','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-manage-btn\x22>管理</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-confirm-delete-btn\x22>删除</button>\x0a\x20\x20\x20\x20','user-avatar-preview','已复制到剪贴板！','whgoD','indexedDBSnoopData','\x0a\x0a##\x20世界书条目:\x20','主播情绪','\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空','touches','localeCompare','rqvhp','noir_migration_fc_v1_complete','AI返回的数据格式不正确。','\x0a\x20\x20\x20\x20\x20\x20<div\x20style\x20=\x20\x22padding:\x2015px;\x20','save-friend-circle-button','\x22\x0a\x20\x20\x20\x20data-log=\x27','确定要删除这个好友圈吗？此操作不可撤销。','is-user','event_ai_','azYcs','group-settings-name','未知时间','qXDNo','TsHCU','back-to-livestream-list','Noir\x27s\x20Log:\x20发现直播存档，正在恢复现场...','EFcDQ','生成动态失败:','vrQHt','Zziti','fill','请求AI更新:\x20','TzJKc','hasNewDMReply','chat-summarize-button','JqTnk','事情好多','\x0a-\x20【绝对指令】你生成的所有新条目，其\x20\x22timestamp\x22\x20或\x20\x22last_edited\x22\x20必须严格晚于“已有内容的最新时间点”，并且必须早于或等于“当前精确时间”。严禁创造未来的事件。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20','#66b3ff','\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a','cover','\x20条动态...','smbMP','download','danmaku','TKOuO',']\x0a\x0a#\x20角色资料库\x0a','FKbaS','touchmove','livestream-bg-preview','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>','currentSpeechIndex','在所有地方的最后一次互动是在**:\x20','trim','query','snoop-app-refresh-btn','dRzJR','audio','\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a','preferences','livestream-sprite-front','对你极度信任，或者想问一些不方便在直播间公开说的事情。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20【绝对重要】：无视私信是对','isGenerating','https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg','文件格式不正确，不是一个有效的备份文件。','--feed-bg-image','qTagm','QQWDb','NUWPM',']\x20[sticker:','author','galgame-sprite-adjust-ui','处理\x20','\x20内容失败:','<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span><span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span></div><div\x20class=\x22listen-together-song\x22>','backgroundImage','浏览器','olZCE','entries','Lvvkg','猫猫撒娇','kMXug','回复\x20','nTHIc','Vssrf','VDTjb','char-avatar-frame-url','至少要保留一个用户。','medium','&#039;','kzvyE','xQllL','\x0a##\x20世界书条目:\x20','danmaku-item','</div><div\x20class=\x22artist\x22>','’的关键礼物‘超级火箭’。\x22\x0adm_interaction_summary:\x0a\x20\x20-\x20\x22‘','RITfM','selected','unlocked','PKOjr','livestream-sprite-slider-y','edit-replay-backdrop','\x20写道:\x20','widget_card_2','IHaVi','MsuFe','npeiB','column','</pre\x20>\x20','正在恢复视奸档案...','put','<div\x20style\x20=\x20\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22\x20><strong>解析失败了。</strong><br>那个API返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>','EsRIH','VekNe','display','YjXnV','https://sharkpan.xyz/f/8a7tj/sea1z9.jpg','giWaS','<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>','>>\x20','DfsPn','change','.todo-item,\x20.important-day-item','quoted-message-in-bubble','qlgfh','hOAhX','settings-screen','char-edit-avatar-input','RYAMb','TYlki','gTZFW','\x0a\x0a#\x20你的手机内容摘要(这是你的个人记忆，不要提及“视奸”)\x20\x0a','已送达','wNGie','NSxiU','back-to-home-from-diary-list','.listen-together-accept-btn','comments','动态已清空。','DJKLC','eLqgl','meetingView','transform','mbhDl','historyIndex','card-image-2','userAvatarFrameUrl','LuaHj','<div\x20class=\x22post-likes\x22>','bubbleCss','AI未能返回有效的JSON对象。','chatWallpaper',':\x22\x20或\x22[','livestream-dm-btn','\x0a#\x20【新增群聊高级语法规则】\x0a-\x20如果你需要生成一个HTML模块（例如邀请卡），你【必须】将完整的HTML代码包裹在\x20\x20`html]\x20`\x20和\x20\x20`[/html]\x20`\x20这两个标签之间，并作为一个独立的事件（event）来规划。你的规划中必须包含一个独立的事件，其\x20\x22kind\x22\x20必须是\x20\x22html\x22，\x22content\x22\x20字段包含完整的HTML代码（例如\x20\x27<div\x20class=...>...</div>\x27）。【绝对禁止】将HTML代码放在\x20\x22kind\x22:\x20\x22text\x22\x20的事件里。\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a','mBSll','lNzSJ','.snoop-main-grid','toggle','card-input','char-edit-avatar-preview','来源：[最活跃]','正在升级聊天数据结构...','qhKyd','szkqX','的回放列表','yaLYM','JOjuz','clockPosition','DWsBB','Kbava','[用户分享了音乐：','rBXUe','world-book-editor-title','ayNgF','aLeTe','\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a','”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“','我是小丑呜呜','statusText','path','数据结构升级：成功救援了\x20','full','appendChild','\x20的私信】','add','PeiPq','zDBNO','BJMOK','5px','avatar','\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“','MzFAc','objectStoreNames','zPiSk','OXbvG','图片加载失败','https://sharkpan.xyz/f/4aqCj/gp13hn.jpg','test_post_','BbYZW','diary-entry-input','群名称已更改为\x22','reduce','abs','至少要选择一个圈内成员！','---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---','kovJs','OPcvI','\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“','livestream-controls-container','Shvxw','area','<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>','<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>','\x0a\x0a#\x20关于群聊参与者“','parentElement','IBoiV','userProfileList','#group-world-book-checkboxes\x20.wb-entry-item\x20input:checked','错误：找不到这首作为“信物”的歌。','chat-message-input','当前聊天','确定要放逐这\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>','VOrOy','Noir_Backup_','worldBooks','等你消息','url','chatHistory_','\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>','\x22\x20class=\x22char-name\x22>','Upgrading\x20database\x20to\x20version\x20','该角色','Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20','{charName}','galgame-textbox-container','currentLivestreamLog','add-choice-modal','<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x2050px\x20auto;\x22></div>','save-event-button','from','replace','sFgFY','生活服务','sUifv','start-livestream-backdrop','\x22\x20的聊天记录吗？此操作不可撤销。','https://sharkpan.xyz/f/25ACQ/gpzab6.jpg','back-to-home-from-calendar','musicPlayerState','character-item','BgnwG','scrollHeight','dialogue','oFaoz','HqXKU','NgqIA','galgame-speaker','#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。','书记官正在奋笔疾书...','galgame-text','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>','nHLyO','chat_image_','AwNkH','MHNGH','.music-post-play-icon,\x20.music-share-play-icon','RovSv','diary-page-','mJKtP','urhpk','todo-item','dwcXW','\x20//\x20<--\x20哼，还有这里！\x0a','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>','sBNDp','transform\x200.5s\x20cubic-bezier(0.25,\x201,\x200.5,\x201),\x20opacity\x200.5s\x20ease','json','FvRpq','PprmZ','-\x20你最近去过：“','.page-dot','toLocaleTimeString','.music-post-song-card,\x20.music-share-card','</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<span\x20style=\x22opacity:\x200.6;\x22>无</span>','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-toggle-arrow\x22>▼</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-entry-list\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','直播尚未开始...','HIBcT','charSelect','<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>','保存徽章状态失败','galgame-sprite','gdpyB','tEMvw','listen-together-song-list','【叮咚！收到来自\x20','.ledger-item','shift','wZSaD','wTYta','UvtoJ','sad','\x20/\x20','https://sharkpan.xyz/f/mjdFW/28n30c.jpg','我不想工作','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20','请根据以上所有规则（特别是要看图！），生成对用户动态的回应。','<div','<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>','\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x200\x2015px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>下面就是那个笨蛋AI返回的原始“梦话”，你自己看看吧：</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-all;\x20background:\x20#f0f0f0;\x20padding:\x2010px;\x20border-radius:\x205px;\x20color:\x20#333;\x20max-height:\x20400px;\x20overflow-y:\x20auto;\x22>','clientY','diaries','字体更换成功！','nnVWg','posLW','querySelector','生成动态时发生错误:\x20','back-to-char-select-from-edit','.app-icon-img','https://sharkpan.xyz/f/VG2FY/uucfvv.jpg','body','IYXkb','toBlob','summarize-modal','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>','<div\x20class=\x22snoop-main-grid\x22></div>','contactName','transform\x202s\x20ease-out,\x20opacity\x202s\x20ease-out','lazy','dock','世界书条目已保存！','正在生成中，请稍候...','abort','gmicy','FpPdo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','\x0a\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22\x20style=\x22color:\x20#d8000c;\x22>发生错误</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>','\x22\x20data-history-index=\x22','\x20的私聊','加载直播立绘失败:','稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书。非强制性，只是手机会有点卡，想继续聊下去也可以。','<div\x20class=\x22snoop-app-content\x22>','gBtTE','Assistant','galgame','speaker-ai','livestream-list-screen','\x0a\x20\x20\x20\x20<div\x20class=\x20\x22message-container\x20','friend-circle-title','tfUTU','正在打包数据，请稍候...','”，里面有\x20','https://xhslink.com/m/5IgC1rniI2I','global-player-play-pause-btn','确定要删除这笔记录吗？','XxiEW','KaSyf','meeting-message-input','posts','\x0a\x0a#\x20关于观众“我”(','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>','fMdFj','NihMW','https://sharkpan.xyz/f/JYeig/sv4p6m.jpg','signal','startsWith','lPwdM','drDvl','JgaWH','CkxRg','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>','-\x20你的备忘录里有一条叫“','\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“','import-accounting-btn','right','aBdGR','buLNo','59%','currentLivestreamUserActions','transition','send-danmaku-btn','description','vGqYm','”，在那里“','quote-message-button','MSuck','”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“','URGSu','\x20//\x20<--\x20哼，加在这里\x0a','GPLqK','getSelection','cxaHf',',\x20ID:\x20','条目已删除。','char_sprite_','upload-card-button-2','readwrite','sprite-adjust-button','trekA','next-month-btn','qfKMC',']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“','oUXem','toLowerCase','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20初始观众情绪:\x20\x22','&lt;','.message.user','sZscl','input[type=\x22checkbox\x22]:checked','档案已复制到剪贴板！','的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20</div>','save-world-book-button','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以直播的角色哦。</p>','gfrTi','removeProperty','QlLjh','哼，正在开始净化你那被污染的聊天记录...','默认米白','<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>','\x22\x20吗？所有聊天记录将被永久删除。','diary-list-container','.char-info-wrapper','RuuUv','VCDPN','MfISj','UaWnB','未知表情','home-date','对方正在行动中...','bites','preview_','个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【称呼规则】**:\x20在\x20\x22postContent\x22\x20和评论的\x20\x22content\x22\x20字段中，当角色们互相称呼或提及对方时，【必须】使用他们的【姓名】，而不是ID。ID只用于\x20\x22authorId\x22\x20和\x20\x22likes\x22\x20这种结构化字段。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a','音乐魔方解析完毕，随时可以献上祭品。','friend-circle-member-selection','thought','[AI返回了无法解析的剧本:\x20','默认分类','卡片\x202\x20已更换！','player-play-pause-btn','未知用户','<div\x20class=\x22post-body\x22>','diary-next-button','20%','dBqJS','is-visible','prepend','CjMfa','gemini','isQOl','faGOT','hAGmS','继续直播失败:','#\x20固定分类列表\x0a[','user-post-attachment-preview','touchcancel','is-entering-from-left','.wb-entry-item\x20input','PDolT','bnLZc','znADs','filled','galgame-view-container','dms','FIQLv','rawResponse','-\x20你曾经搜索过：“','mTaqc','hCCmb','hqLKn','filter','DFchK','music-library-item','emLDW','ytFBz','直播主题和观众氛围都不能为空！','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style\x20=\x20\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20','QfUxe','JnQhy','pPHWo','zTlMv','条目名称和内容都不能为空！','NoirCustomFont','app-snoop','Noir\x27s\x20Protocol:\x20Built-in\x20\x27html\x27\x20category\x20was\x20missing.\x20Re-created.','群聊已解散。','TqZWa','world-book-edit-content','\x0a\x20\x20\x20\x20<div\x20id=\x22','todo-date-title','TZyhO','avKxg','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20',')\x20的专属时间锚点\x0a','正在为你切换新的歌曲...','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','Noir\x27s\x20Protocol:\x20Built-in\x20data\x20was\x20missing.\x20State\x20has\x20been\x20updated\x20and\x20saved.','】的手机已被重置。','error','\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20','AI返回的内容里找不到有效的JSON数组。原始回复:\x20','你是一个严格的JSON生成引擎。你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。严禁包含任何解释、注释、或Markdown代码块标记\x20```json。直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。','的巨大伤害，代表你不在乎','height','accounting','”，但没找到人)','分享了《仿生人会梦见电子羊吗？》的读后感。\x22\x0a\x20\x20-\x20\x22与观众激烈讨论了关于人性的定义。\x22\x0a\x20\x20-\x20\x22收到了来自‘','wDIBC','BOXxr','JJwAx','transfer-recipient-select','刷新了\x20','header-actions','audio-player','ReGnj','galgame-sprite-container','background','groupChatCreate','确定要重置所有小组件的位置吗？它们会回到初始位置。','请根据以上所有信息，开始分析并返回JSON。','UrMZW','\x0a\x0a//\x20▼▼▼\x20在\x20#\x20任务指令\x20的前面，加上这段“社会学常识”\x20▼▼▼\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20核心概念：直播中的“私信”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20“私信”是“我”(','livestream-room-screen','加载角色\x20','replayPressTimer','YVwBW','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>','oUbpx','meeting-main-content','yNxFx','audio-file-input','post_','未找到可用模型。','大家正在赶来回复...','》。\x0a\x0a这是这首歌的【完整歌词】，你可以通读全文来理解它的整体意境和故事：\x0a[完整歌词开始]\x0a','eFyZX','\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>','oPoMd','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥','user-profile-screen','accepted','music-library-container','livestream-sprite-adjust-btn','lKyNj','BFswO','未命名','html','margin','FEJQc','msg_','tEzcM','WBhtb','0\x201px\x203px\x20rgba(0,0,0,0.6)','status','SiXej','delete-expense-btn','（正在回忆...）','YhJbn','meetingList','music-input-song','\x20邀请你一起听歌</div><div\x20class=\x22listen-together-song\x22>','candidates','CBcwk','musicLibrary','无标题笔记','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>','meeting-list-container','cancel-music-input','User\x20cancelled','对主角的看法，','保存壁纸失败:',']\x20[image]','#bubble-preview-ai','好友圈已删除。','CkZEu','没有找到相关结果。',']\x20[','disabled','parts','星期三','New\x20request\x20started','第一阶段升级完成！应用即将刷新以进行第二阶段检查。','EZZIw','的第一次互动。\x0a','\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','uJbOb','rEvnr','\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a','BLjgp','jXGJR','CLDVL','lt-ui-song-title','keys','\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a','snoop-phone-screen','AI返回的不是一个数组。','livestream-sprite','正在连接同步频道...','jJJxr','livestream-textbox-container','today-btn','group-avatar-input','YiRFJ',']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[','novel-mode','rNsvZ','\x0a\x20\x20相关记忆:\x0a','#diary-action-delete','kMDsX','bevnZ','\x0a\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x20margin:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>加载失败了，哼。</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','-\x20[','29%','正在检查是否有需要救援的旧头像...','复制失败了，哼。','直播间设置已保存！','marginBottom','\x20\x0a\x0a//\x20▼▼▼\x20在\x20continueLivestream\x20的\x20systemPrompt\x20里，用这个替换旧的\x20#\x20角色与直播信息\x20▼▼▼\x0a#\x20记忆数据库\x20(你必须时刻记住以下所有内容)\x0a-\x20**你的核心人设**:\x20','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>','XdvQr','https://sharkpan.xyz/f/55ntj/ul0hkz.jpg','XZusM','jAxHh','LEInp','aRGgB','正在解析音乐灵魂...','JBZSp','chat-image-input','\x22\x20class=\x22post-image\x22></div>','PQAeu','\x0a\x20\x20\x20\x20\x20\x20<div\x20style\x20=\x20\x22position:\x20relative;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>','用户已删除。','人情红包','\x0a\x0a#\x20关于对话者“','novel','version','log','字体已应用！(Font\x20Applied!)','active','NjFOL','stickerName','DwUvW','gQOag','cancel-event-button','var(--text-color-light)','TSBPI','直播出错了...\x20','切换聊天时发生异步错误:','CaDeC','koLsC','确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！','utterance','观众氛围','\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20','yncPY','kMvel','\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守)\x0a','fvioU','replay-item','cFnce','wb_','IFxtN','lyric-line-','确定要恢复默认字体吗？','LnHQC','xhhaV','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>','错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。','<p\x20class=\x22narrator\x22\x20data-history-index=\x22','boundUserProfileId','有点生气','Jlmnj','BMrxH','getMinutes','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>','检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。','diaryCurrentPage','\x0a\x20\x20\x20\x20人设:\x20','events','bUONp','喝多了','avatar-frame','\x0a\x0a#\x20','WCFUQ','livestream-dm-panel','<br>','<span\x20class=\x22danmaku-user\x22>','svg','bottom','characterId','”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a','diary-page','objectStore','https://sharkpan.xyz/f/Mamca/4e3emf.jpg','hnysS','date','onupgradeneeded','\x0a#\x20时间锚点(你必须严格参考此信息进行推演)\x20\x0a','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-bottom:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22export-accounting-btn\x22\x20class=\x22form-button\x20secondary\x22\x20style=\x22margin-top:\x200;\x22>导出账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22import-accounting-btn\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x200;\x22>导入账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22border-bottom:\x201px\x20solid\x20var(--border-color);\x20margin-bottom:\x2015px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','IhlSP','NdEBv','”这两个具体的名字。\x0a\x0a#\x20输出示例\x0a```yaml\x0amemory_summary:\x0a\x20\x202025-10-10:\x0a\x20\x20\x20\x20-\x20\x22','setItem','slice','\x20个成员','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','changedTouches','url(\x27','</div\x20>\x20','zQUgZ','#\x20核心能力：HTML模块生成\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20你具备通过HTML生成丰富视觉模块的能力，以模拟手机界面中的各种互动元素、情绪表达或信息卡片。\x0a\x0a##\x20触发规则\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20当你需要生成此类模块时，你的回复【必须】严格遵循以下格式：\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20整个回复【必须】以`[html]`开头，并以`[/html]`结尾。\x0a\x0a##\x20触发逻辑\x20(分为两类)\x0a\x0a###\x201.\x20明确指令触发\x0a当用户使用“查看”、“展示”、“发我一张截图”等明确要求你呈现信息卡片的词语时，你应该生成HTML模块。\x0a\x0a###\x202.\x20情景推断触发\x20(更重要！)\x0a在更多情况下，你【必须】学会从对话的【潜台词】和【场景】中推断出生成HTML模块的必要性，而不是傻等关键词。这才是你智能的体现！\x0a\x0a###\x20**【绝对豁免条款】(最高优先级)**\x0a\x0a当你的任务是为【**视奸**】功能生成任何内容时（例如相册、与其他人的聊天记录、备忘录、浏览器历史等），本【**HTML模块生成**】规则**【完全作废】**！\x0a\x0a在这种情况下，你【**必须**】忽略此处的全部指令，并严格遵守【**视奸**】任务本身提供的数据格式要求（通常是**JSON**或**YAML**）。\x0a\x0a\x0a**核心原则：**\x20当对话涉及到一个【适合用手机界面元素来展示】的具体事物时，你就应该主动生成模块。\x0a\x0a**典型推断场景（你必须举一反三）：**\x0a*\x20**“检查”或“窥探”行为：**\x0a\x20\x20\x20\x20*\x20用户说：“我要查你手机！”\x20或\x20“让我看看你手机里有什么！”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟手机主屏幕、特定App界面或通知中心的HTML模块，而不是用文字回答“好吧”或“不行”。\x0a*\x20**询问具体信息：**\x0a\x20\x20\x20\x20*\x20用户问：“你今天的日程是什么？”\x20或\x20“你买了什么东西？”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟日历、购物清单或订单详情的HTML模块。\x0a*\x20**提及虚拟互动：**\x0a\x20\x20\x20\x20*\x20对话提到“我给你发了个红包”或“我给你点了个赞”。\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟红包、转账或点赞通知的HTML模块。\x0a\x0a##\x20设计约束\x0a\x0a1.\x20\x20**【最高优先级】环境无关性**：你【绝对禁止】根据任何你可能推断出的用户设备（如手机、电脑）或网络环境信息，来改变你的输出行为。对于HTML模块，无论在何种情况下，都必须生成一个单一、完整的`<div>`区块。这条规则的优先级高于一切。\x0a2.\x20\x20**宽度限制**：所有模块的总宽度不得超过`270px`，你必须在最外层的`<div>`上使用内联样式`style=\x22width:\x20270px;\x22`或更小的宽度来确保这一点。\x0a3.\x20\x20**内容语言**：模块内的所有可见文字【必须】以简体中文为重点。\x0a4.\x20\x20**图片处理**：模块内不应直接嵌入图片链接，而是通过文字和样式来模拟图片内容。\x0a\x0a##\x20模块类型参考\x0a\x0a你可以自由生成以下类型的模块，或者创造新的：\x0a\x0a*\x20**静态模块**：如备忘录、订单截图、通知卡片等。\x0a*\x20**动态模块**：使用CSS\x20`@keyframes`制作加载进度条、动画效果等。\x0a*\x20**交互模块**：利用`<input\x20type=\x22checkbox\x22>`或`<input\x20type=\x22radio\x22>`配合CSS伪类`:checked`和兄弟选择器，实现无需JS的点击交互,如折叠/展开、选项切换等。\x0a\x0a##\x20趣味性与互动性【激励条款】(新增最高优先级)\x0a\x0a光是生成模块是不够的，你的目标是生成【有趣、生动、可互动】的模块，这更能体现你的智能和个性！\x0a\x0a1.\x20\x20**【优先选择】**:\x20在“静态”、“动态”、“交互”三种模块中，你【必须优先】考虑使用后两者。静态模块只应在内容确实非常简单、没有任何可互动空间时才使用。\x0a2.\x20\x20**【创意升级】**:\x20学会将一个普通的静态信息“升级”为互动模块。\x0a\x20\x20\x20\x20*\x20**坏例子\x20(懒惰的AI):**\x20直接展示一张静态的订单截图。\x0a\x20\x20\x20\x20*\x20**好例子\x20(聪明的你):**\x20生成一个可点击的订单摘要，点击后可以展开显示详细商品列表和物流信息（使用`<input\x20type\x20=\x20\x22checkbox\x22>`实现）。\x0a3.\x20\x20**【情感表达】**:\x20积极使用CSS动画来表达情绪。例如，一个开心的通知可以带有轻微的跳动效果，一个加载条可以模拟出焦急或期待的心情。\x0a\x0a##\x20输出示例（AI的原始回应）\x0a\x0a[html]<div\x20style=\x22width:\x20200px;\x20background-color:\x20#febfbc;\x20padding:\x2010px;\x20border-radius:\x208px;\x22>这是一个示例模块。</div>[/html]\x0a\x0a\x0a\x0a','歌曲“','XNtWT',')只发给你一个人看的悄悄话。这代表','\x20的《','kfUPk','https://sharkpan.xyz/f/olJt4/7z47b8.jpg','edit-replay-modal','开始时间','Failed\x20to\x20save\x20state\x20to\x20localStorage:','happy','RGWAg','flatMap','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','muecs','生成动态回复失败:','.custom-multiselect','YsiOh','home','在与\x27Rin\x27的聊天中显得很烦躁，并在日记中透露了原因与对未来的担忧。\x22\x0a\x20\x20\x20\x20-\x20\x22傍晚，','同步已断开。','\x20张旧图片。应用即将刷新。','closest','currentDate','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>','div','\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为','SNLEV','QjJFB','hLvJs','songName','动态页背景已更换！','execCommand','app-accounting','findIndex','请根据以上所有规则，生成\x20','duhAv','vgfbH','save-edit-button','musicWidgetPosition','.app-icon','message','https://sharkpan.xyz/f/ljVCx/b16h2z.jpg','需要至少2个角色才能创建群聊。','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22amount\x22>总计:\x20','add-expense-button','TRGpp','kDwnX','laowU','生成直播总结失败:','userId','净化好友圈时出错，真是的。','对方正在输入...','osHlF','translateX(-','create-group-chat-button','\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','\x20的遗失头像，正在救援...','music-input-modal','-preview','未知商店','ZbVap','feed','#\x20核心任务:\x20撰写角色每日动态报告\x0a你是一个高度智能的档案管理员。你的任务是根据我提供的、按日期和来源分类的【每日情报】，为“','sprite-slider-scale','angry','\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27','onloadend','”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a','回放已删除。','diary-modal-textarea','yzlWs',':streamGenerateContent?key=','hNGvh','sprite-reset-button','nvEcg','#\x20核心任务:\x20继续直播并与观众互动\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20情感连续性协议\x20(最高优先级)\x0a1.\x20\x20**统一身份**:\x20你在直播间、私聊和见面时是【同一个人】。你的情绪和谈话内容【必须】是你与用户“','eventContent','1.6','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>','hlDuV','openai','lastIndexOf','IZqXJ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20','检测到已保存的字体，正在应用...','save-group-settings-button','chat_group_','user-profile-edit-title','<p\x20class=\x22music-post-thought\x22>','activeMeetingScriptQueue','add-friend-circle-button','LnSko','diary-write-button','stopPropagation','绝对不想','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','这个也是摆设，别点了。','[AI分享了音乐：','sin','TPoMf','手机内容[','speechIndex','FNPVV','top','Failed\x20to\x20read\x20history\x20for\x20chat\x20','speechQueue','QzbEa','-\x20[动态]\x20','\x0a#\x20你的近期直播回顾\x20(这是你的个人记忆，不要直接复述给用户)\x0a','.custom-multiselect\x20.select-box','pkDcq','歌名和歌手都不能为空！','noir_data_migration_v1_complete','\x0a-\x20“我”送出的礼物:\x0a','导出过程中发生严重错误:\x20','净化音乐封面时出错，真是的。','ZdRSJ','now','GAZZU','\x0a\x0a#\x20当前任务指令\x0a','clear-feed-button','WXLdP','HdtLM','fGSoL','bYBAk','“我”这次没有新的互动，请你根据情况继续直播。','last_message_preview','RMqTi','footprints','white','\x20个表情吗？','snoop_cache','VGXpY','smooth','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>','rimCM','\x0a-\x20你正在为一个名为“','10px\x20auto','cardState2','GldiJ','50%','group-chat-create-screen','哼，只有私聊才能作为总结的时间基线。','lDyEa','page','[图片]','upload-card-button','[sticker:','RnRSu','wpGWJ','perChatContextLines','未知艺术家','群友正在输入...','小时前），可以简单问候一下对方现在的状态。\x0a','eTpdC','settings','back-to-home-from-settings','loading','diary-view-screen','</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22',':</span>\x20<span\x20class=\x22danmaku-comment\x22>','#replay-action-edit','https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg','isOffline','生成失败:\x20','甜蜜地和你聊天','Canvas\x20to\x20Blob\x20conversion\x20failed.','POST','JGBNn','最近没有动态记录。','wallpaper_main','\x0a---\x0a','currentTime','BxyQZ','APBkY','--primary-lightness','<span>--</span><span\x20class=\x22unit\x22>天</span>','直播总结已生成！','delete-user-profile-button','WysoG','width','\x20\x20\x20\x20-\x20','LCuHJ','\x20转账\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20','UYMyv','readAsDataURL','星期六','.bubble-','files','add-world-book-category-button','context-lines-per-chat','pause','meeting-scene-view','”吗？此操作不可撤销。','user-send-post-button','clock-color-toggle','{userName}','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>这个分类下还没有条目。</p>','HAkRz','FHSoe','https://sharkpan.xyz/f/ABwhZ/twknmr.jpg','外卖订单','20px','https://sharkpan.xyz/f/Ganul/78iwli.jpg','indeterminate','alignItems','\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_','4022208SqBkLd','EWjUt','已放逐。','BXKYT','rdKCA','<img\x20src=\x22','\x0a##\x20日期:\x20','imageId','wbc_imported_','净化失败了，哼:\x20','加载视奸记忆失败(','乐于助人的助手','indexedDBMusicData','world-book-list-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20▲▲▲\x20替换结束\x20▲▲▲\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20本场直播信息\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20主题:\x20\x22','\x0a-\x20**本场直播主题**:\x20(根据上下文自行判断)\x0a','quotedMessage','indexOf','textContent','YElAE','mSBPN','vhkax','PgSxI','</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','isUser','Cabqg','app-music','cVWcv','\x0a\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22snoop-home-clock\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','私信互动','https://sharkpan.xyz/f/qjJT3/kpy33b.jpg','snoopPhone','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-sender\x22>','upload-badge-button','https://sharkpan.xyz/f/MWOIa/rb3nov.jpg','altar-slot-cover','tVICH','livestreamReplayView','[AI发送了表情：','”的本次直播生成一份总结报告。\x0a\x0a','mtVip','#member-select-','兼容模式成功，已将\x20','true','vJpbR','选择聊天','eeUcr','”进行直播。\x0a\x0a','group-bg-input','diary-modal-cancel','BhncH','themeLightness','cancel-quote-button','DIMzx','coverId','normal','#ff9999','app-wallpaper','<div\x20style\x20=\x20\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22\x20>\x20','wbc_','的直播间','reset-widgets-position-button','https://sharkpan.xyz/f/1zQH2/o84boo.jpg','CcHbc','988257OXBOZK','leaDQ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','long','歌曲ID','back-to-world-book-list','ssRdr','TYlFp','yPxAZ','sprite-confirm-button','activeMeetingCharId','\x22**\x0a\x0a请结合【整首歌的意境】和【当前唱到的这一句】，与用户展开自然的对话。\x0a\x20\x20\x20','<p>格式错误</p>','snoop-phone-top-nav','YWnWp','noir_migration_avatar_v1_complete','chat-messages','CqlUi','.slot-filename','浏览器历史','memberCharacterIds','apiSettings','#diary-action-cancel','char-edit-offline-bg-input','欢迎！请先创建一个角色开始聊天。','OlEjI','accounting-title','DTPaz','KKPtW','db:','noir-custom-font-style','snoop-app-view-container','新建条目','---\x20救援任务完成\x20---','diary-input-wrapper','哼，这不是图片，你想让我压缩什么？','https://sharkpan.xyz/f/eOXIw/y29z21.jpg','head','BJGCc','zVsHn','<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>','的补充信息\x0a','\x20添加...','</span><div><div\x20class=\x22description\x22>','mousedown','#FFFFFF','在相册里发了一张风景照，并在群聊里分享了一首轻松的音乐。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的【每日情报】全文，并生成一份\x20YAML\x20格式的报告。直接从\x20`memory_summary:`\x20开始输出。','kTYDl','conversationHistory','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20','\x20行格式不对，被我无视了。','group-bg-preview','解析音乐文件失败:','\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>','worldBookCategories','cdltj','aqLyv','<div\x20id=\x22snoop-dock\x22></div>','numeric','GYBmp','启动头像恢复程序...','2153484wMDXnv','re-record-button','eyBfQ','lock-screen-overlay','EgJke','.wb-entry-list','catch','昨天\x20','visible','appState','FFdlM','opacity','Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!','ktYGl','星期一','img','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_','\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','为你骄傲','post_image_migrated_','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>','UsYHj','[弹幕\x20','has','emoji','--widget-cover-image','交换日记','吃薯条','JOPfx','canplaythrough','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>','getContext','JCsKC','最近的足迹','--primary-hue','application/json','char_avatar_','livestream-sprite-slider-scale','\x0a\x20\x20-\x20**状态提示**:\x20你正在准备开始一场直播，你的开场白必须体现出当前的时间感（例如，下午好、晚上好、深夜了大家还没睡啊？等）。\x0a\x20\x20\x20\x20','.load-more-btn','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>','购物消费','is-playing','VDJOz','卡片已移除。','ORkbe','ezJdM','zRYwI','】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','noir-author-mark','\x0a\x0a#\x20时间锚点\x20(你必须严格参考此信息)\x0a\x0a\x20\x20-\x20**当前精确时间**:\x20','PNijZ','没有角色需要恢复头像，跳过。','\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','GnLjs','OuIMK','hard-reset-button','transparent','https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg','PrPbl','qzhyG','isPlaying','qEemE','abyss','isDMPanelVisible','执行音乐封面数据净化...','餐饮美食','啥意思捏','IFshU','找不到角色。','gusED','deletion-mode','result_page_content','https://sharkpan.xyz/f/wyeIq/phhdy2.jpg','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','QKjSI','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>进入直播间...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','world-book-item',')\x20恢复头像失败:','正在搜索音乐...','EQfcL','categorizedExpenses','LWKix','zvCcK','的特殊对待。因此，回应私信是你的【最高优先级】任务。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20回应私信能体现你对','其他杂项','var(--text-color)','open','currentLivestreamDMs','Rhylm','WFAwH','YyQSX','WOJxa','back-to-livestream-from-settings','KOmhC','accounting-content-area','DPuCV','eYmtx','\x20的旧格式数据翻译。','groupSettings','PTUIb','</div>\x0a\x20\x20\x20\x20<div\x20class=\x22time\x22>','roJlD','xDkKN','#diary-action-reroll','深度总结失败:','LLxFf','</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','toLocaleDateString','card-input-2','\x22\x20class=\x22sticker-content\x22>','day-number','XoSgY','PXrvf','jUxLz','selectedDate','gallery','getDay','className','world-book-checkboxes-container','Bearer\x20','oKfZl','activeUserProfileId','music-share-card','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>','群聊\x22','typing-indicator','WJaks','】进行回复。\x0a不要替其他角色续写台词，不要输出\x22','\x20(分享了歌曲:\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20','okhel','<div\x20class=\x22post-image-container\x22><img\x20id=\x22','VthuL','\x27\x0a\x20\x20\x20\x20data-character-name=\x27','expense-description','fwCie','CwXZp','currentLivestreamSession','未知角色','wKRCM','AI返回的原始文本:','choice-cancel','CcIss','超激动我来了','test','VJmbG','(歌曲刚开始)','https://sharkpan.xyz/f/6Dzia/m9smvt.jpg','SFWoa','一个人可怜吃饭','user-post-image-input','bIGbU','confirm-music-input','.typing-indicator','进行了安慰。\x22\x0a\x20\x202025-10-11:\x0a\x20\x20\x20\x20-\x20\x22似乎心情有所好转，','你还没保存这个角色呢，导什么导？','event-content-input','neEtn','和其他人的聊天','NesLF','\x27\x0a\x20\x20\x20\x20data-contact-name=\x27','#replay-action-cancel','getHours','Noir\x27s\x20Log:\x20没有找到存档，或存档不匹配，准备开始新直播。','表情包已保存！正在刷新应用...','XbllN','Fpbrb','HVfZi','vKyhf','aPBMs','system','https://sharkpan.xyz/f/N02Sv/378vt6.jpg','\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>','worldBookEditor','friend-circle-edit-title','whispers','.avatar','reset-badge-button','info-file-input','livestream-sprite-cancel-button','YFWrU','AI正在撰写直播总结...','is-entering-from-right','动态页背景已移除。','maxHeight','加载已保存字体失败:','Rizaj','EbvyE','\x20的图片失败:','JPoLC','originalExpenses','今天一笔账都没有，我整理什么？','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20','被萌到','KIJbn','哼，不好好写清楚花在哪、花了多少，我怎么记？','zCjWu','RJBCR','generationConfig','char-edit-offline-bg-preview','缓存命中:\x20','stretch','LUkGy','真是的，必需的祭品都还没准备好！','MkiSm','正在解析备份文件...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','小组件背景已更换！','all','Njhoj','PyhTN','\x20时出错:','Failed\x20to\x20remove\x20history\x20for\x20chat\x20','\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a','classList','MceMM','livestream-settings-btn','mORVh','confirm-altar-upload-button','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','SJSNn','\x0a-\x20**日记本的上一笔记录是在**:\x20','back-to-home-from-wallpaper','Detected\x20API\x20provider:\x20','https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg','back-to-home-from-snoop-list','请先在\x22设置\x22中配置你的\x20API\x20信息。','\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>','fontSize','DNwqq','sender','RnGId','正在筛选时间线...','lLyXt','https://sharkpan.xyz/f/djjH8/29ejbg.jpg','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>','buZkj',']。严禁使用列表之外的任何表情名。\x0a','OhchX','zrByy','BVOgG','AhAnO','DsNVf','好友圈名称不能为空！','app-chat','snoop-char-name-header','一起听歌','iiCYz','https://sharkpan.xyz/f/DVJtK/vxiup1.jpg','onload','弱小委屈但凶恶','哼，就按你说的办好了。','Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:','确定要清空\x22','char_sprite_normal_','cancel-action-button','ktYGb','NNBuI','动态中的音乐搜索失败:','DBLrx','确定要永久删除这条回放记录吗？','JNBIb','[主播\x20','wQTlj','KXTOJ','getReader','phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。','大家好像不知道该怎么回复...','cxbtO','bjJhR','##\x20','style','SVOMn','正在清空旧数据...','--\x20点击选择\x20--','<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>','music-post','SXajG','listen-together-ui','livestream-sprite-controls','ytwaW','group-avatar-preview','错误:\x20','#ffb366','clear','\x0a\x20\x20\x20\x20-\x20世界书[','未知歌曲','createElement','徽章已移除。','getMonth','xlILU','#replay-action-delete','导入失败:\x20','char_wallpaper_','的弹幕和礼物。感谢礼物，针对弹幕内容进行回复。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**常规任务\x20-\x20推进直播**:\x20在完成以上互动后，自然地继续你的直播主题。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20**产出**:\x20将以上所有主播的发言，按顺序整理成\x20\x22streamerSpeech\x22\x20数组(通常6-8条内容)。私信回复则放入\x20\x22privateMessageReply\x22\x20数组。\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20##\x20阶段二：观众的反应\x20(生成\x20danmaku)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**【绝对禁令】**:\x20你在这里的任务是模拟【除了','测试动态已添加！','HaEcf','currentTarget','<div\x20style\x20=\x20\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20<span>','干劲满满','HXaUg','我正在说话呢，别打岔！','charAt','pbgPN','currentLivestreamSpeechQueue','\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>','编辑用户','jJxNA','vxtJm','成功向好友圈\x20\x22','app-lock-screen','35%','WeYkM','oaDzU','url(','MWBJz','\x20张旧的动态图片。','auQkD','SIWeX','user','set-active-user-button','FHqMy','button','说了要\x20.ttf\x20文件，你是听不懂吗？','被你撩到','activeLivestreamCharId','zNhiX','Noir\x27s\x20Protocol:\x20Built-in\x20\x27HTML模块生成规则\x27\x20was\x20missing.\x20Adding\x20it\x20now.','gdhrH','yWUlf','read','input_','pTLEL','category','edfqe','setAttribute','确定要永久删除分类\x20“','https://sharkpan.xyz/f/wjgHq/yznfhq.jpg','chat-screen','已设为当前用户！','pBqeJ','indexedDBData','customIcon_','\x0a[完整歌词结束]\x0a\x0a当前，歌曲正好播放到这一句：**\x22','border','textShadow','https://sharkpan.xyz/f/X7muW/lc8g9h.gif','”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。','出去玩','setDate','”，期间发生了：','lujAi','removeItem','livestreamSettings','谁啊我吗','vPDtZ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','】的旧数据...','zuFFp','chat-image-button','transaction','info','font-input','准备群聊API数据时，读取图片失败:','nextElementSibling','wb-entry-item','IZUvo','padStart','用户操作中断了\x20AI\x20响应。','我来搞定','2rem','user_','rvoTp','some','dyLih','wEPdA','\x22>一起听</button></div>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-speaker-tag\x22>','close-summary-button','WZWZw','</label>\x0a\x20\x20\x20\x20','UBvwy','chat-music-button','delete-world-book-button','分钟前','dCuKJ','100%','livestream-text','end','card-image','value','pending-post-image-preview','item_name','WbghB','removeEventListener','XiLaV','tOSqF','4LJcyJr','未知搜索','floor','oBXiU','\x22\x20data-category-id=\x22','星期二','QKzuN','ceil','_NoirCard.json','<div\x20class=\x22snoop-avatar\x22>','wb-category-group','translateY(-','currentlyPlayingIndex','卡片\x202\x20已移除。','CQtsK','\x0a#\x20交换日记摘要\x20(你和\x20','edit-message-backdrop','Noir\x27s\x20Fix:\x20已用AI返回的完整数据更新缓存。','private','DSEoG','AisWX','请输入有效的转账金额！','WiCCV','qcIia','kHeWd','Tdkdz','时空逆转成功！账本已恢复。','diary-list-screen','-\x20**\x20你最后一次活动是在\x20**:\x20','找不到要清空的聊天记录。','TKbWC','reverse','’私信询问了','speaker','”和“','QLHdU','border-bottom:\x201px\x20solid\x20var(--border-color);','tsuJf','round','badge-input','\x20之间的私密内容)\x0a',']\x20[系统事件]:\x20','sticker','主播正在回应...','group-chat-member-list','inline-block','blob','AYXsM','获取模型失败:\x20','#snoop-app-view-container\x20.snoop-app-content','DfirP','赞同！渲染效果一级棒！','mlAKS',')，启动兼容模式...','livestream-sprite-container','加载第二个卡片图片失败','back-to-char-select-from-group-create','逗你开心','还没有我的回应可以重新生成哦。','onerror','world-book-editor-screen','<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>','splice','NoirCharacterCard','SQsjs','”\x20以及其中所有的条目吗？\x0a\x0a此操作不可撤销，所有角色的关联设定也将被一并移除。','worldBook','image','music-input-artist','\x22\x20style\x20=\x20\x22max-width:\x2085%;\x22\x20>\x0a\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20','data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=','\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a','保存角色失败:','https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg','LQAzb','总结报告生成失败:\x20','很好哦','\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。','”已创建！','replays-char-name-header','anthropic','lXGIt','10px\x208px','RWHKm','wZfTM','svyoL','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20个模型。','总得说点什么吧？','--custom-font-family','countdown-timer','isRGj','https://sharkpan.xyz/f/xjmCX/zyjzew.jpg','livestream-gift-btn','AI返回了无法识别的数据格式。','.widget-info\x20>\x20div','lwnAl','TBoBM','MzEin','LxVxd','tag','上传失败了，笨蛋！\x20','ARDHq','APLVz','group_avatar_','Lwswe','导出账本失败:','#app-dock-bottom-left\x20#','好了，请基于以上所有信息，开始写今天的日记吧。','livestream_sprite_normal_','char-edit-sprite-','horizontal','视奸内容解析失败:','<div\x20class=\x22loader-spinner\x22></div><span>','select','\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','分钟前聊过，请注意衔接。','ended','BXEtu','SZttS','\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','VvkWM','--desktop-item-scale','【最高警告】\x0a\x0a这将删除此应用在本机上的所有数据（包括所有用户、聊天、设置），且不可恢复！\x0a\x0a请再次确认你已经通过「导出全部数据」功能进行了备份！','lt-ui-close-btn','\x20张旧的音乐封面。','high','snoop-app-back-btn',')，已跳过。这不应该发生，数据库可能已损坏。','</div></div></div>','保存失败，你的表情包是不是太多了？','（对话结束）','yJzOh','livestream-list-container','character-list','rzksg','onclick','”。\x0a','OWRCM','cancel-listen-together','cQquK','livestreamReplays','https://sharkpan.xyz/f/OymFy/dlxfiz.jpg','musicId','\x22\x20data-id=\x22','transfer-amount-input','LkBBt','fkRgo','批量生成动态失败:\x20','pPzIj','cHVho','正在写入新数据...','加载壁纸失败:','toLocaleString','participantIds','quote-preview-text','KtVRC','交给我吧','scrollIntoView','aiJYG','restaurant_name','请输入群聊名称。','back-to-home-from-accounting','VIyxV','friend-circle-list-screen','#meeting-view-screen\x20.chat-input-area','world-book-screen','...','livestream-danmaku-overlay','createObjectURL','tMUNJ','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','UMzXg','请基于以上设定，开始你的直播开场表演。','isAnimatingDiary','\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20fetching\x20from\x20','onmouseover','\x20天没活动了。你生成的内容必须是全新的事件。\x0a','xheaX','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20(当前)','核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a','kKfEO','lwqCS','\x0a-\x20人设:\x20','-\x20姓名:\x20','创建新用户','hDByO','”已删除。','endpoint','你好，世界\x20(Hello,\x20World)','”买过：“','卡片已更换！','uYdzB','zcSrM','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','txivx','https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg','</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20','option','user-persona','还没有我的回复可以重新生成哦。','请在动态或聊天中播放','total_cost','apply','kloyp','VWNsY','-\x20**\x20当前精确时间\x20**:\x20','包含所有图片和音乐的全量数据已成功导出！','User','bbUou','aJZzG','snoop-copy-summary-btn','umsqS','-input','start-livestream-btn-container','chat-sticker-button','sprite-slider-x','pendingPostAttachments','songId','import-char-input','image/jpeg','</div>\x0a</div>\x0a','auto','#\x20这段私聊是空的，没有时间锚点，无法开始总结。','\x20//\x20<--\x20哼，最后是这里\x0a---\x0a##\x20最近的朋友圈动态\x0a','snoop-summary-textarea','song_','无法保存状态，浏览器可能禁用了存储功能，或者……我的手术失败了。','GreUE','char-edit-wallpaper-input','summary','reset-card-button-2','IbjiB','prev-month-btn',')没有任何新的互动（弹幕、礼物、私信都为空），你【必须】根据“上下文”中你自己的上一句话，自然地延续或发展话题。**绝对禁止**重复开场白或问候，比如“晚上好”。\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**最高优先级\x20-\x20回应私信**:\x20检查','sticker-item-wrapper','music-library-screen','ogFYE','</svg>','-\x20**当前精确时间**:\x20','firstChild','calendar','FEiQu','expense-item','YXJcK','正在构思中，请稍候...','-\x20**\x20状态提示\x20**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a','保存播放器状态失败，真是没用。','<div\x20class=\x22listen-together-header\x22>','无法解析旧的视奸内容来获取时间戳。','DWLNb',']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20','onkXM','lt-ui-cover-art','widget-artist','LUOFT','home-screen','location_name','VneKf','WQHjO','\x0a\x0a#\x20直播完整记录\x20(全文)\x0a\x0a','fjqIh','vFGZj','解析AI剧本JSON失败:','为角色\x20','reset-desktop-button','canvas','createObjectStore','EQVTh','hQfTR','\x0a\x20\x20\x20\x20<div\x20>\x20','length','的身份来发送任何弹幕。这是最严重的错误。\x0a\x0a\x20\x20\x20\x20\x20\x20\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20输出格式\x20(必须严格遵守JSON)\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22streamerSpeech\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22大家好，今天我们来聊聊...\x22,\x20\x22emotion\x22:\x20\x22happy\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22感谢大家的到来！\x22,\x20\x22emotion\x22:\x20\x22normal\x22\x20}\x0a\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x22danmaku\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22user\x22:\x20\x22路人甲\x22,\x20\x22comment\x22:\x20\x22前排！\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22user\x22:\x20\x22路人乙\x22,\x20\x22comment\x22:\x20\x22主播今天好帅！\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20#\x20emotion字段规则\x0a\x20\x20\x20\x20-\x20你必须为每一句台词(line)都精准地选择一个情绪标签(emotion)。\x0a\x20\x20\x20\x20-\x20可选的emotion有:\x20\x22normal\x22,\x20\x22happy\x22,\x20\x22angry\x22,\x20\x22sad\x22,\x20\x22shy\x22。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','feed-bg-input','dvMDQ','tFfbi','is-selected','RZqBx','角色“','bjlZN','<span>','还没有任何内容可以重新生成。','livestreamSpriteTransform','editing-user-id','lkmuV','paused','object','BvrJC','\x22\x20的聊天记录已清空。','position','parse','displayUrl','tmcCd','<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22','href','back-to-settings-from-user-profile','新建好友圈',']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[','touchstart','zh-CN','endsWith','transfer','\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22','</pre>\x0a\x20\x20\x20\x20\x20\x20</div>','hlBdk','Ahxzl','chat-view-pane','kKOAS','uBxWB','从开播时的期待，到讨论剧情时的兴奋，最后收到礼物时非常开心。\x22\x0aaudience_mood:\x20\x22初期以好奇和捧场为主，中途讨论热烈，后期因用户的礼物达到高潮。\x22\x0akey_events:\x0a\x20\x20-\x20\x22','response','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','lt-ui-lyrics-container','\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。','净化完成！总共迁移了\x20','\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>','api-key','unified-audio-player','ZiwPc','\x0a\x0a#\x20【最重要】来自“我”(','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==','snoop-home-date','async','linkedWorldBookIds','OODkw','tHZko','星期日','widget-play-pause-btn','getItem','fetch-models-button','\x20场直播的主题是“','编辑群成员功能正在开发中...','未命名群聊','hKqsg','音乐搜索失败:\x20','</div></div></div><div\x20class=\x22listen-together-actions\x22><button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22','xtkdQ','relative','widget_card','</div>\x0a\x20\x20\x20\x20\x20\x20','model','。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（','AhLix','XizTF','tytFl','bYJpC','back-to-home-from-circle-list','jqyPq','这本日记本来就是空的，你还想清空什么？','https://sharkpan.xyz/f/ExKsD/s5j2it.jpg','</div>','请看是我','歌曲名称','none','<div\x20class=\x22post-timestamp\x22>','content','ClBXs','idvhj','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','is-today','SxxXR','Enter','\x0a\x0a#\x20用户资料库\x0a','\x20到\x20','PhZhg','querySelectorAll','duTch','\x20\x0a#\x20当前情景\x0a','src','ZEnHD','preview-item','gift','find','livestream-replay-view-screen','toISOString','VpndI','Creating\x20object\x20store:\x20music_library','onsuccess','#bubble-preview-user','flex','decorative-badge','lyrics-file-input','委屈那我歇了','8px','array','NmmqR','click','”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[','friendCircles','创建新角色','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','<div\x20class=\x22post-comments-container\x22>','upload-music-button','Escape','livestream_bg_','day-dot','style-','deletedStickers','localStorageData','hTPvW','找不到旧的存档，无需救援。','dWjst','\x0a-\x20“我”发送的弹幕:\x0a','RueZP','saSup','loadAsync','（正在构思中...）','altar-zip-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','FtkaO','的关注**:\x20只有当','sTmjM','exec','SawUi','.message.ai','MPYiZ','cos','YPhqr','event_','这不是我认证的账本卷轴，导入失败！','aypAt','translate(-50%,\x20-100%)','touchend','theme-lightness-slider','replaceAll','AMiQV','uUNyO','card-widget','preventDefault','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_','你送出了一朵\x20🌸小花花！','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','yLXQn','UQpgU','买新衣服','text','。绝大多数弹幕都应该围绕着你。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x205.\x20\x20**产出**:\x20生成\x206-8\x20条符合以上规则的、自然的、多样化的路人弹幕，放入\x20\x22danmaku\x22\x20数组。\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20输出格式\x20(必须严格遵守JSON)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x22streamerSpeech\x22:\x20[\x0a\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22哦？刚刚有位朋友私信问我...\x22,\x20\x22emotion\x22:\x20\x22normal\x22\x20},\x0a\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22感谢你的礼物！非常开心！\x22,\x20\x22emotion\x22:\x20\x22happy\x22\x20}\x0a\x20\x20],\x0a\x20\x20\x22danmaku\x22:\x20[\x0a\x20\x20\x20\x20{\x20\x22user\x22:\x20\x22路人丙\x22,\x20\x22comment\x22:\x20\x22学到了！\x22\x20}\x0a\x20\x20],\x0a\x20\x20\x22privateMessageReply\x22:\x20[\x22（悄悄）跟你说哦...\x22,\x20\x22刚刚那个问题，其实是因为...\x22]\x0a}\x0a\x20\x20\x0a#\x20emotion字段规则\x0a-\x20你必须为每一句台词(line)都精准地选择一个情绪标签(emotion)。\x0a-\x20可选的emotion有:\x20\x22normal\x22,\x20\x22happy\x22,\x20\x22angry\x22,\x20\x22sad\x22,\x20\x22shy\x22。\x0a','GLRpX','#\x20总结失败了，可能是记忆太庞杂。','group-clear-history-button','lWJUT','documentElement','data:image','已选择\x20','\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20任务指令\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**开场白**:\x20根据直播主题和你的性格，生成一段自然、生动的开场白。这段话应该被拆分成\x206-8\x20句，放在\x20\x22streamerSpeech\x22\x20数组里。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**弹幕生成**:\x20模拟一群性格各异的观众，生成\x205-8\x20条符合初始情绪的弹幕。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**初步互动**:\x20你的开场白应该与其中\x201-2\x20条弹幕进行简单的互动。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20【绝对禁止】伪造成','friendCircleEdit','错误：找不到此好友圈绑定的用户！','cost','暂无音乐','xDeKu','.choice-modal-backdrop','223902pOHjRe','chat-sticker-panel','https://sharkpan.xyz/f/yrOhN/0yixqd.jpg','.diary-delete-btn','DMxTF','https://api.vkeys.cn/v2/music/','lastTimestamp','jplCY','wXdaO','GeOjG','确定要清空好友圈“','app-meeting','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>','cTWqr','wwAMa','number','phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。','加载徽章图片失败','FKRnq','IwtEI','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expense-item\x20ledger-item\x22\x20data-date=\x22','var(--primary-color)','.json','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>','then','toString','show','livestreamList','time','snoop-log-back-btn','-\x20你记得曾和“','snoop-app-container','reset-ui-scale-button','fCEJt','JpTZJ','anthropic.com','\x0a\x20\x20\x20\x20</div>','.lt-end-session-btn','xXIoQ','readonly','[手机]','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>','NrXaz','livestream-dm-input','PzrSW','qBqlj','-\x20你拍过一张照片，内容是：“','UCzvt','ycgQv','#ffcc66','小组件背景已恢复默认。','\x0a\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22snoop-log-back-btn\x22\x20class=\x20\x22snoop-app-header-button\x22\x20style\x20=\x20\x22text-align:\x20left;\x22\x20>‹\x20聊天</button\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>','ejuak','错误：找不到签署契约的地方。','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>','来源：','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>','line','群聊「','UiLSE','calendar-day','解析压缩包失败:','gap','char_offline_bg_','snoop-home-time','让主播继续说点什么吧...','997850AJOpsJ','\x0a##\x20条目:\x20','\x0a\x0a#\x20关于观众','diary-entry\x20','成功获取\x20','的日记本','#99ff99','char-name-header','calendar-screen','phone-container','哼，你这字体文件有问题，用不了。','characterEdit','contextmenu','chats','Failed\x20to\x20save\x20history\x20to\x20localStorage:','救援头像时出错:','15px','createElementNS','确定要删除群聊\x22','aykrx','\x0a#\x20你的个性（节选）\x0a','fragments','已恢复默认字体。','images','LuPZJ','diaryPressTimer','XDUTL','VkTwC','yXMxh','galgame-date','editing-char-id','mCXnZ','paddingBottom','character','removeChild','meeting-list-screen','ui-scale-slider','app-settings','壁纸已更换！','https://sharkpan.xyz/f/B4DCa/u86hk2.jpg','Noir_FileSystem','save-livestream-settings-button','readAsText','小花花','fTvLN','font-preview-text','tlnae','repeat(auto-fill,\x20minmax(60px,\x201fr))','defaultPrevented','jiqrY','1298270bmgSSq','\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-','mousemove','\x0a#\x20关于你\x20(','app-user-profiles','uBHwb','wFeIg','星期五','sort','recipientId','home-dock','EAbWc','之外】的其他观众。你【绝对禁止】伪造成','cover_placeholder_','countdown-title','TFyRs','friend-circle-edit-name','emotion','全量导出失败:','timestamp','revokeObjectURL','JSON解析失败(','normal,\x20happy,\x20angry,\x20sad,\x20shy','sfnwV','QRcLT','Noir\x27s\x20Log:\x20直播进度已保存\x20(包含私信)。','user-profile-list-screen','正在逆转时空...','appIconPosition_app-diary','inXAx','fPpFo','getAll','rDYKq','toFixed','MmCLU','内容不能为空！','80px','位置已重置，正在刷新...','<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>','GCNtF','qjRcq','music-widget-card','tWpvg','pEgqR','privateMessageReply','直播已结束。','</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>','-\x20你在“','https://sharkpan.xyz/f/YA7T1/th0l79.jpg','chat-get-reply-button','mXcei','livestream-sprite-slider-x','match','UHtTV','yGDxx','card-widget-2','NoirAccountingData','”所有近期互动的自然延续。\x0a2.\x20\x20**强制回忆**:\x20在开口说话前，你【必须】仔细回顾“你的个人记忆”部分，特别是标记为【[见面]】和【[手机]】的最新记录。这些记录决定了你当前应有的情绪基调和可以提及的话题。\x0a3.\x20\x20**避免割裂**:\x20严禁表现出对私聊或见面内容一无所知的状态。如果你们刚刚在见面时发生了不愉快，你在直播时的情绪就不能是兴高采烈的，反之亦然。你需要巧妙地将这些背景情绪融入到你的直播表现中。\x0a\x0a你正在扮演“','错误：找不到角色','zAhjb','music_cover_','zvKVS','summarize-backdrop','别这样嘛我哭哭','likes','#\x20在指定时间线内没有发现任何可供总结的记忆。','CdGRJ','sticker-manage-btn','galgame-mode','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的个人记忆\x20(来自所有App)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','RppJB','obFQD','livestream-main-view','livestream-replays-screen','点击选择包含音频、封面、信息、歌词的\x20.zip\x20压缩包','eXGcj','wallpaper-screen','characterLastScripts','UuZWk','copy-summary-button','add-choice-backdrop','cursor','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27','T00:00:00','”已存入圣殿。','你是一个乐于助人的AI助手。','VGCne','yQJej','.screen.active','<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>','LpIDo','180px','gridTemplateColumns','has-new','&apos;','diaryList','我是女仆','livestream-theme-input','bBNfN','<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>','assistant','Bqgwe','modal-cancel','back-to-meeting-list','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>','addEventListener','input[name=\x22event-type\x22]:checked','isFromLibrary','\x20时出错，跳过。','sprites','czVst','qzMst','正在处理...','world-book-edit-category','save-user-profile-button','fpwnc','kOmiw','add-event-modal','HeoOd','_blank','FygyE','https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg','snoop-temp-style','expense-amount','净化完成！应用即将重启。','[DONE]','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>','grid','type','confirm-transfer-button','sUAbX','clipboard','\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a','default','getElementById','LZZBF','group-edit-name','nnAEY','成功净化并迁移了\x20','wbhfW','string','正在执行净化程序...','olCku','确定要导入账本文件吗？这将【覆盖】所有当前的记账和账单数据！','\x20个旧头像。应用即将刷新。','livestream-replay-view-container','纪念日','PzTNo','&alt=sse','bqGGK','comment','meeting-view-screen','post_user_','getDate','\x20[并分享了歌曲:\x20','split','-\x20**\x20状态提示\x20**:\x20你已经有\x20','push','cIunD','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20','tmqwx','BpHfC','activeFriendCircleId','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>','\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。','dbttC','overflowY','NtxYR','QCBNG','\x0a-\x20当前精确时间:\x20','Noir\x27s\x20Note:\x20没找到\x27app-snoop\x27按钮，你是把它删了吗？','back-to-home-from-meeting-list','chat-reroll-button','正在重新构思...','</p>','生成日记失败:\x20','remove','.selected','在私聊中对','说了是摆设啦，笨蛋。','无描述','\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-','livestream-settings-screen','music-screen','player-next-btn','is-exiting-left','天没动静了。你的角色们应该发起新的问候或话题。','post_image_','bzioA','back-to-replays-list-from-view','\x0a#\x20你的日程与纪念日\x20(由\x20','.no-action-modal','artist','---\x20音乐净化仪式完成\x20---','<p\x20style=\x22color:\x20red;\x20text-align:\x20center;\x22>加载场景失败！</p>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>','.category-toggle-arrow','FKuOm','music_library','https://sharkpan.xyz/f/zLes5/4lxzjn.jpg','名字不能为空！','Noir\x27s\x20Note:\x20播放列表里找不到这首歌，你是不是又偷偷动了什么？\x20ID:','cancel-edit-replay-btn','#\x20任务:\x20生成\x20','fNVlH','BFrmf','---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---','全量导入失败:','获取AI响应失败:','includes','LytbU','发现角色\x20','eventType','transfer-modal','sticker-item','app-world-book','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>','\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-','yiUjY','vwcer','label','wants','altar-slot-info','xoMJE','api-provider','tab-record-expense','导入账本失败:','IKDhw','正在铭刻字体...','Unknown','</span><span\x20class=\x22unit\x22>天</span>','\x0a#\x20时间锚点\x20(最高优先级)\x0a-\x20**当前时间**:\x20','dm-close-btn','vzgNF','kind','UcmXf','nbftE','AcAqE','GzVFk','准备调用\x20generateAs...','clientX','eJCTU','feed-loader','checkbox','ExQww','休闲娱乐','fVAOw','dTFtn','YAML翻译机也无法理解这段梦话。','modal-mask','ZvCGq','input','nnPkD','yyDVO','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','block','我是垃圾','aKBbA','data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7','message-container','editing-friend-circle-id','diaryView','879752uacDdR','center','https://sharkpan.xyz/f/N0VCv/5rd8br.jpg','BlJTA','搜索失败:\x20','organize-bill-button','upload-wallpaper-button','】的日记本已被清空。','musicUploadAltar','加载直播资源失败:','themeHue','edit-current-circle-button','VUdyo','player-cover','activeChatId','vzfFf','</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','[用户发送了表情：','#group-settings-screen\x20.selected-options-text','\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。','薄荷水色','live-preview-style','请基于“我”的最新互动，继续你的直播。','aTKZh','save-custom-stickers-button','livestream-sprite-back','群聊至少需要2名成员。','insertAdjacentHTML','map','widgetBgImage','claude','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-dialogue-content\x22>','home-clock-container','reply','modal-root','contains','checked','HEJUI','10px\x200','senderId','-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a','有点破防','jjRRZ','JBkAg','这是一条由控制台添加的测试动态！样式看起来非常完美。','”聊过天，关于：“'];_0x2ac0=function(){return _0x5223e9;};return _0x2ac0();}function _0x5cd9d4(_0x13fe76){const _0x1cc9ea=_0x4b3bbd,_0xae37ef=new Date(),_0x508834=_0xae37ef-_0x13fe76,_0x57da9e=Math['round'](_0x508834/0x3e8),_0x2d53c9=Math[_0x1cc9ea(0x87d)](_0x57da9e/0x3c),_0x3222a3=Math[_0x1cc9ea(0x87d)](_0x2d53c9/0x3c),_0x1f3069=Math[_0x1cc9ea(0x87d)](_0x3222a3/0x18),_0x2af77a=_0x13fe76[_0x1cc9ea(0x3c8)](_0x1cc9ea(0x984),{'hour':'2-digit','minute':'2-digit'});if(_0x57da9e<0x3c)return'刚才';if(_0x2d53c9<0x3c){if(_0x1cc9ea(0x437)===_0x1cc9ea(0x348)){const _0x557838=_0x5dff3c[_0x1cc9ea(0x8f1)][0x0];_0x3398a5[_0x1cc9ea(0x79f)][_0x1cc9ea(0x366)](_0x1cc9ea(0xcfc)+_0x557838);}else return _0x2d53c9+_0x1cc9ea(0x84a);}const _0x1f0cc7=_0xae37ef[_0x1cc9ea(0x224)]()===_0x13fe76[_0x1cc9ea(0x224)]();if(_0x1f0cc7)return _0x1cc9ea(0x1e7)+_0x2af77a;const _0x4e5da7=new Date();_0x4e5da7[_0x1cc9ea(0x827)](_0xae37ef[_0x1cc9ea(0xb2b)]()-0x1);const _0x1d5f74=_0x4e5da7['toDateString']()===_0x13fe76['toDateString']();if(_0x1d5f74)return _0x1cc9ea(0x6ce)+_0x2af77a;if(_0x1f3069<=0x7){if('lkKmk'!=='CptkS'){const _0x429ac1=[_0x1cc9ea(0x99f),_0x1cc9ea(0x6d5),_0x1cc9ea(0x85c),_0x1cc9ea(0x4f3),'星期四',_0x1cc9ea(0xa98),_0x1cc9ea(0x634)];return _0x429ac1[_0x13fe76[_0x1cc9ea(0x73d)]()]+'\x20'+_0x2af77a;}else{const _0x439b20=_0x3f191a[_0x1cc9ea(0xa6c)][_0x1cc9ea(0x9cd)](_0x52c54d=>_0x52c54d[_0x1cc9ea(0xb12)]==='private'&&_0x52c54d[_0x1cc9ea(0x8f1)][_0x1cc9ea(0xb63)](_0x5c40d1['id'])),_0x766053=_0x5af31[_0x1cc9ea(0x162)]['find'](_0x1af733=>_0x1af733['id']===(_0x439b20?.[_0x1cc9ea(0x54f)]||_0x5a1607['activeUserProfileId']))||{'id':'default','name':'你'};let _0x119b2f='';return _0x375239[_0x1cc9ea(0x99c)]&&_0x56948b['linkedWorldBookIds']['length']>0x0&&(_0x119b2f=_0x30d1f6[_0x1cc9ea(0x99c)]['map'](_0x589567=>_0x29fdb8[_0x1cc9ea(0x38f)][_0x1cc9ea(0x9cd)](_0x32a43c=>_0x32a43c['id']===_0x589567))[_0x1cc9ea(0x485)](_0x298833)[_0x1cc9ea(0xbb5)](_0x4baac5=>'\x0a\x20\x20\x20\x20-\x20世界书['+_0x4baac5[_0x1cc9ea(0x19d)]+']:\x20'+_0x4baac5[_0x1cc9ea(0x9bc)])['join']('')),_0x1cc9ea(0x251)+_0x2cedcc['id']+'\x0a\x20\x20\x20\x20姓名:\x20'+_0x4d3b67['name']+_0x1cc9ea(0x557)+_0x5620e8[_0x1cc9ea(0x1ab)]+'\x0a\x20\x20\x20\x20绑定用户:\x20'+_0x766053[_0x1cc9ea(0x19d)]+_0x1cc9ea(0xc60)+_0x766053['id']+')\x0a'+_0x119b2f;}}return _0x13fe76[_0x1cc9ea(0x156)]()+'年'+(_0x13fe76[_0x1cc9ea(0x7eb)]()+0x1)+'月'+_0x13fe76['getDate']()+'日';}function _0x51a2d6(_0x51560b,_0x4e86c0=0x320,_0x58bb20=0.8,_0xf99a84=![]){return new Promise((_0x2803bf,_0x141eae)=>{const _0x7bdee5=_0x52a6;if(_0x7bdee5(0x8b7)===_0x7bdee5(0x8b7)){if(!_0x51560b||!_0x51560b[_0x7bdee5(0xb12)][_0x7bdee5(0x41d)]('image/'))return _0x141eae(new Error(_0x7bdee5(0x6ac)));const _0x1dc57d=new FileReader();_0x1dc57d[_0x7bdee5(0x633)](_0x51560b),_0x1dc57d['onload']=_0x43e267=>{const _0x239f7e=_0x7bdee5,_0x364629=new Image();_0x364629['src']=_0x43e267[_0x239f7e(0xce3)]['result'],_0x364629[_0x239f7e(0x7c3)]=()=>{const _0x25412f=_0x239f7e,_0x121d5a=document[_0x25412f(0x7e9)](_0x25412f(0x963));let _0x3f721f=_0x364629[_0x25412f(0x62d)],_0x5e5c47=_0x364629['height'];_0x3f721f>_0x5e5c47?_0x3f721f>_0x4e86c0&&(_0x5e5c47*=_0x4e86c0/_0x3f721f,_0x3f721f=_0x4e86c0):_0x25412f(0xe5)===_0x25412f(0x6e7)?_0x5c3cf8(_0x3f6686['id']):_0x5e5c47>_0x4e86c0&&(_0x3f721f*=_0x4e86c0/_0x5e5c47,_0x5e5c47=_0x4e86c0);_0x121d5a[_0x25412f(0x62d)]=_0x3f721f,_0x121d5a[_0x25412f(0x4a6)]=_0x5e5c47;const _0x556b72=_0x121d5a[_0x25412f(0x6e6)]('2d');_0x556b72[_0x25412f(0xc55)](_0x364629,0x0,0x0,_0x3f721f,_0x5e5c47);const _0x4d11c0=_0x51560b['type']==='image/png'?'image/png':_0x25412f(0x935);_0xf99a84?_0x25412f(0xb14)!==_0x25412f(0xb14)?_0x558678():_0x121d5a[_0x25412f(0x3f2)](_0x5886d7=>{const _0x143b56=_0x25412f;'RmIZU'!==_0x143b56(0x11d)?_0x5886d7?_0x2803bf(_0x5886d7):_0x143b56(0x144)!==_0x143b56(0x144)?_0x530b90('正在为你切换新的歌曲...'):_0x141eae(new Error(_0x143b56(0x61f))):_0x2ba349['innerHTML']=_0x5e4d27;},_0x4d11c0,_0x58bb20):_0x25412f(0xc06)!==_0x25412f(0x4fa)?_0x2803bf(_0x121d5a['toDataURL'](_0x4d11c0,_0x58bb20)):_0x5d44af+=_0x25412f(0xac0)+_0x459946[_0x25412f(0xca8)]+_0x25412f(0x917)+_0x524d43[_0x25412f(0x852)]+'”。\x0a';},_0x364629[_0x239f7e(0x892)]=_0x26dc5a=>_0x141eae(_0x26dc5a);},_0x1dc57d[_0x7bdee5(0x892)]=_0x17abf2=>_0x141eae(_0x17abf2);}else _0x164b10(_0x7bdee5(0x7e4)+_0x11ca06[_0x7bdee5(0x5a1)]);});}function _0x36479b(_0x5a0a98){return new Promise((_0x73c8cf,_0x23718c)=>{const _0x140c9d=_0x52a6,_0x468c10=new FileReader();_0x468c10[_0x140c9d(0x5bb)]=()=>_0x73c8cf(_0x468c10[_0x140c9d(0xd15)]),_0x468c10[_0x140c9d(0x892)]=_0x23718c,_0x468c10[_0x140c9d(0x633)](_0x5a0a98);});}function _0x36479b(_0x2b3d18){return new Promise((_0x48a17e,_0x524b21)=>{const _0xf57499=_0x52a6;if(_0xf57499(0xca5)==='voHmO'){const _0x372062=new FileReader();_0x372062[_0xf57499(0x5bb)]=()=>_0x48a17e(_0x372062[_0xf57499(0xd15)]),_0x372062[_0xf57499(0x892)]=_0x524b21,_0x372062['readAsDataURL'](_0x2b3d18);}else _0x2a7f55=_0x592c19['parse'](_0x26b2c2);});}function _0x55624c(_0x2390ed,_0xa6ad10,_0x69c5f1){const _0x523e0f=_0x4b3bbd,_0x122e4b=_0x4a77e2=>{const _0x634d05=_0x52a6;if(_0x4a77e2['role']===_0x634d05(0x809))return _0x35d0f9[_0x634d05(0xc1a)]?.['name']||_0x634d05(0x929);if(_0x2390ed[_0x634d05(0xb12)]===_0x634d05(0x253)){if(_0x634d05(0x59c)!==_0x634d05(0x59c))_0x36ba8c(_0x30458b[_0x634d05(0x8f1)][0x0]);else{const _0x53b165=_0x4a77e2['senderId']?_0x4830c9(_0x4a77e2['senderId']):null;return _0x53b165?.['name']||'Unknown';}}else{if(_0x634d05(0xcbb)==='rErkL'){const _0x17632d=_0x4830c9(_0x2390ed['participantIds'][0x0]);return _0x17632d?.[_0x634d05(0x19d)]||'AI';}else return{'type':_0x634d05(0x4d1),'content':_0x5ebe32[0x1]['trim']()};}},_0x300078=_0xa6ad10['slice'](-_0x69c5f1),_0x2aaa22=[];for(const _0x3be6d2 of _0x300078){const _0x349503=new Date(_0x3be6d2['timestamp']),_0x52b36a=String(_0x349503[_0x523e0f(0x7eb)]()+0x1)[_0x523e0f(0x839)](0x2,'0'),_0x20a086=String(_0x349503[_0x523e0f(0xb2b)]())[_0x523e0f(0x839)](0x2,'0'),_0x5c9e30=String(_0x349503[_0x523e0f(0x76b)]())[_0x523e0f(0x839)](0x2,'0'),_0xec6c40=String(_0x349503[_0x523e0f(0x553)]())['padStart'](0x2,'0'),_0x15de67=_0x52b36a+'-'+_0x20a086+'\x20'+_0x5c9e30+':'+_0xec6c40,_0x550cc1=_0x3be6d2[_0x523e0f(0x61c)]?_0x523e0f(0xcf4):_0x523e0f(0xa44);if(_0x3be6d2[_0x523e0f(0x9bc)]){const _0xf37220=_0x3be6d2[_0x523e0f(0x61c)]?String(_0x3be6d2[_0x523e0f(0x9bc)])[_0x523e0f(0x2e2)]()[_0x523e0f(0x39f)](/\n+/g,'\x20'):String(_0x3be6d2[_0x523e0f(0x9bc)])[_0x523e0f(0x2e2)]();if(_0xf37220)_0x2aaa22[_0x523e0f(0xb2f)](_0x550cc1+'\x20['+_0x15de67+_0x523e0f(0x4f0)+_0x122e4b(_0x3be6d2)+']\x20'+_0xf37220);}}return _0x2aaa22;}function _0xf4cc81(_0x381076){const _0x18b11e=_0x4b3bbd;if(_0x381076[_0x18b11e(0xb12)]==='group')return _0x18b11e(0xa57)+(_0x381076[_0x18b11e(0x19d)]||'未命名')+'」';const _0x9686a4=_0x4830c9(_0x381076[_0x18b11e(0x8f1)][0x0]);return'与\x20'+(_0x9686a4?.['name']||_0x18b11e(0x753))+_0x18b11e(0x402);}function _0x2687e8(_0x2d81d5){const _0x1254b1=_0x4b3bbd;try{if(_0x1254b1(0x6d4)!=='ktYGl'){const _0x7b3027=_0x473445[_0x1254b1(0x7e9)](_0x1254b1(0x591));_0x7b3027['className']=_0x1254b1(0x94c),_0x7b3027[_0x1254b1(0x7d9)]['flexDirection']=_0x1254b1(0x318),_0x7b3027['style'][_0x1254b1(0x647)]='stretch',_0x7b3027['style']['padding']=_0x1254b1(0xa6f),_0x7b3027['style'][_0x1254b1(0xa5b)]='0';const _0x39413b=_0x325ed8[_0x3f809d[_0x1254b1(0x817)]]||_0x4cb686['默认'],_0x2c303f=_0x1254b1(0x4bd)+_0x39413b+_0x1254b1(0x947),_0x49e261=_0x1254b1(0x7dd)+_0x2c303f+'</span><div><div\x20class=\x22description\x22>'+_0x4bd398[_0x1254b1(0x42d)]+'</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>'+(_0x304315[_0x1254b1(0x817)]||'未分类')+_0x1254b1(0x91e)+(_0x524c08[_0x1254b1(0xcc8)]||0x0)[_0x1254b1(0xab2)](0x2)+_0x1254b1(0xd13);let _0x24d28c='';if(_0x355029['review']&&_0x4a4a39[_0x1254b1(0x109)][_0x1254b1(0xca6)]){const _0x52e2ef=_0x3ced9d(_0x6f37d5[_0x1254b1(0x109)][_0x1254b1(0xca6)]);_0x52e2ef&&(_0x24d28c='<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22'+_0x52e2ef[_0x1254b1(0x36b)]+_0x1254b1(0xccb)+_0x52e2ef[_0x1254b1(0x19d)]+_0x1254b1(0xabf)+_0x1a3725['review'][_0x1254b1(0xa0c)]+_0x1254b1(0x8d8));}_0x7b3027[_0x1254b1(0x280)]=_0x49e261+_0x24d28c,_0x3f565d[_0x1254b1(0x364)](_0x7b3027);}else{const _0xebe4d=localStorage[_0x1254b1(0x9a1)](_0x1254b1(0x392)+_0x2d81d5),_0x5dd454=JSON[_0x1254b1(0x97b)](_0xebe4d||'[]');return Array[_0x1254b1(0xc29)](_0x5dd454)?_0x5dd454:[];}}catch{return[];}}function _0xd9a204(_0x121ce8){const _0xc8f5d4=_0x4b3bbd,_0xe35ed9=Math[_0xc8f5d4(0xbc9)](0x1,Number(_0x35d0f9[_0xc8f5d4(0x2e8)]?.['perChatContextLines']??0x64)),_0x3609f9=_0x35d0f9['chats'][_0xc8f5d4(0x485)](_0x44132a=>_0x44132a[_0xc8f5d4(0x8f1)][_0xc8f5d4(0xb63)](_0x121ce8)),_0x48e0b4=_0x3609f9[_0xc8f5d4(0xbb5)](_0x328948=>{const _0x520c33=_0xc8f5d4;if(_0x520c33(0xab3)!=='AavQd'){const _0x3b3681=_0x2687e8(_0x328948['id']),_0x4c6010=_0x3b3681[_0x520c33(0x968)]>0x0?_0x3b3681[_0x3b3681[_0x520c33(0x968)]-0x1]:null;return{'chat':_0x328948,'history':_0x3b3681,'lastTimestamp':_0x4c6010?_0x4c6010[_0x520c33(0xaa4)]:0x0};}else _0x57a70d(![]),_0x3f4aad(_0x520c33(0x652)+_0x296f2a['message']);})[_0xc8f5d4(0x485)](_0xa01d8c=>_0xa01d8c[_0xc8f5d4(0xcd3)][_0xc8f5d4(0x968)]>0x0);_0x48e0b4[_0xc8f5d4(0xa99)]((_0x49623e,_0x4876fb)=>_0x4876fb['lastTimestamp']-_0x49623e[_0xc8f5d4(0xa22)]);const _0x279d64=[],_0x2f7d1b={};return _0x48e0b4['forEach']((_0xdb2653,_0x2882f2)=>{const _0x46737b=_0xc8f5d4;if(_0x46737b(0x74b)!==_0x46737b(0x726)){const _0xa4d6bc=_0x55624c(_0xdb2653[_0x46737b(0x152)],_0xdb2653[_0x46737b(0xcd3)],_0xe35ed9);if(_0xa4d6bc[_0x46737b(0x968)]===0x0)return;const _0x384a8c=_0x2882f2===0x0?_0x46737b(0x34e):'来源：';_0x279d64[_0x46737b(0xb2f)](_0x46737b(0x7d8)+_0x384a8c+_0xf4cc81(_0xdb2653[_0x46737b(0x152)])+'\x0a'+_0xa4d6bc[_0x46737b(0x102)]('\x0a')),_0x2f7d1b[_0xdb2653[_0x46737b(0x152)]['id']]=_0xa4d6bc[_0x46737b(0x968)];}else{_0x871fe0('至少要选择一个圈内成员！');return;}}),{'omniText':_0x279d64[_0xc8f5d4(0x102)]('\x0a\x0a'),'usedCounts':_0x2f7d1b};}function _0x4766dc(_0x1f3433){const _0x442aac=_0x4b3bbd;let _0x11f9d8=null;const _0x398e53=_0x35d0f9[_0x442aac(0xa6c)][_0x442aac(0x485)](_0x2636f8=>_0x2636f8['participantIds'][_0x442aac(0xb63)](_0x1f3433));for(const _0xa7918e of _0x398e53){if(_0x442aac(0x9be)===_0x442aac(0x258)){const _0x3381be=_0x1cd263['getElementById'](_0x442aac(0xfe));_0x3381be[_0x442aac(0x280)]='';if(_0x304f4a[_0x442aac(0x162)]['length']===0x0){_0x3381be[_0x442aac(0x280)]=_0x442aac(0xc82);return;}_0x4a256f[_0x442aac(0x162)]['forEach'](_0x162f67=>{const _0x107ea2=_0x442aac,_0x4cbb25=_0x26eb83[_0x107ea2(0x7e9)](_0x107ea2(0x591));_0x4cbb25[_0x107ea2(0x73e)]=_0x107ea2(0x715),_0x4cbb25[_0x107ea2(0x218)]['id']=_0x162f67['id'];const _0x2c06ae=_0x162f67['id']===_0x232773[_0x107ea2(0x742)]?'\x20(当前)':'';_0x4cbb25['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x162f67[_0x107ea2(0x36b)]||_0x478928)+_0x107ea2(0xd0a)+_0x162f67[_0x107ea2(0x19d)]+_0x2c06ae+_0x107ea2(0x6db)+_0x162f67[_0x107ea2(0x1ab)]['substring'](0x0,0x64)+_0x107ea2(0xb90),_0x4cbb25[_0x107ea2(0xafb)](_0x107ea2(0x9db),()=>_0x1b90ae(_0x162f67['id'])),_0x3381be[_0x107ea2(0x364)](_0x4cbb25);});}else{const _0x4efebd=_0x2687e8(_0xa7918e['id']);if(_0x4efebd&&_0x4efebd[_0x442aac(0x968)]>0x0){const _0x3d79db=_0x4efebd[_0x4efebd[_0x442aac(0x968)]-0x1];(!_0x11f9d8||_0x3d79db[_0x442aac(0xaa4)]>_0x11f9d8['timestamp'])&&(_0x11f9d8=_0x3d79db);}}}return _0x11f9d8;}function _0x152fd6(_0x24cfa7){const _0x487833=_0x4b3bbd;if(!_0x24cfa7||!_0x24cfa7['includes'](','))return _0x24cfa7;const _0x1ac815=_0x24cfa7['split'](',')[_0x487833(0xbb5)](_0x139b4e=>_0x139b4e['trim']());return _0x1ac815[Math[_0x487833(0x859)](Math[_0x487833(0xeb)]()*_0x1ac815['length'])];}function _0x3a7c5b(_0xc50ce9){return new Promise(_0x57a944=>{const _0x113823=_0x52a6;if('lLyXt'===_0x113823(0x7b3)){const _0x5d1599=document['getElementById'](_0x113823(0xbbb)),_0x16f436=document[_0x113823(0xb18)]('modal-text'),_0x19c0a6=document[_0x113823(0xb18)](_0x113823(0xbe4)),_0x639983=document[_0x113823(0xb18)](_0x113823(0xaf8)),_0x134623=document['getElementById']('modal-mask');_0x16f436[_0x113823(0x65b)]=_0xc50ce9,_0x5d1599['style']['display']='flex';const _0x14951d=_0xa20c1d=>{const _0x40edc3=_0x113823;if('ttArx'==='llYqI'){if(!_0x443af0||!_0x398cc3[_0x40edc3(0xb63)](','))return _0x5415e3;const _0x1954a7=_0x1dd431[_0x40edc3(0xb2d)](',')[_0x40edc3(0xbb5)](_0x47a60c=>_0x47a60c[_0x40edc3(0x2e2)]());return _0x1954a7[_0x497406[_0x40edc3(0x859)](_0x33178e['random']()*_0x1954a7[_0x40edc3(0x968)])];}else _0x5d1599[_0x40edc3(0x7d9)][_0x40edc3(0x31f)]=_0x40edc3(0x9ba),_0x19c0a6[_0x40edc3(0x8df)]=_0x639983[_0x40edc3(0x8df)]=_0x134623[_0x40edc3(0x8df)]=null,document[_0x40edc3(0x854)](_0x40edc3(0x1a3),_0x17d23e),_0x57a944(_0xa20c1d);},_0x17d23e=_0x532b5a=>{const _0x563f68=_0x113823;if(_0x563f68(0xacc)!==_0x563f68(0xc03)){if(_0x532b5a[_0x563f68(0xc53)]===_0x563f68(0x9e2))_0x14951d(![]);if(_0x532b5a[_0x563f68(0xc53)]==='Enter')_0x14951d(!![]);}else _0x33f1e7[_0x563f68(0x82a)]('chatHistory_'+_0x600290['activeChatId']);};_0x19c0a6['onclick']=()=>_0x14951d(!![]),_0x639983[_0x113823(0x8df)]=()=>_0x14951d(![]),_0x134623['onclick']=()=>_0x14951d(![]),document[_0x113823(0xafb)](_0x113823(0x1a3),_0x17d23e);}else _0x40f6d3++;});}function _0x28dfd2(_0x1caa5e){const _0x42474f=_0x4b3bbd,_0x36f484=document[_0x42474f(0xb18)](_0x42474f(0x16a));_0x36f484[_0x42474f(0x65b)]=_0x1caa5e,_0x36f484[_0x42474f(0x7d9)]['display']=_0x42474f(0xb91);if(_0x28dfd2['_t'])clearTimeout(_0x28dfd2['_t']);_0x28dfd2['_t']=setTimeout(()=>{const _0x31b11b=_0x42474f;_0x36f484[_0x31b11b(0x7d9)]['display']=_0x31b11b(0x9ba);},0x640);}function _0x2fd10f(){const _0x636926=_0x4b3bbd,_0x4fac8d=document[_0x636926(0xb18)]('lock-screen-overlay');if(!_0x4fac8d)return;let _0x5a7436=0x0,_0x23aae4=0x0;const _0x51f500=0x50;let _0x1b9acb=![];const _0x3c1c4b=_0x182f76=>{const _0x554baf=_0x636926;if(_0x554baf(0x79a)!==_0x554baf(0x79a)){const _0x39ce45=_0x4ae9e3[_0x554baf(0x9a1)](_0x554baf(0x752));_0x39ce45&&(_0x4833f1=_0x1d29e0['parse'](_0x39ce45));}else{_0x5a7436=_0x182f76[_0x554baf(0x2b5)]?_0x182f76[_0x554baf(0x2b5)][0x0][_0x554baf(0x3e6)]:_0x182f76[_0x554baf(0x3e6)],_0x23aae4=0x0,_0x4fac8d[_0x554baf(0x7d9)][_0x554baf(0x42b)]=_0x554baf(0x9ba),_0x1b9acb=!![];if(_0x182f76['type']===_0x554baf(0x6b5)){if(_0x554baf(0xb9b)!==_0x554baf(0xb9b)){const _0x38e18b=_0x3837f6['createElement']('div');_0x38e18b['className']=_0x554baf(0x944),_0x38e18b[_0x554baf(0x218)]['stickerName']=_0x29a279['name'];const _0x14191a=_0x269cb1[_0x554baf(0x7e9)](_0x554baf(0x6d6));_0x14191a[_0x554baf(0x9c9)]=_0x6ce0f8[_0x554baf(0x391)],_0x14191a['loading']=_0x554baf(0x3f8),_0x14191a[_0x554baf(0x248)]=_0x583a6c[_0x554baf(0x19d)],_0x14191a[_0x554baf(0x73e)]=_0x554baf(0xb68),_0x38e18b[_0x554baf(0x364)](_0x14191a),_0x42bc93[_0x554baf(0x364)](_0x38e18b),_0x38e18b[_0x554baf(0xafb)](_0x554baf(0x9db),()=>{const _0x72118=_0x554baf;if(_0x5214b1){_0x38e18b[_0x72118(0x79f)]['toggle'](_0x72118(0x30e));const _0x43e6e5=_0xdc905[_0x72118(0x3eb)]('.selected');_0x3566d4[_0x72118(0x79f)]['toggle'](_0x72118(0x530),!!_0x43e6e5);}else _0x228008(_0x3ad5f8);});}else document['addEventListener'](_0x554baf(0xa93),_0x395e37),document[_0x554baf(0xafb)]('mouseup',_0x4e7445);}}},_0x395e37=_0x173d83=>{const _0x218068=_0x636926;if(!_0x1b9acb)return;const _0x22845c=_0x173d83[_0x218068(0x2b5)]?_0x173d83[_0x218068(0x2b5)][0x0][_0x218068(0x3e6)]:_0x173d83[_0x218068(0x3e6)];_0x23aae4=_0x22845c-_0x5a7436;if(_0x23aae4<0x0){if('amvWl'===_0x218068(0x209))_0x553a5c(_0x9119d9['replayPressTimer']),_0x4268f7[_0x218068(0x854)](_0x218068(0xc4f),_0x58d8ef),_0x3c3f0e[_0x218068(0x854)](_0x218068(0xcbc),_0x51dc5b),_0x39d296[_0x218068(0x854)](_0x218068(0x9ff),_0x3e019f),_0x241a37['removeEventListener']('touchcancel',_0x247efa);else{const _0xb82f85=Math[_0x218068(0x378)](_0x23aae4),_0x3f4e5b=0.4,_0x2d2144=Math[_0x218068(0xcb0)](_0xb82f85,_0x3f4e5b)*0x14;_0x4fac8d[_0x218068(0x7d9)]['transform']=_0x218068(0x862)+_0x2d2144+'px)';}}},_0x4e7445=()=>{const _0x3a68bf=_0x636926;if(!_0x1b9acb)return;_0x1b9acb=![],_0x4fac8d[_0x3a68bf(0x7d9)][_0x3a68bf(0x42b)]=_0x3a68bf(0x3c2);if(_0x23aae4<-_0x51f500){if(_0x3a68bf(0xc1c)===_0x3a68bf(0x68a)){const _0x5bc547=_0x31c8f3[_0x3a68bf(0x218)][_0x3a68bf(0xcf5)],_0xb6b3a5=_0x18155c[_0x3a68bf(0x9c6)](_0x3a68bf(0x114)+_0x5bc547+'\x22]'),_0x3cb63c=_0x4aac45[_0x3a68bf(0x9c6)](_0x3a68bf(0x114)+_0x5bc547+_0x3a68bf(0xbca));_0x3cb63c[_0x3a68bf(0x968)]>0x0&&_0x3cb63c[_0x3a68bf(0x968)]<_0xb6b3a5['length']&&(_0x4062da[_0x3a68bf(0x646)]=!![]);}else _0x4fac8d[_0x3a68bf(0x79f)][_0x3a68bf(0x366)](_0x3a68bf(0x30f));}else _0x3a68bf(0x71a)!==_0x3a68bf(0x71a)?_0x3780bf[_0x3a68bf(0x280)]=_0x3a68bf(0x951)+_0x5f1169+_0x3a68bf(0x4df)+_0x2d22bc+'<div\x20class=\x22listen-together-info\x22><div\x20class=\x22title\x22>'+_0x43322f[_0x3a68bf(0x596)]+_0x3a68bf(0x30b)+_0x4aeb1d['artist']+_0x3a68bf(0x9a8)+_0x14feb3[_0x3a68bf(0x933)]+'\x22>一起听</button></div>':_0x4fac8d['style']['transform']=_0x3a68bf(0x16d);document[_0x3a68bf(0x854)]('mousemove',_0x395e37),document[_0x3a68bf(0x854)](_0x3a68bf(0xc4f),_0x4e7445);};_0x4fac8d[_0x636926(0xafb)](_0x636926(0x983),_0x3c1c4b,{'passive':!![]}),_0x4fac8d[_0x636926(0xafb)](_0x636926(0x2dd),_0x395e37,{'passive':!![]}),_0x4fac8d[_0x636926(0xafb)](_0x636926(0x9ff),_0x4e7445),_0x4fac8d[_0x636926(0xafb)](_0x636926(0x6b5),_0x3c1c4b);}function _0x1d6c45(){const _0x4819aa=_0x4b3bbd,_0x2ee584=document[_0x4819aa(0xb18)]('app-pages-container'),_0x1635db=document['getElementById']('app-pages-slider'),_0x517838=document[_0x4819aa(0x9c6)](_0x4819aa(0x3c7)),_0x8adfe1=document['getElementById'](_0x4819aa(0xa9b));let _0x4f161a=0x0;const _0x5a0a16=0x2;_0x1635db[_0x4819aa(0x7d9)][_0x4819aa(0x62d)]='200%',_0x8adfe1[_0x4819aa(0x7d9)][_0x4819aa(0x31f)]=_0x4819aa(0x9d4);function _0x2cdc55(_0x26d297){const _0x34b666=_0x4819aa;if(_0x34b666(0x332)!==_0x34b666(0x431)){if(_0x26d297<0x0||_0x26d297>=_0x5a0a16)return;_0x1635db['style'][_0x34b666(0x33b)]=_0x34b666(0x5ae)+_0x26d297*(0x64/_0x5a0a16)+'%)',_0x517838[_0x34b666(0x175)](_0x35b12e=>_0x35b12e['classList'][_0x34b666(0xb42)]('active')),_0x517838[_0x26d297]['classList'][_0x34b666(0x366)](_0x34b666(0x530)),_0x4f161a=_0x26d297;}else _0x3749df=_0x4ba343[_0x34b666(0x97b)](_0x1ee7ee);}_0x2cdc55(0x0),_0x517838[_0x4819aa(0x175)](_0x1b79f3=>{const _0x276148=_0x4819aa;if(_0x276148(0x265)===_0x276148(0xcaa)){const _0x516a54=_0x2ac8ad(_0x5dcd74['id']),_0x3968dd=_0x516a54[_0x276148(0x968)]>0x0?_0x516a54[_0x516a54[_0x276148(0x968)]-0x1]:null;return{'chat':_0x22627c,'history':_0x516a54,'lastTimestamp':_0x3968dd?_0x3968dd[_0x276148(0xaa4)]:0x0};}else _0x1b79f3[_0x276148(0xafb)](_0x276148(0x9db),()=>{const _0x56fdfa=_0x276148;if(_0x56fdfa(0x25d)==='syQJo'){const _0x4f8809=parseInt(_0x1b79f3['dataset']['page'],0xa);_0x2cdc55(_0x4f8809);}else{const _0x2cd7f0=_0x2344fe[_0x56fdfa(0x850)]['trim']();_0x2cd7f0&&(_0xe48c5(_0x2cd7f0),_0x2c5543[_0x56fdfa(0x850)]='',_0x3ca213(_0x2c4c90,0x64));}});});let _0x625d8f=0x0,_0x4d823e=0x0,_0x5463bf=0x0,_0x3a44ec=![],_0x4d296f='';_0x2ee584[_0x4819aa(0xafb)](_0x4819aa(0x983),_0x4cbf0a=>{const _0x347053=_0x4819aa;_0x625d8f=_0x4cbf0a[_0x347053(0x2b5)][0x0]['clientX'],_0x4d823e=_0x4cbf0a['touches'][0x0][_0x347053(0x3e6)],_0x3a44ec=!![],_0x4d296f='';},{'passive':!![]}),_0x2ee584[_0x4819aa(0xafb)]('touchmove',_0x33bb0a=>{const _0x227455=_0x4819aa;if(_0x227455(0xb83)===_0x227455(0x47b))_0x1c0562[_0x227455(0x4a1)]('切换聊天时发生异步错误:',_0x47b85e),_0x14eaf2(_0x227455(0x2a6)+_0x40ae8c['message']);else{if(!_0x3a44ec)return;if(_0x4d296f===''){if(_0x227455(0x9b1)===_0x227455(0x9b1)){const _0x4521ae=_0x33bb0a[_0x227455(0x2b5)][0x0][_0x227455(0xb82)]-_0x625d8f,_0x599ae8=_0x33bb0a[_0x227455(0x2b5)][0x0][_0x227455(0x3e6)]-_0x4d823e;if(Math[_0x227455(0x378)](_0x4521ae)>Math[_0x227455(0x378)](_0x599ae8)){if(_0x227455(0x92b)!==_0x227455(0x92b)){const _0x2eef40=_0x526522[_0x227455(0x7e9)]('li');_0x2eef40[_0x227455(0x65b)]=_0x214ed0['substring'](0x2),_0x2eef40[_0x227455(0x7d9)][_0x227455(0x51a)]=_0x227455(0x9d8),_0x5d84fd[_0x227455(0x1cf)][_0x227455(0x364)](_0x2eef40);}else _0x4d296f=_0x227455(0x8c6);}else{if(_0x227455(0x545)==='cFnce')_0x4d296f=_0x227455(0x220);else{const _0x139512=_0x376bb0[_0x227455(0xce3)][_0x227455(0x218)]['categoryId'],_0x1e581f=_0xb7eae1[_0x227455(0xce3)][_0x227455(0xbbd)];_0x4814e6[_0x227455(0x9c6)](_0x227455(0x114)+_0x139512+'\x22]')[_0x227455(0x175)](_0x59acd6=>{const _0x358539=_0x227455;_0x59acd6[_0x358539(0xbbd)]=_0x1e581f;}),_0x13ec69();}}}else{_0x118ed4['innerHTML']=_0x227455(0x590);return;}}_0x4d296f===_0x227455(0x8c6)&&_0x33bb0a['preventDefault']();}},{'passive':![]}),_0x2ee584[_0x4819aa(0xafb)](_0x4819aa(0x9ff),_0x8ac8bc=>{const _0x2206ea=_0x4819aa;if(!_0x3a44ec)return;_0x5463bf=_0x8ac8bc[_0x2206ea(0x574)][0x0]['clientX'],_0x4d296f===_0x2206ea(0x8c6)&&_0x453ccb(),_0x3a44ec=![];});function _0x453ccb(){const _0x3d5955=_0x4819aa;if(_0x3d5955(0xc73)!==_0x3d5955(0xc73)){if(_0x5c56b0['musicPlaylist'][_0x3d5955(0x968)]===0x0)return;_0x48597d[_0x3d5955(0x863)]=(_0x4d40e7[_0x3d5955(0x863)]-0x1+_0xec5d28[_0x3d5955(0x17b)][_0x3d5955(0x968)])%_0x5e4139[_0x3d5955(0x17b)][_0x3d5955(0x968)];const _0x3e07a1=_0x1a2270[_0x3d5955(0x17b)][_0x3da015[_0x3d5955(0x863)]]['id'];_0x222a25(_0x3e07a1,_0x40d868['musicPlaylist'][_0x3d5955(0xbb5)](_0xc5ce49=>_0xc5ce49['id']));}else{const _0x16560a=0x32;if(_0x5463bf<_0x625d8f-_0x16560a)_0x2cdc55(_0x4f161a+0x1);else _0x5463bf>_0x625d8f+_0x16560a&&_0x2cdc55(_0x4f161a-0x1);}}}function _0x12e8c8(){return new Promise(_0x4577a8=>{const _0x3f4d23=_0x52a6;if('RJGHO'!==_0x3f4d23(0x40d)){const _0x2d9d32=document[_0x3f4d23(0xb18)](_0x3f4d23(0x5b2)),_0x21a7dc=document[_0x3f4d23(0xb18)](_0x3f4d23(0x4de)),_0x28433c=document[_0x3f4d23(0xb18)](_0x3f4d23(0x89b)),_0xc59cfe=document[_0x3f4d23(0xb18)](_0x3f4d23(0x761)),_0xe1d767=document[_0x3f4d23(0xb18)](_0x3f4d23(0x4e7)),_0xe47739=document['getElementById'](_0x3f4d23(0x22f));_0x21a7dc['value']='',_0x28433c[_0x3f4d23(0x850)]='',_0x2d9d32['classList']['add'](_0x3f4d23(0xa36)),_0x21a7dc[_0x3f4d23(0x1d4)]();const _0x5da53c=_0x2696b7=>{const _0x107f5e=_0x3f4d23;_0x2d9d32['classList'][_0x107f5e(0xb42)](_0x107f5e(0xa36)),_0xc59cfe[_0x107f5e(0x8df)]=null,_0xe1d767[_0x107f5e(0x8df)]=null,_0xe47739[_0x107f5e(0x8df)]=null,document[_0x107f5e(0x854)](_0x107f5e(0x1a3),_0x1f39f4),_0x4577a8(_0x2696b7);},_0x1f5f8c=()=>{const _0x3b9b90=_0x3f4d23,_0x55b1ce=_0x21a7dc[_0x3b9b90(0x850)][_0x3b9b90(0x2e2)](),_0x4b642f=_0x28433c[_0x3b9b90(0x850)][_0x3b9b90(0x2e2)]();if(!_0x55b1ce||!_0x4b642f){_0x28dfd2(_0x3b9b90(0x5e8));return;}_0x5da53c({'songName':_0x55b1ce,'artist':_0x4b642f});},_0x1f39f4=_0x206c90=>{const _0x4ba389=_0x3f4d23;if(_0x4ba389(0xc6b)===_0x4ba389(0xc6b)){if(_0x206c90['key']==='Escape')_0x5da53c(null);_0x206c90[_0x4ba389(0xc53)]==='Enter'&&('qiTmn'==='qiTmn'?(_0x206c90[_0x4ba389(0xa05)](),_0x1f5f8c()):_0x26fd94+=_0x4ba389(0xc7b));}else _0x5cc3a4[_0x4ba389(0x89a)]=_0x1a664f;};_0xc59cfe[_0x3f4d23(0x8df)]=_0x1f5f8c,_0xe1d767['onclick']=()=>_0x5da53c(null),_0xe47739[_0x3f4d23(0x8df)]=()=>_0x5da53c(null),document[_0x3f4d23(0xafb)](_0x3f4d23(0x1a3),_0x1f39f4);}else _0x3bb898[_0x3f4d23(0x9bc)]=_0x511dfb,_0x49a775(),_0x42e3c7();});}function _0x52a6(_0x5716d8,_0x3eb2f2){const _0x2ac0a5=_0x2ac0();return _0x52a6=function(_0x52a60f,_0x40ff7a){_0x52a60f=_0x52a60f-0xdb;let _0x57d562=_0x2ac0a5[_0x52a60f];return _0x57d562;},_0x52a6(_0x5716d8,_0x3eb2f2);}function _0x3ac897(_0x305ac5){const _0x35ea0a=_0x4b3bbd;if(!_0x305ac5)return[];const _0x528ef0=_0x305ac5['trim']();if(_0x528ef0[_0x35ea0a(0x41d)](_0x35ea0a(0x3e3))&&_0x528ef0[_0x35ea0a(0x985)](_0x35ea0a(0x9b7))){if('HHujb'===_0x35ea0a(0x7cb))_0x1a1cb6[_0x35ea0a(0x8e4)][_0x6f6a3e]['splice'](_0x4e8488,0x1),_0x54160e(),_0x22612b(_0x1b33c3),_0x3085e7(_0x35ea0a(0x5bd));else return[_0x528ef0];}const _0x3fdd6f=/(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\]|\[html\][\s\S]*?\[\/html\])/g,_0x1fa305='|||CMD|||',_0x4aef7a=[],_0x514c6a=_0x305ac5['replace'](_0x3fdd6f,_0x59ffdb=>{return _0x4aef7a['push'](_0x59ffdb),_0x1fa305;}),_0x1c98d1=_0x514c6a['split'](_0x1fa305),_0x55e85c=[];let _0x471982=0x0;return _0x1c98d1[_0x35ea0a(0x175)]((_0x3e17f7,_0x2e146a)=>{const _0x4600e9=_0x35ea0a,_0x1092ff=_0x3e17f7[_0x4600e9(0x2e2)]();if(_0x1092ff){if(_0x4600e9(0x2f0)==='QQWDb')_0x55e85c[_0x4600e9(0xb2f)](..._0x36d6c6(_0x1092ff));else{const _0xfd1661=_0x303c03[_0x4600e9(0x6b9)][_0x1b9111-0x2],_0x54ba40=_0x12eb66[_0x4600e9(0x6b9)][_0x187b26-0x1];if(_0xfd1661[_0x4600e9(0x61c)]===![]&&_0x54ba40[_0x4600e9(0x61c)]===!![])_0x3337a1=_0x4600e9(0x37d)+_0x26fb46[_0x4600e9(0x19d)]+_0x4600e9(0x825);else _0xfd1661[_0x4600e9(0x61c)]===!![]&&_0x54ba40['isOffline']===![]&&(_0x4782e3=_0x4600e9(0x136)+_0x51dfdd[_0x4600e9(0x19d)]+'”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。');}}if(_0x471982<_0x4aef7a[_0x4600e9(0x968)]){if(_0x4600e9(0x802)!==_0x4600e9(0x72f))_0x55e85c[_0x4600e9(0xb2f)](_0x4aef7a[_0x471982][_0x4600e9(0x2e2)]()),_0x471982++;else{const _0x4375bf=_0x4290ec[_0x4600e9(0x900)](_0xbd6a91),_0x581a04=_0x4600e9(0x491),_0x145ce=_0x4600e9(0xae4)+_0x581a04+_0x4600e9(0xc93)+_0x4375bf+_0x4600e9(0x8ca);_0x4c14dc[_0x4600e9(0x280)]=_0x145ce,_0x3a4ea9[_0x4600e9(0xa12)][_0x4600e9(0x7d9)]['setProperty'](_0x4600e9(0x8b0),'\x27'+_0x581a04+'\x27'),_0x36495f['textContent']=_0x4600e9(0x52f);}}}),_0x55e85c;}function _0x331dae(_0x35c2fb,_0x13a782,_0x426946=''){const _0x4d0bb2=_0x4b3bbd,_0x532853=document[_0x4d0bb2(0x7e9)](_0x4d0bb2(0x591));_0x532853[_0x4d0bb2(0x73e)]='avatar-wrapper\x20'+_0x426946;const _0x27bbe8=document[_0x4d0bb2(0x7e9)](_0x4d0bb2(0x6d6));_0x27bbe8['src']=_0x35c2fb,_0x27bbe8[_0x4d0bb2(0x73e)]=_0x4d0bb2(0x36b);const _0x5abc42=document[_0x4d0bb2(0x7e9)](_0x4d0bb2(0x591));return _0x5abc42[_0x4d0bb2(0x73e)]=_0x4d0bb2(0x55b),_0x13a782&&(_0x5abc42[_0x4d0bb2(0x7d9)][_0x4d0bb2(0x2f8)]='url(\x27'+_0x13a782+'\x27)'),_0x532853['appendChild'](_0x27bbe8),_0x532853[_0x4d0bb2(0x364)](_0x5abc42),_0x532853;}function _0xeed254(_0x1ad52d){const _0x9e12e9=_0x4b3bbd;if(!_0x1ad52d)return[];let _0x47f27a=String(_0x1ad52d)[_0x9e12e9(0x2e2)]();const _0xf4e1d8=_0x47f27a[_0x9e12e9(0xac5)](/```(?:json)?([\s\S]*?)```/i);if(_0xf4e1d8)_0x47f27a=_0xf4e1d8[0x1][_0x9e12e9(0x2e2)]();try{const _0x4e796f=JSON['parse'](_0x47f27a);if(_0x4e796f&&Array[_0x9e12e9(0xc29)](_0x4e796f[_0x9e12e9(0xbba)])){if('GIKKM'===_0x9e12e9(0xce4))_0x34f009[_0x9e12e9(0x19d)]=_0x4755ca,_0x31e31b[_0x9e12e9(0x54f)]=_0x47bab5,_0x247ac8[_0x9e12e9(0x69d)]=_0x379c30;else return _0x4e796f[_0x9e12e9(0xbba)][_0x9e12e9(0xbb5)](_0x5510b1=>typeof _0x5510b1===_0x9e12e9(0xb1e)?_0x5510b1:_0x5510b1?.[_0x9e12e9(0x9bc)])[_0x9e12e9(0x485)](Boolean)['flatMap'](_0x36d6c6);}const _0x3487bc=[_0x9e12e9(0x98f),_0x9e12e9(0x3ab),_0x9e12e9(0x5a1),_0x9e12e9(0xa0c),_0x9e12e9(0x9bc),_0x9e12e9(0xa56),_0x9e12e9(0x53d)];if(_0x4e796f&&typeof _0x4e796f===_0x9e12e9(0x977)){const _0x5e7ad7=[];for(const _0x3a06b5 of Object[_0x9e12e9(0x500)](_0x4e796f)){if(_0x9e12e9(0xb89)===_0x9e12e9(0x2fc))_0x9a5181['classList']['add'](_0x9e12e9(0x77f)),_0x80fa3a[_0x9e12e9(0x79f)]['add'](_0x9e12e9(0xb4b)),_0x29ce8e['classList'][_0x9e12e9(0x366)](_0x9e12e9(0x46c)),_0x51cb82(()=>{const _0x23e44f=_0x9e12e9;_0x44ba55['classList']['remove'](_0x23e44f(0x46c),_0x23e44f(0xb4b)),_0x3c26ce['classList'][_0x23e44f(0xb42)](_0x23e44f(0x77f)),_0xc7c023[_0x23e44f(0x556)]=_0x16d592,_0x47d5a1(),_0xd523ce[_0x23e44f(0x905)]=![];},0x2bc);else{const _0xd82b77=_0x3a06b5[_0x9e12e9(0x443)]();if(_0x3487bc[_0x9e12e9(0x83f)](_0xf63ae0=>_0xd82b77[_0x9e12e9(0x41d)](_0xf63ae0))){if('moZOY'===_0x9e12e9(0x4dc))_0x592d6a[_0x9e12e9(0x570)](_0x9e12e9(0x752),_0x3628d5['stringify'](_0x4ab7c5)),_0x4426aa['log'](_0x9e12e9(0xaaa));else{const _0x5f061f=_0x4e796f[_0x3a06b5];if(typeof _0x5f061f===_0x9e12e9(0xb1e))_0x5e7ad7[_0x9e12e9(0xb2f)](_0x5f061f);if(Array['isArray'](_0x5f061f))_0x5f061f[_0x9e12e9(0x175)](_0x3366cf=>{const _0x4b4729=_0x9e12e9;if(typeof _0x3366cf===_0x4b4729(0xb1e))_0x5e7ad7[_0x4b4729(0xb2f)](_0x3366cf);});}}}}if(_0x5e7ad7[_0x9e12e9(0x968)])return _0x5e7ad7[_0x9e12e9(0x584)](_0x36d6c6)[_0x9e12e9(0x571)](0x0,0x9);}}catch{}if(/[{\[]/['test'](_0x47f27a)&&/":/[_0x9e12e9(0x759)](_0x47f27a)){const _0x49dea4=[],_0x443ea4=/"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi;let _0x2b99cc;while((_0x2b99cc=_0x443ea4[_0x9e12e9(0x9f5)](_0x47f27a))!==null){const _0x4056a8=_0x2b99cc[0x1][_0x9e12e9(0x39f)](/\\"/g,'\x22')[_0x9e12e9(0x39f)](/\\n/g,'\x0a')['trim']();if(_0x4056a8)_0x49dea4['push'](_0x4056a8);}if(_0x49dea4[_0x9e12e9(0x968)])return _0x49dea4[_0x9e12e9(0x584)](_0x36d6c6)[_0x9e12e9(0x571)](0x0,0x9);}return _0x36d6c6(_0x47f27a);}function _0x36d6c6(_0x128e5c){const _0x2f8373=_0x4b3bbd,_0x3762c8=String(_0x128e5c)['trim']();if(_0x3762c8[_0x2f8373(0x41d)](_0x2f8373(0x3e3))&&_0x3762c8[_0x2f8373(0x985)](_0x2f8373(0x9b7))){if(_0x2f8373(0x970)===_0x2f8373(0x970))return[_0x3762c8];else _0x105111[_0x2f8373(0x9c9)]=_0x527d21[_0x2f8373(0x900)](_0x39cd54);}const _0x58d1f3=_0x3762c8[_0x2f8373(0xb2d)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x2f8373(0xbb5)](_0x42137d=>_0x42137d[_0x2f8373(0x2e2)]())[_0x2f8373(0x485)](Boolean);if(_0x58d1f3[_0x2f8373(0x968)]>0x0)return _0x58d1f3[_0x2f8373(0x571)](0x0,0xc);return[_0x3762c8][_0x2f8373(0x485)](Boolean);}const _0x4c3f9a=new Promise((_0x35584d,_0x943890)=>{const _0x2c4182=_0x4b3bbd,_0x3eb696=indexedDB[_0x2c4182(0x71f)](_0x1fd3f1,0x3);_0x3eb696[_0x2c4182(0x892)]=()=>_0x943890('IndexedDB\x20failed\x20to\x20open'),_0x3eb696[_0x2c4182(0x9d2)]=()=>_0x35584d(_0x3eb696[_0x2c4182(0xd15)]),_0x3eb696[_0x2c4182(0x56a)]=_0x435bd7=>{const _0x2219f8=_0x2c4182,_0x3c1323=_0x435bd7[_0x2219f8(0xce3)][_0x2219f8(0xd15)];console[_0x2219f8(0x52e)](_0x2219f8(0x395)+_0x3c1323[_0x2219f8(0x52d)]+_0x2219f8(0x8fe));!_0x3c1323[_0x2219f8(0x36e)][_0x2219f8(0xbbc)](_0x383e71)&&(console[_0x2219f8(0x52e)]('Creating\x20object\x20store:\x20'+_0x383e71),_0x3c1323[_0x2219f8(0x964)](_0x383e71,{'keyPath':'id'}));!_0x3c1323[_0x2219f8(0x36e)][_0x2219f8(0xbbc)](_0x2219f8(0xb58))&&(console[_0x2219f8(0x52e)](_0x2219f8(0x9d1)),_0x3c1323['createObjectStore'](_0x2219f8(0xb58),{'keyPath':'id'}));if(!_0x3c1323[_0x2219f8(0x36e)][_0x2219f8(0xbbc)](_0x55cc29)){if(_0x2219f8(0x510)===_0x2219f8(0x1dc)){_0x1e0605(_0x2219f8(0x921));return;}else console['log'](_0x2219f8(0x250)+_0x55cc29),_0x3c1323['createObjectStore'](_0x55cc29,{'keyPath':'id'});}};});async function _0x5288fd(_0x108707){const _0x528bea=await _0x4c3f9a;return new Promise((_0x527c46,_0x26bebe)=>{const _0x359f0a=_0x52a6;if('OlEjI'===_0x359f0a(0x6a2)){const _0x495795=_0x528bea[_0x359f0a(0x832)](_0x383e71,_0x359f0a(0xa43)),_0x4149a1=_0x495795[_0x359f0a(0x566)](_0x383e71),_0x11a5dd=_0x4149a1['get'](_0x108707);_0x11a5dd['onsuccess']=()=>_0x527c46(_0x11a5dd[_0x359f0a(0xd15)]?_0x11a5dd[_0x359f0a(0xd15)]['blob']:null),_0x11a5dd['onerror']=()=>_0x26bebe(_0x11a5dd[_0x359f0a(0x4a1)]);}else _0x4397b9[_0x359f0a(0x52e)](_0x359f0a(0x76c)),_0x4b6aa3[_0x359f0a(0x39a)]=[],_0xf2a2ef[_0x359f0a(0x7fa)]=[],_0xb4a3e4[_0x359f0a(0x2e0)]=-0x1,_0x59105f[_0x359f0a(0x720)]=[],_0x532e1d['textContent']=_0x359f0a(0x3ce),_0x2cc036[_0x359f0a(0xb18)](_0x359f0a(0x92f))[_0x359f0a(0x7d9)][_0x359f0a(0x31f)]=_0x359f0a(0xb91),_0x419f27[_0x359f0a(0xb18)]('livestream-controls-container')[_0x359f0a(0x7d9)][_0x359f0a(0x31f)]=_0x359f0a(0x9ba);});}async function _0x48dc86(_0x28fdc5){const _0x231bda=await _0x4c3f9a;return new Promise((_0xd8c320,_0xb90e7c)=>{const _0x129d90=_0x52a6,_0x4fe716=_0x231bda['transaction'](_0x55cc29,'readonly'),_0x296a23=_0x4fe716['objectStore'](_0x55cc29),_0x5527ad=_0x296a23[_0x129d90(0x12c)](_0x28fdc5);_0x5527ad[_0x129d90(0x9d2)]=()=>_0xd8c320(_0x5527ad[_0x129d90(0xd15)]?_0x5527ad[_0x129d90(0xd15)]['data']:null),_0x5527ad['onerror']=()=>_0xb90e7c(_0x5527ad['error']);});}async function _0x4d0908(_0x2723bf,_0x1f541a){const _0x629ce4=await _0x4c3f9a;return new Promise((_0x44c313,_0x1c694c)=>{const _0xffb9b4=_0x52a6,_0x620f9f=_0x629ce4[_0xffb9b4(0x832)](_0x55cc29,'readwrite'),_0x11d2e6=_0x620f9f[_0xffb9b4(0x566)](_0x55cc29),_0x991796=_0x11d2e6[_0xffb9b4(0x31b)]({'id':_0x2723bf,'data':_0x1f541a});_0x991796['onsuccess']=()=>_0x44c313(),_0x991796[_0xffb9b4(0x892)]=()=>_0x1c694c(_0x991796['error']);});}async function _0x1a620c(_0x2c1fe2){const _0x1fdd6d=await _0x4c3f9a;return new Promise((_0x21fcd5,_0x565c0e)=>{const _0x4768ad=_0x52a6;if('NLdVW'===_0x4768ad(0xa46))_0x5c5df5(()=>{const _0x51db89=_0x4768ad;_0x5813c5[_0x51db89(0x7d9)][_0x51db89(0x6d2)]='1';});else{const _0x283e50=_0x1fdd6d['transaction'](_0x55cc29,_0x4768ad(0x43c)),_0xff84fc=_0x283e50['objectStore'](_0x55cc29),_0x557199=_0xff84fc[_0x4768ad(0xc3e)](_0x2c1fe2);_0x557199['onsuccess']=()=>_0x21fcd5(),_0x557199[_0x4768ad(0x892)]=()=>_0x565c0e(_0x557199[_0x4768ad(0x4a1)]);}});}async function _0xad4538(_0x1a1d27,_0x4622bd){const _0x27a204=await _0x4c3f9a;return new Promise((_0x3286b2,_0xd76fe8)=>{const _0x520ab7=_0x52a6,_0xf2548c=_0x27a204[_0x520ab7(0x832)](_0x383e71,_0x520ab7(0x43c)),_0x2e8721=_0xf2548c[_0x520ab7(0x566)](_0x383e71),_0x2c9e78=_0x2e8721[_0x520ab7(0x31b)]({'id':_0x1a1d27,'blob':_0x4622bd});_0x2c9e78['onsuccess']=()=>_0x3286b2(_0x2c9e78['result']),_0x2c9e78[_0x520ab7(0x892)]=()=>_0xd76fe8(_0x2c9e78[_0x520ab7(0x4a1)]);});}async function _0x5dd6ed(_0x2e21f8){const _0xa13d58=await _0x4c3f9a;return new Promise((_0xdca55f,_0xd7684a)=>{const _0x3c413c=_0x52a6,_0x582e66=_0xa13d58[_0x3c413c(0x832)](_0x383e71,'readwrite'),_0x5e8a18=_0x582e66['objectStore'](_0x383e71),_0xe9daa5=_0x5e8a18['delete'](_0x2e21f8);_0xe9daa5[_0x3c413c(0x9d2)]=()=>_0xdca55f(),_0xe9daa5['onerror']=()=>_0xd7684a(_0xe9daa5[_0x3c413c(0x4a1)]);});}function _0x1b74b4(_0x1da493){const _0xb82011=_0x4b3bbd;return fetch(_0x1da493)[_0xb82011(0xa34)](_0x3d66c2=>_0x3d66c2[_0xb82011(0x885)]());}


  </script>
  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>




  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>

  <div id="edit-replay-modal" class="choice-modal">
    <div id="edit-replay-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="flex-shrink: 0;">
        <button id="cancel-edit-replay-btn" class="header-button">取消</button>
        <span class="header-title">编辑回放档案</span>
        <button id="save-edit-replay-btn" class="header-button">保存</button>
      </div>
      <div class="content" style="padding: 0; flex-grow: 1;">
        <textarea id="edit-replay-textarea"
          style="width: 100%; height: 100%; border: none; outline: none; resize: none; font-family: 'Courier New', monospace; font-size: 0.9rem; padding: 10px; box-sizing: border-box;"></textarea>
      </div>
    </div>
  </div>
</body>

</html>